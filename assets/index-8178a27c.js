(function(){const j=document.createElement("link").relList;if(j&&j.supports&&j.supports("modulepreload"))return;for(const ne of document.querySelectorAll('link[rel="modulepreload"]'))te(ne);new MutationObserver(ne=>{for(const re of ne)if(re.type==="childList")for(const oe of re.addedNodes)oe.tagName==="LINK"&&oe.rel==="modulepreload"&&te(oe)}).observe(document,{childList:!0,subtree:!0});function X(ne){const re={};return ne.integrity&&(re.integrity=ne.integrity),ne.referrerpolicy&&(re.referrerPolicy=ne.referrerpolicy),ne.crossorigin==="use-credentials"?re.credentials="include":ne.crossorigin==="anonymous"?re.credentials="omit":re.credentials="same-origin",re}function te(ne){if(ne.ep)return;ne.ep=!0;const re=X(ne);fetch(ne.href,re)}})();const scriptRel="modulepreload",assetsURL=function(q){return"/blocksuite/"+q},seen={},__vitePreload=function(j,X,te){if(!X||X.length===0)return j();const ne=document.getElementsByTagName("link");return Promise.all(X.map(re=>{if(re=assetsURL(re),re in seen)return;seen[re]=!0;const oe=re.endsWith(".css"),le=oe?'[rel="stylesheet"]':"";if(!!te)for(let ke=ne.length-1;ke>=0;ke--){const ye=ne[ke];if(ye.href===re&&(!oe||ye.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${re}"]${le}`))return;const we=document.createElement("link");if(we.rel=oe?"stylesheet":scriptRel,oe||(we.as="script",we.crossOrigin=""),we.href=re,document.head.appendChild(we),oe)return new Promise((ke,ye)=>{we.addEventListener("load",ke),we.addEventListener("error",()=>ye(new Error(`Unable to preload CSS for ${re}`)))})})).then(()=>j())};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$9=window,e$c=t$9.ShadowRoot&&(t$9.ShadyCSS===void 0||t$9.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$9=Symbol(),n$a=new WeakMap;let o$a=class{constructor(j,X,te){if(this._$cssResult$=!0,te!==s$9)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=j,this.t=X}get styleSheet(){let j=this.o;const X=this.t;if(e$c&&j===void 0){const te=X!==void 0&&X.length===1;te&&(j=n$a.get(X)),j===void 0&&((this.o=j=new CSSStyleSheet).replaceSync(this.cssText),te&&n$a.set(X,j))}return j}toString(){return this.cssText}};const r$6=q=>new o$a(typeof q=="string"?q:q+"",void 0,s$9),i$c=(q,...j)=>{const X=q.length===1?q[0]:j.reduce((te,ne,re)=>te+(oe=>{if(oe._$cssResult$===!0)return oe.cssText;if(typeof oe=="number")return oe;throw Error("Value passed to 'css' function must be a 'css' function result: "+oe+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(ne)+q[re+1],q[0]);return new o$a(X,q,s$9)},S$2=(q,j)=>{e$c?q.adoptedStyleSheets=j.map(X=>X instanceof CSSStyleSheet?X:X.styleSheet):j.forEach(X=>{const te=document.createElement("style"),ne=t$9.litNonce;ne!==void 0&&te.setAttribute("nonce",ne),te.textContent=X.cssText,q.appendChild(te)})},c$5=e$c?q=>q:q=>q instanceof CSSStyleSheet?(j=>{let X="";for(const te of j.cssRules)X+=te.cssText;return r$6(X)})(q):q;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$8;const e$b=window,r$5=e$b.trustedTypes,h$4=r$5?r$5.emptyScript:"",o$9=e$b.reactiveElementPolyfillSupport,n$9={toAttribute(q,j){switch(j){case Boolean:q=q?h$4:null;break;case Object:case Array:q=q==null?q:JSON.stringify(q)}return q},fromAttribute(q,j){let X=q;switch(j){case Boolean:X=q!==null;break;case Number:X=q===null?null:Number(q);break;case Object:case Array:try{X=JSON.parse(q)}catch{X=null}}return X}},a$8=(q,j)=>j!==q&&(j==j||q==q),l$a={attribute:!0,type:String,converter:n$9,reflect:!1,hasChanged:a$8};let d$4=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(j){var X;this.finalize(),((X=this.h)!==null&&X!==void 0?X:this.h=[]).push(j)}static get observedAttributes(){this.finalize();const j=[];return this.elementProperties.forEach((X,te)=>{const ne=this._$Ep(te,X);ne!==void 0&&(this._$Ev.set(ne,te),j.push(ne))}),j}static createProperty(j,X=l$a){if(X.state&&(X.attribute=!1),this.finalize(),this.elementProperties.set(j,X),!X.noAccessor&&!this.prototype.hasOwnProperty(j)){const te=typeof j=="symbol"?Symbol():"__"+j,ne=this.getPropertyDescriptor(j,te,X);ne!==void 0&&Object.defineProperty(this.prototype,j,ne)}}static getPropertyDescriptor(j,X,te){return{get(){return this[X]},set(ne){const re=this[j];this[X]=ne,this.requestUpdate(j,re,te)},configurable:!0,enumerable:!0}}static getPropertyOptions(j){return this.elementProperties.get(j)||l$a}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const j=Object.getPrototypeOf(this);if(j.finalize(),j.h!==void 0&&(this.h=[...j.h]),this.elementProperties=new Map(j.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const X=this.properties,te=[...Object.getOwnPropertyNames(X),...Object.getOwnPropertySymbols(X)];for(const ne of te)this.createProperty(ne,X[ne])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(j){const X=[];if(Array.isArray(j)){const te=new Set(j.flat(1/0).reverse());for(const ne of te)X.unshift(c$5(ne))}else j!==void 0&&X.push(c$5(j));return X}static _$Ep(j,X){const te=X.attribute;return te===!1?void 0:typeof te=="string"?te:typeof j=="string"?j.toLowerCase():void 0}u(){var j;this._$E_=new Promise(X=>this.enableUpdating=X),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(j=this.constructor.h)===null||j===void 0||j.forEach(X=>X(this))}addController(j){var X,te;((X=this._$ES)!==null&&X!==void 0?X:this._$ES=[]).push(j),this.renderRoot!==void 0&&this.isConnected&&((te=j.hostConnected)===null||te===void 0||te.call(j))}removeController(j){var X;(X=this._$ES)===null||X===void 0||X.splice(this._$ES.indexOf(j)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((j,X)=>{this.hasOwnProperty(X)&&(this._$Ei.set(X,this[X]),delete this[X])})}createRenderRoot(){var j;const X=(j=this.shadowRoot)!==null&&j!==void 0?j:this.attachShadow(this.constructor.shadowRootOptions);return S$2(X,this.constructor.elementStyles),X}connectedCallback(){var j;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(j=this._$ES)===null||j===void 0||j.forEach(X=>{var te;return(te=X.hostConnected)===null||te===void 0?void 0:te.call(X)})}enableUpdating(j){}disconnectedCallback(){var j;(j=this._$ES)===null||j===void 0||j.forEach(X=>{var te;return(te=X.hostDisconnected)===null||te===void 0?void 0:te.call(X)})}attributeChangedCallback(j,X,te){this._$AK(j,te)}_$EO(j,X,te=l$a){var ne;const re=this.constructor._$Ep(j,te);if(re!==void 0&&te.reflect===!0){const oe=(((ne=te.converter)===null||ne===void 0?void 0:ne.toAttribute)!==void 0?te.converter:n$9).toAttribute(X,te.type);this._$El=j,oe==null?this.removeAttribute(re):this.setAttribute(re,oe),this._$El=null}}_$AK(j,X){var te;const ne=this.constructor,re=ne._$Ev.get(j);if(re!==void 0&&this._$El!==re){const oe=ne.getPropertyOptions(re),le=typeof oe.converter=="function"?{fromAttribute:oe.converter}:((te=oe.converter)===null||te===void 0?void 0:te.fromAttribute)!==void 0?oe.converter:n$9;this._$El=re,this[re]=le.fromAttribute(X,oe.type),this._$El=null}}requestUpdate(j,X,te){let ne=!0;j!==void 0&&(((te=te||this.constructor.getPropertyOptions(j)).hasChanged||a$8)(this[j],X)?(this._$AL.has(j)||this._$AL.set(j,X),te.reflect===!0&&this._$El!==j&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(j,te))):ne=!1),!this.isUpdatePending&&ne&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(X){Promise.reject(X)}const j=this.scheduleUpdate();return j!=null&&await j,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var j;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((ne,re)=>this[re]=ne),this._$Ei=void 0);let X=!1;const te=this._$AL;try{X=this.shouldUpdate(te),X?(this.willUpdate(te),(j=this._$ES)===null||j===void 0||j.forEach(ne=>{var re;return(re=ne.hostUpdate)===null||re===void 0?void 0:re.call(ne)}),this.update(te)):this._$Ek()}catch(ne){throw X=!1,this._$Ek(),ne}X&&this._$AE(te)}willUpdate(j){}_$AE(j){var X;(X=this._$ES)===null||X===void 0||X.forEach(te=>{var ne;return(ne=te.hostUpdated)===null||ne===void 0?void 0:ne.call(te)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(j)),this.updated(j)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(j){return!0}update(j){this._$EC!==void 0&&(this._$EC.forEach((X,te)=>this._$EO(te,this[te],X)),this._$EC=void 0),this._$Ek()}updated(j){}firstUpdated(j){}};d$4.finalized=!0,d$4.elementProperties=new Map,d$4.elementStyles=[],d$4.shadowRootOptions={mode:"open"},o$9==null||o$9({ReactiveElement:d$4}),((s$8=e$b.reactiveElementVersions)!==null&&s$8!==void 0?s$8:e$b.reactiveElementVersions=[]).push("1.5.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$8;const i$b=window,s$7=i$b.trustedTypes,e$a=s$7?s$7.createPolicy("lit-html",{createHTML:q=>q}):void 0,o$8=`lit$${(Math.random()+"").slice(9)}$`,n$8="?"+o$8,l$9=`<${n$8}>`,h$3=document,r$4=(q="")=>h$3.createComment(q),d$3=q=>q===null||typeof q!="object"&&typeof q!="function",u$4=Array.isArray,c$4=q=>u$4(q)||typeof(q==null?void 0:q[Symbol.iterator])=="function",v$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a$7=/-->/g,f$4=/>/g,_$1=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m$4=/'/g,p$3=/"/g,$$2=/^(?:script|style|textarea|title)$/i,g$2=q=>(j,...X)=>({_$litType$:q,strings:j,values:X}),y$1=g$2(1),w=g$2(2),x$2=Symbol.for("lit-noChange"),b$3=Symbol.for("lit-nothing"),T$2=new WeakMap,A$3=h$3.createTreeWalker(h$3,129,null,!1),E$1=(q,j)=>{const X=q.length-1,te=[];let ne,re=j===2?"<svg>":"",oe=v$1;for(let fe=0;fe<X;fe++){const we=q[fe];let ke,ye,ve=-1,be=0;for(;be<we.length&&(oe.lastIndex=be,ye=oe.exec(we),ye!==null);)be=oe.lastIndex,oe===v$1?ye[1]==="!--"?oe=a$7:ye[1]!==void 0?oe=f$4:ye[2]!==void 0?($$2.test(ye[2])&&(ne=RegExp("</"+ye[2],"g")),oe=_$1):ye[3]!==void 0&&(oe=_$1):oe===_$1?ye[0]===">"?(oe=ne??v$1,ve=-1):ye[1]===void 0?ve=-2:(ve=oe.lastIndex-ye[2].length,ke=ye[1],oe=ye[3]===void 0?_$1:ye[3]==='"'?p$3:m$4):oe===p$3||oe===m$4?oe=_$1:oe===a$7||oe===f$4?oe=v$1:(oe=_$1,ne=void 0);const Ce=oe===_$1&&q[fe+1].startsWith("/>")?" ":"";re+=oe===v$1?we+l$9:ve>=0?(te.push(ke),we.slice(0,ve)+"$lit$"+we.slice(ve)+o$8+Ce):we+o$8+(ve===-2?(te.push(void 0),fe):Ce)}const le=re+(q[X]||"<?>")+(j===2?"</svg>":"");if(!Array.isArray(q)||!q.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e$a!==void 0?e$a.createHTML(le):le,te]};let C$3=class{constructor({strings:j,_$litType$:X},te){let ne;this.parts=[];let re=0,oe=0;const le=j.length-1,fe=this.parts,[we,ke]=E$1(j,X);if(this.el=C$3.createElement(we,te),A$3.currentNode=this.el.content,X===2){const ye=this.el.content,ve=ye.firstChild;ve.remove(),ye.append(...ve.childNodes)}for(;(ne=A$3.nextNode())!==null&&fe.length<le;){if(ne.nodeType===1){if(ne.hasAttributes()){const ye=[];for(const ve of ne.getAttributeNames())if(ve.endsWith("$lit$")||ve.startsWith(o$8)){const be=ke[oe++];if(ye.push(ve),be!==void 0){const Ce=ne.getAttribute(be.toLowerCase()+"$lit$").split(o$8),Ee=/([.?@])?(.*)/.exec(be);fe.push({type:1,index:re,name:Ee[2],strings:Ce,ctor:Ee[1]==="."?M$1:Ee[1]==="?"?k$3:Ee[1]==="@"?H$2:S$1})}else fe.push({type:6,index:re})}for(const ve of ye)ne.removeAttribute(ve)}if($$2.test(ne.tagName)){const ye=ne.textContent.split(o$8),ve=ye.length-1;if(ve>0){ne.textContent=s$7?s$7.emptyScript:"";for(let be=0;be<ve;be++)ne.append(ye[be],r$4()),A$3.nextNode(),fe.push({type:2,index:++re});ne.append(ye[ve],r$4())}}}else if(ne.nodeType===8)if(ne.data===n$8)fe.push({type:2,index:re});else{let ye=-1;for(;(ye=ne.data.indexOf(o$8,ye+1))!==-1;)fe.push({type:7,index:re}),ye+=o$8.length-1}re++}}static createElement(j,X){const te=h$3.createElement("template");return te.innerHTML=j,te}};function P$1(q,j,X=q,te){var ne,re,oe,le;if(j===x$2)return j;let fe=te!==void 0?(ne=X._$Co)===null||ne===void 0?void 0:ne[te]:X._$Cl;const we=d$3(j)?void 0:j._$litDirective$;return(fe==null?void 0:fe.constructor)!==we&&((re=fe==null?void 0:fe._$AO)===null||re===void 0||re.call(fe,!1),we===void 0?fe=void 0:(fe=new we(q),fe._$AT(q,X,te)),te!==void 0?((oe=(le=X)._$Co)!==null&&oe!==void 0?oe:le._$Co=[])[te]=fe:X._$Cl=fe),fe!==void 0&&(j=P$1(q,fe._$AS(q,j.values),fe,te)),j}let V$2=class{constructor(j,X){this.u=[],this._$AN=void 0,this._$AD=j,this._$AM=X}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(j){var X;const{el:{content:te},parts:ne}=this._$AD,re=((X=j==null?void 0:j.creationScope)!==null&&X!==void 0?X:h$3).importNode(te,!0);A$3.currentNode=re;let oe=A$3.nextNode(),le=0,fe=0,we=ne[0];for(;we!==void 0;){if(le===we.index){let ke;we.type===2?ke=new N$1(oe,oe.nextSibling,this,j):we.type===1?ke=new we.ctor(oe,we.name,we.strings,this,j):we.type===6&&(ke=new I$1(oe,this,j)),this.u.push(ke),we=ne[++fe]}le!==(we==null?void 0:we.index)&&(oe=A$3.nextNode(),le++)}return re}p(j){let X=0;for(const te of this.u)te!==void 0&&(te.strings!==void 0?(te._$AI(j,te,X),X+=te.strings.length-2):te._$AI(j[X])),X++}},N$1=class{constructor(j,X,te,ne){var re;this.type=2,this._$AH=b$3,this._$AN=void 0,this._$AA=j,this._$AB=X,this._$AM=te,this.options=ne,this._$Cm=(re=ne==null?void 0:ne.isConnected)===null||re===void 0||re}get _$AU(){var j,X;return(X=(j=this._$AM)===null||j===void 0?void 0:j._$AU)!==null&&X!==void 0?X:this._$Cm}get parentNode(){let j=this._$AA.parentNode;const X=this._$AM;return X!==void 0&&j.nodeType===11&&(j=X.parentNode),j}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(j,X=this){j=P$1(this,j,X),d$3(j)?j===b$3||j==null||j===""?(this._$AH!==b$3&&this._$AR(),this._$AH=b$3):j!==this._$AH&&j!==x$2&&this.g(j):j._$litType$!==void 0?this.$(j):j.nodeType!==void 0?this.T(j):c$4(j)?this.k(j):this.g(j)}O(j,X=this._$AB){return this._$AA.parentNode.insertBefore(j,X)}T(j){this._$AH!==j&&(this._$AR(),this._$AH=this.O(j))}g(j){this._$AH!==b$3&&d$3(this._$AH)?this._$AA.nextSibling.data=j:this.T(h$3.createTextNode(j)),this._$AH=j}$(j){var X;const{values:te,_$litType$:ne}=j,re=typeof ne=="number"?this._$AC(j):(ne.el===void 0&&(ne.el=C$3.createElement(ne.h,this.options)),ne);if(((X=this._$AH)===null||X===void 0?void 0:X._$AD)===re)this._$AH.p(te);else{const oe=new V$2(re,this),le=oe.v(this.options);oe.p(te),this.T(le),this._$AH=oe}}_$AC(j){let X=T$2.get(j.strings);return X===void 0&&T$2.set(j.strings,X=new C$3(j)),X}k(j){u$4(this._$AH)||(this._$AH=[],this._$AR());const X=this._$AH;let te,ne=0;for(const re of j)ne===X.length?X.push(te=new N$1(this.O(r$4()),this.O(r$4()),this,this.options)):te=X[ne],te._$AI(re),ne++;ne<X.length&&(this._$AR(te&&te._$AB.nextSibling,ne),X.length=ne)}_$AR(j=this._$AA.nextSibling,X){var te;for((te=this._$AP)===null||te===void 0||te.call(this,!1,!0,X);j&&j!==this._$AB;){const ne=j.nextSibling;j.remove(),j=ne}}setConnected(j){var X;this._$AM===void 0&&(this._$Cm=j,(X=this._$AP)===null||X===void 0||X.call(this,j))}},S$1=class{constructor(j,X,te,ne,re){this.type=1,this._$AH=b$3,this._$AN=void 0,this.element=j,this.name=X,this._$AM=ne,this.options=re,te.length>2||te[0]!==""||te[1]!==""?(this._$AH=Array(te.length-1).fill(new String),this.strings=te):this._$AH=b$3}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(j,X=this,te,ne){const re=this.strings;let oe=!1;if(re===void 0)j=P$1(this,j,X,0),oe=!d$3(j)||j!==this._$AH&&j!==x$2,oe&&(this._$AH=j);else{const le=j;let fe,we;for(j=re[0],fe=0;fe<re.length-1;fe++)we=P$1(this,le[te+fe],X,fe),we===x$2&&(we=this._$AH[fe]),oe||(oe=!d$3(we)||we!==this._$AH[fe]),we===b$3?j=b$3:j!==b$3&&(j+=(we??"")+re[fe+1]),this._$AH[fe]=we}oe&&!ne&&this.j(j)}j(j){j===b$3?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,j??"")}},M$1=class extends S$1{constructor(){super(...arguments),this.type=3}j(j){this.element[this.name]=j===b$3?void 0:j}};const R$3=s$7?s$7.emptyScript:"";let k$3=class extends S$1{constructor(){super(...arguments),this.type=4}j(j){j&&j!==b$3?this.element.setAttribute(this.name,R$3):this.element.removeAttribute(this.name)}},H$2=class extends S$1{constructor(j,X,te,ne,re){super(j,X,te,ne,re),this.type=5}_$AI(j,X=this){var te;if((j=(te=P$1(this,j,X,0))!==null&&te!==void 0?te:b$3)===x$2)return;const ne=this._$AH,re=j===b$3&&ne!==b$3||j.capture!==ne.capture||j.once!==ne.once||j.passive!==ne.passive,oe=j!==b$3&&(ne===b$3||re);re&&this.element.removeEventListener(this.name,this,ne),oe&&this.element.addEventListener(this.name,this,j),this._$AH=j}handleEvent(j){var X,te;typeof this._$AH=="function"?this._$AH.call((te=(X=this.options)===null||X===void 0?void 0:X.host)!==null&&te!==void 0?te:this.element,j):this._$AH.handleEvent(j)}},I$1=class{constructor(j,X,te){this.element=j,this.type=6,this._$AN=void 0,this._$AM=X,this.options=te}get _$AU(){return this._$AM._$AU}_$AI(j){P$1(this,j)}};const L$2={P:"$lit$",A:o$8,M:n$8,C:1,L:E$1,R:V$2,D:c$4,V:P$1,I:N$1,H:S$1,N:k$3,U:H$2,B:M$1,F:I$1},z$1=i$b.litHtmlPolyfillSupport;z$1==null||z$1(C$3,N$1),((t$8=i$b.litHtmlVersions)!==null&&t$8!==void 0?t$8:i$b.litHtmlVersions=[]).push("2.5.0");const Z$1=(q,j,X)=>{var te,ne;const re=(te=X==null?void 0:X.renderBefore)!==null&&te!==void 0?te:j;let oe=re._$litPart$;if(oe===void 0){const le=(ne=X==null?void 0:X.renderBefore)!==null&&ne!==void 0?ne:null;re._$litPart$=oe=new N$1(j.insertBefore(r$4(),le),le,void 0,X??{})}return oe._$AI(q),oe};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l$8,o$7;let s$6=class extends d$4{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var j,X;const te=super.createRenderRoot();return(j=(X=this.renderOptions).renderBefore)!==null&&j!==void 0||(X.renderBefore=te.firstChild),te}update(j){const X=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(j),this._$Do=Z$1(X,this.renderRoot,this.renderOptions)}connectedCallback(){var j;super.connectedCallback(),(j=this._$Do)===null||j===void 0||j.setConnected(!0)}disconnectedCallback(){var j;super.disconnectedCallback(),(j=this._$Do)===null||j===void 0||j.setConnected(!1)}render(){return x$2}};s$6.finalized=!0,s$6._$litElement$=!0,(l$8=globalThis.litElementHydrateSupport)===null||l$8===void 0||l$8.call(globalThis,{LitElement:s$6});const n$7=globalThis.litElementPolyfillSupport;n$7==null||n$7({LitElement:s$6});((o$7=globalThis.litElementVersions)!==null&&o$7!==void 0?o$7:globalThis.litElementVersions=[]).push("3.2.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e$9=q=>j=>typeof j=="function"?((X,te)=>(customElements.define(X,te),te))(q,j):((X,te)=>{const{kind:ne,elements:re}=te;return{kind:ne,elements:re,finisher(oe){customElements.define(X,oe)}}})(q,j);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$a=(q,j)=>j.kind==="method"&&j.descriptor&&!("value"in j.descriptor)?{...j,finisher(X){X.createProperty(j.key,q)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:j.key,initializer(){typeof j.initializer=="function"&&(this[j.key]=j.initializer.call(this))},finisher(X){X.createProperty(j.key,q)}};function e$8(q){return(j,X)=>X!==void 0?((te,ne,re)=>{ne.constructor.createProperty(re,te)})(q,j,X):i$a(q,j)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function t$7(q){return e$8({...q,state:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o$6=({finisher:q,descriptor:j})=>(X,te)=>{var ne;if(te===void 0){const re=(ne=X.originalKey)!==null&&ne!==void 0?ne:X.key,oe=j!=null?{kind:"method",placement:"prototype",key:re,descriptor:j(X.key)}:{...X,key:re};return q!=null&&(oe.finisher=function(le){q(le,re)}),oe}{const re=X.constructor;j!==void 0&&Object.defineProperty(X,te,j(te)),q==null||q(re,te)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function i$9(q,j){return o$6({descriptor:X=>{const te={get(){var ne,re;return(re=(ne=this.renderRoot)===null||ne===void 0?void 0:ne.querySelector(q))!==null&&re!==void 0?re:null},enumerable:!0,configurable:!0};if(j){const ne=typeof X=="symbol"?Symbol():"__"+X;te.get=function(){var re,oe;return this[ne]===void 0&&(this[ne]=(oe=(re=this.renderRoot)===null||re===void 0?void 0:re.querySelector(q))!==null&&oe!==void 0?oe:null),this[ne]}}return te}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n$6;((n$6=window.HTMLSlotElement)===null||n$6===void 0?void 0:n$6.prototype.assignedElements)!=null;const fromCharCode=String.fromCharCode,toLowerCase=q=>q.toLowerCase(),trimLeftRegex=/^\s*/g,trimLeft=q=>q.replace(trimLeftRegex,""),fromCamelCaseRegex=/([A-Z])/g,fromCamelCase=(q,j)=>trimLeft(q.replace(fromCamelCaseRegex,X=>`${j}${toLowerCase(X)}`)),_encodeUtf8Polyfill=q=>{const j=unescape(encodeURIComponent(q)),X=j.length,te=new Uint8Array(X);for(let ne=0;ne<X;ne++)te[ne]=j.codePointAt(ne);return te},utf8TextEncoder=typeof TextEncoder<"u"?new TextEncoder:null,_encodeUtf8Native=q=>utf8TextEncoder.encode(q),encodeUtf8=utf8TextEncoder?_encodeUtf8Native:_encodeUtf8Polyfill;let utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});utf8TextDecoder&&utf8TextDecoder.decode(new Uint8Array).length===1&&(utf8TextDecoder=null);const create$5=()=>new Map,copy=q=>{const j=create$5();return q.forEach((X,te)=>{j.set(te,X)}),j},setIfUndefined=(q,j,X)=>{let te=q.get(j);return te===void 0&&q.set(j,te=X()),te},map=(q,j)=>{const X=[];for(const[te,ne]of q)X.push(j(ne,te));return X},any=(q,j)=>{for(const[X,te]of q)if(j(te,X))return!0;return!1},undefinedToNull=q=>q===void 0?null:q;class VarStoragePolyfill{constructor(){this.map=new Map}setItem(j,X){this.map.set(j,X)}getItem(j){return this.map.get(j)}}let _localStorage=new VarStoragePolyfill,usePolyfill=!0;try{typeof localStorage<"u"&&(_localStorage=localStorage,usePolyfill=!1)}catch{}const varStorage=_localStorage,onChange=q=>usePolyfill||addEventListener("storage",q),last=q=>q[q.length-1],appendTo=(q,j)=>{for(let X=0;X<j.length;X++)q.push(j[X])},from=Array.from,isArray=Array.isArray,keys$1=Object.keys,length$1=q=>keys$1(q).length,every=(q,j)=>{for(const X in q)if(!j(q[X],X))return!1;return!0},hasProperty=(q,j)=>Object.prototype.hasOwnProperty.call(q,j),equalFlat=(q,j)=>q===j||length$1(q)===length$1(j)&&every(q,(X,te)=>(X!==void 0||hasProperty(j,te))&&j[te]===X),callAll=(q,j,X=0)=>{try{for(;X<q.length;X++)q[X](...j)}finally{X<q.length&&callAll(q,j,X+1)}},nop=()=>{},equalityStrict=(q,j)=>q===j,equalityDeep=(q,j)=>{if(q==null||j==null)return equalityStrict(q,j);if(q.constructor!==j.constructor)return!1;if(q===j)return!0;switch(q.constructor){case ArrayBuffer:q=new Uint8Array(q),j=new Uint8Array(j);case Uint8Array:{if(q.byteLength!==j.byteLength)return!1;for(let X=0;X<q.length;X++)if(q[X]!==j[X])return!1;break}case Set:{if(q.size!==j.size)return!1;for(const X of q)if(!j.has(X))return!1;break}case Map:{if(q.size!==j.size)return!1;for(const X of q.keys())if(!j.has(X)||!equalityDeep(q.get(X),j.get(X)))return!1;break}case Object:if(length$1(q)!==length$1(j))return!1;for(const X in q)if(!hasProperty(q,X)||!equalityDeep(q[X],j[X]))return!1;break;case Array:if(q.length!==j.length)return!1;for(let X=0;X<q.length;X++)if(!equalityDeep(q[X],j[X]))return!1;break;default:return!1}return!0},isOneOf=(q,j)=>j.includes(q),isNode=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),isBrowser=typeof window<"u"&&!isNode;let params$1;const computeParams=()=>{if(params$1===void 0)if(isNode){params$1=create$5();const q=process.argv;let j=null;for(let X=0;X<q.length;X++){const te=q[X];te[0]==="-"?(j!==null&&params$1.set(j,""),j=te):j!==null&&(params$1.set(j,te),j=null)}j!==null&&params$1.set(j,"")}else typeof location=="object"?(params$1=create$5(),(location.search||"?").slice(1).split("&").forEach(q=>{if(q.length!==0){const[j,X]=q.split("=");params$1.set(`--${fromCamelCase(j,"-")}`,X),params$1.set(`-${fromCamelCase(j,"-")}`,X)}})):params$1=create$5();return params$1},hasParam=q=>computeParams().has(q),getVariable=q=>undefinedToNull(isNode?process.env[q.toUpperCase()]:varStorage.getItem(q)),hasConf=q=>hasParam("--"+q)||getVariable(q)!==null;hasConf("production");const forceColor=isNode&&isOneOf({}.FORCE_COLOR,["true","1","2"]),supportsColor=!hasParam("no-colors")&&(!isNode||process.stdout.isTTY||forceColor)&&(!isNode||hasParam("color")||forceColor||getVariable("COLORTERM")!==null||(getVariable("TERM")||"").includes("color")),BIT1=1,BIT2=2,BIT3=4,BIT4=8,BIT6=32,BIT7=64,BIT8=128,BITS5=31,BITS6=63,BITS7=127,BITS31=2147483647,floor=Math.floor,abs=Math.abs,log10=Math.log10,min=(q,j)=>q<j?q:j,max=(q,j)=>q>j?q:j,isNegativeZero=q=>q!==0?q<0:1/q<0,MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,isInteger=Number.isInteger||(q=>typeof q=="number"&&isFinite(q)&&floor(q)===q),create$4=q=>new Error(q),methodUnimplemented=()=>{throw create$4("Method unimplemented")},unexpectedCase=()=>{throw create$4("Unexpected case")},errorUnexpectedEndOfArray=create$4("Unexpected end of array"),errorIntegerOutOfRange=create$4("Integer out of Range");class Decoder{constructor(j){this.arr=j,this.pos=0}}const createDecoder=q=>new Decoder(q),hasContent=q=>q.pos!==q.arr.length,readUint8Array=(q,j)=>{const X=createUint8ArrayViewFromArrayBuffer(q.arr.buffer,q.pos+q.arr.byteOffset,j);return q.pos+=j,X},readVarUint8Array=q=>readUint8Array(q,readVarUint(q)),readUint8=q=>q.arr[q.pos++],readVarUint=q=>{let j=0,X=1;const te=q.arr.length;for(;q.pos<te;){const ne=q.arr[q.pos++];if(j=j+(ne&BITS7)*X,X*=128,ne<BIT8)return j;if(j>MAX_SAFE_INTEGER)throw errorIntegerOutOfRange}throw errorUnexpectedEndOfArray},readVarInt=q=>{let j=q.arr[q.pos++],X=j&BITS6,te=64;const ne=(j&BIT7)>0?-1:1;if(!(j&BIT8))return ne*X;const re=q.arr.length;for(;q.pos<re;){if(j=q.arr[q.pos++],X=X+(j&BITS7)*te,te*=128,j<BIT8)return ne*X;if(X>MAX_SAFE_INTEGER)throw errorIntegerOutOfRange}throw errorUnexpectedEndOfArray},_readVarStringPolyfill=q=>{let j=readVarUint(q);if(j===0)return"";{let X=String.fromCodePoint(readUint8(q));if(--j<100)for(;j--;)X+=String.fromCodePoint(readUint8(q));else for(;j>0;){const te=j<1e4?j:1e4,ne=q.arr.subarray(q.pos,q.pos+te);q.pos+=te,X+=String.fromCodePoint.apply(null,ne),j-=te}return decodeURIComponent(escape(X))}},_readVarStringNative=q=>utf8TextDecoder.decode(readVarUint8Array(q)),readVarString=utf8TextDecoder?_readVarStringNative:_readVarStringPolyfill,readFromDataView=(q,j)=>{const X=new DataView(q.arr.buffer,q.arr.byteOffset+q.pos,j);return q.pos+=j,X},readFloat32=q=>readFromDataView(q,4).getFloat32(0,!1),readFloat64=q=>readFromDataView(q,8).getFloat64(0,!1),readBigInt64=q=>readFromDataView(q,8).getBigInt64(0,!1),readAnyLookupTable=[q=>{},q=>null,readVarInt,readFloat32,readFloat64,readBigInt64,q=>!1,q=>!0,readVarString,q=>{const j=readVarUint(q),X={};for(let te=0;te<j;te++){const ne=readVarString(q);X[ne]=readAny(q)}return X},q=>{const j=readVarUint(q),X=[];for(let te=0;te<j;te++)X.push(readAny(q));return X},readVarUint8Array],readAny=q=>readAnyLookupTable[127-readUint8(q)](q);class RleDecoder extends Decoder{constructor(j,X){super(j),this.reader=X,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),hasContent(this)?this.count=readVarUint(this)+1:this.count=-1),this.count--,this.s}}class UintOptRleDecoder extends Decoder{constructor(j){super(j),this.s=0,this.count=0}read(){if(this.count===0){this.s=readVarInt(this);const j=isNegativeZero(this.s);this.count=1,j&&(this.s=-this.s,this.count=readVarUint(this)+2)}return this.count--,this.s}}class IntDiffOptRleDecoder extends Decoder{constructor(j){super(j),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const j=readVarInt(this),X=j&1;this.diff=floor(j/2),this.count=1,X&&(this.count=readVarUint(this)+2)}return this.s+=this.diff,this.count--,this.s}}class StringDecoder{constructor(j){this.decoder=new UintOptRleDecoder(j),this.str=readVarString(this.decoder),this.spos=0}read(){const j=this.spos+this.decoder.read(),X=this.str.slice(this.spos,j);return this.spos=j,X}}const createUint8ArrayFromLen=q=>new Uint8Array(q),createUint8ArrayViewFromArrayBuffer=(q,j,X)=>new Uint8Array(q,j,X),createUint8ArrayFromArrayBuffer=q=>new Uint8Array(q),toBase64Browser=q=>{let j="";for(let X=0;X<q.byteLength;X++)j+=fromCharCode(q[X]);return btoa(j)},toBase64Node=q=>Buffer.from(q.buffer,q.byteOffset,q.byteLength).toString("base64"),fromBase64Browser=q=>{const j=atob(q),X=createUint8ArrayFromLen(j.length);for(let te=0;te<j.length;te++)X[te]=j.charCodeAt(te);return X},fromBase64Node=q=>{const j=Buffer.from(q,"base64");return new Uint8Array(j.buffer,j.byteOffset,j.byteLength)},toBase64=isBrowser?toBase64Browser:toBase64Node,fromBase64=isBrowser?fromBase64Browser:fromBase64Node,copyUint8Array=q=>{const j=createUint8ArrayFromLen(q.byteLength);return j.set(q),j};class Encoder{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const createEncoder=()=>new Encoder,length=q=>{let j=q.cpos;for(let X=0;X<q.bufs.length;X++)j+=q.bufs[X].length;return j},toUint8Array=q=>{const j=new Uint8Array(length(q));let X=0;for(let te=0;te<q.bufs.length;te++){const ne=q.bufs[te];j.set(ne,X),X+=ne.length}return j.set(createUint8ArrayViewFromArrayBuffer(q.cbuf.buffer,0,q.cpos),X),j},verifyLen=(q,j)=>{const X=q.cbuf.length;X-q.cpos<j&&(q.bufs.push(createUint8ArrayViewFromArrayBuffer(q.cbuf.buffer,0,q.cpos)),q.cbuf=new Uint8Array(max(X,j)*2),q.cpos=0)},write=(q,j)=>{const X=q.cbuf.length;q.cpos===X&&(q.bufs.push(q.cbuf),q.cbuf=new Uint8Array(X*2),q.cpos=0),q.cbuf[q.cpos++]=j},writeUint8=write,writeVarUint=(q,j)=>{for(;j>BITS7;)write(q,BIT8|BITS7&j),j=floor(j/128);write(q,BITS7&j)},writeVarInt=(q,j)=>{const X=isNegativeZero(j);for(X&&(j=-j),write(q,(j>BITS6?BIT8:0)|(X?BIT7:0)|BITS6&j),j=floor(j/64);j>0;)write(q,(j>BITS7?BIT8:0)|BITS7&j),j=floor(j/128)},_strBuffer=new Uint8Array(3e4),_maxStrBSize=_strBuffer.length/3,_writeVarStringNative=(q,j)=>{if(j.length<_maxStrBSize){const X=utf8TextEncoder.encodeInto(j,_strBuffer).written||0;writeVarUint(q,X);for(let te=0;te<X;te++)write(q,_strBuffer[te])}else writeVarUint8Array(q,encodeUtf8(j))},_writeVarStringPolyfill=(q,j)=>{const X=unescape(encodeURIComponent(j)),te=X.length;writeVarUint(q,te);for(let ne=0;ne<te;ne++)write(q,X.codePointAt(ne))},writeVarString=utf8TextEncoder&&utf8TextEncoder.encodeInto?_writeVarStringNative:_writeVarStringPolyfill,writeBinaryEncoder=(q,j)=>writeUint8Array(q,toUint8Array(j)),writeUint8Array=(q,j)=>{const X=q.cbuf.length,te=q.cpos,ne=min(X-te,j.length),re=j.length-ne;q.cbuf.set(j.subarray(0,ne),te),q.cpos+=ne,re>0&&(q.bufs.push(q.cbuf),q.cbuf=new Uint8Array(max(X*2,re)),q.cbuf.set(j.subarray(ne)),q.cpos=re)},writeVarUint8Array=(q,j)=>{writeVarUint(q,j.byteLength),writeUint8Array(q,j)},writeOnDataView=(q,j)=>{verifyLen(q,j);const X=new DataView(q.cbuf.buffer,q.cpos,j);return q.cpos+=j,X},writeFloat32=(q,j)=>writeOnDataView(q,4).setFloat32(0,j,!1),writeFloat64=(q,j)=>writeOnDataView(q,8).setFloat64(0,j,!1),writeBigInt64=(q,j)=>writeOnDataView(q,8).setBigInt64(0,j,!1),floatTestBed=new DataView(new ArrayBuffer(4)),isFloat32=q=>(floatTestBed.setFloat32(0,q),floatTestBed.getFloat32(0)===q),writeAny=(q,j)=>{switch(typeof j){case"string":write(q,119),writeVarString(q,j);break;case"number":isInteger(j)&&abs(j)<=BITS31?(write(q,125),writeVarInt(q,j)):isFloat32(j)?(write(q,124),writeFloat32(q,j)):(write(q,123),writeFloat64(q,j));break;case"bigint":write(q,122),writeBigInt64(q,j);break;case"object":if(j===null)write(q,126);else if(j instanceof Array){write(q,117),writeVarUint(q,j.length);for(let X=0;X<j.length;X++)writeAny(q,j[X])}else if(j instanceof Uint8Array)write(q,116),writeVarUint8Array(q,j);else{write(q,118);const X=Object.keys(j);writeVarUint(q,X.length);for(let te=0;te<X.length;te++){const ne=X[te];writeVarString(q,ne),writeAny(q,j[ne])}}break;case"boolean":write(q,j?120:121);break;default:write(q,127)}};class RleEncoder extends Encoder{constructor(j){super(),this.w=j,this.s=null,this.count=0}write(j){this.s===j?this.count++:(this.count>0&&writeVarUint(this,this.count-1),this.count=1,this.w(this,j),this.s=j)}}const flushUintOptRleEncoder=q=>{q.count>0&&(writeVarInt(q.encoder,q.count===1?q.s:-q.s),q.count>1&&writeVarUint(q.encoder,q.count-2))};class UintOptRleEncoder{constructor(){this.encoder=new Encoder,this.s=0,this.count=0}write(j){this.s===j?this.count++:(flushUintOptRleEncoder(this),this.count=1,this.s=j)}toUint8Array(){return flushUintOptRleEncoder(this),toUint8Array(this.encoder)}}const flushIntDiffOptRleEncoder=q=>{if(q.count>0){const j=q.diff*2+(q.count===1?0:1);writeVarInt(q.encoder,j),q.count>1&&writeVarUint(q.encoder,q.count-2)}};class IntDiffOptRleEncoder{constructor(){this.encoder=new Encoder,this.s=0,this.count=0,this.diff=0}write(j){this.diff===j-this.s?(this.s=j,this.count++):(flushIntDiffOptRleEncoder(this),this.count=1,this.diff=j-this.s,this.s=j)}toUint8Array(){return flushIntDiffOptRleEncoder(this),toUint8Array(this.encoder)}}class StringEncoder{constructor(){this.sarr=[],this.s="",this.lensE=new UintOptRleEncoder}write(j){this.s+=j,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(j.length)}toUint8Array(){const j=new Encoder;return this.sarr.push(this.s),this.s="",writeVarString(j,this.sarr.join("")),writeUint8Array(j,this.lensE.toUint8Array()),toUint8Array(j)}}const getUnixTime=Date.now,create$3=()=>new Set;class Observable{constructor(){this._observers=create$5()}on(j,X){setIfUndefined(this._observers,j,create$3).add(X)}once(j,X){const te=(...ne)=>{this.off(j,te),X(...ne)};this.on(j,te)}off(j,X){const te=this._observers.get(j);te!==void 0&&(te.delete(X),te.size===0&&this._observers.delete(j))}emit(j,X){return from((this._observers.get(j)||create$5()).values()).forEach(te=>te(...X))}destroy(){this._observers=create$5()}}const isoCrypto=typeof crypto>"u"?null:crypto,cryptoRandomBuffer=isoCrypto!==null?q=>{const j=new ArrayBuffer(q),X=new Uint8Array(j);return isoCrypto.getRandomValues(X),j}:q=>{const j=new ArrayBuffer(q),X=new Uint8Array(j);for(let te=0;te<q;te++)X[te]=Math.ceil(Math.random()*4294967295>>>0);return j},rand=Math.random,uint32=()=>new Uint32Array(cryptoRandomBuffer(4))[0],uuidv4Template=[1e7]+-1e3+-4e3+-8e3+-1e11,uuidv4$1=()=>uuidv4Template.replace(/[018]/g,q=>(q^uint32()&15>>q/4).toString(16)),create$2=q=>new Promise(q),reject=q=>Promise.reject(q),resolve=q=>Promise.resolve(q),create$1=Symbol;class Pair{constructor(j,X){this.left=j,this.right=X}}const create=(q,j)=>new Pair(q,j),doc=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const mapToStyleString=q=>map(q,(j,X)=>`${X}:${j};`).join("");doc.ELEMENT_NODE;doc.TEXT_NODE;doc.CDATA_SECTION_NODE;doc.COMMENT_NODE;doc.DOCUMENT_NODE;doc.DOCUMENT_TYPE_NODE;doc.DOCUMENT_FRAGMENT_NODE;const BOLD=create$1(),UNBOLD=create$1(),BLUE=create$1(),GREY=create$1(),GREEN=create$1(),RED=create$1(),PURPLE=create$1(),ORANGE=create$1(),UNCOLOR=create$1(),_browserStyleMap={[BOLD]:create("font-weight","bold"),[UNBOLD]:create("font-weight","normal"),[BLUE]:create("color","blue"),[GREEN]:create("color","green"),[GREY]:create("color","grey"),[RED]:create("color","red"),[PURPLE]:create("color","purple"),[ORANGE]:create("color","orange"),[UNCOLOR]:create("color","black")},_nodeStyleMap={[BOLD]:"\x1B[1m",[UNBOLD]:"\x1B[2m",[BLUE]:"\x1B[34m",[GREEN]:"\x1B[32m",[GREY]:"\x1B[37m",[RED]:"\x1B[31m",[PURPLE]:"\x1B[35m",[ORANGE]:"\x1B[38;5;208m",[UNCOLOR]:"\x1B[0m"},computeBrowserLoggingArgs=q=>{const j=[],X=[],te=create$5();let ne=[],re=0;for(;re<q.length;re++){const oe=q[re],le=_browserStyleMap[oe];if(le!==void 0)te.set(le.left,le.right);else if(oe.constructor===String||oe.constructor===Number){const fe=mapToStyleString(te);re>0||fe.length>0?(j.push("%c"+oe),X.push(fe)):j.push(oe)}else break}for(re>0&&(ne=X,ne.unshift(j.join("")));re<q.length;re++){const oe=q[re];oe instanceof Symbol||ne.push(oe)}return ne},computeNoColorLoggingArgs=q=>{const j=[],X=[];let te=0;for(;te<q.length;te++){const ne=q[te];if(_nodeStyleMap[ne]===void 0)if(ne.constructor===String||ne.constructor===Number)j.push(ne);else break}for(te>0&&X.push(j.join(""));te<q.length;te++){const ne=q[te];ne instanceof Symbol||(ne.constructor===Object?X.push(JSON.stringify(ne)):X.push(ne))}return X},computeNodeLoggingArgs=q=>{const j=[],X=[];let te=0;for(;te<q.length;te++){const ne=q[te],re=_nodeStyleMap[ne];if(re!==void 0)j.push(re);else if(ne.constructor===String||ne.constructor===Number)j.push(ne);else break}for(te>0&&(j.push("\x1B[0m"),X.push(j.join("")));te<q.length;te++){const ne=q[te];ne instanceof Symbol||X.push(ne)}return X},computeLoggingArgs=supportsColor?isNode?computeNodeLoggingArgs:computeBrowserLoggingArgs:computeNoColorLoggingArgs,print=(...q)=>{console.log(...computeLoggingArgs(q)),vconsoles.forEach(j=>j.print(q))},vconsoles=new Set,loggingColors=[GREEN,PURPLE,ORANGE,BLUE];let nextColor=0,lastLoggingTime=getUnixTime();const createModuleLogger=q=>{const j=loggingColors[nextColor],X=getVariable("log"),te=X!==null&&(X==="*"||X==="true"||new RegExp(X,"gi").test(q));return nextColor=(nextColor+1)%loggingColors.length,q+=": ",te?(...ne)=>{const re=getUnixTime(),oe=re-lastLoggingTime;lastLoggingTime=re,print(j,q,UNCOLOR,...ne.map(le=>typeof le=="string"||typeof le=="symbol"?le:JSON.stringify(le)),j," +"+oe+"ms")}:nop},createIterator=q=>({[Symbol.iterator](){return this},next:q}),iteratorFilter=(q,j)=>createIterator(()=>{let X;do X=q.next();while(!X.done&&!j(X.value));return X}),iteratorMap=(q,j)=>createIterator(()=>{const{done:X,value:te}=q.next();return{done:X,value:X?void 0:j(te)}});class AbstractConnector extends Observable{constructor(j,X){super(),this.doc=j,this.awareness=X}}class DeleteItem{constructor(j,X){this.clock=j,this.len=X}}class DeleteSet{constructor(){this.clients=new Map}}const iterateDeletedStructs=(q,j,X)=>j.clients.forEach((te,ne)=>{const re=q.doc.store.clients.get(ne);for(let oe=0;oe<te.length;oe++){const le=te[oe];iterateStructs(q,re,le.clock,le.len,X)}}),findIndexDS=(q,j)=>{let X=0,te=q.length-1;for(;X<=te;){const ne=floor((X+te)/2),re=q[ne],oe=re.clock;if(oe<=j){if(j<oe+re.len)return ne;X=ne+1}else te=ne-1}return null},isDeleted=(q,j)=>{const X=q.clients.get(j.client);return X!==void 0&&findIndexDS(X,j.clock)!==null},sortAndMergeDeleteSet=q=>{q.clients.forEach(j=>{j.sort((ne,re)=>ne.clock-re.clock);let X,te;for(X=1,te=1;X<j.length;X++){const ne=j[te-1],re=j[X];ne.clock+ne.len>=re.clock?ne.len=max(ne.len,re.clock+re.len-ne.clock):(te<X&&(j[te]=re),te++)}j.length=te})},mergeDeleteSets=q=>{const j=new DeleteSet;for(let X=0;X<q.length;X++)q[X].clients.forEach((te,ne)=>{if(!j.clients.has(ne)){const re=te.slice();for(let oe=X+1;oe<q.length;oe++)appendTo(re,q[oe].clients.get(ne)||[]);j.clients.set(ne,re)}});return sortAndMergeDeleteSet(j),j},addToDeleteSet=(q,j,X,te)=>{setIfUndefined(q.clients,j,()=>[]).push(new DeleteItem(X,te))},createDeleteSet=()=>new DeleteSet,createDeleteSetFromStructStore=q=>{const j=createDeleteSet();return q.clients.forEach((X,te)=>{const ne=[];for(let re=0;re<X.length;re++){const oe=X[re];if(oe.deleted){const le=oe.id.clock;let fe=oe.length;if(re+1<X.length)for(let we=X[re+1];re+1<X.length&&we.deleted;we=X[++re+1])fe+=we.length;ne.push(new DeleteItem(le,fe))}}ne.length>0&&j.clients.set(te,ne)}),j},writeDeleteSet=(q,j)=>{writeVarUint(q.restEncoder,j.clients.size),j.clients.forEach((X,te)=>{q.resetDsCurVal(),writeVarUint(q.restEncoder,te);const ne=X.length;writeVarUint(q.restEncoder,ne);for(let re=0;re<ne;re++){const oe=X[re];q.writeDsClock(oe.clock),q.writeDsLen(oe.len)}})},readDeleteSet=q=>{const j=new DeleteSet,X=readVarUint(q.restDecoder);for(let te=0;te<X;te++){q.resetDsCurVal();const ne=readVarUint(q.restDecoder),re=readVarUint(q.restDecoder);if(re>0){const oe=setIfUndefined(j.clients,ne,()=>[]);for(let le=0;le<re;le++)oe.push(new DeleteItem(q.readDsClock(),q.readDsLen()))}}return j},readAndApplyDeleteSet=(q,j,X)=>{const te=new DeleteSet,ne=readVarUint(q.restDecoder);for(let re=0;re<ne;re++){q.resetDsCurVal();const oe=readVarUint(q.restDecoder),le=readVarUint(q.restDecoder),fe=X.clients.get(oe)||[],we=getState(X,oe);for(let ke=0;ke<le;ke++){const ye=q.readDsClock(),ve=ye+q.readDsLen();if(ye<we){we<ve&&addToDeleteSet(te,oe,we,ve-we);let be=findIndexSS(fe,ye),Ce=fe[be];for(!Ce.deleted&&Ce.id.clock<ye&&(fe.splice(be+1,0,splitItem(j,Ce,ye-Ce.id.clock)),be++);be<fe.length&&(Ce=fe[be++],Ce.id.clock<ve);)Ce.deleted||(ve<Ce.id.clock+Ce.length&&fe.splice(be,0,splitItem(j,Ce,ve-Ce.id.clock)),Ce.delete(j))}else addToDeleteSet(te,oe,ye,ve-ye)}}if(te.clients.size>0){const re=new UpdateEncoderV2;return writeVarUint(re.restEncoder,0),writeDeleteSet(re,te),re.toUint8Array()}return null},generateNewClientId=uint32;class Doc extends Observable{constructor({guid:j=uuidv4$1(),collectionid:X=null,gc:te=!0,gcFilter:ne=()=>!0,meta:re=null,autoLoad:oe=!1,shouldLoad:le=!0}={}){super(),this.gc=te,this.gcFilter=ne,this.clientID=generateNewClientId(),this.guid=j,this.collectionid=X,this.share=new Map,this.store=new StructStore,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=le,this.autoLoad=oe,this.meta=re,this.isLoaded=!1,this.whenLoaded=create$2(fe=>{this.on("load",()=>{this.isLoaded=!0,fe(this)})})}load(){const j=this._item;j!==null&&!this.shouldLoad&&transact$1(j.parent.doc,X=>{X.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(j=>j.guid))}transact(j,X=null){transact$1(this,j,X)}get(j,X=AbstractType){const te=setIfUndefined(this.share,j,()=>{const re=new X;return re._integrate(this,null),re}),ne=te.constructor;if(X!==AbstractType&&ne!==X)if(ne===AbstractType){const re=new X;re._map=te._map,te._map.forEach(oe=>{for(;oe!==null;oe=oe.left)oe.parent=re}),re._start=te._start;for(let oe=re._start;oe!==null;oe=oe.right)oe.parent=re;return re._length=te._length,this.share.set(j,re),re._integrate(this,null),re}else throw new Error(`Type with the name ${j} has already been defined with a different constructor`);return te}getArray(j=""){return this.get(j,YArray)}getText(j=""){return this.get(j,YText)}getMap(j=""){return this.get(j,YMap)}getXmlFragment(j=""){return this.get(j,YXmlFragment)}toJSON(){const j={};return this.share.forEach((X,te)=>{j[te]=X.toJSON()}),j}destroy(){from(this.subdocs).forEach(X=>X.destroy());const j=this._item;if(j!==null){this._item=null;const X=j.content;X.doc=new Doc({guid:this.guid,...X.opts,shouldLoad:!1}),X.doc._item=j,transact$1(j.parent.doc,te=>{const ne=X.doc;j.deleted||te.subdocsAdded.add(ne),te.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(j,X){super.on(j,X)}off(j,X){super.off(j,X)}}class DSDecoderV1{constructor(j){this.restDecoder=j}resetDsCurVal(){}readDsClock(){return readVarUint(this.restDecoder)}readDsLen(){return readVarUint(this.restDecoder)}}class UpdateDecoderV1 extends DSDecoderV1{readLeftID(){return createID(readVarUint(this.restDecoder),readVarUint(this.restDecoder))}readRightID(){return createID(readVarUint(this.restDecoder),readVarUint(this.restDecoder))}readClient(){return readVarUint(this.restDecoder)}readInfo(){return readUint8(this.restDecoder)}readString(){return readVarString(this.restDecoder)}readParentInfo(){return readVarUint(this.restDecoder)===1}readTypeRef(){return readVarUint(this.restDecoder)}readLen(){return readVarUint(this.restDecoder)}readAny(){return readAny(this.restDecoder)}readBuf(){return copyUint8Array(readVarUint8Array(this.restDecoder))}readJSON(){return JSON.parse(readVarString(this.restDecoder))}readKey(){return readVarString(this.restDecoder)}}class DSDecoderV2{constructor(j){this.dsCurrVal=0,this.restDecoder=j}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=readVarUint(this.restDecoder),this.dsCurrVal}readDsLen(){const j=readVarUint(this.restDecoder)+1;return this.dsCurrVal+=j,j}}class UpdateDecoderV2 extends DSDecoderV2{constructor(j){super(j),this.keys=[],readVarUint(j),this.keyClockDecoder=new IntDiffOptRleDecoder(readVarUint8Array(j)),this.clientDecoder=new UintOptRleDecoder(readVarUint8Array(j)),this.leftClockDecoder=new IntDiffOptRleDecoder(readVarUint8Array(j)),this.rightClockDecoder=new IntDiffOptRleDecoder(readVarUint8Array(j)),this.infoDecoder=new RleDecoder(readVarUint8Array(j),readUint8),this.stringDecoder=new StringDecoder(readVarUint8Array(j)),this.parentInfoDecoder=new RleDecoder(readVarUint8Array(j),readUint8),this.typeRefDecoder=new UintOptRleDecoder(readVarUint8Array(j)),this.lenDecoder=new UintOptRleDecoder(readVarUint8Array(j))}readLeftID(){return new ID(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ID(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return readAny(this.restDecoder)}readBuf(){return readVarUint8Array(this.restDecoder)}readJSON(){return readAny(this.restDecoder)}readKey(){const j=this.keyClockDecoder.read();if(j<this.keys.length)return this.keys[j];{const X=this.stringDecoder.read();return this.keys.push(X),X}}}class DSEncoderV1{constructor(){this.restEncoder=createEncoder()}toUint8Array(){return toUint8Array(this.restEncoder)}resetDsCurVal(){}writeDsClock(j){writeVarUint(this.restEncoder,j)}writeDsLen(j){writeVarUint(this.restEncoder,j)}}class UpdateEncoderV1 extends DSEncoderV1{writeLeftID(j){writeVarUint(this.restEncoder,j.client),writeVarUint(this.restEncoder,j.clock)}writeRightID(j){writeVarUint(this.restEncoder,j.client),writeVarUint(this.restEncoder,j.clock)}writeClient(j){writeVarUint(this.restEncoder,j)}writeInfo(j){writeUint8(this.restEncoder,j)}writeString(j){writeVarString(this.restEncoder,j)}writeParentInfo(j){writeVarUint(this.restEncoder,j?1:0)}writeTypeRef(j){writeVarUint(this.restEncoder,j)}writeLen(j){writeVarUint(this.restEncoder,j)}writeAny(j){writeAny(this.restEncoder,j)}writeBuf(j){writeVarUint8Array(this.restEncoder,j)}writeJSON(j){writeVarString(this.restEncoder,JSON.stringify(j))}writeKey(j){writeVarString(this.restEncoder,j)}}class DSEncoderV2{constructor(){this.restEncoder=createEncoder(),this.dsCurrVal=0}toUint8Array(){return toUint8Array(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(j){const X=j-this.dsCurrVal;this.dsCurrVal=j,writeVarUint(this.restEncoder,X)}writeDsLen(j){j===0&&unexpectedCase(),writeVarUint(this.restEncoder,j-1),this.dsCurrVal+=j}}class UpdateEncoderV2 extends DSEncoderV2{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new IntDiffOptRleEncoder,this.clientEncoder=new UintOptRleEncoder,this.leftClockEncoder=new IntDiffOptRleEncoder,this.rightClockEncoder=new IntDiffOptRleEncoder,this.infoEncoder=new RleEncoder(writeUint8),this.stringEncoder=new StringEncoder,this.parentInfoEncoder=new RleEncoder(writeUint8),this.typeRefEncoder=new UintOptRleEncoder,this.lenEncoder=new UintOptRleEncoder}toUint8Array(){const j=createEncoder();return writeVarUint(j,0),writeVarUint8Array(j,this.keyClockEncoder.toUint8Array()),writeVarUint8Array(j,this.clientEncoder.toUint8Array()),writeVarUint8Array(j,this.leftClockEncoder.toUint8Array()),writeVarUint8Array(j,this.rightClockEncoder.toUint8Array()),writeVarUint8Array(j,toUint8Array(this.infoEncoder)),writeVarUint8Array(j,this.stringEncoder.toUint8Array()),writeVarUint8Array(j,toUint8Array(this.parentInfoEncoder)),writeVarUint8Array(j,this.typeRefEncoder.toUint8Array()),writeVarUint8Array(j,this.lenEncoder.toUint8Array()),writeUint8Array(j,toUint8Array(this.restEncoder)),toUint8Array(j)}writeLeftID(j){this.clientEncoder.write(j.client),this.leftClockEncoder.write(j.clock)}writeRightID(j){this.clientEncoder.write(j.client),this.rightClockEncoder.write(j.clock)}writeClient(j){this.clientEncoder.write(j)}writeInfo(j){this.infoEncoder.write(j)}writeString(j){this.stringEncoder.write(j)}writeParentInfo(j){this.parentInfoEncoder.write(j?1:0)}writeTypeRef(j){this.typeRefEncoder.write(j)}writeLen(j){this.lenEncoder.write(j)}writeAny(j){writeAny(this.restEncoder,j)}writeBuf(j){writeVarUint8Array(this.restEncoder,j)}writeJSON(j){writeAny(this.restEncoder,j)}writeKey(j){const X=this.keyMap.get(j);X===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(j)):this.keyClockEncoder.write(X)}}const writeStructs=(q,j,X,te)=>{te=max(te,j[0].id.clock);const ne=findIndexSS(j,te);writeVarUint(q.restEncoder,j.length-ne),q.writeClient(X),writeVarUint(q.restEncoder,te);const re=j[ne];re.write(q,te-re.id.clock);for(let oe=ne+1;oe<j.length;oe++)j[oe].write(q,0)},writeClientsStructs=(q,j,X)=>{const te=new Map;X.forEach((ne,re)=>{getState(j,re)>ne&&te.set(re,ne)}),getStateVector(j).forEach((ne,re)=>{X.has(re)||te.set(re,0)}),writeVarUint(q.restEncoder,te.size),Array.from(te.entries()).sort((ne,re)=>re[0]-ne[0]).forEach(([ne,re])=>{writeStructs(q,j.clients.get(ne),ne,re)})},readClientsStructRefs=(q,j)=>{const X=create$5(),te=readVarUint(q.restDecoder);for(let ne=0;ne<te;ne++){const re=readVarUint(q.restDecoder),oe=new Array(re),le=q.readClient();let fe=readVarUint(q.restDecoder);X.set(le,{i:0,refs:oe});for(let we=0;we<re;we++){const ke=q.readInfo();switch(BITS5&ke){case 0:{const ye=q.readLen();oe[we]=new GC(createID(le,fe),ye),fe+=ye;break}case 10:{const ye=readVarUint(q.restDecoder);oe[we]=new Skip(createID(le,fe),ye),fe+=ye;break}default:{const ye=(ke&(BIT7|BIT8))===0,ve=new Item(createID(le,fe),null,(ke&BIT8)===BIT8?q.readLeftID():null,null,(ke&BIT7)===BIT7?q.readRightID():null,ye?q.readParentInfo()?j.get(q.readString()):q.readLeftID():null,ye&&(ke&BIT6)===BIT6?q.readString():null,readItemContent(q,ke));oe[we]=ve,fe+=ve.length}}}}return X},integrateStructs=(q,j,X)=>{const te=[];let ne=Array.from(X.keys()).sort((be,Ce)=>be-Ce);if(ne.length===0)return null;const re=()=>{if(ne.length===0)return null;let be=X.get(ne[ne.length-1]);for(;be.refs.length===be.i;)if(ne.pop(),ne.length>0)be=X.get(ne[ne.length-1]);else return null;return be};let oe=re();if(oe===null&&te.length===0)return null;const le=new StructStore,fe=new Map,we=(be,Ce)=>{const Ee=fe.get(be);(Ee==null||Ee>Ce)&&fe.set(be,Ce)};let ke=oe.refs[oe.i++];const ye=new Map,ve=()=>{for(const be of te){const Ce=be.id.client,Ee=X.get(Ce);Ee?(Ee.i--,le.clients.set(Ce,Ee.refs.slice(Ee.i)),X.delete(Ce),Ee.i=0,Ee.refs=[]):le.clients.set(Ce,[be]),ne=ne.filter(Oe=>Oe!==Ce)}te.length=0};for(;;){if(ke.constructor!==Skip){const Ce=setIfUndefined(ye,ke.id.client,()=>getState(j,ke.id.client))-ke.id.clock;if(Ce<0)te.push(ke),we(ke.id.client,ke.id.clock-1),ve();else{const Ee=ke.getMissing(q,j);if(Ee!==null){te.push(ke);const Oe=X.get(Ee)||{refs:[],i:0};if(Oe.refs.length===Oe.i)we(Ee,getState(j,Ee)),ve();else{ke=Oe.refs[Oe.i++];continue}}else(Ce===0||Ce<ke.length)&&(ke.integrate(q,Ce),ye.set(ke.id.client,ke.id.clock+ke.length))}}if(te.length>0)ke=te.pop();else if(oe!==null&&oe.i<oe.refs.length)ke=oe.refs[oe.i++];else{if(oe=re(),oe===null)break;ke=oe.refs[oe.i++]}}if(le.clients.size>0){const be=new UpdateEncoderV2;return writeClientsStructs(be,le,new Map),writeVarUint(be.restEncoder,0),{missing:fe,update:be.toUint8Array()}}return null},writeStructsFromTransaction=(q,j)=>writeClientsStructs(q,j.doc.store,j.beforeState),readUpdateV2=(q,j,X,te=new UpdateDecoderV2(q))=>transact$1(j,ne=>{ne.local=!1;let re=!1;const oe=ne.doc,le=oe.store,fe=readClientsStructRefs(te,oe),we=integrateStructs(ne,le,fe),ke=le.pendingStructs;if(ke){for(const[ve,be]of ke.missing)if(be<getState(le,ve)){re=!0;break}if(we){for(const[ve,be]of we.missing){const Ce=ke.missing.get(ve);(Ce==null||Ce>be)&&ke.missing.set(ve,be)}ke.update=mergeUpdatesV2([ke.update,we.update])}}else le.pendingStructs=we;const ye=readAndApplyDeleteSet(te,ne,le);if(le.pendingDs){const ve=new UpdateDecoderV2(createDecoder(le.pendingDs));readVarUint(ve.restDecoder);const be=readAndApplyDeleteSet(ve,ne,le);ye&&be?le.pendingDs=mergeUpdatesV2([ye,be]):le.pendingDs=ye||be}else le.pendingDs=ye;if(re){const ve=le.pendingStructs.update;le.pendingStructs=null,applyUpdateV2(ne.doc,ve)}},X,!1),readUpdate$1=(q,j,X)=>readUpdateV2(q,j,X,new UpdateDecoderV1(q)),applyUpdateV2=(q,j,X,te=UpdateDecoderV2)=>{const ne=createDecoder(j);readUpdateV2(ne,q,X,new te(ne))},applyUpdate=(q,j,X)=>applyUpdateV2(q,j,X,UpdateDecoderV1),writeStateAsUpdate=(q,j,X=new Map)=>{writeClientsStructs(q,j.store,X),writeDeleteSet(q,createDeleteSetFromStructStore(j.store))},encodeStateAsUpdateV2=(q,j=new Uint8Array([0]),X=new UpdateEncoderV2)=>{const te=decodeStateVector(j);writeStateAsUpdate(X,q,te);const ne=[X.toUint8Array()];if(q.store.pendingDs&&ne.push(q.store.pendingDs),q.store.pendingStructs&&ne.push(diffUpdateV2(q.store.pendingStructs.update,j)),ne.length>1){if(X.constructor===UpdateEncoderV1)return mergeUpdates(ne.map((re,oe)=>oe===0?re:convertUpdateFormatV2ToV1(re)));if(X.constructor===UpdateEncoderV2)return mergeUpdatesV2(ne)}return ne[0]},encodeStateAsUpdate=(q,j)=>encodeStateAsUpdateV2(q,j,new UpdateEncoderV1),readStateVector=q=>{const j=new Map,X=readVarUint(q.restDecoder);for(let te=0;te<X;te++){const ne=readVarUint(q.restDecoder),re=readVarUint(q.restDecoder);j.set(ne,re)}return j},decodeStateVector=q=>readStateVector(new DSDecoderV1(createDecoder(q))),writeStateVector=(q,j)=>(writeVarUint(q.restEncoder,j.size),Array.from(j.entries()).sort((X,te)=>te[0]-X[0]).forEach(([X,te])=>{writeVarUint(q.restEncoder,X),writeVarUint(q.restEncoder,te)}),q),writeDocumentStateVector=(q,j)=>writeStateVector(q,getStateVector(j.store)),encodeStateVectorV2=(q,j=new DSEncoderV2)=>(q instanceof Map?writeStateVector(j,q):writeDocumentStateVector(j,q),j.toUint8Array()),encodeStateVector=q=>encodeStateVectorV2(q,new DSEncoderV1);class EventHandler{constructor(){this.l=[]}}const createEventHandler=()=>new EventHandler,addEventHandlerListener=(q,j)=>q.l.push(j),removeEventHandlerListener=(q,j)=>{const X=q.l,te=X.length;q.l=X.filter(ne=>j!==ne),te===q.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},callEventHandlerListeners=(q,j,X)=>callAll(q.l,[j,X]);class ID{constructor(j,X){this.client=j,this.clock=X}}const compareIDs=(q,j)=>q===j||q!==null&&j!==null&&q.client===j.client&&q.clock===j.clock,createID=(q,j)=>new ID(q,j),writeID=(q,j)=>{writeVarUint(q,j.client),writeVarUint(q,j.clock)},readID=q=>createID(readVarUint(q),readVarUint(q)),findRootTypeKey=q=>{for(const[j,X]of q.doc.share.entries())if(X===q)return j;throw unexpectedCase()},isParentOf=(q,j)=>{for(;j!==null;){if(j.parent===q)return!0;j=j.parent._item}return!1},logType=q=>{const j=[];let X=q._start;for(;X;)j.push(X),X=X.right;console.log("Children: ",j),console.log("Children content: ",j.filter(te=>!te.deleted).map(te=>te.content))};class PermanentUserData{constructor(j,X=j.getMap("users")){const te=new Map;this.yusers=X,this.doc=j,this.clients=new Map,this.dss=te;const ne=(re,oe)=>{const le=re.get("ds"),fe=re.get("ids"),we=ke=>this.clients.set(ke,oe);le.observe(ke=>{ke.changes.added.forEach(ye=>{ye.content.getContent().forEach(ve=>{ve instanceof Uint8Array&&this.dss.set(oe,mergeDeleteSets([this.dss.get(oe)||createDeleteSet(),readDeleteSet(new DSDecoderV1(createDecoder(ve)))]))})})}),this.dss.set(oe,mergeDeleteSets(le.map(ke=>readDeleteSet(new DSDecoderV1(createDecoder(ke)))))),fe.observe(ke=>ke.changes.added.forEach(ye=>ye.content.getContent().forEach(we))),fe.forEach(we)};X.observe(re=>{re.keysChanged.forEach(oe=>ne(X.get(oe),oe))}),X.forEach(ne)}setUserMapping(j,X,te,{filter:ne=()=>!0}={}){const re=this.yusers;let oe=re.get(te);oe||(oe=new YMap,oe.set("ids",new YArray),oe.set("ds",new YArray),re.set(te,oe)),oe.get("ids").push([X]),re.observe(le=>{setTimeout(()=>{const fe=re.get(te);if(fe!==oe){oe=fe,this.clients.forEach((ye,ve)=>{te===ye&&oe.get("ids").push([ve])});const we=new DSEncoderV1,ke=this.dss.get(te);ke&&(writeDeleteSet(we,ke),oe.get("ds").push([we.toUint8Array()]))}},0)}),j.on("afterTransaction",le=>{setTimeout(()=>{const fe=oe.get("ds"),we=le.deleteSet;if(le.local&&we.clients.size>0&&ne(le,we)){const ke=new DSEncoderV1;writeDeleteSet(ke,we),fe.push([ke.toUint8Array()])}})})}getUserByClientId(j){return this.clients.get(j)||null}getUserByDeletedId(j){for(const[X,te]of this.dss.entries())if(isDeleted(te,j))return X;return null}}class RelativePosition{constructor(j,X,te,ne=0){this.type=j,this.tname=X,this.item=te,this.assoc=ne}}const relativePositionToJSON=q=>{const j={};return q.type&&(j.type=q.type),q.tname&&(j.tname=q.tname),q.item&&(j.item=q.item),q.assoc!=null&&(j.assoc=q.assoc),j},createRelativePositionFromJSON=q=>new RelativePosition(q.type==null?null:createID(q.type.client,q.type.clock),q.tname||null,q.item==null?null:createID(q.item.client,q.item.clock),q.assoc==null?0:q.assoc);class AbsolutePosition{constructor(j,X,te=0){this.type=j,this.index=X,this.assoc=te}}const createAbsolutePosition=(q,j,X=0)=>new AbsolutePosition(q,j,X),createRelativePosition=(q,j,X)=>{let te=null,ne=null;return q._item===null?ne=findRootTypeKey(q):te=createID(q._item.id.client,q._item.id.clock),new RelativePosition(te,ne,j,X)},createRelativePositionFromTypeIndex=(q,j,X=0)=>{let te=q._start;if(X<0){if(j===0)return createRelativePosition(q,null,X);j--}for(;te!==null;){if(!te.deleted&&te.countable){if(te.length>j)return createRelativePosition(q,createID(te.id.client,te.id.clock+j),X);j-=te.length}if(te.right===null&&X<0)return createRelativePosition(q,te.lastId,X);te=te.right}return createRelativePosition(q,null,X)},writeRelativePosition=(q,j)=>{const{type:X,tname:te,item:ne,assoc:re}=j;if(ne!==null)writeVarUint(q,0),writeID(q,ne);else if(te!==null)writeUint8(q,1),writeVarString(q,te);else if(X!==null)writeUint8(q,2),writeID(q,X);else throw unexpectedCase();return writeVarInt(q,re),q},encodeRelativePosition=q=>{const j=createEncoder();return writeRelativePosition(j,q),toUint8Array(j)},readRelativePosition=q=>{let j=null,X=null,te=null;switch(readVarUint(q)){case 0:te=readID(q);break;case 1:X=readVarString(q);break;case 2:j=readID(q)}const ne=hasContent(q)?readVarInt(q):0;return new RelativePosition(j,X,te,ne)},decodeRelativePosition=q=>readRelativePosition(createDecoder(q)),createAbsolutePositionFromRelativePosition=(q,j)=>{const X=j.store,te=q.item,ne=q.type,re=q.tname,oe=q.assoc;let le=null,fe=0;if(te!==null){if(getState(X,te.client)<=te.clock)return null;const we=followRedone(X,te),ke=we.item;if(!(ke instanceof Item))return null;if(le=ke.parent,le._item===null||!le._item.deleted){fe=ke.deleted||!ke.countable?0:we.diff+(oe>=0?0:1);let ye=ke.left;for(;ye!==null;)!ye.deleted&&ye.countable&&(fe+=ye.length),ye=ye.left}}else{if(re!==null)le=j.get(re);else if(ne!==null){if(getState(X,ne.client)<=ne.clock)return null;const{item:we}=followRedone(X,ne);if(we instanceof Item&&we.content instanceof ContentType)le=we.content.type;else return null}else throw unexpectedCase();oe>=0?fe=le._length:fe=0}return createAbsolutePosition(le,fe,q.assoc)},compareRelativePositions=(q,j)=>q===j||q!==null&&j!==null&&q.tname===j.tname&&compareIDs(q.item,j.item)&&compareIDs(q.type,j.type)&&q.assoc===j.assoc;class Snapshot{constructor(j,X){this.ds=j,this.sv=X}}const equalSnapshots=(q,j)=>{const X=q.ds.clients,te=j.ds.clients,ne=q.sv,re=j.sv;if(ne.size!==re.size||X.size!==te.size)return!1;for(const[oe,le]of ne.entries())if(re.get(oe)!==le)return!1;for(const[oe,le]of X.entries()){const fe=te.get(oe)||[];if(le.length!==fe.length)return!1;for(let we=0;we<le.length;we++){const ke=le[we],ye=fe[we];if(ke.clock!==ye.clock||ke.len!==ye.len)return!1}}return!0},encodeSnapshotV2=(q,j=new DSEncoderV2)=>(writeDeleteSet(j,q.ds),writeStateVector(j,q.sv),j.toUint8Array()),encodeSnapshot=q=>encodeSnapshotV2(q,new DSEncoderV1),decodeSnapshotV2=(q,j=new DSDecoderV2(createDecoder(q)))=>new Snapshot(readDeleteSet(j),readStateVector(j)),decodeSnapshot=q=>decodeSnapshotV2(q,new DSDecoderV1(createDecoder(q))),createSnapshot=(q,j)=>new Snapshot(q,j),emptySnapshot=createSnapshot(createDeleteSet(),new Map),snapshot=q=>createSnapshot(createDeleteSetFromStructStore(q.store),getStateVector(q.store)),isVisible=(q,j)=>j===void 0?!q.deleted:j.sv.has(q.id.client)&&(j.sv.get(q.id.client)||0)>q.id.clock&&!isDeleted(j.ds,q.id),splitSnapshotAffectedStructs=(q,j)=>{const X=setIfUndefined(q.meta,splitSnapshotAffectedStructs,create$3),te=q.doc.store;X.has(j)||(j.sv.forEach((ne,re)=>{ne<getState(te,re)&&getItemCleanStart(q,createID(re,ne))}),iterateDeletedStructs(q,j.ds,ne=>{}),X.add(j))},createDocFromSnapshot=(q,j,X=new Doc)=>{if(q.gc)throw new Error("originDoc must not be garbage collected");const{sv:te,ds:ne}=j,re=new UpdateEncoderV2;return q.transact(oe=>{let le=0;te.forEach(fe=>{fe>0&&le++}),writeVarUint(re.restEncoder,le);for(const[fe,we]of te){if(we===0)continue;we<getState(q.store,fe)&&getItemCleanStart(oe,createID(fe,we));const ke=q.store.clients.get(fe)||[],ye=findIndexSS(ke,we-1);writeVarUint(re.restEncoder,ye+1),re.writeClient(fe),writeVarUint(re.restEncoder,0);for(let ve=0;ve<=ye;ve++)ke[ve].write(re,0)}writeDeleteSet(re,ne)}),applyUpdateV2(X,re.toUint8Array(),"snapshot"),X};class StructStore{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const getStateVector=q=>{const j=new Map;return q.clients.forEach((X,te)=>{const ne=X[X.length-1];j.set(te,ne.id.clock+ne.length)}),j},getState=(q,j)=>{const X=q.clients.get(j);if(X===void 0)return 0;const te=X[X.length-1];return te.id.clock+te.length},addStruct=(q,j)=>{let X=q.clients.get(j.id.client);if(X===void 0)X=[],q.clients.set(j.id.client,X);else{const te=X[X.length-1];if(te.id.clock+te.length!==j.id.clock)throw unexpectedCase()}X.push(j)},findIndexSS=(q,j)=>{let X=0,te=q.length-1,ne=q[te],re=ne.id.clock;if(re===j)return te;let oe=floor(j/(re+ne.length-1)*te);for(;X<=te;){if(ne=q[oe],re=ne.id.clock,re<=j){if(j<re+ne.length)return oe;X=oe+1}else te=oe-1;oe=floor((X+te)/2)}throw unexpectedCase()},find=(q,j)=>{const X=q.clients.get(j.client);return X[findIndexSS(X,j.clock)]},getItem=find,findIndexCleanStart=(q,j,X)=>{const te=findIndexSS(j,X),ne=j[te];return ne.id.clock<X&&ne instanceof Item?(j.splice(te+1,0,splitItem(q,ne,X-ne.id.clock)),te+1):te},getItemCleanStart=(q,j)=>{const X=q.doc.store.clients.get(j.client);return X[findIndexCleanStart(q,X,j.clock)]},getItemCleanEnd=(q,j,X)=>{const te=j.clients.get(X.client),ne=findIndexSS(te,X.clock),re=te[ne];return X.clock!==re.id.clock+re.length-1&&re.constructor!==GC&&te.splice(ne+1,0,splitItem(q,re,X.clock-re.id.clock+1)),re},replaceStruct=(q,j,X)=>{const te=q.clients.get(j.id.client);te[findIndexSS(te,j.id.clock)]=X},iterateStructs=(q,j,X,te,ne)=>{if(te===0)return;const re=X+te;let oe=findIndexCleanStart(q,j,X),le;do le=j[oe++],re<le.id.clock+le.length&&findIndexCleanStart(q,j,re),ne(le);while(oe<j.length&&j[oe].id.clock<re)};class Transaction{constructor(j,X,te){this.doc=j,this.deleteSet=new DeleteSet,this.beforeState=getStateVector(j.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=X,this.meta=new Map,this.local=te,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const writeUpdateMessageFromTransaction=(q,j)=>j.deleteSet.clients.size===0&&!any(j.afterState,(X,te)=>j.beforeState.get(te)!==X)?!1:(sortAndMergeDeleteSet(j.deleteSet),writeStructsFromTransaction(q,j),writeDeleteSet(q,j.deleteSet),!0),addChangedTypeToTransaction=(q,j,X)=>{const te=j._item;(te===null||te.id.clock<(q.beforeState.get(te.id.client)||0)&&!te.deleted)&&setIfUndefined(q.changed,j,create$3).add(X)},tryToMergeWithLeft=(q,j)=>{const X=q[j-1],te=q[j];X.deleted===te.deleted&&X.constructor===te.constructor&&X.mergeWith(te)&&(q.splice(j,1),te instanceof Item&&te.parentSub!==null&&te.parent._map.get(te.parentSub)===te&&te.parent._map.set(te.parentSub,X))},tryGcDeleteSet=(q,j,X)=>{for(const[te,ne]of q.clients.entries()){const re=j.clients.get(te);for(let oe=ne.length-1;oe>=0;oe--){const le=ne[oe],fe=le.clock+le.len;for(let we=findIndexSS(re,le.clock),ke=re[we];we<re.length&&ke.id.clock<fe;ke=re[++we]){const ye=re[we];if(le.clock+le.len<=ye.id.clock)break;ye instanceof Item&&ye.deleted&&!ye.keep&&X(ye)&&ye.gc(j,!1)}}}},tryMergeDeleteSet=(q,j)=>{q.clients.forEach((X,te)=>{const ne=j.clients.get(te);for(let re=X.length-1;re>=0;re--){const oe=X[re],le=min(ne.length-1,1+findIndexSS(ne,oe.clock+oe.len-1));for(let fe=le,we=ne[fe];fe>0&&we.id.clock>=oe.clock;we=ne[--fe])tryToMergeWithLeft(ne,fe)}})},tryGc=(q,j,X)=>{tryGcDeleteSet(q,j,X),tryMergeDeleteSet(q,j)},cleanupTransactions=(q,j)=>{if(j<q.length){const X=q[j],te=X.doc,ne=te.store,re=X.deleteSet,oe=X._mergeStructs;try{sortAndMergeDeleteSet(re),X.afterState=getStateVector(X.doc.store),te.emit("beforeObserverCalls",[X,te]);const le=[];X.changed.forEach((fe,we)=>le.push(()=>{(we._item===null||!we._item.deleted)&&we._callObserver(X,fe)})),le.push(()=>{X.changedParentTypes.forEach((fe,we)=>le.push(()=>{(we._item===null||!we._item.deleted)&&(fe=fe.filter(ke=>ke.target._item===null||!ke.target._item.deleted),fe.forEach(ke=>{ke.currentTarget=we}),fe.sort((ke,ye)=>ke.path.length-ye.path.length),callEventHandlerListeners(we._dEH,fe,X))})),le.push(()=>te.emit("afterTransaction",[X,te]))}),callAll(le,[])}finally{te.gc&&tryGcDeleteSet(re,ne,te.gcFilter),tryMergeDeleteSet(re,ne),X.afterState.forEach((ke,ye)=>{const ve=X.beforeState.get(ye)||0;if(ve!==ke){const be=ne.clients.get(ye),Ce=max(findIndexSS(be,ve),1);for(let Ee=be.length-1;Ee>=Ce;Ee--)tryToMergeWithLeft(be,Ee)}});for(let ke=0;ke<oe.length;ke++){const{client:ye,clock:ve}=oe[ke].id,be=ne.clients.get(ye),Ce=findIndexSS(be,ve);Ce+1<be.length&&tryToMergeWithLeft(be,Ce+1),Ce>0&&tryToMergeWithLeft(be,Ce)}if(!X.local&&X.afterState.get(te.clientID)!==X.beforeState.get(te.clientID)&&(print(ORANGE,BOLD,"[yjs] ",UNBOLD,RED,"Changed the client-id because another client seems to be using it."),te.clientID=generateNewClientId()),te.emit("afterTransactionCleanup",[X,te]),te._observers.has("update")){const ke=new UpdateEncoderV1;writeUpdateMessageFromTransaction(ke,X)&&te.emit("update",[ke.toUint8Array(),X.origin,te,X])}if(te._observers.has("updateV2")){const ke=new UpdateEncoderV2;writeUpdateMessageFromTransaction(ke,X)&&te.emit("updateV2",[ke.toUint8Array(),X.origin,te,X])}const{subdocsAdded:le,subdocsLoaded:fe,subdocsRemoved:we}=X;(le.size>0||we.size>0||fe.size>0)&&(le.forEach(ke=>{ke.clientID=te.clientID,ke.collectionid==null&&(ke.collectionid=te.collectionid),te.subdocs.add(ke)}),we.forEach(ke=>te.subdocs.delete(ke)),te.emit("subdocs",[{loaded:fe,added:le,removed:we},te,X]),we.forEach(ke=>ke.destroy())),q.length<=j+1?(te._transactionCleanups=[],te.emit("afterAllTransactions",[te,q])):cleanupTransactions(q,j+1)}}},transact$1=(q,j,X=null,te=!0)=>{const ne=q._transactionCleanups;let re=!1;q._transaction===null&&(re=!0,q._transaction=new Transaction(q,X,te),ne.push(q._transaction),ne.length===1&&q.emit("beforeAllTransactions",[q]),q.emit("beforeTransaction",[q._transaction,q]));try{j(q._transaction)}finally{if(re){const oe=q._transaction===ne[0];q._transaction=null,oe&&cleanupTransactions(ne,0)}}};class StackItem{constructor(j,X){this.insertions=X,this.deletions=j,this.meta=new Map}}const clearUndoManagerStackItem=(q,j,X)=>{iterateDeletedStructs(q,X.deletions,te=>{te instanceof Item&&j.scope.some(ne=>isParentOf(ne,te))&&keepItem(te,!1)})},popStackItem=(q,j,X)=>{let te=null,ne=null;const re=q.doc,oe=q.scope;if(transact$1(re,le=>{for(;j.length>0&&te===null;){const fe=re.store,we=j.pop(),ke=new Set,ye=[];let ve=!1;iterateDeletedStructs(le,we.insertions,be=>{if(be instanceof Item){if(be.redone!==null){let{item:Ce,diff:Ee}=followRedone(fe,be.id);Ee>0&&(Ce=getItemCleanStart(le,createID(Ce.id.client,Ce.id.clock+Ee))),be=Ce}!be.deleted&&oe.some(Ce=>isParentOf(Ce,be))&&ye.push(be)}}),iterateDeletedStructs(le,we.deletions,be=>{be instanceof Item&&oe.some(Ce=>isParentOf(Ce,be))&&!isDeleted(we.insertions,be.id)&&ke.add(be)}),ke.forEach(be=>{ve=redoItem(le,be,ke,we.insertions,q.ignoreRemoteMapChanges)!==null||ve});for(let be=ye.length-1;be>=0;be--){const Ce=ye[be];q.deleteFilter(Ce)&&(Ce.delete(le),ve=!0)}te=ve?we:null}le.changed.forEach((fe,we)=>{fe.has(null)&&we._searchMarker&&(we._searchMarker.length=0)}),ne=le},q),te!=null){const le=ne.changedParentTypes;q.emit("stack-item-popped",[{stackItem:te,type:X,changedParentTypes:le},q])}return te};class UndoManager extends Observable{constructor(j,{captureTimeout:X=500,captureTransaction:te=fe=>!0,deleteFilter:ne=()=>!0,trackedOrigins:re=new Set([null]),ignoreRemoteMapChanges:oe=!1,doc:le=isArray(j)?j[0].doc:j.doc}={}){super(),this.scope=[],this.addToScope(j),this.deleteFilter=ne,re.add(this),this.trackedOrigins=re,this.captureTransaction=te,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=le,this.lastChange=0,this.ignoreRemoteMapChanges=oe,this.captureTimeout=X,this.afterTransactionHandler=fe=>{if(!this.captureTransaction(fe)||!this.scope.some(Oe=>fe.changedParentTypes.has(Oe))||!this.trackedOrigins.has(fe.origin)&&(!fe.origin||!this.trackedOrigins.has(fe.origin.constructor)))return;const we=this.undoing,ke=this.redoing,ye=we?this.redoStack:this.undoStack;we?this.stopCapturing():ke||this.clear(!1,!0);const ve=new DeleteSet;fe.afterState.forEach((Oe,Ae)=>{const Te=fe.beforeState.get(Ae)||0,Se=Oe-Te;Se>0&&addToDeleteSet(ve,Ae,Te,Se)});const be=getUnixTime();let Ce=!1;if(this.lastChange>0&&be-this.lastChange<this.captureTimeout&&ye.length>0&&!we&&!ke){const Oe=ye[ye.length-1];Oe.deletions=mergeDeleteSets([Oe.deletions,fe.deleteSet]),Oe.insertions=mergeDeleteSets([Oe.insertions,ve])}else ye.push(new StackItem(fe.deleteSet,ve)),Ce=!0;!we&&!ke&&(this.lastChange=be),iterateDeletedStructs(fe,fe.deleteSet,Oe=>{Oe instanceof Item&&this.scope.some(Ae=>isParentOf(Ae,Oe))&&keepItem(Oe,!0)});const Ee=[{stackItem:ye[ye.length-1],origin:fe.origin,type:we?"redo":"undo",changedParentTypes:fe.changedParentTypes},this];Ce?this.emit("stack-item-added",Ee):this.emit("stack-item-updated",Ee)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(j){j=isArray(j)?j:[j],j.forEach(X=>{this.scope.every(te=>te!==X)&&this.scope.push(X)})}addTrackedOrigin(j){this.trackedOrigins.add(j)}removeTrackedOrigin(j){this.trackedOrigins.delete(j)}clear(j=!0,X=!0){(j&&this.canUndo()||X&&this.canRedo())&&this.doc.transact(te=>{j&&(this.undoStack.forEach(ne=>clearUndoManagerStackItem(te,this,ne)),this.undoStack=[]),X&&(this.redoStack.forEach(ne=>clearUndoManagerStackItem(te,this,ne)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:j,redoStackCleared:X}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let j;try{j=popStackItem(this,this.undoStack,"undo")}finally{this.undoing=!1}return j}redo(){this.redoing=!0;let j;try{j=popStackItem(this,this.redoStack,"redo")}finally{this.redoing=!1}return j}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*lazyStructReaderGenerator(q){const j=readVarUint(q.restDecoder);for(let X=0;X<j;X++){const te=readVarUint(q.restDecoder),ne=q.readClient();let re=readVarUint(q.restDecoder);for(let oe=0;oe<te;oe++){const le=q.readInfo();if(le===10){const fe=readVarUint(q.restDecoder);yield new Skip(createID(ne,re),fe),re+=fe}else if(BITS5&le){const fe=(le&(BIT7|BIT8))===0,we=new Item(createID(ne,re),null,(le&BIT8)===BIT8?q.readLeftID():null,null,(le&BIT7)===BIT7?q.readRightID():null,fe?q.readParentInfo()?q.readString():q.readLeftID():null,fe&&(le&BIT6)===BIT6?q.readString():null,readItemContent(q,le));yield we,re+=we.length}else{const fe=q.readLen();yield new GC(createID(ne,re),fe),re+=fe}}}}class LazyStructReader{constructor(j,X){this.gen=lazyStructReaderGenerator(j),this.curr=null,this.done=!1,this.filterSkips=X,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Skip);return this.curr}}const logUpdate=q=>logUpdateV2(q,UpdateDecoderV1),logUpdateV2=(q,j=UpdateDecoderV2)=>{const X=[],te=new j(createDecoder(q)),ne=new LazyStructReader(te,!1);for(let oe=ne.curr;oe!==null;oe=ne.next())X.push(oe);print("Structs: ",X);const re=readDeleteSet(te);print("DeleteSet: ",re)},decodeUpdate=q=>decodeUpdateV2(q,UpdateDecoderV1),decodeUpdateV2=(q,j=UpdateDecoderV2)=>{const X=[],te=new j(createDecoder(q)),ne=new LazyStructReader(te,!1);for(let re=ne.curr;re!==null;re=ne.next())X.push(re);return{structs:X,ds:readDeleteSet(te)}};class LazyStructWriter{constructor(j){this.currClient=0,this.startClock=0,this.written=0,this.encoder=j,this.clientStructs=[]}}const mergeUpdates=q=>mergeUpdatesV2(q,UpdateDecoderV1,UpdateEncoderV1),encodeStateVectorFromUpdateV2=(q,j=DSEncoderV2,X=UpdateDecoderV2)=>{const te=new j,ne=new LazyStructReader(new X(createDecoder(q)),!1);let re=ne.curr;if(re!==null){let oe=0,le=re.id.client,fe=re.id.clock!==0,we=fe?0:re.id.clock+re.length;for(;re!==null;re=ne.next())le!==re.id.client&&(we!==0&&(oe++,writeVarUint(te.restEncoder,le),writeVarUint(te.restEncoder,we)),le=re.id.client,we=0,fe=re.id.clock!==0),re.constructor===Skip&&(fe=!0),fe||(we=re.id.clock+re.length);we!==0&&(oe++,writeVarUint(te.restEncoder,le),writeVarUint(te.restEncoder,we));const ke=createEncoder();return writeVarUint(ke,oe),writeBinaryEncoder(ke,te.restEncoder),te.restEncoder=ke,te.toUint8Array()}else return writeVarUint(te.restEncoder,0),te.toUint8Array()},encodeStateVectorFromUpdate=q=>encodeStateVectorFromUpdateV2(q,DSEncoderV1,UpdateDecoderV1),parseUpdateMetaV2=(q,j=UpdateDecoderV2)=>{const X=new Map,te=new Map,ne=new LazyStructReader(new j(createDecoder(q)),!1);let re=ne.curr;if(re!==null){let oe=re.id.client,le=re.id.clock;for(X.set(oe,le);re!==null;re=ne.next())oe!==re.id.client&&(te.set(oe,le),X.set(re.id.client,re.id.clock),oe=re.id.client),le=re.id.clock+re.length;te.set(oe,le)}return{from:X,to:te}},parseUpdateMeta=q=>parseUpdateMetaV2(q,UpdateDecoderV1),sliceStruct=(q,j)=>{if(q.constructor===GC){const{client:X,clock:te}=q.id;return new GC(createID(X,te+j),q.length-j)}else if(q.constructor===Skip){const{client:X,clock:te}=q.id;return new Skip(createID(X,te+j),q.length-j)}else{const X=q,{client:te,clock:ne}=X.id;return new Item(createID(te,ne+j),null,createID(te,ne+j-1),null,X.rightOrigin,X.parent,X.parentSub,X.content.splice(j))}},mergeUpdatesV2=(q,j=UpdateDecoderV2,X=UpdateEncoderV2)=>{if(q.length===1)return q[0];const te=q.map(ke=>new j(createDecoder(ke)));let ne=te.map(ke=>new LazyStructReader(ke,!0)),re=null;const oe=new X,le=new LazyStructWriter(oe);for(;ne=ne.filter(ve=>ve.curr!==null),ne.sort((ve,be)=>{if(ve.curr.id.client===be.curr.id.client){const Ce=ve.curr.id.clock-be.curr.id.clock;return Ce===0?ve.curr.constructor===be.curr.constructor?0:ve.curr.constructor===Skip?1:-1:Ce}else return be.curr.id.client-ve.curr.id.client}),ne.length!==0;){const ke=ne[0],ye=ke.curr.id.client;if(re!==null){let ve=ke.curr,be=!1;for(;ve!==null&&ve.id.clock+ve.length<=re.struct.id.clock+re.struct.length&&ve.id.client>=re.struct.id.client;)ve=ke.next(),be=!0;if(ve===null||ve.id.client!==ye||be&&ve.id.clock>re.struct.id.clock+re.struct.length)continue;if(ye!==re.struct.id.client)writeStructToLazyStructWriter(le,re.struct,re.offset),re={struct:ve,offset:0},ke.next();else if(re.struct.id.clock+re.struct.length<ve.id.clock)if(re.struct.constructor===Skip)re.struct.length=ve.id.clock+ve.length-re.struct.id.clock;else{writeStructToLazyStructWriter(le,re.struct,re.offset);const Ce=ve.id.clock-re.struct.id.clock-re.struct.length;re={struct:new Skip(createID(ye,re.struct.id.clock+re.struct.length),Ce),offset:0}}else{const Ce=re.struct.id.clock+re.struct.length-ve.id.clock;Ce>0&&(re.struct.constructor===Skip?re.struct.length-=Ce:ve=sliceStruct(ve,Ce)),re.struct.mergeWith(ve)||(writeStructToLazyStructWriter(le,re.struct,re.offset),re={struct:ve,offset:0},ke.next())}}else re={struct:ke.curr,offset:0},ke.next();for(let ve=ke.curr;ve!==null&&ve.id.client===ye&&ve.id.clock===re.struct.id.clock+re.struct.length&&ve.constructor!==Skip;ve=ke.next())writeStructToLazyStructWriter(le,re.struct,re.offset),re={struct:ve,offset:0}}re!==null&&(writeStructToLazyStructWriter(le,re.struct,re.offset),re=null),finishLazyStructWriting(le);const fe=te.map(ke=>readDeleteSet(ke)),we=mergeDeleteSets(fe);return writeDeleteSet(oe,we),oe.toUint8Array()},diffUpdateV2=(q,j,X=UpdateDecoderV2,te=UpdateEncoderV2)=>{const ne=decodeStateVector(j),re=new te,oe=new LazyStructWriter(re),le=new X(createDecoder(q)),fe=new LazyStructReader(le,!1);for(;fe.curr;){const ke=fe.curr,ye=ke.id.client,ve=ne.get(ye)||0;if(fe.curr.constructor===Skip){fe.next();continue}if(ke.id.clock+ke.length>ve)for(writeStructToLazyStructWriter(oe,ke,max(ve-ke.id.clock,0)),fe.next();fe.curr&&fe.curr.id.client===ye;)writeStructToLazyStructWriter(oe,fe.curr,0),fe.next();else for(;fe.curr&&fe.curr.id.client===ye&&fe.curr.id.clock+fe.curr.length<=ve;)fe.next()}finishLazyStructWriting(oe);const we=readDeleteSet(le);return writeDeleteSet(re,we),re.toUint8Array()},diffUpdate=(q,j)=>diffUpdateV2(q,j,UpdateDecoderV1,UpdateEncoderV1),flushLazyStructWriter=q=>{q.written>0&&(q.clientStructs.push({written:q.written,restEncoder:toUint8Array(q.encoder.restEncoder)}),q.encoder.restEncoder=createEncoder(),q.written=0)},writeStructToLazyStructWriter=(q,j,X)=>{q.written>0&&q.currClient!==j.id.client&&flushLazyStructWriter(q),q.written===0&&(q.currClient=j.id.client,q.encoder.writeClient(j.id.client),writeVarUint(q.encoder.restEncoder,j.id.clock+X)),j.write(q.encoder,X),q.written++},finishLazyStructWriting=q=>{flushLazyStructWriter(q);const j=q.encoder.restEncoder;writeVarUint(j,q.clientStructs.length);for(let X=0;X<q.clientStructs.length;X++){const te=q.clientStructs[X];writeVarUint(j,te.written),writeUint8Array(j,te.restEncoder)}},convertUpdateFormat=(q,j,X)=>{const te=new j(createDecoder(q)),ne=new LazyStructReader(te,!1),re=new X,oe=new LazyStructWriter(re);for(let fe=ne.curr;fe!==null;fe=ne.next())writeStructToLazyStructWriter(oe,fe,0);finishLazyStructWriting(oe);const le=readDeleteSet(te);return writeDeleteSet(re,le),re.toUint8Array()},convertUpdateFormatV1ToV2=q=>convertUpdateFormat(q,UpdateDecoderV1,UpdateEncoderV2),convertUpdateFormatV2ToV1=q=>convertUpdateFormat(q,UpdateDecoderV2,UpdateEncoderV1);class YEvent{constructor(j,X){this.target=j,this.currentTarget=j,this.transaction=X,this._changes=null,this._keys=null,this._delta=null}get path(){return getPathTo(this.currentTarget,this.target)}deletes(j){return isDeleted(this.transaction.deleteSet,j.id)}get keys(){if(this._keys===null){const j=new Map,X=this.target;this.transaction.changed.get(X).forEach(ne=>{if(ne!==null){const re=X._map.get(ne);let oe,le;if(this.adds(re)){let fe=re.left;for(;fe!==null&&this.adds(fe);)fe=fe.left;if(this.deletes(re))if(fe!==null&&this.deletes(fe))oe="delete",le=last(fe.content.getContent());else return;else fe!==null&&this.deletes(fe)?(oe="update",le=last(fe.content.getContent())):(oe="add",le=void 0)}else if(this.deletes(re))oe="delete",le=last(re.content.getContent());else return;j.set(ne,{action:oe,oldValue:le})}}),this._keys=j}return this._keys}get delta(){return this.changes.delta}adds(j){return j.id.clock>=(this.transaction.beforeState.get(j.id.client)||0)}get changes(){let j=this._changes;if(j===null){const X=this.target,te=create$3(),ne=create$3(),re=[];if(j={added:te,deleted:ne,delta:re,keys:this.keys},this.transaction.changed.get(X).has(null)){let le=null;const fe=()=>{le&&re.push(le)};for(let we=X._start;we!==null;we=we.right)we.deleted?this.deletes(we)&&!this.adds(we)&&((le===null||le.delete===void 0)&&(fe(),le={delete:0}),le.delete+=we.length,ne.add(we)):this.adds(we)?((le===null||le.insert===void 0)&&(fe(),le={insert:[]}),le.insert=le.insert.concat(we.content.getContent()),te.add(we)):((le===null||le.retain===void 0)&&(fe(),le={retain:0}),le.retain+=we.length);le!==null&&le.retain===void 0&&fe()}this._changes=j}return j}}const getPathTo=(q,j)=>{const X=[];for(;j._item!==null&&j!==q;){if(j._item.parentSub!==null)X.unshift(j._item.parentSub);else{let te=0,ne=j._item.parent._start;for(;ne!==j._item&&ne!==null;)ne.deleted||te++,ne=ne.right;X.unshift(te)}j=j._item.parent}return X},maxSearchMarker=80;let globalSearchMarkerTimestamp=0;class ArraySearchMarker{constructor(j,X){j.marker=!0,this.p=j,this.index=X,this.timestamp=globalSearchMarkerTimestamp++}}const refreshMarkerTimestamp=q=>{q.timestamp=globalSearchMarkerTimestamp++},overwriteMarker=(q,j,X)=>{q.p.marker=!1,q.p=j,j.marker=!0,q.index=X,q.timestamp=globalSearchMarkerTimestamp++},markPosition=(q,j,X)=>{if(q.length>=maxSearchMarker){const te=q.reduce((ne,re)=>ne.timestamp<re.timestamp?ne:re);return overwriteMarker(te,j,X),te}else{const te=new ArraySearchMarker(j,X);return q.push(te),te}},findMarker=(q,j)=>{if(q._start===null||j===0||q._searchMarker===null)return null;const X=q._searchMarker.length===0?null:q._searchMarker.reduce((re,oe)=>abs(j-re.index)<abs(j-oe.index)?re:oe);let te=q._start,ne=0;for(X!==null&&(te=X.p,ne=X.index,refreshMarkerTimestamp(X));te.right!==null&&ne<j;){if(!te.deleted&&te.countable){if(j<ne+te.length)break;ne+=te.length}te=te.right}for(;te.left!==null&&ne>j;)te=te.left,!te.deleted&&te.countable&&(ne-=te.length);for(;te.left!==null&&te.left.id.client===te.id.client&&te.left.id.clock+te.left.length===te.id.clock;)te=te.left,!te.deleted&&te.countable&&(ne-=te.length);return X!==null&&abs(X.index-ne)<te.parent.length/maxSearchMarker?(overwriteMarker(X,te,ne),X):markPosition(q._searchMarker,te,ne)},updateMarkerChanges=(q,j,X)=>{for(let te=q.length-1;te>=0;te--){const ne=q[te];if(X>0){let re=ne.p;for(re.marker=!1;re&&(re.deleted||!re.countable);)re=re.left,re&&!re.deleted&&re.countable&&(ne.index-=re.length);if(re===null||re.marker===!0){q.splice(te,1);continue}ne.p=re,re.marker=!0}(j<ne.index||X>0&&j===ne.index)&&(ne.index=max(j,ne.index+X))}},getTypeChildren=q=>{let j=q._start;const X=[];for(;j;)X.push(j),j=j.right;return X},callTypeObservers=(q,j,X)=>{const te=q,ne=j.changedParentTypes;for(;setIfUndefined(ne,q,()=>[]).push(X),q._item!==null;)q=q._item.parent;callEventHandlerListeners(te._eH,X,j)};class AbstractType{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=createEventHandler(),this._dEH=createEventHandler(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(j,X){this.doc=j,this._item=X}_copy(){throw methodUnimplemented()}clone(){throw methodUnimplemented()}_write(j){}get _first(){let j=this._start;for(;j!==null&&j.deleted;)j=j.right;return j}_callObserver(j,X){!j.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(j){addEventHandlerListener(this._eH,j)}observeDeep(j){addEventHandlerListener(this._dEH,j)}unobserve(j){removeEventHandlerListener(this._eH,j)}unobserveDeep(j){removeEventHandlerListener(this._dEH,j)}toJSON(){}}const typeListSlice=(q,j,X)=>{j<0&&(j=q._length+j),X<0&&(X=q._length+X);let te=X-j;const ne=[];let re=q._start;for(;re!==null&&te>0;){if(re.countable&&!re.deleted){const oe=re.content.getContent();if(oe.length<=j)j-=oe.length;else{for(let le=j;le<oe.length&&te>0;le++)ne.push(oe[le]),te--;j=0}}re=re.right}return ne},typeListToArray=q=>{const j=[];let X=q._start;for(;X!==null;){if(X.countable&&!X.deleted){const te=X.content.getContent();for(let ne=0;ne<te.length;ne++)j.push(te[ne])}X=X.right}return j},typeListToArraySnapshot=(q,j)=>{const X=[];let te=q._start;for(;te!==null;){if(te.countable&&isVisible(te,j)){const ne=te.content.getContent();for(let re=0;re<ne.length;re++)X.push(ne[re])}te=te.right}return X},typeListForEach=(q,j)=>{let X=0,te=q._start;for(;te!==null;){if(te.countable&&!te.deleted){const ne=te.content.getContent();for(let re=0;re<ne.length;re++)j(ne[re],X++,q)}te=te.right}},typeListMap=(q,j)=>{const X=[];return typeListForEach(q,(te,ne)=>{X.push(j(te,ne,q))}),X},typeListCreateIterator=q=>{let j=q._start,X=null,te=0;return{[Symbol.iterator](){return this},next:()=>{if(X===null){for(;j!==null&&j.deleted;)j=j.right;if(j===null)return{done:!0,value:void 0};X=j.content.getContent(),te=0,j=j.right}const ne=X[te++];return X.length<=te&&(X=null),{done:!1,value:ne}}}},typeListGet=(q,j)=>{const X=findMarker(q,j);let te=q._start;for(X!==null&&(te=X.p,j-=X.index);te!==null;te=te.right)if(!te.deleted&&te.countable){if(j<te.length)return te.content.getContent()[j];j-=te.length}},typeListInsertGenericsAfter=(q,j,X,te)=>{let ne=X;const re=q.doc,oe=re.clientID,le=re.store,fe=X===null?j._start:X.right;let we=[];const ke=()=>{we.length>0&&(ne=new Item(createID(oe,getState(le,oe)),ne,ne&&ne.lastId,fe,fe&&fe.id,j,null,new ContentAny(we)),ne.integrate(q,0),we=[])};te.forEach(ye=>{if(ye===null)we.push(ye);else switch(ye.constructor){case Number:case Object:case Boolean:case Array:case String:we.push(ye);break;default:switch(ke(),ye.constructor){case Uint8Array:case ArrayBuffer:ne=new Item(createID(oe,getState(le,oe)),ne,ne&&ne.lastId,fe,fe&&fe.id,j,null,new ContentBinary(new Uint8Array(ye))),ne.integrate(q,0);break;case Doc:ne=new Item(createID(oe,getState(le,oe)),ne,ne&&ne.lastId,fe,fe&&fe.id,j,null,new ContentDoc(ye)),ne.integrate(q,0);break;default:if(ye instanceof AbstractType)ne=new Item(createID(oe,getState(le,oe)),ne,ne&&ne.lastId,fe,fe&&fe.id,j,null,new ContentType(ye)),ne.integrate(q,0);else throw new Error("Unexpected content type in insert operation")}}}),ke()},lengthExceeded=create$4("Length exceeded!"),typeListInsertGenerics=(q,j,X,te)=>{if(X>j._length)throw lengthExceeded;if(X===0)return j._searchMarker&&updateMarkerChanges(j._searchMarker,X,te.length),typeListInsertGenericsAfter(q,j,null,te);const ne=X,re=findMarker(j,X);let oe=j._start;for(re!==null&&(oe=re.p,X-=re.index,X===0&&(oe=oe.prev,X+=oe&&oe.countable&&!oe.deleted?oe.length:0));oe!==null;oe=oe.right)if(!oe.deleted&&oe.countable){if(X<=oe.length){X<oe.length&&getItemCleanStart(q,createID(oe.id.client,oe.id.clock+X));break}X-=oe.length}return j._searchMarker&&updateMarkerChanges(j._searchMarker,ne,te.length),typeListInsertGenericsAfter(q,j,oe,te)},typeListPushGenerics=(q,j,X)=>{let ne=(j._searchMarker||[]).reduce((re,oe)=>oe.index>re.index?oe:re,{index:0,p:j._start}).p;if(ne)for(;ne.right;)ne=ne.right;return typeListInsertGenericsAfter(q,j,ne,X)},typeListDelete=(q,j,X,te)=>{if(te===0)return;const ne=X,re=te,oe=findMarker(j,X);let le=j._start;for(oe!==null&&(le=oe.p,X-=oe.index);le!==null&&X>0;le=le.right)!le.deleted&&le.countable&&(X<le.length&&getItemCleanStart(q,createID(le.id.client,le.id.clock+X)),X-=le.length);for(;te>0&&le!==null;)le.deleted||(te<le.length&&getItemCleanStart(q,createID(le.id.client,le.id.clock+te)),le.delete(q),te-=le.length),le=le.right;if(te>0)throw lengthExceeded;j._searchMarker&&updateMarkerChanges(j._searchMarker,ne,-re+te)},typeMapDelete=(q,j,X)=>{const te=j._map.get(X);te!==void 0&&te.delete(q)},typeMapSet=(q,j,X,te)=>{const ne=j._map.get(X)||null,re=q.doc,oe=re.clientID;let le;if(te==null)le=new ContentAny([te]);else switch(te.constructor){case Number:case Object:case Boolean:case Array:case String:le=new ContentAny([te]);break;case Uint8Array:le=new ContentBinary(te);break;case Doc:le=new ContentDoc(te);break;default:if(te instanceof AbstractType)le=new ContentType(te);else throw new Error("Unexpected content type")}new Item(createID(oe,getState(re.store,oe)),ne,ne&&ne.lastId,null,null,j,X,le).integrate(q,0)},typeMapGet=(q,j)=>{const X=q._map.get(j);return X!==void 0&&!X.deleted?X.content.getContent()[X.length-1]:void 0},typeMapGetAll=q=>{const j={};return q._map.forEach((X,te)=>{X.deleted||(j[te]=X.content.getContent()[X.length-1])}),j},typeMapHas=(q,j)=>{const X=q._map.get(j);return X!==void 0&&!X.deleted},typeMapGetSnapshot=(q,j,X)=>{let te=q._map.get(j)||null;for(;te!==null&&(!X.sv.has(te.id.client)||te.id.clock>=(X.sv.get(te.id.client)||0));)te=te.left;return te!==null&&isVisible(te,X)?te.content.getContent()[te.length-1]:void 0},createMapIterator=q=>iteratorFilter(q.entries(),j=>!j[1].deleted);class YArrayEvent extends YEvent{constructor(j,X){super(j,X),this._transaction=X}}class YArray extends AbstractType{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(j){const X=new YArray;return X.push(j),X}_integrate(j,X){super._integrate(j,X),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new YArray}clone(){const j=new YArray;return j.insert(0,this.toArray().map(X=>X instanceof AbstractType?X.clone():X)),j}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(j,X){super._callObserver(j,X),callTypeObservers(this,j,new YArrayEvent(this,j))}insert(j,X){this.doc!==null?transact$1(this.doc,te=>{typeListInsertGenerics(te,this,j,X)}):this._prelimContent.splice(j,0,...X)}push(j){this.doc!==null?transact$1(this.doc,X=>{typeListPushGenerics(X,this,j)}):this._prelimContent.push(...j)}unshift(j){this.insert(0,j)}delete(j,X=1){this.doc!==null?transact$1(this.doc,te=>{typeListDelete(te,this,j,X)}):this._prelimContent.splice(j,X)}get(j){return typeListGet(this,j)}toArray(){return typeListToArray(this)}slice(j=0,X=this.length){return typeListSlice(this,j,X)}toJSON(){return this.map(j=>j instanceof AbstractType?j.toJSON():j)}map(j){return typeListMap(this,j)}forEach(j){typeListForEach(this,j)}[Symbol.iterator](){return typeListCreateIterator(this)}_write(j){j.writeTypeRef(YArrayRefID)}}const readYArray=q=>new YArray;class YMapEvent extends YEvent{constructor(j,X,te){super(j,X),this.keysChanged=te}}class YMap extends AbstractType{constructor(j){super(),this._prelimContent=null,j===void 0?this._prelimContent=new Map:this._prelimContent=new Map(j)}_integrate(j,X){super._integrate(j,X),this._prelimContent.forEach((te,ne)=>{this.set(ne,te)}),this._prelimContent=null}_copy(){return new YMap}clone(){const j=new YMap;return this.forEach((X,te)=>{j.set(te,X instanceof AbstractType?X.clone():X)}),j}_callObserver(j,X){callTypeObservers(this,j,new YMapEvent(this,j,X))}toJSON(){const j={};return this._map.forEach((X,te)=>{if(!X.deleted){const ne=X.content.getContent()[X.length-1];j[te]=ne instanceof AbstractType?ne.toJSON():ne}}),j}get size(){return[...createMapIterator(this._map)].length}keys(){return iteratorMap(createMapIterator(this._map),j=>j[0])}values(){return iteratorMap(createMapIterator(this._map),j=>j[1].content.getContent()[j[1].length-1])}entries(){return iteratorMap(createMapIterator(this._map),j=>[j[0],j[1].content.getContent()[j[1].length-1]])}forEach(j){this._map.forEach((X,te)=>{X.deleted||j(X.content.getContent()[X.length-1],te,this)})}[Symbol.iterator](){return this.entries()}delete(j){this.doc!==null?transact$1(this.doc,X=>{typeMapDelete(X,this,j)}):this._prelimContent.delete(j)}set(j,X){return this.doc!==null?transact$1(this.doc,te=>{typeMapSet(te,this,j,X)}):this._prelimContent.set(j,X),X}get(j){return typeMapGet(this,j)}has(j){return typeMapHas(this,j)}clear(){this.doc!==null?transact$1(this.doc,j=>{this.forEach(function(X,te,ne){typeMapDelete(j,ne,te)})}):this._prelimContent.clear()}_write(j){j.writeTypeRef(YMapRefID)}}const readYMap=q=>new YMap,equalAttrs=(q,j)=>q===j||typeof q=="object"&&typeof j=="object"&&q&&j&&equalFlat(q,j);class ItemTextListPosition{constructor(j,X,te,ne){this.left=j,this.right=X,this.index=te,this.currentAttributes=ne}forward(){switch(this.right===null&&unexpectedCase(),this.right.content.constructor){case ContentFormat:this.right.deleted||updateCurrentAttributes(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const findNextPosition=(q,j,X)=>{for(;j.right!==null&&X>0;){switch(j.right.content.constructor){case ContentFormat:j.right.deleted||updateCurrentAttributes(j.currentAttributes,j.right.content);break;default:j.right.deleted||(X<j.right.length&&getItemCleanStart(q,createID(j.right.id.client,j.right.id.clock+X)),j.index+=j.right.length,X-=j.right.length);break}j.left=j.right,j.right=j.right.right}return j},findPosition=(q,j,X)=>{const te=new Map,ne=findMarker(j,X);if(ne){const re=new ItemTextListPosition(ne.p.left,ne.p,ne.index,te);return findNextPosition(q,re,X-ne.index)}else{const re=new ItemTextListPosition(null,j._start,0,te);return findNextPosition(q,re,X)}},insertNegatedAttributes=(q,j,X,te)=>{for(;X.right!==null&&(X.right.deleted===!0||X.right.content.constructor===ContentFormat&&equalAttrs(te.get(X.right.content.key),X.right.content.value));)X.right.deleted||te.delete(X.right.content.key),X.forward();const ne=q.doc,re=ne.clientID;te.forEach((oe,le)=>{const fe=X.left,we=X.right,ke=new Item(createID(re,getState(ne.store,re)),fe,fe&&fe.lastId,we,we&&we.id,j,null,new ContentFormat(le,oe));ke.integrate(q,0),X.right=ke,X.forward()})},updateCurrentAttributes=(q,j)=>{const{key:X,value:te}=j;te===null?q.delete(X):q.set(X,te)},minimizeAttributeChanges=(q,j)=>{for(;q.right!==null;){if(!(q.right.deleted||q.right.content.constructor===ContentFormat&&equalAttrs(j[q.right.content.key]||null,q.right.content.value)))break;q.forward()}},insertAttributes=(q,j,X,te)=>{const ne=q.doc,re=ne.clientID,oe=new Map;for(const le in te){const fe=te[le],we=X.currentAttributes.get(le)||null;if(!equalAttrs(we,fe)){oe.set(le,we);const{left:ke,right:ye}=X;X.right=new Item(createID(re,getState(ne.store,re)),ke,ke&&ke.lastId,ye,ye&&ye.id,j,null,new ContentFormat(le,fe)),X.right.integrate(q,0),X.forward()}}return oe},insertText=(q,j,X,te,ne)=>{X.currentAttributes.forEach((ve,be)=>{ne[be]===void 0&&(ne[be]=null)});const re=q.doc,oe=re.clientID;minimizeAttributeChanges(X,ne);const le=insertAttributes(q,j,X,ne),fe=te.constructor===String?new ContentString(te):te instanceof AbstractType?new ContentType(te):new ContentEmbed(te);let{left:we,right:ke,index:ye}=X;j._searchMarker&&updateMarkerChanges(j._searchMarker,X.index,fe.getLength()),ke=new Item(createID(oe,getState(re.store,oe)),we,we&&we.lastId,ke,ke&&ke.id,j,null,fe),ke.integrate(q,0),X.right=ke,X.index=ye,X.forward(),insertNegatedAttributes(q,j,X,le)},formatText=(q,j,X,te,ne)=>{const re=q.doc,oe=re.clientID;minimizeAttributeChanges(X,ne);const le=insertAttributes(q,j,X,ne);e:for(;X.right!==null&&(te>0||le.size>0&&(X.right.deleted||X.right.content.constructor===ContentFormat));){if(!X.right.deleted)switch(X.right.content.constructor){case ContentFormat:{const{key:fe,value:we}=X.right.content,ke=ne[fe];if(ke!==void 0){if(equalAttrs(ke,we))le.delete(fe);else{if(te===0)break e;le.set(fe,we)}X.right.delete(q)}else X.currentAttributes.set(fe,we);break}default:te<X.right.length&&getItemCleanStart(q,createID(X.right.id.client,X.right.id.clock+te)),te-=X.right.length;break}X.forward()}if(te>0){let fe="";for(;te>0;te--)fe+=`
`;X.right=new Item(createID(oe,getState(re.store,oe)),X.left,X.left&&X.left.lastId,X.right,X.right&&X.right.id,j,null,new ContentString(fe)),X.right.integrate(q,0),X.forward()}insertNegatedAttributes(q,j,X,le)},cleanupFormattingGap=(q,j,X,te,ne)=>{let re=X;const oe=copy(ne);for(;re&&(!re.countable||re.deleted);)!re.deleted&&re.content.constructor===ContentFormat&&updateCurrentAttributes(oe,re.content),re=re.right;let le=0,fe=!1;for(;j!==re;){if(X===j&&(fe=!0),!j.deleted){const we=j.content;switch(we.constructor){case ContentFormat:{const{key:ke,value:ye}=we;((oe.get(ke)||null)!==ye||(te.get(ke)||null)===ye)&&(j.delete(q),le++,!fe&&(ne.get(ke)||null)===ye&&(te.get(ke)||null)!==ye&&ne.delete(ke));break}}}j=j.right}return le},cleanupContextlessFormattingGap=(q,j)=>{for(;j&&j.right&&(j.right.deleted||!j.right.countable);)j=j.right;const X=new Set;for(;j&&(j.deleted||!j.countable);){if(!j.deleted&&j.content.constructor===ContentFormat){const te=j.content.key;X.has(te)?j.delete(q):X.add(te)}j=j.left}},cleanupYTextFormatting=q=>{let j=0;return transact$1(q.doc,X=>{let te=q._start,ne=q._start,re=create$5();const oe=copy(re);for(;ne;){if(ne.deleted===!1)switch(ne.content.constructor){case ContentFormat:updateCurrentAttributes(oe,ne.content);break;default:j+=cleanupFormattingGap(X,te,ne,re,oe),re=copy(oe),te=ne;break}ne=ne.right}}),j},deleteText=(q,j,X)=>{const te=X,ne=copy(j.currentAttributes),re=j.right;for(;X>0&&j.right!==null;){if(j.right.deleted===!1)switch(j.right.content.constructor){case ContentType:case ContentEmbed:case ContentString:X<j.right.length&&getItemCleanStart(q,createID(j.right.id.client,j.right.id.clock+X)),X-=j.right.length,j.right.delete(q);break}j.forward()}re&&cleanupFormattingGap(q,re,j.right,ne,j.currentAttributes);const oe=(j.left||j.right).parent;return oe._searchMarker&&updateMarkerChanges(oe._searchMarker,j.index,-te+X),j};class YTextEvent extends YEvent{constructor(j,X,te){super(j,X),this.childListChanged=!1,this.keysChanged=new Set,te.forEach(ne=>{ne===null?this.childListChanged=!0:this.keysChanged.add(ne)})}get changes(){if(this._changes===null){const j={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=j}return this._changes}get delta(){if(this._delta===null){const j=this.target.doc,X=[];transact$1(j,te=>{const ne=new Map,re=new Map;let oe=this.target._start,le=null;const fe={};let we="",ke=0,ye=0;const ve=()=>{if(le!==null){let be;switch(le){case"delete":be={delete:ye},ye=0;break;case"insert":be={insert:we},ne.size>0&&(be.attributes={},ne.forEach((Ce,Ee)=>{Ce!==null&&(be.attributes[Ee]=Ce)})),we="";break;case"retain":if(be={retain:ke},Object.keys(fe).length>0){be.attributes={};for(const Ce in fe)be.attributes[Ce]=fe[Ce]}ke=0;break}X.push(be),le=null}};for(;oe!==null;){switch(oe.content.constructor){case ContentType:case ContentEmbed:this.adds(oe)?this.deletes(oe)||(ve(),le="insert",we=oe.content.getContent()[0],ve()):this.deletes(oe)?(le!=="delete"&&(ve(),le="delete"),ye+=1):oe.deleted||(le!=="retain"&&(ve(),le="retain"),ke+=1);break;case ContentString:this.adds(oe)?this.deletes(oe)||(le!=="insert"&&(ve(),le="insert"),we+=oe.content.str):this.deletes(oe)?(le!=="delete"&&(ve(),le="delete"),ye+=oe.length):oe.deleted||(le!=="retain"&&(ve(),le="retain"),ke+=oe.length);break;case ContentFormat:{const{key:be,value:Ce}=oe.content;if(this.adds(oe)){if(!this.deletes(oe)){const Ee=ne.get(be)||null;equalAttrs(Ee,Ce)?Ce!==null&&oe.delete(te):(le==="retain"&&ve(),equalAttrs(Ce,re.get(be)||null)?delete fe[be]:fe[be]=Ce)}}else if(this.deletes(oe)){re.set(be,Ce);const Ee=ne.get(be)||null;equalAttrs(Ee,Ce)||(le==="retain"&&ve(),fe[be]=Ee)}else if(!oe.deleted){re.set(be,Ce);const Ee=fe[be];Ee!==void 0&&(equalAttrs(Ee,Ce)?Ee!==null&&oe.delete(te):(le==="retain"&&ve(),Ce===null?delete fe[be]:fe[be]=Ce))}oe.deleted||(le==="insert"&&ve(),updateCurrentAttributes(ne,oe.content));break}}oe=oe.right}for(ve();X.length>0;){const be=X[X.length-1];if(be.retain!==void 0&&be.attributes===void 0)X.pop();else break}}),this._delta=X}return this._delta}}class YText extends AbstractType{constructor(j){super(),this._pending=j!==void 0?[()=>this.insert(0,j)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(j,X){super._integrate(j,X);try{this._pending.forEach(te=>te())}catch(te){console.error(te)}this._pending=null}_copy(){return new YText}clone(){const j=new YText;return j.applyDelta(this.toDelta()),j}_callObserver(j,X){super._callObserver(j,X);const te=new YTextEvent(this,j,X),ne=j.doc;if(callTypeObservers(this,j,te),!j.local){let re=!1;for(const[oe,le]of j.afterState.entries()){const fe=j.beforeState.get(oe)||0;if(le!==fe&&(iterateStructs(j,ne.store.clients.get(oe),fe,le,we=>{!we.deleted&&we.content.constructor===ContentFormat&&(re=!0)}),re))break}re||iterateDeletedStructs(j,j.deleteSet,oe=>{oe instanceof GC||re||oe.parent===this&&oe.content.constructor===ContentFormat&&(re=!0)}),transact$1(ne,oe=>{re?cleanupYTextFormatting(this):iterateDeletedStructs(oe,oe.deleteSet,le=>{le instanceof GC||le.parent===this&&cleanupContextlessFormattingGap(oe,le)})})}}toString(){let j="",X=this._start;for(;X!==null;)!X.deleted&&X.countable&&X.content.constructor===ContentString&&(j+=X.content.str),X=X.right;return j}toJSON(){return this.toString()}applyDelta(j,{sanitize:X=!0}={}){this.doc!==null?transact$1(this.doc,te=>{const ne=new ItemTextListPosition(null,this._start,0,new Map);for(let re=0;re<j.length;re++){const oe=j[re];if(oe.insert!==void 0){const le=!X&&typeof oe.insert=="string"&&re===j.length-1&&ne.right===null&&oe.insert.slice(-1)===`
`?oe.insert.slice(0,-1):oe.insert;(typeof le!="string"||le.length>0)&&insertText(te,this,ne,le,oe.attributes||{})}else oe.retain!==void 0?formatText(te,this,ne,oe.retain,oe.attributes||{}):oe.delete!==void 0&&deleteText(te,ne,oe.delete)}}):this._pending.push(()=>this.applyDelta(j))}toDelta(j,X,te){const ne=[],re=new Map,oe=this.doc;let le="",fe=this._start;function we(){if(le.length>0){const ke={};let ye=!1;re.forEach((be,Ce)=>{ye=!0,ke[Ce]=be});const ve={insert:le};ye&&(ve.attributes=ke),ne.push(ve),le=""}}return transact$1(oe,ke=>{for(j&&splitSnapshotAffectedStructs(ke,j),X&&splitSnapshotAffectedStructs(ke,X);fe!==null;){if(isVisible(fe,j)||X!==void 0&&isVisible(fe,X))switch(fe.content.constructor){case ContentString:{const ye=re.get("ychange");j!==void 0&&!isVisible(fe,j)?(ye===void 0||ye.user!==fe.id.client||ye.type!=="removed")&&(we(),re.set("ychange",te?te("removed",fe.id):{type:"removed"})):X!==void 0&&!isVisible(fe,X)?(ye===void 0||ye.user!==fe.id.client||ye.type!=="added")&&(we(),re.set("ychange",te?te("added",fe.id):{type:"added"})):ye!==void 0&&(we(),re.delete("ychange")),le+=fe.content.str;break}case ContentType:case ContentEmbed:{we();const ye={insert:fe.content.getContent()[0]};if(re.size>0){const ve={};ye.attributes=ve,re.forEach((be,Ce)=>{ve[Ce]=be})}ne.push(ye);break}case ContentFormat:isVisible(fe,j)&&(we(),updateCurrentAttributes(re,fe.content));break}fe=fe.right}we()},"cleanup"),ne}insert(j,X,te){if(X.length<=0)return;const ne=this.doc;ne!==null?transact$1(ne,re=>{const oe=findPosition(re,this,j);te||(te={},oe.currentAttributes.forEach((le,fe)=>{te[fe]=le})),insertText(re,this,oe,X,te)}):this._pending.push(()=>this.insert(j,X,te))}insertEmbed(j,X,te={}){const ne=this.doc;ne!==null?transact$1(ne,re=>{const oe=findPosition(re,this,j);insertText(re,this,oe,X,te)}):this._pending.push(()=>this.insertEmbed(j,X,te))}delete(j,X){if(X===0)return;const te=this.doc;te!==null?transact$1(te,ne=>{deleteText(ne,findPosition(ne,this,j),X)}):this._pending.push(()=>this.delete(j,X))}format(j,X,te){if(X===0)return;const ne=this.doc;ne!==null?transact$1(ne,re=>{const oe=findPosition(re,this,j);oe.right!==null&&formatText(re,this,oe,X,te)}):this._pending.push(()=>this.format(j,X,te))}removeAttribute(j){this.doc!==null?transact$1(this.doc,X=>{typeMapDelete(X,this,j)}):this._pending.push(()=>this.removeAttribute(j))}setAttribute(j,X){this.doc!==null?transact$1(this.doc,te=>{typeMapSet(te,this,j,X)}):this._pending.push(()=>this.setAttribute(j,X))}getAttribute(j){return typeMapGet(this,j)}getAttributes(j){return typeMapGetAll(this)}_write(j){j.writeTypeRef(YTextRefID)}}const readYText=q=>new YText;class YXmlTreeWalker{constructor(j,X=()=>!0){this._filter=X,this._root=j,this._currentNode=j._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let j=this._currentNode,X=j&&j.content&&j.content.type;if(j!==null&&(!this._firstCall||j.deleted||!this._filter(X)))do if(X=j.content.type,!j.deleted&&(X.constructor===YXmlElement||X.constructor===YXmlFragment)&&X._start!==null)j=X._start;else for(;j!==null;)if(j.right!==null){j=j.right;break}else j.parent===this._root?j=null:j=j.parent._item;while(j!==null&&(j.deleted||!this._filter(j.content.type)));return this._firstCall=!1,j===null?{value:void 0,done:!0}:(this._currentNode=j,{value:j.content.type,done:!1})}}class YXmlFragment extends AbstractType{constructor(){super(),this._prelimContent=[]}get firstChild(){const j=this._first;return j?j.content.getContent()[0]:null}_integrate(j,X){super._integrate(j,X),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new YXmlFragment}clone(){const j=new YXmlFragment;return j.insert(0,this.toArray().map(X=>X instanceof AbstractType?X.clone():X)),j}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(j){return new YXmlTreeWalker(this,j)}querySelector(j){j=j.toUpperCase();const te=new YXmlTreeWalker(this,ne=>ne.nodeName&&ne.nodeName.toUpperCase()===j).next();return te.done?null:te.value}querySelectorAll(j){return j=j.toUpperCase(),Array.from(new YXmlTreeWalker(this,X=>X.nodeName&&X.nodeName.toUpperCase()===j))}_callObserver(j,X){callTypeObservers(this,j,new YXmlEvent(this,X,j))}toString(){return typeListMap(this,j=>j.toString()).join("")}toJSON(){return this.toString()}toDOM(j=document,X={},te){const ne=j.createDocumentFragment();return te!==void 0&&te._createAssociation(ne,this),typeListForEach(this,re=>{ne.insertBefore(re.toDOM(j,X,te),null)}),ne}insert(j,X){this.doc!==null?transact$1(this.doc,te=>{typeListInsertGenerics(te,this,j,X)}):this._prelimContent.splice(j,0,...X)}insertAfter(j,X){if(this.doc!==null)transact$1(this.doc,te=>{const ne=j&&j instanceof AbstractType?j._item:j;typeListInsertGenericsAfter(te,this,ne,X)});else{const te=this._prelimContent,ne=j===null?0:te.findIndex(re=>re===j)+1;if(ne===0&&j!==null)throw create$4("Reference item not found");te.splice(ne,0,...X)}}delete(j,X=1){this.doc!==null?transact$1(this.doc,te=>{typeListDelete(te,this,j,X)}):this._prelimContent.splice(j,X)}toArray(){return typeListToArray(this)}push(j){this.insert(this.length,j)}unshift(j){this.insert(0,j)}get(j){return typeListGet(this,j)}slice(j=0,X=this.length){return typeListSlice(this,j,X)}forEach(j){typeListForEach(this,j)}_write(j){j.writeTypeRef(YXmlFragmentRefID)}}const readYXmlFragment=q=>new YXmlFragment;class YXmlElement extends YXmlFragment{constructor(j="UNDEFINED"){super(),this.nodeName=j,this._prelimAttrs=new Map}get nextSibling(){const j=this._item?this._item.next:null;return j?j.content.type:null}get prevSibling(){const j=this._item?this._item.prev:null;return j?j.content.type:null}_integrate(j,X){super._integrate(j,X),this._prelimAttrs.forEach((te,ne)=>{this.setAttribute(ne,te)}),this._prelimAttrs=null}_copy(){return new YXmlElement(this.nodeName)}clone(){const j=new YXmlElement(this.nodeName),X=this.getAttributes();for(const te in X)j.setAttribute(te,X[te]);return j.insert(0,this.toArray().map(te=>te instanceof AbstractType?te.clone():te)),j}toString(){const j=this.getAttributes(),X=[],te=[];for(const le in j)te.push(le);te.sort();const ne=te.length;for(let le=0;le<ne;le++){const fe=te[le];X.push(fe+'="'+j[fe]+'"')}const re=this.nodeName.toLocaleLowerCase(),oe=X.length>0?" "+X.join(" "):"";return`<${re}${oe}>${super.toString()}</${re}>`}removeAttribute(j){this.doc!==null?transact$1(this.doc,X=>{typeMapDelete(X,this,j)}):this._prelimAttrs.delete(j)}setAttribute(j,X){this.doc!==null?transact$1(this.doc,te=>{typeMapSet(te,this,j,X)}):this._prelimAttrs.set(j,X)}getAttribute(j){return typeMapGet(this,j)}hasAttribute(j){return typeMapHas(this,j)}getAttributes(){return typeMapGetAll(this)}toDOM(j=document,X={},te){const ne=j.createElement(this.nodeName),re=this.getAttributes();for(const oe in re)ne.setAttribute(oe,re[oe]);return typeListForEach(this,oe=>{ne.appendChild(oe.toDOM(j,X,te))}),te!==void 0&&te._createAssociation(ne,this),ne}_write(j){j.writeTypeRef(YXmlElementRefID),j.writeKey(this.nodeName)}}const readYXmlElement=q=>new YXmlElement(q.readKey());class YXmlEvent extends YEvent{constructor(j,X,te){super(j,te),this.childListChanged=!1,this.attributesChanged=new Set,X.forEach(ne=>{ne===null?this.childListChanged=!0:this.attributesChanged.add(ne)})}}class YXmlHook extends YMap{constructor(j){super(),this.hookName=j}_copy(){return new YXmlHook(this.hookName)}clone(){const j=new YXmlHook(this.hookName);return this.forEach((X,te)=>{j.set(te,X)}),j}toDOM(j=document,X={},te){const ne=X[this.hookName];let re;return ne!==void 0?re=ne.createDom(this):re=document.createElement(this.hookName),re.setAttribute("data-yjs-hook",this.hookName),te!==void 0&&te._createAssociation(re,this),re}_write(j){j.writeTypeRef(YXmlHookRefID),j.writeKey(this.hookName)}}const readYXmlHook=q=>new YXmlHook(q.readKey());class YXmlText extends YText{get nextSibling(){const j=this._item?this._item.next:null;return j?j.content.type:null}get prevSibling(){const j=this._item?this._item.prev:null;return j?j.content.type:null}_copy(){return new YXmlText}clone(){const j=new YXmlText;return j.applyDelta(this.toDelta()),j}toDOM(j=document,X,te){const ne=j.createTextNode(this.toString());return te!==void 0&&te._createAssociation(ne,this),ne}toString(){return this.toDelta().map(j=>{const X=[];for(const ne in j.attributes){const re=[];for(const oe in j.attributes[ne])re.push({key:oe,value:j.attributes[ne][oe]});re.sort((oe,le)=>oe.key<le.key?-1:1),X.push({nodeName:ne,attrs:re})}X.sort((ne,re)=>ne.nodeName<re.nodeName?-1:1);let te="";for(let ne=0;ne<X.length;ne++){const re=X[ne];te+=`<${re.nodeName}`;for(let oe=0;oe<re.attrs.length;oe++){const le=re.attrs[oe];te+=` ${le.key}="${le.value}"`}te+=">"}te+=j.insert;for(let ne=X.length-1;ne>=0;ne--)te+=`</${X[ne].nodeName}>`;return te}).join("")}toJSON(){return this.toString()}_write(j){j.writeTypeRef(YXmlTextRefID)}}const readYXmlText=q=>new YXmlText;class AbstractStruct{constructor(j,X){this.id=j,this.length=X}get deleted(){throw methodUnimplemented()}mergeWith(j){return!1}write(j,X,te){throw methodUnimplemented()}integrate(j,X){throw methodUnimplemented()}}const structGCRefNumber=0;class GC extends AbstractStruct{get deleted(){return!0}delete(){}mergeWith(j){return this.constructor!==j.constructor?!1:(this.length+=j.length,!0)}integrate(j,X){X>0&&(this.id.clock+=X,this.length-=X),addStruct(j.doc.store,this)}write(j,X){j.writeInfo(structGCRefNumber),j.writeLen(this.length-X)}getMissing(j,X){return null}}class ContentBinary{constructor(j){this.content=j}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ContentBinary(this.content)}splice(j){throw methodUnimplemented()}mergeWith(j){return!1}integrate(j,X){}delete(j){}gc(j){}write(j,X){j.writeBuf(this.content)}getRef(){return 3}}const readContentBinary=q=>new ContentBinary(q.readBuf());class ContentDeleted{constructor(j){this.len=j}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ContentDeleted(this.len)}splice(j){const X=new ContentDeleted(this.len-j);return this.len=j,X}mergeWith(j){return this.len+=j.len,!0}integrate(j,X){addToDeleteSet(j.deleteSet,X.id.client,X.id.clock,this.len),X.markDeleted()}delete(j){}gc(j){}write(j,X){j.writeLen(this.len-X)}getRef(){return 1}}const readContentDeleted=q=>new ContentDeleted(q.readLen()),createDocFromOpts=(q,j)=>new Doc({guid:q,...j,shouldLoad:j.shouldLoad||j.autoLoad||!1});class ContentDoc{constructor(j){j._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=j;const X={};this.opts=X,j.gc||(X.gc=!1),j.autoLoad&&(X.autoLoad=!0),j.meta!==null&&(X.meta=j.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ContentDoc(createDocFromOpts(this.doc.guid,this.opts))}splice(j){throw methodUnimplemented()}mergeWith(j){return!1}integrate(j,X){this.doc._item=X,j.subdocsAdded.add(this.doc),this.doc.shouldLoad&&j.subdocsLoaded.add(this.doc)}delete(j){j.subdocsAdded.has(this.doc)?j.subdocsAdded.delete(this.doc):j.subdocsRemoved.add(this.doc)}gc(j){}write(j,X){j.writeString(this.doc.guid),j.writeAny(this.opts)}getRef(){return 9}}const readContentDoc=q=>new ContentDoc(createDocFromOpts(q.readString(),q.readAny()));class ContentEmbed{constructor(j){this.embed=j}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ContentEmbed(this.embed)}splice(j){throw methodUnimplemented()}mergeWith(j){return!1}integrate(j,X){}delete(j){}gc(j){}write(j,X){j.writeJSON(this.embed)}getRef(){return 5}}const readContentEmbed=q=>new ContentEmbed(q.readJSON());class ContentFormat{constructor(j,X){this.key=j,this.value=X}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ContentFormat(this.key,this.value)}splice(j){throw methodUnimplemented()}mergeWith(j){return!1}integrate(j,X){X.parent._searchMarker=null}delete(j){}gc(j){}write(j,X){j.writeKey(this.key),j.writeJSON(this.value)}getRef(){return 6}}const readContentFormat=q=>new ContentFormat(q.readKey(),q.readJSON());class ContentJSON{constructor(j){this.arr=j}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ContentJSON(this.arr)}splice(j){const X=new ContentJSON(this.arr.slice(j));return this.arr=this.arr.slice(0,j),X}mergeWith(j){return this.arr=this.arr.concat(j.arr),!0}integrate(j,X){}delete(j){}gc(j){}write(j,X){const te=this.arr.length;j.writeLen(te-X);for(let ne=X;ne<te;ne++){const re=this.arr[ne];j.writeString(re===void 0?"undefined":JSON.stringify(re))}}getRef(){return 2}}const readContentJSON=q=>{const j=q.readLen(),X=[];for(let te=0;te<j;te++){const ne=q.readString();ne==="undefined"?X.push(void 0):X.push(JSON.parse(ne))}return new ContentJSON(X)};class ContentAny{constructor(j){this.arr=j}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ContentAny(this.arr)}splice(j){const X=new ContentAny(this.arr.slice(j));return this.arr=this.arr.slice(0,j),X}mergeWith(j){return this.arr=this.arr.concat(j.arr),!0}integrate(j,X){}delete(j){}gc(j){}write(j,X){const te=this.arr.length;j.writeLen(te-X);for(let ne=X;ne<te;ne++){const re=this.arr[ne];j.writeAny(re)}}getRef(){return 8}}const readContentAny=q=>{const j=q.readLen(),X=[];for(let te=0;te<j;te++)X.push(q.readAny());return new ContentAny(X)};class ContentString{constructor(j){this.str=j}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ContentString(this.str)}splice(j){const X=new ContentString(this.str.slice(j));this.str=this.str.slice(0,j);const te=this.str.charCodeAt(j-1);return te>=55296&&te<=56319&&(this.str=this.str.slice(0,j-1)+"�",X.str="�"+X.str.slice(1)),X}mergeWith(j){return this.str+=j.str,!0}integrate(j,X){}delete(j){}gc(j){}write(j,X){j.writeString(X===0?this.str:this.str.slice(X))}getRef(){return 4}}const readContentString=q=>new ContentString(q.readString()),typeRefs=[readYArray,readYMap,readYText,readYXmlElement,readYXmlFragment,readYXmlHook,readYXmlText],YArrayRefID=0,YMapRefID=1,YTextRefID=2,YXmlElementRefID=3,YXmlFragmentRefID=4,YXmlHookRefID=5,YXmlTextRefID=6;class ContentType{constructor(j){this.type=j}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ContentType(this.type._copy())}splice(j){throw methodUnimplemented()}mergeWith(j){return!1}integrate(j,X){this.type._integrate(j.doc,X)}delete(j){let X=this.type._start;for(;X!==null;)X.deleted?j._mergeStructs.push(X):X.delete(j),X=X.right;this.type._map.forEach(te=>{te.deleted?j._mergeStructs.push(te):te.delete(j)}),j.changed.delete(this.type)}gc(j){let X=this.type._start;for(;X!==null;)X.gc(j,!0),X=X.right;this.type._start=null,this.type._map.forEach(te=>{for(;te!==null;)te.gc(j,!0),te=te.left}),this.type._map=new Map}write(j,X){this.type._write(j)}getRef(){return 7}}const readContentType=q=>new ContentType(typeRefs[q.readTypeRef()](q)),followRedone=(q,j)=>{let X=j,te=0,ne;do te>0&&(X=createID(X.client,X.clock+te)),ne=getItem(q,X),te=X.clock-ne.id.clock,X=ne.redone;while(X!==null&&ne instanceof Item);return{item:ne,diff:te}},keepItem=(q,j)=>{for(;q!==null&&q.keep!==j;)q.keep=j,q=q.parent._item},splitItem=(q,j,X)=>{const{client:te,clock:ne}=j.id,re=new Item(createID(te,ne+X),j,createID(te,ne+X-1),j.right,j.rightOrigin,j.parent,j.parentSub,j.content.splice(X));return j.deleted&&re.markDeleted(),j.keep&&(re.keep=!0),j.redone!==null&&(re.redone=createID(j.redone.client,j.redone.clock+X)),j.right=re,re.right!==null&&(re.right.left=re),q._mergeStructs.push(re),re.parentSub!==null&&re.right===null&&re.parent._map.set(re.parentSub,re),j.length=X,re},redoItem=(q,j,X,te,ne)=>{const re=q.doc,oe=re.store,le=re.clientID,fe=j.redone;if(fe!==null)return getItemCleanStart(q,fe);let we=j.parent._item,ke=null,ye;if(we!==null&&we.deleted===!0){if(we.redone===null&&(!X.has(we)||redoItem(q,we,X,te,ne)===null))return null;for(;we.redone!==null;)we=getItemCleanStart(q,we.redone)}const ve=we===null?j.parent:we.content.type;if(j.parentSub===null){for(ke=j.left,ye=j;ke!==null;){let Oe=ke;for(;Oe!==null&&Oe.parent._item!==we;)Oe=Oe.redone===null?null:getItemCleanStart(q,Oe.redone);if(Oe!==null&&Oe.parent._item===we){ke=Oe;break}ke=ke.left}for(;ye!==null;){let Oe=ye;for(;Oe!==null&&Oe.parent._item!==we;)Oe=Oe.redone===null?null:getItemCleanStart(q,Oe.redone);if(Oe!==null&&Oe.parent._item===we){ye=Oe;break}ye=ye.right}}else if(ye=null,j.right&&!ne){for(ke=j;ke!==null&&ke.right!==null&&isDeleted(te,ke.right.id);)ke=ke.right;for(;ke!==null&&ke.redone!==null;)ke=getItemCleanStart(q,ke.redone);if(ke&&ke.right!==null)return null}else ke=ve._map.get(j.parentSub)||null;const be=getState(oe,le),Ce=createID(le,be),Ee=new Item(Ce,ke,ke&&ke.lastId,ye,ye&&ye.id,ve,j.parentSub,j.content.copy());return j.redone=Ce,keepItem(Ee,!0),Ee.integrate(q,0),Ee};class Item extends AbstractStruct{constructor(j,X,te,ne,re,oe,le,fe){super(j,fe.getLength()),this.origin=te,this.left=X,this.right=ne,this.rightOrigin=re,this.parent=oe,this.parentSub=le,this.redone=null,this.content=fe,this.info=this.content.isCountable()?BIT2:0}set marker(j){(this.info&BIT4)>0!==j&&(this.info^=BIT4)}get marker(){return(this.info&BIT4)>0}get keep(){return(this.info&BIT1)>0}set keep(j){this.keep!==j&&(this.info^=BIT1)}get countable(){return(this.info&BIT2)>0}get deleted(){return(this.info&BIT3)>0}set deleted(j){this.deleted!==j&&(this.info^=BIT3)}markDeleted(){this.info|=BIT3}getMissing(j,X){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=getState(X,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=getState(X,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ID&&this.id.client!==this.parent.client&&this.parent.clock>=getState(X,this.parent.client))return this.parent.client;if(this.origin&&(this.left=getItemCleanEnd(j,X,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=getItemCleanStart(j,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===GC||this.right&&this.right.constructor===GC)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===Item&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Item&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===ID){const te=getItem(X,this.parent);te.constructor===GC?this.parent=null:this.parent=te.content.type}return null}integrate(j,X){if(X>0&&(this.id.clock+=X,this.left=getItemCleanEnd(j,j.doc.store,createID(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(X),this.length-=X),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let te=this.left,ne;if(te!==null)ne=te.right;else if(this.parentSub!==null)for(ne=this.parent._map.get(this.parentSub)||null;ne!==null&&ne.left!==null;)ne=ne.left;else ne=this.parent._start;const re=new Set,oe=new Set;for(;ne!==null&&ne!==this.right;){if(oe.add(ne),re.add(ne),compareIDs(this.origin,ne.origin)){if(ne.id.client<this.id.client)te=ne,re.clear();else if(compareIDs(this.rightOrigin,ne.rightOrigin))break}else if(ne.origin!==null&&oe.has(getItem(j.doc.store,ne.origin)))re.has(getItem(j.doc.store,ne.origin))||(te=ne,re.clear());else break;ne=ne.right}this.left=te}if(this.left!==null){const te=this.left.right;this.right=te,this.left.right=this}else{let te;if(this.parentSub!==null)for(te=this.parent._map.get(this.parentSub)||null;te!==null&&te.left!==null;)te=te.left;else te=this.parent._start,this.parent._start=this;this.right=te}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(j)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),addStruct(j.doc.store,this),this.content.integrate(j,this),addChangedTypeToTransaction(j,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(j)}else new GC(this.id,this.length).integrate(j,0)}get next(){let j=this.right;for(;j!==null&&j.deleted;)j=j.right;return j}get prev(){let j=this.left;for(;j!==null&&j.deleted;)j=j.left;return j}get lastId(){return this.length===1?this.id:createID(this.id.client,this.id.clock+this.length-1)}mergeWith(j){if(this.constructor===j.constructor&&compareIDs(j.origin,this.lastId)&&this.right===j&&compareIDs(this.rightOrigin,j.rightOrigin)&&this.id.client===j.id.client&&this.id.clock+this.length===j.id.clock&&this.deleted===j.deleted&&this.redone===null&&j.redone===null&&this.content.constructor===j.content.constructor&&this.content.mergeWith(j.content)){const X=this.parent._searchMarker;return X&&X.forEach(te=>{te.p===j&&(te.p=this,!this.deleted&&this.countable&&(te.index-=this.length))}),j.keep&&(this.keep=!0),this.right=j.right,this.right!==null&&(this.right.left=this),this.length+=j.length,!0}return!1}delete(j){if(!this.deleted){const X=this.parent;this.countable&&this.parentSub===null&&(X._length-=this.length),this.markDeleted(),addToDeleteSet(j.deleteSet,this.id.client,this.id.clock,this.length),addChangedTypeToTransaction(j,X,this.parentSub),this.content.delete(j)}}gc(j,X){if(!this.deleted)throw unexpectedCase();this.content.gc(j),X?replaceStruct(j,this,new GC(this.id,this.length)):this.content=new ContentDeleted(this.length)}write(j,X){const te=X>0?createID(this.id.client,this.id.clock+X-1):this.origin,ne=this.rightOrigin,re=this.parentSub,oe=this.content.getRef()&BITS5|(te===null?0:BIT8)|(ne===null?0:BIT7)|(re===null?0:BIT6);if(j.writeInfo(oe),te!==null&&j.writeLeftID(te),ne!==null&&j.writeRightID(ne),te===null&&ne===null){const le=this.parent;if(le._item!==void 0){const fe=le._item;if(fe===null){const we=findRootTypeKey(le);j.writeParentInfo(!0),j.writeString(we)}else j.writeParentInfo(!1),j.writeLeftID(fe.id)}else le.constructor===String?(j.writeParentInfo(!0),j.writeString(le)):le.constructor===ID?(j.writeParentInfo(!1),j.writeLeftID(le)):unexpectedCase();re!==null&&j.writeString(re)}this.content.write(j,X)}}const readItemContent=(q,j)=>contentRefs[j&BITS5](q),contentRefs=[()=>{unexpectedCase()},readContentDeleted,readContentJSON,readContentBinary,readContentString,readContentEmbed,readContentFormat,readContentType,readContentAny,readContentDoc,()=>{unexpectedCase()}],structSkipRefNumber=10;class Skip extends AbstractStruct{get deleted(){return!0}delete(){}mergeWith(j){return this.constructor!==j.constructor?!1:(this.length+=j.length,!0)}integrate(j,X){unexpectedCase()}write(j,X){j.writeInfo(structSkipRefNumber),writeVarUint(j.restEncoder,this.length-X)}getMissing(j,X){return null}}const glo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},importIdentifier$3="__ $YJS$ __";glo[importIdentifier$3]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");glo[importIdentifier$3]=!0;const Y=Object.freeze(Object.defineProperty({__proto__:null,AbsolutePosition,AbstractConnector,AbstractStruct,AbstractType,Array:YArray,ContentAny,ContentBinary,ContentDeleted,ContentEmbed,ContentFormat,ContentJSON,ContentString,ContentType,Doc,GC,ID,Item,Map:YMap,PermanentUserData,RelativePosition,Snapshot,Text:YText,Transaction,UndoManager,UpdateEncoderV1,XmlElement:YXmlElement,XmlFragment:YXmlFragment,XmlHook:YXmlHook,XmlText:YXmlText,YArrayEvent,YEvent,YMapEvent,YTextEvent,YXmlEvent,applyUpdate,applyUpdateV2,cleanupYTextFormatting,compareIDs,compareRelativePositions,convertUpdateFormatV1ToV2,convertUpdateFormatV2ToV1,createAbsolutePositionFromRelativePosition,createDeleteSet,createDeleteSetFromStructStore,createDocFromSnapshot,createID,createRelativePositionFromJSON,createRelativePositionFromTypeIndex,createSnapshot,decodeRelativePosition,decodeSnapshot,decodeSnapshotV2,decodeStateVector,decodeUpdate,decodeUpdateV2,diffUpdate,diffUpdateV2,emptySnapshot,encodeRelativePosition,encodeSnapshot,encodeSnapshotV2,encodeStateAsUpdate,encodeStateAsUpdateV2,encodeStateVector,encodeStateVectorFromUpdate,encodeStateVectorFromUpdateV2,equalSnapshots,findIndexSS,findRootTypeKey,getItem,getState,getTypeChildren,isDeleted,isParentOf,iterateDeletedStructs,logType,logUpdate,logUpdateV2,mergeUpdates,mergeUpdatesV2,parseUpdateMeta,parseUpdateMetaV2,readUpdate:readUpdate$1,readUpdateV2,relativePositionToJSON,snapshot,transact:transact$1,tryGc,typeListToArraySnapshot,typeMapGetSnapshot},Symbol.toStringTag,{value:"Module"})),outdatedTimeout=3e4;class Awareness extends Observable{constructor(j){super(),this.doc=j,this.clientID=j.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const X=getUnixTime();this.getLocalState()!==null&&outdatedTimeout/2<=X-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const te=[];this.meta.forEach((ne,re)=>{re!==this.clientID&&outdatedTimeout<=X-ne.lastUpdated&&this.states.has(re)&&te.push(re)}),te.length>0&&removeAwarenessStates(this,te,"timeout")},floor(outdatedTimeout/10)),j.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(j){const X=this.clientID,te=this.meta.get(X),ne=te===void 0?0:te.clock+1,re=this.states.get(X);j===null?this.states.delete(X):this.states.set(X,j),this.meta.set(X,{clock:ne,lastUpdated:getUnixTime()});const oe=[],le=[],fe=[],we=[];j===null?we.push(X):re==null?j!=null&&oe.push(X):(le.push(X),equalityDeep(re,j)||fe.push(X)),(oe.length>0||fe.length>0||we.length>0)&&this.emit("change",[{added:oe,updated:fe,removed:we},"local"]),this.emit("update",[{added:oe,updated:le,removed:we},"local"])}setLocalStateField(j,X){const te=this.getLocalState();te!==null&&this.setLocalState({...te,[j]:X})}getStates(){return this.states}}const removeAwarenessStates=(q,j,X)=>{const te=[];for(let ne=0;ne<j.length;ne++){const re=j[ne];if(q.states.has(re)){if(q.states.delete(re),re===q.clientID){const oe=q.meta.get(re);q.meta.set(re,{clock:oe.clock+1,lastUpdated:getUnixTime()})}te.push(re)}}te.length>0&&(q.emit("change",[{added:[],updated:[],removed:te},X]),q.emit("update",[{added:[],updated:[],removed:te},X]))},encodeAwarenessUpdate=(q,j,X=q.states)=>{const te=j.length,ne=createEncoder();writeVarUint(ne,te);for(let re=0;re<te;re++){const oe=j[re],le=X.get(oe)||null,fe=q.meta.get(oe).clock;writeVarUint(ne,oe),writeVarUint(ne,fe),writeVarString(ne,JSON.stringify(le))}return toUint8Array(ne)},applyAwarenessUpdate=(q,j,X)=>{const te=createDecoder(j),ne=getUnixTime(),re=[],oe=[],le=[],fe=[],we=readVarUint(te);for(let ke=0;ke<we;ke++){const ye=readVarUint(te);let ve=readVarUint(te);const be=JSON.parse(readVarString(te)),Ce=q.meta.get(ye),Ee=q.states.get(ye),Oe=Ce===void 0?0:Ce.clock;(Oe<ve||Oe===ve&&be===null&&q.states.has(ye))&&(be===null?ye===q.clientID&&q.getLocalState()!=null?ve++:q.states.delete(ye):q.states.set(ye,be),q.meta.set(ye,{clock:ve,lastUpdated:ne}),Ce===void 0&&be!==null?re.push(ye):Ce!==void 0&&be===null?fe.push(ye):be!==null&&(equalityDeep(be,Ee)||le.push(ye),oe.push(ye)))}(re.length>0||le.length>0||fe.length>0)&&q.emit("change",[{added:re,updated:le,removed:fe},X]),(re.length>0||oe.length>0||fe.length>0)&&q.emit("update",[{added:re,updated:oe,removed:fe},X])};class DisposableGroup{constructor(j=[]){this._disposables=j,this._disposed=!1}get disposed(){return this._disposed}add(j){j&&(this._disposed?execDisposeLogic(j):this._disposables.push(j))}dispose(){disposeAllAndClearArray(this._disposables),this._disposed=!0}}function flattenDisposable(q){return{dispose:disposeAllAndClearArray.bind(null,q)}}function disposeAllAndClearArray(q){for(const j of q)try{execDisposeLogic(j)}catch(X){console.error(X)}q.length=0}function execDisposeLogic(q){typeof q=="function"?q():q.dispose()}class Signal{constructor(){this._emitting=!1,this._callbacks=[],this._disposables=[]}static fromEvent(j,X,te){const ne=new Signal,re=oe=>{ne.emit(oe)};return j.addEventListener(X,re,te),ne._disposables.push({dispose:()=>{j.removeEventListener(X,re)}}),ne}filter(j){const X=new Signal;return X._disposables.push({dispose:()=>this.dispose()}),this.on(te=>{j(te)&&X.emit(te)}),X}on(j){if(this._emitting){const X=[...this._callbacks,j];this._callbacks=X}else this._callbacks.push(j);return{dispose:()=>{if(this._emitting)this._callbacks=this._callbacks.filter(X=>X!==j);else{const X=this._callbacks.indexOf(j);X>-1&&this._callbacks.splice(X,1)}}}}once(j){let X;const te=ne=>{j(ne),X&&X()};X=this.on(te).dispose}unshift(j){if(this._emitting){const X=[j,...this._callbacks];this._callbacks=X}else this._callbacks.unshift(j);return{dispose:()=>{if(this._emitting)this._callbacks=this._callbacks.filter(X=>X!==j);else{const X=this._callbacks.indexOf(j);X>-1&&this._callbacks.splice(X,1)}}}}emit(j){const X=this._emitting;this._emitting=!0,this._callbacks.forEach(te=>{try{te(j)}catch(ne){console.error(ne)}}),this._emitting=X}pipe(j){return this._callbacks.push(X=>j.emit(X)),this}dispose(){flattenDisposable(this._disposables).dispose(),this._callbacks.length=0}toDispose(j){return j.push(this),this}}class AwarenessAdapter{constructor(j,X){this.signals={update:new Signal},this._onAwarenessChange=te=>{const{added:ne,removed:re,updated:oe}=te,le=this.awareness.getStates();ne.forEach(fe=>{this.signals.update.emit({id:fe,type:"add",state:le.get(fe)})}),oe.forEach(fe=>{this.signals.update.emit({id:fe,type:"update",state:le.get(fe)})}),re.forEach(fe=>{this.signals.update.emit({id:fe,type:"remove"})})},this._onAwarenessMessage=te=>{te.id===this.awareness.clientID?this.updateLocalCursor():this._resetRemoteCursor()},this.space=j,this.awareness=X,this.awareness.on("change",this._onAwarenessChange),this.signals.update.on(this._onAwarenessMessage)}setLocalCursor(j){this.awareness.setLocalStateField("cursor",j)}getLocalCursor(){const X=this.awareness.getStates().get(this.awareness.clientID);return X==null?void 0:X.cursor}getStates(){return this.awareness.getStates()}_resetRemoteCursor(){this.space.richTextAdapters.forEach(j=>j.quillCursors.clearCursors()),this.getStates().forEach((j,X)=>{if(X!==this.awareness.clientID&&j.cursor){const te=createAbsolutePositionFromRelativePosition(j.cursor.anchor,this.space.doc),ne=createAbsolutePositionFromRelativePosition(j.cursor.focus,this.space.doc),re=this.space.richTextAdapters.get(j.cursor.id||"");if(te&&ne&&re){const oe=j.user||{},le=oe.color||"#ffa500",fe=oe.name||"other";re.quillCursors.createCursor(X.toString(),fe,le),re.quillCursors.moveCursor(X.toString(),{index:te.index,length:ne.index-te.index})}}})}updateLocalCursor(){const j=this.space.awareness.getLocalCursor();if(!j)return;const X=createAbsolutePositionFromRelativePosition(j.anchor,this.space.doc),te=createAbsolutePositionFromRelativePosition(j.focus,this.space.doc);if(X&&te){const ne=this.space.richTextAdapters.get(j.id||"");ne==null||ne.quill.setSelection(X.index,te.index-X.index)}}destroy(){this.awareness&&(this.awareness.off("change",this._onAwarenessChange),this.signals.update.dispose())}}class Space{constructor(j,X,te,ne){this.richTextAdapters=new Map,this.id=j,this.doc=X;const re=this.id.startsWith("space:")?this.id:this.prefixedId;this.origin=this.doc.getMap(re),this.proxy=this.doc.getMapProxy(re,{initializer:ne==null?void 0:ne.valueInitializer});const oe=te??new Awareness(this.doc);this.awareness=new AwarenessAdapter(this,oe)}get prefixedId(){return`space:${this.id}`}transact(j){this.doc.transact(j,this.doc.clientID)}}const testSymbol=Symbol.for("react.test.json");function isValidRecord(q){return!(typeof q!="object"||q===null)}const IGNORE_PROPS=["sys:id","sys:flavour","sys:children"];function yDocToJSXNode(q,j){if(!isValidRecord(q))throw new Error("Failed to parse doc record! Invalid data.");const X=q[j];if(!X)throw new Error(`Failed to parse doc record! Node not found! id: ${j}.`);const te=X["sys:flavour"],ne=X["sys:children"],re=Object.fromEntries(Object.entries(X).filter(([oe])=>!IGNORE_PROPS.includes(oe)));return"prop:text"in re&&(re["prop:text"]=parseDelta(re["prop:text"])),{$$typeof:testSymbol,type:te,props:re,children:(ne==null?void 0:ne.map(oe=>yDocToJSXNode(q,oe)))??[]}}function serializeYDoc(q){const j={};return q.share.forEach((X,te)=>{X instanceof YMap?j[te]=serializeYMap(X):j[te]=X.toJSON()}),j}function serializeYMap(q){const j={};return q.forEach((X,te)=>{X instanceof YMap?j[te]=serializeYMap(X):X instanceof YText?j[te]=serializeYText(X):X instanceof YArray||X instanceof AbstractType?j[te]=X.toJSON():j[te]=X}),j}function serializeYText(q){return q.toDelta()}function parseDelta(q){if(q.length)return q.length===1&&!q[0].attributes?q[0].insert:{$$typeof:testSymbol,type:"",props:{},children:q==null?void 0:q.map(({insert:j,attributes:X})=>({$$typeof:testSymbol,type:"text",props:{insert:j,...X}}))}}function createAutoIncrementIdGenerator(){let q=0;return()=>(q++).toString()}function createAutoIncrementIdGeneratorByClientId(q){let j=0;return()=>`${q}:${j++}`}function uuidv4(){return uuidv4$1()}function initialize(q,j){j.forEach((X,te)=>{q[te]=X})}function subscribe$1(q,j){j.observe(X=>{X.changes.keys.size!==0&&X.keysChanged.forEach(te=>{const ne=X.changes.keys.get(te);if(!ne){console.error("impossible event",X);return}ne.action==="delete"?delete q[te]:(ne.action==="add"||ne.action==="update")&&(q[te]=j.get(te))})})}function createYMapProxy(q,j={}){const{readonly:X=!1,initializer:te}=j,ne={};if(!(q instanceof YMap))throw new TypeError;return initialize(ne,q),subscribe$1(ne,q),new Proxy(ne,{has:(re,oe)=>Reflect.has(re,oe),set:(re,oe,le,fe)=>{if(X)throw new Error("Modify data is not allowed");if(typeof oe=="string")return q.set(oe,le),Reflect.set(re,oe,le,fe);throw new Error("key cannot be a symbol")},get:(re,oe,le)=>{if(typeof oe=="string"&&!q.has(oe)&&typeof(te==null?void 0:te[oe])=="function"){const fe=te[oe]();return q.set(oe,fe),fe}return Reflect.get(re,oe,le)}})}class BlockSuiteDoc extends Doc{getMapProxy(j,X){const te=super.getMap(j);return createYMapProxy(te,X)}}var Generator=(q=>(q.UUIDv4="uuidV4",q.AutoIncrementByClientId="autoIncrementByClientId",q.AutoIncrement="autoIncrement",q))(Generator||{});const DEFAULT_ROOM="virgo-default";class Store{constructor({room:j=DEFAULT_ROOM,providers:X=[],awareness:te,idGenerator:ne}={}){switch(this.doc=new BlockSuiteDoc,this.providers=[],this.spaces=new Map,this.awareness=te??new Awareness(this.doc),ne){case"autoIncrement":{this.idGenerator=createAutoIncrementIdGenerator();break}case"autoIncrementByClientId":{this.idGenerator=createAutoIncrementIdGeneratorByClientId(this.doc.clientID);break}case"uuidV4":default:{this.idGenerator=uuidv4;break}}this.providers=X.map(re=>new re(j,this.doc,{awareness:this.awareness}))}addSpace(j){this.spaces.set(j.prefixedId,j)}removeSpace(j){this.spaces.delete(j.prefixedId)}exportJSX(j="0"){const X=serializeYDoc(this.doc);if(!("space:page0"in X))throw new Error("Failed to convert to JSX: 'space:page0' not found");return X["space:page0"][j]?yDocToJSXNode(X["space:page0"],j):null}}class BaseBlockModel{constructor(j,X){this.propsUpdated=new Signal,this.childrenUpdated=new Signal,this.childMap=new Map,this.page=j,this.id=X.id,this.children=[]}firstChild(){const j=this.children;return j!=null&&j.length?j[0]:null}lastChild(){return this.children.length?this.children[this.children.length-1].lastChild():this}block2html(j,X,te,ne,re){var fe;return`${((fe=this.text)==null?void 0:fe.sliceToDelta(ne||0,re)).reduce((we,ke)=>we+this._deltaLeaf2Html(ke),"")}${j}`}block2Text(j,X,te){var re;return`${(((re=this.text)==null?void 0:re.toString())||"").slice(X||0,te)}${j}`}_deltaLeaf2Html(j){let X=j.insert;const te=j.attributes;return te&&(te.code&&(X=`<code>${X}</code>`),te.bold&&(X=`<strong>${X}</strong>`),te.italic&&(X=`<em>${X}</em>`),te.underline&&(X=`<u>${X}</u>`),te.strikethrough&&(X=`<s>${X}</s>`),te.link&&(X=`<a href='${te.link}'>${X}</a>`)),X}dispose(){this.propsUpdated.dispose(),this.childrenUpdated.dispose()}}class HTTPError extends Error{constructor(j,X,te){const ne=j.status||j.status===0?j.status:"",re=j.statusText||"",oe=`${ne} ${re}`.trim(),le=oe?`status code ${oe}`:"an unknown error";super(`Request failed with ${le}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=j,this.request=X,this.options=te}}class TimeoutError extends Error{constructor(j){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=j}}const isObject=q=>q!==null&&typeof q=="object",validateAndMerge=(...q)=>{for(const j of q)if((!isObject(j)||Array.isArray(j))&&typeof j<"u")throw new TypeError("The `options` argument must be an object");return deepMerge({},...q)},mergeHeaders=(q={},j={})=>{const X=new globalThis.Headers(q),te=j instanceof globalThis.Headers,ne=new globalThis.Headers(j);for(const[re,oe]of ne.entries())te&&oe==="undefined"||oe===void 0?X.delete(re):X.set(re,oe);return X},deepMerge=(...q)=>{let j={},X={};for(const te of q)if(Array.isArray(te))Array.isArray(j)||(j=[]),j=[...j,...te];else if(isObject(te)){for(let[ne,re]of Object.entries(te))isObject(re)&&ne in j&&(re=deepMerge(j[ne],re)),j={...j,[ne]:re};isObject(te.headers)&&(X=mergeHeaders(X,te.headers),j.headers=X)}return j},supportsRequestStreams=(()=>{let q=!1,j=!1;return typeof globalThis.ReadableStream=="function"&&(j=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return q=!0,"half"}}).headers.has("Content-Type")),q&&!j})(),supportsAbortController=typeof globalThis.AbortController=="function",supportsResponseStreams=typeof globalThis.ReadableStream=="function",supportsFormData=typeof globalThis.FormData=="function",requestMethods=["get","post","put","patch","head","delete"],responseTypes={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},maxSafeTimeout=2147483647,stop=Symbol("stop"),normalizeRequestMethod=q=>requestMethods.includes(q)?q.toUpperCase():q,retryMethods=["get","put","head","delete","options","trace"],retryStatusCodes=[408,413,429,500,502,503,504],retryAfterStatusCodes=[413,429,503],defaultRetryOptions={limit:2,methods:retryMethods,statusCodes:retryStatusCodes,afterStatusCodes:retryAfterStatusCodes,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},normalizeRetryOptions=(q={})=>{if(typeof q=="number")return{...defaultRetryOptions,limit:q};if(q.methods&&!Array.isArray(q.methods))throw new Error("retry.methods must be an array");if(q.statusCodes&&!Array.isArray(q.statusCodes))throw new Error("retry.statusCodes must be an array");return{...defaultRetryOptions,...q,afterStatusCodes:retryAfterStatusCodes}};async function timeout(q,j,X){return new Promise((te,ne)=>{const re=setTimeout(()=>{j&&j.abort(),ne(new TimeoutError(q))},X.timeout);X.fetch(q).then(te).catch(ne).then(()=>{clearTimeout(re)})})}const DOMException=globalThis.DOMException??Error;function composeAbortError(q){return new DOMException((q==null?void 0:q.reason)??"The operation was aborted.")}async function delay(q,{signal:j}){return new Promise((X,te)=>{if(j){if(j.aborted){te(composeAbortError(j));return}j.addEventListener("abort",ne,{once:!0})}function ne(){te(composeAbortError(j)),clearTimeout(re)}const re=setTimeout(()=>{j==null||j.removeEventListener("abort",ne),X()},q)})}class Ky{static create(j,X){const te=new Ky(j,X),ne=async()=>{if(te._options.timeout>maxSafeTimeout)throw new RangeError(`The \`timeout\` option cannot be greater than ${maxSafeTimeout}`);await Promise.resolve();let le=await te._fetch();for(const fe of te._options.hooks.afterResponse){const we=await fe(te.request,te._options,te._decorateResponse(le.clone()));we instanceof globalThis.Response&&(le=we)}if(te._decorateResponse(le),!le.ok&&te._options.throwHttpErrors){let fe=new HTTPError(le,te.request,te._options);for(const we of te._options.hooks.beforeError)fe=await we(fe);throw fe}if(te._options.onDownloadProgress){if(typeof te._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!supportsResponseStreams)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return te._stream(le.clone(),te._options.onDownloadProgress)}return le},oe=te._options.retry.methods.includes(te.request.method.toLowerCase())?te._retry(ne):ne();for(const[le,fe]of Object.entries(responseTypes))oe[le]=async()=>{te.request.headers.set("accept",te.request.headers.get("accept")||fe);const ke=(await oe).clone();if(le==="json"){if(ke.status===204||(await ke.clone().arrayBuffer()).byteLength===0)return"";if(X.parseJson)return X.parseJson(await ke.text())}return ke[le]()};return oe}constructor(j,X={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=j,this._options={credentials:this._input.credentials||"same-origin",...X,headers:mergeHeaders(this._input.headers,X.headers),hooks:deepMerge({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},X.hooks),method:normalizeRequestMethod(X.method??this._input.method),prefixUrl:String(X.prefixUrl||""),retry:normalizeRetryOptions(X.retry),throwHttpErrors:X.throwHttpErrors!==!1,timeout:typeof X.timeout>"u"?1e4:X.timeout,fetch:X.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(supportsAbortController){if(this.abortController=new globalThis.AbortController,this._options.signal){const te=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(te.reason)})}this._options.signal=this.abortController.signal}if(this.request=new globalThis.Request(this._input,this._options),supportsRequestStreams&&(this.request.duplex="half"),this._options.searchParams){const ne="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),re=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,ne);(supportsFormData&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(re,this.request),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(j){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(j instanceof TimeoutError)){if(j instanceof HTTPError){if(!this._options.retry.statusCodes.includes(j.response.status))return 0;const te=j.response.headers.get("Retry-After");if(te&&this._options.retry.afterStatusCodes.includes(j.response.status)){let ne=Number(te);return Number.isNaN(ne)?ne=Date.parse(te)-Date.now():ne*=1e3,typeof this._options.retry.maxRetryAfter<"u"&&ne>this._options.retry.maxRetryAfter?0:ne}if(j.response.status===413)return 0}const X=.3;return Math.min(this._options.retry.backoffLimit,X*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(j){return this._options.parseJson&&(j.json=async()=>this._options.parseJson(await j.text())),j}async _retry(j){try{return await j()}catch(X){const te=Math.min(this._calculateRetryDelay(X),maxSafeTimeout);if(te!==0&&this._retryCount>0){await delay(te,{signal:this._options.signal});for(const ne of this._options.hooks.beforeRetry)if(await ne({request:this.request,options:this._options,error:X,retryCount:this._retryCount})===stop)return;return this._retry(j)}throw X}}async _fetch(){for(const j of this._options.hooks.beforeRequest){const X=await j(this.request,this._options);if(X instanceof Request){this.request=X;break}if(X instanceof Response)return X}return this._options.timeout===!1?this._options.fetch(this.request.clone()):timeout(this.request.clone(),this.abortController,this._options)}_stream(j,X){const te=Number(j.headers.get("content-length"))||0;let ne=0;return j.status===204?(X&&X({percent:1,totalBytes:te,transferredBytes:ne},new Uint8Array),new globalThis.Response(null,{status:j.status,statusText:j.statusText,headers:j.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(re){const oe=j.body.getReader();X&&X({percent:0,transferredBytes:0,totalBytes:te},new Uint8Array);async function le(){const{done:fe,value:we}=await oe.read();if(fe){re.close();return}if(X){ne+=we.byteLength;const ke=te===0?0:ne/te;X({percent:ke,transferredBytes:ne,totalBytes:te},we)}re.enqueue(we),await le()}await le()}}),{status:j.status,statusText:j.statusText,headers:j.headers})}}/*! MIT License © Sindre Sorhus */const createInstance=q=>{const j=(X,te)=>Ky.create(X,validateAndMerge(q,te));for(const X of requestMethods)j[X]=(te,ne)=>Ky.create(te,validateAndMerge(q,ne,{method:X}));return j.create=X=>createInstance(validateAndMerge(X)),j.extend=X=>createInstance(validateAndMerge(q,X)),j.stop=stop,j},ky=createInstance(),ky$1=ky;function promisifyRequest(q){return new Promise((j,X)=>{q.oncomplete=q.onsuccess=()=>j(q.result),q.onabort=q.onerror=()=>X(q.error)})}function createStore(q,j){const X=indexedDB.open(q);X.onupgradeneeded=()=>X.result.createObjectStore(j);const te=promisifyRequest(X);return(ne,re)=>te.then(oe=>re(oe.transaction(j,ne).objectStore(j)))}let defaultGetStoreFunc;function defaultGetStore(){return defaultGetStoreFunc||(defaultGetStoreFunc=createStore("keyval-store","keyval")),defaultGetStoreFunc}function get$1(q,j=defaultGetStore()){return j("readonly",X=>promisifyRequest(X.get(q)))}function set(q,j,X=defaultGetStore()){return X("readwrite",te=>(te.put(j,q),promisifyRequest(te.transaction)))}function del$1(q,j=defaultGetStore()){return j("readwrite",X=>(X.delete(q),promisifyRequest(X.transaction)))}function clear(q=defaultGetStore()){return q("readwrite",j=>(j.clear(),promisifyRequest(j.transaction)))}function eachCursor(q,j){return q.openCursor().onsuccess=function(){this.result&&(j(this.result),this.result.continue())},promisifyRequest(q.transaction)}function keys(q=defaultGetStore()){return q("readonly",j=>{if(j.getAllKeys)return promisifyRequest(j.getAllKeys());const X=[];return eachCursor(j,te=>X.push(te.key)).then(()=>X)})}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(q){return q&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q}var buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$8=0,len=code$1.length;i$8<len;++i$8)lookup[i$8]=code$1[i$8],revLookup[code$1.charCodeAt(i$8)]=i$8;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(q){var j=q.length;if(j%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var X=q.indexOf("=");X===-1&&(X=j);var te=X===j?0:4-X%4;return[X,te]}function byteLength(q){var j=getLens(q),X=j[0],te=j[1];return(X+te)*3/4-te}function _byteLength(q,j,X){return(j+X)*3/4-X}function toByteArray(q){var j,X=getLens(q),te=X[0],ne=X[1],re=new Arr(_byteLength(q,te,ne)),oe=0,le=ne>0?te-4:te,fe;for(fe=0;fe<le;fe+=4)j=revLookup[q.charCodeAt(fe)]<<18|revLookup[q.charCodeAt(fe+1)]<<12|revLookup[q.charCodeAt(fe+2)]<<6|revLookup[q.charCodeAt(fe+3)],re[oe++]=j>>16&255,re[oe++]=j>>8&255,re[oe++]=j&255;return ne===2&&(j=revLookup[q.charCodeAt(fe)]<<2|revLookup[q.charCodeAt(fe+1)]>>4,re[oe++]=j&255),ne===1&&(j=revLookup[q.charCodeAt(fe)]<<10|revLookup[q.charCodeAt(fe+1)]<<4|revLookup[q.charCodeAt(fe+2)]>>2,re[oe++]=j>>8&255,re[oe++]=j&255),re}function tripletToBase64(q){return lookup[q>>18&63]+lookup[q>>12&63]+lookup[q>>6&63]+lookup[q&63]}function encodeChunk(q,j,X){for(var te,ne=[],re=j;re<X;re+=3)te=(q[re]<<16&16711680)+(q[re+1]<<8&65280)+(q[re+2]&255),ne.push(tripletToBase64(te));return ne.join("")}function fromByteArray(q){for(var j,X=q.length,te=X%3,ne=[],re=16383,oe=0,le=X-te;oe<le;oe+=re)ne.push(encodeChunk(q,oe,oe+re>le?le:oe+re));return te===1?(j=q[X-1],ne.push(lookup[j>>2]+lookup[j<<4&63]+"==")):te===2&&(j=(q[X-2]<<8)+q[X-1],ne.push(lookup[j>>10]+lookup[j>>4&63]+lookup[j<<2&63]+"=")),ne.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(q,j,X,te,ne){var re,oe,le=ne*8-te-1,fe=(1<<le)-1,we=fe>>1,ke=-7,ye=X?ne-1:0,ve=X?-1:1,be=q[j+ye];for(ye+=ve,re=be&(1<<-ke)-1,be>>=-ke,ke+=le;ke>0;re=re*256+q[j+ye],ye+=ve,ke-=8);for(oe=re&(1<<-ke)-1,re>>=-ke,ke+=te;ke>0;oe=oe*256+q[j+ye],ye+=ve,ke-=8);if(re===0)re=1-we;else{if(re===fe)return oe?NaN:(be?-1:1)*(1/0);oe=oe+Math.pow(2,te),re=re-we}return(be?-1:1)*oe*Math.pow(2,re-te)};ieee754.write=function(q,j,X,te,ne,re){var oe,le,fe,we=re*8-ne-1,ke=(1<<we)-1,ye=ke>>1,ve=ne===23?Math.pow(2,-24)-Math.pow(2,-77):0,be=te?0:re-1,Ce=te?1:-1,Ee=j<0||j===0&&1/j<0?1:0;for(j=Math.abs(j),isNaN(j)||j===1/0?(le=isNaN(j)?1:0,oe=ke):(oe=Math.floor(Math.log(j)/Math.LN2),j*(fe=Math.pow(2,-oe))<1&&(oe--,fe*=2),oe+ye>=1?j+=ve/fe:j+=ve*Math.pow(2,1-ye),j*fe>=2&&(oe++,fe/=2),oe+ye>=ke?(le=0,oe=ke):oe+ye>=1?(le=(j*fe-1)*Math.pow(2,ne),oe=oe+ye):(le=j*Math.pow(2,ye-1)*Math.pow(2,ne),oe=0));ne>=8;q[X+be]=le&255,be+=Ce,le/=256,ne-=8);for(oe=oe<<ne|le,we+=ne;we>0;q[X+be]=oe&255,be+=Ce,oe/=256,we-=8);q[X+be-Ce]|=Ee*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(q){const j=base64Js,X=ieee754,te=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;q.Buffer=le,q.SlowBuffer=Te,q.INSPECT_MAX_BYTES=50;const ne=2147483647;q.kMaxLength=ne,le.TYPED_ARRAY_SUPPORT=re(),!le.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function re(){try{const Ke=new Uint8Array(1),Me={foo:function(){return 42}};return Object.setPrototypeOf(Me,Uint8Array.prototype),Object.setPrototypeOf(Ke,Me),Ke.foo()===42}catch{return!1}}Object.defineProperty(le.prototype,"parent",{enumerable:!0,get:function(){if(le.isBuffer(this))return this.buffer}}),Object.defineProperty(le.prototype,"offset",{enumerable:!0,get:function(){if(le.isBuffer(this))return this.byteOffset}});function oe(Ke){if(Ke>ne)throw new RangeError('The value "'+Ke+'" is invalid for option "size"');const Me=new Uint8Array(Ke);return Object.setPrototypeOf(Me,le.prototype),Me}function le(Ke,Me,Fe){if(typeof Ke=="number"){if(typeof Me=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ye(Ke)}return fe(Ke,Me,Fe)}le.poolSize=8192;function fe(Ke,Me,Fe){if(typeof Ke=="string")return ve(Ke,Me);if(ArrayBuffer.isView(Ke))return Ce(Ke);if(Ke==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ke);if(He(Ke,ArrayBuffer)||Ke&&He(Ke.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(He(Ke,SharedArrayBuffer)||Ke&&He(Ke.buffer,SharedArrayBuffer)))return Ee(Ke,Me,Fe);if(typeof Ke=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const We=Ke.valueOf&&Ke.valueOf();if(We!=null&&We!==Ke)return le.from(We,Me,Fe);const ct=Oe(Ke);if(ct)return ct;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ke[Symbol.toPrimitive]=="function")return le.from(Ke[Symbol.toPrimitive]("string"),Me,Fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ke)}le.from=function(Ke,Me,Fe){return fe(Ke,Me,Fe)},Object.setPrototypeOf(le.prototype,Uint8Array.prototype),Object.setPrototypeOf(le,Uint8Array);function we(Ke){if(typeof Ke!="number")throw new TypeError('"size" argument must be of type number');if(Ke<0)throw new RangeError('The value "'+Ke+'" is invalid for option "size"')}function ke(Ke,Me,Fe){return we(Ke),Ke<=0?oe(Ke):Me!==void 0?typeof Fe=="string"?oe(Ke).fill(Me,Fe):oe(Ke).fill(Me):oe(Ke)}le.alloc=function(Ke,Me,Fe){return ke(Ke,Me,Fe)};function ye(Ke){return we(Ke),oe(Ke<0?0:Ae(Ke)|0)}le.allocUnsafe=function(Ke){return ye(Ke)},le.allocUnsafeSlow=function(Ke){return ye(Ke)};function ve(Ke,Me){if((typeof Me!="string"||Me==="")&&(Me="utf8"),!le.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);const Fe=Se(Ke,Me)|0;let We=oe(Fe);const ct=We.write(Ke,Me);return ct!==Fe&&(We=We.slice(0,ct)),We}function be(Ke){const Me=Ke.length<0?0:Ae(Ke.length)|0,Fe=oe(Me);for(let We=0;We<Me;We+=1)Fe[We]=Ke[We]&255;return Fe}function Ce(Ke){if(He(Ke,Uint8Array)){const Me=new Uint8Array(Ke);return Ee(Me.buffer,Me.byteOffset,Me.byteLength)}return be(Ke)}function Ee(Ke,Me,Fe){if(Me<0||Ke.byteLength<Me)throw new RangeError('"offset" is outside of buffer bounds');if(Ke.byteLength<Me+(Fe||0))throw new RangeError('"length" is outside of buffer bounds');let We;return Me===void 0&&Fe===void 0?We=new Uint8Array(Ke):Fe===void 0?We=new Uint8Array(Ke,Me):We=new Uint8Array(Ke,Me,Fe),Object.setPrototypeOf(We,le.prototype),We}function Oe(Ke){if(le.isBuffer(Ke)){const Me=Ae(Ke.length)|0,Fe=oe(Me);return Fe.length===0||Ke.copy(Fe,0,0,Me),Fe}if(Ke.length!==void 0)return typeof Ke.length!="number"||ot(Ke.length)?oe(0):be(Ke);if(Ke.type==="Buffer"&&Array.isArray(Ke.data))return be(Ke.data)}function Ae(Ke){if(Ke>=ne)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ne.toString(16)+" bytes");return Ke|0}function Te(Ke){return+Ke!=Ke&&(Ke=0),le.alloc(+Ke)}le.isBuffer=function(Me){return Me!=null&&Me._isBuffer===!0&&Me!==le.prototype},le.compare=function(Me,Fe){if(He(Me,Uint8Array)&&(Me=le.from(Me,Me.offset,Me.byteLength)),He(Fe,Uint8Array)&&(Fe=le.from(Fe,Fe.offset,Fe.byteLength)),!le.isBuffer(Me)||!le.isBuffer(Fe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Me===Fe)return 0;let We=Me.length,ct=Fe.length;for(let _t=0,xt=Math.min(We,ct);_t<xt;++_t)if(Me[_t]!==Fe[_t]){We=Me[_t],ct=Fe[_t];break}return We<ct?-1:ct<We?1:0},le.isEncoding=function(Me){switch(String(Me).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},le.concat=function(Me,Fe){if(!Array.isArray(Me))throw new TypeError('"list" argument must be an Array of Buffers');if(Me.length===0)return le.alloc(0);let We;if(Fe===void 0)for(Fe=0,We=0;We<Me.length;++We)Fe+=Me[We].length;const ct=le.allocUnsafe(Fe);let _t=0;for(We=0;We<Me.length;++We){let xt=Me[We];if(He(xt,Uint8Array))_t+xt.length>ct.length?(le.isBuffer(xt)||(xt=le.from(xt)),xt.copy(ct,_t)):Uint8Array.prototype.set.call(ct,xt,_t);else if(le.isBuffer(xt))xt.copy(ct,_t);else throw new TypeError('"list" argument must be an Array of Buffers');_t+=xt.length}return ct};function Se(Ke,Me){if(le.isBuffer(Ke))return Ke.length;if(ArrayBuffer.isView(Ke)||He(Ke,ArrayBuffer))return Ke.byteLength;if(typeof Ke!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ke);const Fe=Ke.length,We=arguments.length>2&&arguments[2]===!0;if(!We&&Fe===0)return 0;let ct=!1;for(;;)switch(Me){case"ascii":case"latin1":case"binary":return Fe;case"utf8":case"utf-8":return lt(Ke).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe*2;case"hex":return Fe>>>1;case"base64":return Be(Ke).length;default:if(ct)return We?-1:lt(Ke).length;Me=(""+Me).toLowerCase(),ct=!0}}le.byteLength=Se;function $e(Ke,Me,Fe){let We=!1;if((Me===void 0||Me<0)&&(Me=0),Me>this.length||((Fe===void 0||Fe>this.length)&&(Fe=this.length),Fe<=0)||(Fe>>>=0,Me>>>=0,Fe<=Me))return"";for(Ke||(Ke="utf8");;)switch(Ke){case"hex":return st(this,Me,Fe);case"utf8":case"utf-8":return qe(this,Me,Fe);case"ascii":return at(this,Me,Fe);case"latin1":case"binary":return pt(this,Me,Fe);case"base64":return ze(this,Me,Fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,Me,Fe);default:if(We)throw new TypeError("Unknown encoding: "+Ke);Ke=(Ke+"").toLowerCase(),We=!0}}le.prototype._isBuffer=!0;function Le(Ke,Me,Fe){const We=Ke[Me];Ke[Me]=Ke[Fe],Ke[Fe]=We}le.prototype.swap16=function(){const Me=this.length;if(Me%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Fe=0;Fe<Me;Fe+=2)Le(this,Fe,Fe+1);return this},le.prototype.swap32=function(){const Me=this.length;if(Me%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Fe=0;Fe<Me;Fe+=4)Le(this,Fe,Fe+3),Le(this,Fe+1,Fe+2);return this},le.prototype.swap64=function(){const Me=this.length;if(Me%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Fe=0;Fe<Me;Fe+=8)Le(this,Fe,Fe+7),Le(this,Fe+1,Fe+6),Le(this,Fe+2,Fe+5),Le(this,Fe+3,Fe+4);return this},le.prototype.toString=function(){const Me=this.length;return Me===0?"":arguments.length===0?qe(this,0,Me):$e.apply(this,arguments)},le.prototype.toLocaleString=le.prototype.toString,le.prototype.equals=function(Me){if(!le.isBuffer(Me))throw new TypeError("Argument must be a Buffer");return this===Me?!0:le.compare(this,Me)===0},le.prototype.inspect=function(){let Me="";const Fe=q.INSPECT_MAX_BYTES;return Me=this.toString("hex",0,Fe).replace(/(.{2})/g,"$1 ").trim(),this.length>Fe&&(Me+=" ... "),"<Buffer "+Me+">"},te&&(le.prototype[te]=le.prototype.inspect),le.prototype.compare=function(Me,Fe,We,ct,_t){if(He(Me,Uint8Array)&&(Me=le.from(Me,Me.offset,Me.byteLength)),!le.isBuffer(Me))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Me);if(Fe===void 0&&(Fe=0),We===void 0&&(We=Me?Me.length:0),ct===void 0&&(ct=0),_t===void 0&&(_t=this.length),Fe<0||We>Me.length||ct<0||_t>this.length)throw new RangeError("out of range index");if(ct>=_t&&Fe>=We)return 0;if(ct>=_t)return-1;if(Fe>=We)return 1;if(Fe>>>=0,We>>>=0,ct>>>=0,_t>>>=0,this===Me)return 0;let xt=_t-ct,Pt=We-Fe;const Nt=Math.min(xt,Pt),Dt=this.slice(ct,_t),Ht=Me.slice(Fe,We);for(let Mt=0;Mt<Nt;++Mt)if(Dt[Mt]!==Ht[Mt]){xt=Dt[Mt],Pt=Ht[Mt];break}return xt<Pt?-1:Pt<xt?1:0};function Pe(Ke,Me,Fe,We,ct){if(Ke.length===0)return-1;if(typeof Fe=="string"?(We=Fe,Fe=0):Fe>2147483647?Fe=2147483647:Fe<-2147483648&&(Fe=-2147483648),Fe=+Fe,ot(Fe)&&(Fe=ct?0:Ke.length-1),Fe<0&&(Fe=Ke.length+Fe),Fe>=Ke.length){if(ct)return-1;Fe=Ke.length-1}else if(Fe<0)if(ct)Fe=0;else return-1;if(typeof Me=="string"&&(Me=le.from(Me,We)),le.isBuffer(Me))return Me.length===0?-1:Re(Ke,Me,Fe,We,ct);if(typeof Me=="number")return Me=Me&255,typeof Uint8Array.prototype.indexOf=="function"?ct?Uint8Array.prototype.indexOf.call(Ke,Me,Fe):Uint8Array.prototype.lastIndexOf.call(Ke,Me,Fe):Re(Ke,[Me],Fe,We,ct);throw new TypeError("val must be string, number or Buffer")}function Re(Ke,Me,Fe,We,ct){let _t=1,xt=Ke.length,Pt=Me.length;if(We!==void 0&&(We=String(We).toLowerCase(),We==="ucs2"||We==="ucs-2"||We==="utf16le"||We==="utf-16le")){if(Ke.length<2||Me.length<2)return-1;_t=2,xt/=2,Pt/=2,Fe/=2}function Nt(Ht,Mt){return _t===1?Ht[Mt]:Ht.readUInt16BE(Mt*_t)}let Dt;if(ct){let Ht=-1;for(Dt=Fe;Dt<xt;Dt++)if(Nt(Ke,Dt)===Nt(Me,Ht===-1?0:Dt-Ht)){if(Ht===-1&&(Ht=Dt),Dt-Ht+1===Pt)return Ht*_t}else Ht!==-1&&(Dt-=Dt-Ht),Ht=-1}else for(Fe+Pt>xt&&(Fe=xt-Pt),Dt=Fe;Dt>=0;Dt--){let Ht=!0;for(let Mt=0;Mt<Pt;Mt++)if(Nt(Ke,Dt+Mt)!==Nt(Me,Mt)){Ht=!1;break}if(Ht)return Dt}return-1}le.prototype.includes=function(Me,Fe,We){return this.indexOf(Me,Fe,We)!==-1},le.prototype.indexOf=function(Me,Fe,We){return Pe(this,Me,Fe,We,!0)},le.prototype.lastIndexOf=function(Me,Fe,We){return Pe(this,Me,Fe,We,!1)};function Ne(Ke,Me,Fe,We){Fe=Number(Fe)||0;const ct=Ke.length-Fe;We?(We=Number(We),We>ct&&(We=ct)):We=ct;const _t=Me.length;We>_t/2&&(We=_t/2);let xt;for(xt=0;xt<We;++xt){const Pt=parseInt(Me.substr(xt*2,2),16);if(ot(Pt))return xt;Ke[Fe+xt]=Pt}return xt}function je(Ke,Me,Fe,We){return Ue(lt(Me,Ke.length-Fe),Ke,Fe,We)}function Ie(Ke,Me,Fe,We){return Ue(nt(Me),Ke,Fe,We)}function De(Ke,Me,Fe,We){return Ue(Be(Me),Ke,Fe,We)}function Ve(Ke,Me,Fe,We){return Ue(Ye(Me,Ke.length-Fe),Ke,Fe,We)}le.prototype.write=function(Me,Fe,We,ct){if(Fe===void 0)ct="utf8",We=this.length,Fe=0;else if(We===void 0&&typeof Fe=="string")ct=Fe,We=this.length,Fe=0;else if(isFinite(Fe))Fe=Fe>>>0,isFinite(We)?(We=We>>>0,ct===void 0&&(ct="utf8")):(ct=We,We=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const _t=this.length-Fe;if((We===void 0||We>_t)&&(We=_t),Me.length>0&&(We<0||Fe<0)||Fe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ct||(ct="utf8");let xt=!1;for(;;)switch(ct){case"hex":return Ne(this,Me,Fe,We);case"utf8":case"utf-8":return je(this,Me,Fe,We);case"ascii":case"latin1":case"binary":return Ie(this,Me,Fe,We);case"base64":return De(this,Me,Fe,We);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ve(this,Me,Fe,We);default:if(xt)throw new TypeError("Unknown encoding: "+ct);ct=(""+ct).toLowerCase(),xt=!0}},le.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ze(Ke,Me,Fe){return Me===0&&Fe===Ke.length?j.fromByteArray(Ke):j.fromByteArray(Ke.slice(Me,Fe))}function qe(Ke,Me,Fe){Fe=Math.min(Ke.length,Fe);const We=[];let ct=Me;for(;ct<Fe;){const _t=Ke[ct];let xt=null,Pt=_t>239?4:_t>223?3:_t>191?2:1;if(ct+Pt<=Fe){let Nt,Dt,Ht,Mt;switch(Pt){case 1:_t<128&&(xt=_t);break;case 2:Nt=Ke[ct+1],(Nt&192)===128&&(Mt=(_t&31)<<6|Nt&63,Mt>127&&(xt=Mt));break;case 3:Nt=Ke[ct+1],Dt=Ke[ct+2],(Nt&192)===128&&(Dt&192)===128&&(Mt=(_t&15)<<12|(Nt&63)<<6|Dt&63,Mt>2047&&(Mt<55296||Mt>57343)&&(xt=Mt));break;case 4:Nt=Ke[ct+1],Dt=Ke[ct+2],Ht=Ke[ct+3],(Nt&192)===128&&(Dt&192)===128&&(Ht&192)===128&&(Mt=(_t&15)<<18|(Nt&63)<<12|(Dt&63)<<6|Ht&63,Mt>65535&&Mt<1114112&&(xt=Mt))}}xt===null?(xt=65533,Pt=1):xt>65535&&(xt-=65536,We.push(xt>>>10&1023|55296),xt=56320|xt&1023),We.push(xt),ct+=Pt}return tt(We)}const Xe=4096;function tt(Ke){const Me=Ke.length;if(Me<=Xe)return String.fromCharCode.apply(String,Ke);let Fe="",We=0;for(;We<Me;)Fe+=String.fromCharCode.apply(String,Ke.slice(We,We+=Xe));return Fe}function at(Ke,Me,Fe){let We="";Fe=Math.min(Ke.length,Fe);for(let ct=Me;ct<Fe;++ct)We+=String.fromCharCode(Ke[ct]&127);return We}function pt(Ke,Me,Fe){let We="";Fe=Math.min(Ke.length,Fe);for(let ct=Me;ct<Fe;++ct)We+=String.fromCharCode(Ke[ct]);return We}function st(Ke,Me,Fe){const We=Ke.length;(!Me||Me<0)&&(Me=0),(!Fe||Fe<0||Fe>We)&&(Fe=We);let ct="";for(let _t=Me;_t<Fe;++_t)ct+=ut[Ke[_t]];return ct}function it(Ke,Me,Fe){const We=Ke.slice(Me,Fe);let ct="";for(let _t=0;_t<We.length-1;_t+=2)ct+=String.fromCharCode(We[_t]+We[_t+1]*256);return ct}le.prototype.slice=function(Me,Fe){const We=this.length;Me=~~Me,Fe=Fe===void 0?We:~~Fe,Me<0?(Me+=We,Me<0&&(Me=0)):Me>We&&(Me=We),Fe<0?(Fe+=We,Fe<0&&(Fe=0)):Fe>We&&(Fe=We),Fe<Me&&(Fe=Me);const ct=this.subarray(Me,Fe);return Object.setPrototypeOf(ct,le.prototype),ct};function Ge(Ke,Me,Fe){if(Ke%1!==0||Ke<0)throw new RangeError("offset is not uint");if(Ke+Me>Fe)throw new RangeError("Trying to access beyond buffer length")}le.prototype.readUintLE=le.prototype.readUIntLE=function(Me,Fe,We){Me=Me>>>0,Fe=Fe>>>0,We||Ge(Me,Fe,this.length);let ct=this[Me],_t=1,xt=0;for(;++xt<Fe&&(_t*=256);)ct+=this[Me+xt]*_t;return ct},le.prototype.readUintBE=le.prototype.readUIntBE=function(Me,Fe,We){Me=Me>>>0,Fe=Fe>>>0,We||Ge(Me,Fe,this.length);let ct=this[Me+--Fe],_t=1;for(;Fe>0&&(_t*=256);)ct+=this[Me+--Fe]*_t;return ct},le.prototype.readUint8=le.prototype.readUInt8=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,1,this.length),this[Me]},le.prototype.readUint16LE=le.prototype.readUInt16LE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,2,this.length),this[Me]|this[Me+1]<<8},le.prototype.readUint16BE=le.prototype.readUInt16BE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,2,this.length),this[Me]<<8|this[Me+1]},le.prototype.readUint32LE=le.prototype.readUInt32LE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,4,this.length),(this[Me]|this[Me+1]<<8|this[Me+2]<<16)+this[Me+3]*16777216},le.prototype.readUint32BE=le.prototype.readUInt32BE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,4,this.length),this[Me]*16777216+(this[Me+1]<<16|this[Me+2]<<8|this[Me+3])},le.prototype.readBigUInt64LE=gt(function(Me){Me=Me>>>0,Et(Me,"offset");const Fe=this[Me],We=this[Me+7];(Fe===void 0||We===void 0)&&Tt(Me,this.length-8);const ct=Fe+this[++Me]*2**8+this[++Me]*2**16+this[++Me]*2**24,_t=this[++Me]+this[++Me]*2**8+this[++Me]*2**16+We*2**24;return BigInt(ct)+(BigInt(_t)<<BigInt(32))}),le.prototype.readBigUInt64BE=gt(function(Me){Me=Me>>>0,Et(Me,"offset");const Fe=this[Me],We=this[Me+7];(Fe===void 0||We===void 0)&&Tt(Me,this.length-8);const ct=Fe*2**24+this[++Me]*2**16+this[++Me]*2**8+this[++Me],_t=this[++Me]*2**24+this[++Me]*2**16+this[++Me]*2**8+We;return(BigInt(ct)<<BigInt(32))+BigInt(_t)}),le.prototype.readIntLE=function(Me,Fe,We){Me=Me>>>0,Fe=Fe>>>0,We||Ge(Me,Fe,this.length);let ct=this[Me],_t=1,xt=0;for(;++xt<Fe&&(_t*=256);)ct+=this[Me+xt]*_t;return _t*=128,ct>=_t&&(ct-=Math.pow(2,8*Fe)),ct},le.prototype.readIntBE=function(Me,Fe,We){Me=Me>>>0,Fe=Fe>>>0,We||Ge(Me,Fe,this.length);let ct=Fe,_t=1,xt=this[Me+--ct];for(;ct>0&&(_t*=256);)xt+=this[Me+--ct]*_t;return _t*=128,xt>=_t&&(xt-=Math.pow(2,8*Fe)),xt},le.prototype.readInt8=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,1,this.length),this[Me]&128?(255-this[Me]+1)*-1:this[Me]},le.prototype.readInt16LE=function(Me,Fe){Me=Me>>>0,Fe||Ge(Me,2,this.length);const We=this[Me]|this[Me+1]<<8;return We&32768?We|4294901760:We},le.prototype.readInt16BE=function(Me,Fe){Me=Me>>>0,Fe||Ge(Me,2,this.length);const We=this[Me+1]|this[Me]<<8;return We&32768?We|4294901760:We},le.prototype.readInt32LE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,4,this.length),this[Me]|this[Me+1]<<8|this[Me+2]<<16|this[Me+3]<<24},le.prototype.readInt32BE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,4,this.length),this[Me]<<24|this[Me+1]<<16|this[Me+2]<<8|this[Me+3]},le.prototype.readBigInt64LE=gt(function(Me){Me=Me>>>0,Et(Me,"offset");const Fe=this[Me],We=this[Me+7];(Fe===void 0||We===void 0)&&Tt(Me,this.length-8);const ct=this[Me+4]+this[Me+5]*2**8+this[Me+6]*2**16+(We<<24);return(BigInt(ct)<<BigInt(32))+BigInt(Fe+this[++Me]*2**8+this[++Me]*2**16+this[++Me]*2**24)}),le.prototype.readBigInt64BE=gt(function(Me){Me=Me>>>0,Et(Me,"offset");const Fe=this[Me],We=this[Me+7];(Fe===void 0||We===void 0)&&Tt(Me,this.length-8);const ct=(Fe<<24)+this[++Me]*2**16+this[++Me]*2**8+this[++Me];return(BigInt(ct)<<BigInt(32))+BigInt(this[++Me]*2**24+this[++Me]*2**16+this[++Me]*2**8+We)}),le.prototype.readFloatLE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,4,this.length),X.read(this,Me,!0,23,4)},le.prototype.readFloatBE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,4,this.length),X.read(this,Me,!1,23,4)},le.prototype.readDoubleLE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,8,this.length),X.read(this,Me,!0,52,8)},le.prototype.readDoubleBE=function(Me,Fe){return Me=Me>>>0,Fe||Ge(Me,8,this.length),X.read(this,Me,!1,52,8)};function et(Ke,Me,Fe,We,ct,_t){if(!le.isBuffer(Ke))throw new TypeError('"buffer" argument must be a Buffer instance');if(Me>ct||Me<_t)throw new RangeError('"value" argument is out of bounds');if(Fe+We>Ke.length)throw new RangeError("Index out of range")}le.prototype.writeUintLE=le.prototype.writeUIntLE=function(Me,Fe,We,ct){if(Me=+Me,Fe=Fe>>>0,We=We>>>0,!ct){const Pt=Math.pow(2,8*We)-1;et(this,Me,Fe,We,Pt,0)}let _t=1,xt=0;for(this[Fe]=Me&255;++xt<We&&(_t*=256);)this[Fe+xt]=Me/_t&255;return Fe+We},le.prototype.writeUintBE=le.prototype.writeUIntBE=function(Me,Fe,We,ct){if(Me=+Me,Fe=Fe>>>0,We=We>>>0,!ct){const Pt=Math.pow(2,8*We)-1;et(this,Me,Fe,We,Pt,0)}let _t=We-1,xt=1;for(this[Fe+_t]=Me&255;--_t>=0&&(xt*=256);)this[Fe+_t]=Me/xt&255;return Fe+We},le.prototype.writeUint8=le.prototype.writeUInt8=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,1,255,0),this[Fe]=Me&255,Fe+1},le.prototype.writeUint16LE=le.prototype.writeUInt16LE=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,2,65535,0),this[Fe]=Me&255,this[Fe+1]=Me>>>8,Fe+2},le.prototype.writeUint16BE=le.prototype.writeUInt16BE=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,2,65535,0),this[Fe]=Me>>>8,this[Fe+1]=Me&255,Fe+2},le.prototype.writeUint32LE=le.prototype.writeUInt32LE=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,4,4294967295,0),this[Fe+3]=Me>>>24,this[Fe+2]=Me>>>16,this[Fe+1]=Me>>>8,this[Fe]=Me&255,Fe+4},le.prototype.writeUint32BE=le.prototype.writeUInt32BE=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,4,4294967295,0),this[Fe]=Me>>>24,this[Fe+1]=Me>>>16,this[Fe+2]=Me>>>8,this[Fe+3]=Me&255,Fe+4};function Je(Ke,Me,Fe,We,ct){At(Me,We,ct,Ke,Fe,7);let _t=Number(Me&BigInt(4294967295));Ke[Fe++]=_t,_t=_t>>8,Ke[Fe++]=_t,_t=_t>>8,Ke[Fe++]=_t,_t=_t>>8,Ke[Fe++]=_t;let xt=Number(Me>>BigInt(32)&BigInt(4294967295));return Ke[Fe++]=xt,xt=xt>>8,Ke[Fe++]=xt,xt=xt>>8,Ke[Fe++]=xt,xt=xt>>8,Ke[Fe++]=xt,Fe}function ft(Ke,Me,Fe,We,ct){At(Me,We,ct,Ke,Fe,7);let _t=Number(Me&BigInt(4294967295));Ke[Fe+7]=_t,_t=_t>>8,Ke[Fe+6]=_t,_t=_t>>8,Ke[Fe+5]=_t,_t=_t>>8,Ke[Fe+4]=_t;let xt=Number(Me>>BigInt(32)&BigInt(4294967295));return Ke[Fe+3]=xt,xt=xt>>8,Ke[Fe+2]=xt,xt=xt>>8,Ke[Fe+1]=xt,xt=xt>>8,Ke[Fe]=xt,Fe+8}le.prototype.writeBigUInt64LE=gt(function(Me,Fe=0){return Je(this,Me,Fe,BigInt(0),BigInt("0xffffffffffffffff"))}),le.prototype.writeBigUInt64BE=gt(function(Me,Fe=0){return ft(this,Me,Fe,BigInt(0),BigInt("0xffffffffffffffff"))}),le.prototype.writeIntLE=function(Me,Fe,We,ct){if(Me=+Me,Fe=Fe>>>0,!ct){const Nt=Math.pow(2,8*We-1);et(this,Me,Fe,We,Nt-1,-Nt)}let _t=0,xt=1,Pt=0;for(this[Fe]=Me&255;++_t<We&&(xt*=256);)Me<0&&Pt===0&&this[Fe+_t-1]!==0&&(Pt=1),this[Fe+_t]=(Me/xt>>0)-Pt&255;return Fe+We},le.prototype.writeIntBE=function(Me,Fe,We,ct){if(Me=+Me,Fe=Fe>>>0,!ct){const Nt=Math.pow(2,8*We-1);et(this,Me,Fe,We,Nt-1,-Nt)}let _t=We-1,xt=1,Pt=0;for(this[Fe+_t]=Me&255;--_t>=0&&(xt*=256);)Me<0&&Pt===0&&this[Fe+_t+1]!==0&&(Pt=1),this[Fe+_t]=(Me/xt>>0)-Pt&255;return Fe+We},le.prototype.writeInt8=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,1,127,-128),Me<0&&(Me=255+Me+1),this[Fe]=Me&255,Fe+1},le.prototype.writeInt16LE=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,2,32767,-32768),this[Fe]=Me&255,this[Fe+1]=Me>>>8,Fe+2},le.prototype.writeInt16BE=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,2,32767,-32768),this[Fe]=Me>>>8,this[Fe+1]=Me&255,Fe+2},le.prototype.writeInt32LE=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,4,2147483647,-2147483648),this[Fe]=Me&255,this[Fe+1]=Me>>>8,this[Fe+2]=Me>>>16,this[Fe+3]=Me>>>24,Fe+4},le.prototype.writeInt32BE=function(Me,Fe,We){return Me=+Me,Fe=Fe>>>0,We||et(this,Me,Fe,4,2147483647,-2147483648),Me<0&&(Me=4294967295+Me+1),this[Fe]=Me>>>24,this[Fe+1]=Me>>>16,this[Fe+2]=Me>>>8,this[Fe+3]=Me&255,Fe+4},le.prototype.writeBigInt64LE=gt(function(Me,Fe=0){return Je(this,Me,Fe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),le.prototype.writeBigInt64BE=gt(function(Me,Fe=0){return ft(this,Me,Fe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function dt(Ke,Me,Fe,We,ct,_t){if(Fe+We>Ke.length)throw new RangeError("Index out of range");if(Fe<0)throw new RangeError("Index out of range")}function Qe(Ke,Me,Fe,We,ct){return Me=+Me,Fe=Fe>>>0,ct||dt(Ke,Me,Fe,4),X.write(Ke,Me,Fe,We,23,4),Fe+4}le.prototype.writeFloatLE=function(Me,Fe,We){return Qe(this,Me,Fe,!0,We)},le.prototype.writeFloatBE=function(Me,Fe,We){return Qe(this,Me,Fe,!1,We)};function ht(Ke,Me,Fe,We,ct){return Me=+Me,Fe=Fe>>>0,ct||dt(Ke,Me,Fe,8),X.write(Ke,Me,Fe,We,52,8),Fe+8}le.prototype.writeDoubleLE=function(Me,Fe,We){return ht(this,Me,Fe,!0,We)},le.prototype.writeDoubleBE=function(Me,Fe,We){return ht(this,Me,Fe,!1,We)},le.prototype.copy=function(Me,Fe,We,ct){if(!le.isBuffer(Me))throw new TypeError("argument should be a Buffer");if(We||(We=0),!ct&&ct!==0&&(ct=this.length),Fe>=Me.length&&(Fe=Me.length),Fe||(Fe=0),ct>0&&ct<We&&(ct=We),ct===We||Me.length===0||this.length===0)return 0;if(Fe<0)throw new RangeError("targetStart out of bounds");if(We<0||We>=this.length)throw new RangeError("Index out of range");if(ct<0)throw new RangeError("sourceEnd out of bounds");ct>this.length&&(ct=this.length),Me.length-Fe<ct-We&&(ct=Me.length-Fe+We);const _t=ct-We;return this===Me&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Fe,We,ct):Uint8Array.prototype.set.call(Me,this.subarray(We,ct),Fe),_t},le.prototype.fill=function(Me,Fe,We,ct){if(typeof Me=="string"){if(typeof Fe=="string"?(ct=Fe,Fe=0,We=this.length):typeof We=="string"&&(ct=We,We=this.length),ct!==void 0&&typeof ct!="string")throw new TypeError("encoding must be a string");if(typeof ct=="string"&&!le.isEncoding(ct))throw new TypeError("Unknown encoding: "+ct);if(Me.length===1){const xt=Me.charCodeAt(0);(ct==="utf8"&&xt<128||ct==="latin1")&&(Me=xt)}}else typeof Me=="number"?Me=Me&255:typeof Me=="boolean"&&(Me=Number(Me));if(Fe<0||this.length<Fe||this.length<We)throw new RangeError("Out of range index");if(We<=Fe)return this;Fe=Fe>>>0,We=We===void 0?this.length:We>>>0,Me||(Me=0);let _t;if(typeof Me=="number")for(_t=Fe;_t<We;++_t)this[_t]=Me;else{const xt=le.isBuffer(Me)?Me:le.from(Me,ct),Pt=xt.length;if(Pt===0)throw new TypeError('The value "'+Me+'" is invalid for argument "value"');for(_t=0;_t<We-Fe;++_t)this[_t+Fe]=xt[_t%Pt]}return this};const mt={};function vt(Ke,Me,Fe){mt[Ke]=class extends Fe{constructor(){super(),Object.defineProperty(this,"message",{value:Me.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ke}]`,this.stack,delete this.name}get code(){return Ke}set code(ct){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ct,writable:!0})}toString(){return`${this.name} [${Ke}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(Ke){return Ke?`${Ke} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(Ke,Me){return`The "${Ke}" argument must be of type number. Received type ${typeof Me}`},TypeError),vt("ERR_OUT_OF_RANGE",function(Ke,Me,Fe){let We=`The value of "${Ke}" is out of range.`,ct=Fe;return Number.isInteger(Fe)&&Math.abs(Fe)>2**32?ct=wt(String(Fe)):typeof Fe=="bigint"&&(ct=String(Fe),(Fe>BigInt(2)**BigInt(32)||Fe<-(BigInt(2)**BigInt(32)))&&(ct=wt(ct)),ct+="n"),We+=` It must be ${Me}. Received ${ct}`,We},RangeError);function wt(Ke){let Me="",Fe=Ke.length;const We=Ke[0]==="-"?1:0;for(;Fe>=We+4;Fe-=3)Me=`_${Ke.slice(Fe-3,Fe)}${Me}`;return`${Ke.slice(0,Fe)}${Me}`}function St(Ke,Me,Fe){Et(Me,"offset"),(Ke[Me]===void 0||Ke[Me+Fe]===void 0)&&Tt(Me,Ke.length-(Fe+1))}function At(Ke,Me,Fe,We,ct,_t){if(Ke>Fe||Ke<Me){const xt=typeof Me=="bigint"?"n":"";let Pt;throw _t>3?Me===0||Me===BigInt(0)?Pt=`>= 0${xt} and < 2${xt} ** ${(_t+1)*8}${xt}`:Pt=`>= -(2${xt} ** ${(_t+1)*8-1}${xt}) and < 2 ** ${(_t+1)*8-1}${xt}`:Pt=`>= ${Me}${xt} and <= ${Fe}${xt}`,new mt.ERR_OUT_OF_RANGE("value",Pt,Ke)}St(We,ct,_t)}function Et(Ke,Me){if(typeof Ke!="number")throw new mt.ERR_INVALID_ARG_TYPE(Me,"number",Ke)}function Tt(Ke,Me,Fe){throw Math.floor(Ke)!==Ke?(Et(Ke,Fe),new mt.ERR_OUT_OF_RANGE(Fe||"offset","an integer",Ke)):Me<0?new mt.ERR_BUFFER_OUT_OF_BOUNDS:new mt.ERR_OUT_OF_RANGE(Fe||"offset",`>= ${Fe?1:0} and <= ${Me}`,Ke)}const Ze=/[^+/0-9A-Za-z-_]/g;function rt(Ke){if(Ke=Ke.split("=")[0],Ke=Ke.trim().replace(Ze,""),Ke.length<2)return"";for(;Ke.length%4!==0;)Ke=Ke+"=";return Ke}function lt(Ke,Me){Me=Me||1/0;let Fe;const We=Ke.length;let ct=null;const _t=[];for(let xt=0;xt<We;++xt){if(Fe=Ke.charCodeAt(xt),Fe>55295&&Fe<57344){if(!ct){if(Fe>56319){(Me-=3)>-1&&_t.push(239,191,189);continue}else if(xt+1===We){(Me-=3)>-1&&_t.push(239,191,189);continue}ct=Fe;continue}if(Fe<56320){(Me-=3)>-1&&_t.push(239,191,189),ct=Fe;continue}Fe=(ct-55296<<10|Fe-56320)+65536}else ct&&(Me-=3)>-1&&_t.push(239,191,189);if(ct=null,Fe<128){if((Me-=1)<0)break;_t.push(Fe)}else if(Fe<2048){if((Me-=2)<0)break;_t.push(Fe>>6|192,Fe&63|128)}else if(Fe<65536){if((Me-=3)<0)break;_t.push(Fe>>12|224,Fe>>6&63|128,Fe&63|128)}else if(Fe<1114112){if((Me-=4)<0)break;_t.push(Fe>>18|240,Fe>>12&63|128,Fe>>6&63|128,Fe&63|128)}else throw new Error("Invalid code point")}return _t}function nt(Ke){const Me=[];for(let Fe=0;Fe<Ke.length;++Fe)Me.push(Ke.charCodeAt(Fe)&255);return Me}function Ye(Ke,Me){let Fe,We,ct;const _t=[];for(let xt=0;xt<Ke.length&&!((Me-=2)<0);++xt)Fe=Ke.charCodeAt(xt),We=Fe>>8,ct=Fe%256,_t.push(ct),_t.push(We);return _t}function Be(Ke){return j.toByteArray(rt(Ke))}function Ue(Ke,Me,Fe,We){let ct;for(ct=0;ct<We&&!(ct+Fe>=Me.length||ct>=Ke.length);++ct)Me[ct+Fe]=Ke[ct];return ct}function He(Ke,Me){return Ke instanceof Me||Ke!=null&&Ke.constructor!=null&&Ke.constructor.name!=null&&Ke.constructor.name===Me.name}function ot(Ke){return Ke!==Ke}const ut=function(){const Ke="0123456789abcdef",Me=new Array(256);for(let Fe=0;Fe<16;++Fe){const We=Fe*16;for(let ct=0;ct<16;++ct)Me[We+ct]=Ke[Fe]+Ke[ct]}return Me}();function gt(Ke){return typeof BigInt>"u"?$t:Ke}function $t(){throw new Error("BigInt not supported")}})(buffer);async function sha(q){const j=await crypto.subtle.digest("SHA-256",q);return buffer.Buffer.from(j).toString("base64").replace(/\+/g,"-").replace(/\//g,"_")}function getDatabase(q,j){const X=createStore(`${j}_${q}`,q);return{get:te=>get$1(te,X),set:(te,ne)=>set(te,ne,X),has:te=>get$1(te,X).then(ne=>ne!==void 0),keys:()=>keys(X),delete:te=>del$1(te,X),clear:()=>clear(X)}}async function sleep$1(q){return new Promise(j=>setTimeout(j,q))}var __defProp$D=Object.defineProperty,__getOwnPropDesc$D=Object.getOwnPropertyDescriptor,__decorateClass$D=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$D(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$D(j,X,ne),ne};const RETRY_TIMEOUT=500;function staticImplements(){return q=>q}let IndexedDBBlobProvider=class{constructor(q,j){this.blobs=new Set,this.signals={blobAdded:new Signal,blobDeleted:new Signal},this._database=getDatabase("blob",q),j&&(this._cloud=new BlobCloudSync(q,j,this._database))}static async init(q,j){const X=new IndexedDBBlobProvider(q,j);return await X._initBlobs(),X}async _initBlobs(){const q=await this._database.keys();for(const j of q){const X=j;this.signals.blobAdded.emit(X),this.blobs.add(X)}}async get(q){var te;const j=await this._database.get(q);if(!j){const ne=(te=this._cloud)==null?void 0:te.get(q);return ne?(this.signals.blobAdded.emit(q),this.blobs.add(q),ne):null}return URL.createObjectURL(new Blob([j]))}async set(q){var te;const j=await q.arrayBuffer(),X=await sha(j);return await this._database.has(X)||(await this._database.set(X,j),this.signals.blobAdded.emit(X),this.blobs.add(X)),(te=this._cloud)==null||te.addTask(X,"add"),X}async delete(q){var j;await this._database.delete(q),this.signals.blobDeleted.emit(q),this.blobs.delete(q),(j=this._cloud)==null||j.addTask(q,"delete")}async clear(){await this._database.clear(),this.blobs.clear()}};IndexedDBBlobProvider=__decorateClass$D([staticImplements()],IndexedDBBlobProvider);class BlobCloudSync{constructor(j,X,te){this._abortController=new AbortController,this._pendingPipeline=[],this._pipeline=[],this.initialized=!1,this._fetcher=ky$1.create({prefixUrl:X,signal:this._abortController.signal,throwHttpErrors:!1}),this._database=te,this._pending=getDatabase("pending",j),this._workspace=j,this._pending.keys().then(async ne=>{this._pipeline=(await Promise.all(ne.map(async re=>{const{retry:oe=0,type:le}=await this._pending.get(re)||{},fe=await te.get(re);if((fe||le==="delete")&&le)return{id:re,blob:fe,retry:oe,type:le}}))).filter(re=>!!re),this.initialized=!0,this._pendingPipeline.forEach(re=>this._pipeline.push(re)),this._pendingPipeline.length=0,this._taskRunner()})}async _handleTaskRetry(j,X){X!=null&&X.exists?await this._pending.delete(j.id):(await this._pending.set(j.id,{type:j.type,retry:j.retry+1}),this._pipeline.push({...j,retry:j.retry+1}),await sleep$1(Math.min(10,j.retry)*100))}async _taskRunner(){const j=this._abortController.signal;for(;!j.aborted;){let X;for(;typeof(X=this._pipeline.shift())<"u"&&!j.aborted;)try{if((await this._fetcher.head(`${this._workspace}/blob/${X.id}`)).status===404){const ne=await this._fetcher.put(`${this._workspace}/blob`,{body:X.blob,retry:3}).json();await this._handleTaskRetry(X,ne)}}catch(te){console.warn("Error while syncing blob",te),await this._handleTaskRetry(X)}await sleep$1(RETRY_TIMEOUT)}console.error("BlobCloudSync taskRunner exited")}async get(j){const X=`${this._workspace}/blob/${j}`;try{const te=await this._fetcher.get(X,{throwHttpErrors:!0}).blob();return await this._database.set(j,await te.arrayBuffer()),URL.createObjectURL(te)}catch(te){return console.error("Error while getting blob",te),null}}async addTask(j,X){const te=await this._database.get(j);te||X==="delete"?(this.initialized?this._pipeline.push({id:j,blob:te,type:X,retry:0}):this._pendingPipeline.push({id:j,blob:te,type:X,retry:0}),console.log(this._pipeline,this._pendingPipeline)):console.error("Blob not found",j)}}class BlobStorage{constructor(){this._providers=[],this.signals={blobAdded:new Signal}}get providers(){return this._providers}get blobs(){const j=new Set;for(const X of this._providers)for(const te of X.blobs)j.add(te);return j}addProvider(j){this._providers.push(j),j.signals.blobAdded.on(X=>{this.signals.blobAdded.emit(X)})}removeProvider(j){this._providers=this._providers.filter(X=>X!==j)}async get(j){for(const X of this._providers)try{return await X.get(j)}catch(te){console.warn(te)}throw new Error(`No provider found for blob ${j}`)}async set(j){let X=null;for(const te of this._providers)try{X=await te.set(j)}catch(ne){console.warn(ne)}if(X===null)throw new Error("No provider found for blob");return X}async delete(j){for(const X of this._providers)try{await X.delete(j)}catch(te){console.warn(te)}}async clear(){for(const j of this._providers)try{await j.clear()}catch(X){console.warn(X)}}}const CLOUD_API="/api/workspace",getBlobStorage=async(q,j=CLOUD_API)=>{if(q){const X=new BlobStorage,te=await IndexedDBBlobProvider.init(q,j);return X.addProvider(te),X}return null},UNSUPPORTED_MSG="PrelimText does not support ";class PrelimText{constructor(j,X){this.ready=!1,this.type=j,this.index=X}get length(){return 0}clone(){throw new Error(UNSUPPORTED_MSG+"clone")}insert(){throw new Error(UNSUPPORTED_MSG+"insert")}insertList(){throw new Error(UNSUPPORTED_MSG+"insertList")}split(){throw new Error(UNSUPPORTED_MSG+"split")}join(){throw new Error(UNSUPPORTED_MSG+"join")}clear(){throw new Error(UNSUPPORTED_MSG+"clear")}delete(){throw new Error(UNSUPPORTED_MSG+"delete")}replace(){throw new Error(UNSUPPORTED_MSG+"replace")}format(){throw new Error(UNSUPPORTED_MSG+"format")}applyDelta(){throw new Error(UNSUPPORTED_MSG+"applyDelta")}sliceToDelta(){throw new Error(UNSUPPORTED_MSG+"sliceToDelta")}}let Text$1=class{constructor(j,X){this._shouldTransact=!0,this._space=j,typeof X=="string"?this._yText=new YText(X):this._yText=X}static fromDelta(j,X){const te=new Text$1(j,"");return te.applyDelta(X),te}get length(){return this._yText.length}_transact(j){const{_space:X,_shouldTransact:te}=this;te?X.transact(j):j()}clone(){return new Text$1(this._space,this._yText.clone())}split(j){return[new PrelimText("splitLeft",j),new PrelimText("splitRight",j)]}insert(j,X,te){this._transact(()=>{this._yText.insert(X,j,te),this._yText.meta={split:!0}})}insertList(j,X){this._transact(()=>{for(let te=j.length-1;te>=0;te--)this._yText.insert(X,j[te].insert||"",j[te].attributes);this._yText.meta={split:!0}})}join(j){this._transact(()=>{const te=j._yText.toDelta();te.splice(0,0,{retain:this._yText.length}),this._yText.applyDelta(te),this._yText.meta={join:!0}})}format(j,X,te){this._transact(()=>{this._yText.format(j,X,te),this._yText.meta={format:!0}})}delete(j,X){this._transact(()=>{this._yText.delete(j,X),this._yText.meta={delete:!0}})}replace(j,X,te,ne){this._transact(()=>{this._yText.delete(j,X),this._yText.insert(j,te,ne),this._yText.meta={replace:!0}})}clear(){this._transact(()=>{this._yText.delete(0,this._yText.length),this._yText.meta={clear:!0}})}applyDelta(j){this._transact(()=>{var X;(X=this._yText)==null||X.applyDelta(j)})}toDelta(){var j;return((j=this._yText)==null?void 0:j.toDelta())||[]}sliceToDelta(j,X){if(X&&j>=X)return[];const te=this.toDelta();if(j<1&&!X)return te;const ne=[];if(te&&te instanceof Array){let re=0;for(let oe=0;oe<te.length;oe++){const le=te[oe];let fe=le.insert||"";const we=fe.length;if(X&&re+we>X&&(fe=fe.slice(0,X-re)),re+we>j&&ne.length===0&&(fe=fe.slice(j-re)),re+we>j&&ne.length===0?ne.push({...le,insert:fe}):ne.length>0&&ne.push(le),X&&re+we>X)break;re=re+we}}return ne}toString(){var j;return((j=this._yText)==null?void 0:j.toString())||""}};class RichTextAdapter{constructor(j,X,te){this._yObserver=re=>{var ke,ye;const le=!(re.transaction.origin===this.doc.clientID),fe=!!((ke=re.target)!=null&&ke.meta);if(le||fe){const ve=re.delta,be=[];for(let Ce=0;Ce<ve.length;Ce++){const Ee=ve[Ce];Ee.insert!==void 0?be.push(Object.assign({},Ee,{attributes:Object.assign({},this._negatedUsedFormats,Ee.attributes||{})})):be.push(Ee)}this.quill.updateContents(be,this.doc.clientID),(ye=re.target)!=null&&ye.meta&&delete re.target.meta}},this._quillObserver=(re,oe,le,fe)=>{const{yText:we}=this;if(oe&&oe.ops){const ke=oe.ops;ke.forEach(ye=>{if(ye.attributes!==void 0)for(const ve in ye.attributes)this._negatedUsedFormats[ve]===void 0&&(this._negatedUsedFormats[ve]=!1)}),fe==="user"&&this.space.transact(()=>{we.applyDelta(ke)})}},this.space=j,this.yText=X,this.doc=j.doc,this.quill=te,this.awareness=j.awareness;const ne=te.getModule("cursors")||null;this.quillCursors=ne,this._negatedUsedFormats={},this.yText.observe(this._yObserver),te.setContents(X.toDelta(),this),te.on("editor-change",this._quillObserver)}getCursor(){const j=this.quill.getSelection();if(!j)return null;const X=createRelativePositionFromTypeIndex(this.yText,j.index),te=createRelativePositionFromTypeIndex(this.yText,j.index+j.length);return{anchor:X,focus:te}}destroy(){this.yText.unobserve(this._yObserver),this.quill.off("editor-change",this._quillObserver)}}const reconnectTimeoutBase=1200,maxReconnectTimeout=2500,messageReconnectTimeout=3e4,setupWS=q=>{if(q.shouldConnect&&q.ws===null){const j=new WebSocket(q.url),X=q.binaryType;let te=null;X&&(j.binaryType=X),q.ws=j,q.connecting=!0,q.connected=!1,j.onmessage=oe=>{q.lastMessageReceived=getUnixTime();const le=oe.data,fe=typeof le=="string"?JSON.parse(le):le;fe&&fe.type==="pong"&&(clearTimeout(te),te=setTimeout(re,messageReconnectTimeout/2)),q.emit("message",[fe,q])};const ne=oe=>{q.ws!==null&&(q.ws=null,q.connecting=!1,q.connected?(q.connected=!1,q.emit("disconnect",[{type:"disconnect",error:oe},q])):q.unsuccessfulReconnects++,setTimeout(setupWS,min(log10(q.unsuccessfulReconnects+1)*reconnectTimeoutBase,maxReconnectTimeout),q)),clearTimeout(te)},re=()=>{q.ws===j&&q.send({type:"ping"})};j.onclose=()=>ne(null),j.onerror=oe=>ne(oe),j.onopen=()=>{q.lastMessageReceived=getUnixTime(),q.connecting=!1,q.connected=!0,q.unsuccessfulReconnects=0,q.emit("connect",[{type:"connect"},q]),te=setTimeout(re,messageReconnectTimeout/2)}}};class WebsocketClient extends Observable{constructor(j,{binaryType:X}={}){super(),this.url=j,this.ws=null,this.binaryType=X||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&messageReconnectTimeout<getUnixTime()-this.lastMessageReceived&&this.ws.close()},messageReconnectTimeout/2),setupWS(this)}send(j){this.ws&&this.ws.send(JSON.stringify(j))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&setupWS(this)}}const channels=new Map;class LocalStoragePolyfill{constructor(j){this.room=j,this.onmessage=null,onChange(X=>X.key===j&&this.onmessage!==null&&this.onmessage({data:fromBase64(X.newValue||"")}))}postMessage(j){varStorage.setItem(this.room,toBase64(createUint8ArrayFromArrayBuffer(j)))}}const BC=typeof BroadcastChannel>"u"?LocalStoragePolyfill:BroadcastChannel,getChannel=q=>setIfUndefined(channels,q,()=>{const j=new Set,X=new BC(q);return X.onmessage=te=>j.forEach(ne=>ne(te.data,"broadcastchannel")),{bc:X,subs:j}}),subscribe=(q,j)=>getChannel(q).subs.add(j),unsubscribe=(q,j)=>getChannel(q).subs.delete(j),publish=(q,j,X=null)=>{const te=getChannel(q);te.bc.postMessage(j),te.subs.forEach(ne=>ne(j,X))},createMutex=()=>{let q=!0;return(j,X)=>{if(q){q=!1;try{j()}finally{q=!0}}else X!==void 0&&X()}};function commonjsRequire(q){throw new Error('Could not dynamically require "'+q+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var simplepeer_minExports={},simplepeer_min={get exports(){return simplepeer_minExports},set exports(q){simplepeer_minExports=q}};(function(q,j){(function(X){q.exports=X()})(function(){var X=Math.floor,te=Math.abs,ne=Math.pow;return function(){function re(oe,le,fe){function we(ve,be){if(!le[ve]){if(!oe[ve]){var Ce=typeof commonjsRequire=="function"&&commonjsRequire;if(!be&&Ce)return Ce(ve,!0);if(ke)return ke(ve,!0);var Ee=new Error("Cannot find module '"+ve+"'");throw Ee.code="MODULE_NOT_FOUND",Ee}var Oe=le[ve]={exports:{}};oe[ve][0].call(Oe.exports,function(Ae){var Te=oe[ve][1][Ae];return we(Te||Ae)},Oe,Oe.exports,re,oe,le,fe)}return le[ve].exports}for(var ke=typeof commonjsRequire=="function"&&commonjsRequire,ye=0;ye<fe.length;ye++)we(fe[ye]);return we}return re}()({1:[function(re,oe,le){function fe($e){var Le=$e.length;if(0<Le%4)throw new Error("Invalid string. Length must be a multiple of 4");var Pe=$e.indexOf("=");Pe===-1&&(Pe=Le);var Re=Pe===Le?0:4-Pe%4;return[Pe,Re]}function we($e,Le,Pe){return 3*(Le+Pe)/4-Pe}function ke($e){var Le,Pe,Re=fe($e),Ne=Re[0],je=Re[1],Ie=new Oe(we($e,Ne,je)),De=0,Ve=0<je?Ne-4:Ne;for(Pe=0;Pe<Ve;Pe+=4)Le=Ee[$e.charCodeAt(Pe)]<<18|Ee[$e.charCodeAt(Pe+1)]<<12|Ee[$e.charCodeAt(Pe+2)]<<6|Ee[$e.charCodeAt(Pe+3)],Ie[De++]=255&Le>>16,Ie[De++]=255&Le>>8,Ie[De++]=255&Le;return je===2&&(Le=Ee[$e.charCodeAt(Pe)]<<2|Ee[$e.charCodeAt(Pe+1)]>>4,Ie[De++]=255&Le),je===1&&(Le=Ee[$e.charCodeAt(Pe)]<<10|Ee[$e.charCodeAt(Pe+1)]<<4|Ee[$e.charCodeAt(Pe+2)]>>2,Ie[De++]=255&Le>>8,Ie[De++]=255&Le),Ie}function ye($e){return Ce[63&$e>>18]+Ce[63&$e>>12]+Ce[63&$e>>6]+Ce[63&$e]}function ve($e,Le,Pe){for(var Re,Ne=[],je=Le;je<Pe;je+=3)Re=(16711680&$e[je]<<16)+(65280&$e[je+1]<<8)+(255&$e[je+2]),Ne.push(ye(Re));return Ne.join("")}function be($e){for(var Le,Pe=$e.length,Re=Pe%3,Ne=[],je=16383,Ie=0,De=Pe-Re;Ie<De;Ie+=je)Ne.push(ve($e,Ie,Ie+je>De?De:Ie+je));return Re===1?(Le=$e[Pe-1],Ne.push(Ce[Le>>2]+Ce[63&Le<<4]+"==")):Re===2&&(Le=($e[Pe-2]<<8)+$e[Pe-1],Ne.push(Ce[Le>>10]+Ce[63&Le>>4]+Ce[63&Le<<2]+"=")),Ne.join("")}le.byteLength=function($e){var Le=fe($e),Pe=Le[0],Re=Le[1];return 3*(Pe+Re)/4-Re},le.toByteArray=ke,le.fromByteArray=be;for(var Ce=[],Ee=[],Oe=typeof Uint8Array>"u"?Array:Uint8Array,Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Te=0,Se=Ae.length;Te<Se;++Te)Ce[Te]=Ae[Te],Ee[Ae.charCodeAt(Te)]=Te;Ee[45]=62,Ee[95]=63},{}],2:[function(){},{}],3:[function(re,oe,le){(function(){(function(){var fe=String.fromCharCode,we=Math.min;function ke(Be){if(2147483647<Be)throw new RangeError('The value "'+Be+'" is invalid for option "size"');var Ue=new Uint8Array(Be);return Ue.__proto__=ye.prototype,Ue}function ye(Be,Ue,He){if(typeof Be=="number"){if(typeof Ue=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ee(Be)}return ve(Be,Ue,He)}function ve(Be,Ue,He){if(typeof Be=="string")return Oe(Be,Ue);if(ArrayBuffer.isView(Be))return Ae(Be);if(Be==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Be);if(Ze(Be,ArrayBuffer)||Be&&Ze(Be.buffer,ArrayBuffer))return Te(Be,Ue,He);if(typeof Be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ot=Be.valueOf&&Be.valueOf();if(ot!=null&&ot!==Be)return ye.from(ot,Ue,He);var ut=Se(Be);if(ut)return ut;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Be[Symbol.toPrimitive]=="function")return ye.from(Be[Symbol.toPrimitive]("string"),Ue,He);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Be)}function be(Be){if(typeof Be!="number")throw new TypeError('"size" argument must be of type number');if(0>Be)throw new RangeError('The value "'+Be+'" is invalid for option "size"')}function Ce(Be,Ue,He){return be(Be),0>=Be||Ue===void 0?ke(Be):typeof He=="string"?ke(Be).fill(Ue,He):ke(Be).fill(Ue)}function Ee(Be){return be(Be),ke(0>Be?0:0|$e(Be))}function Oe(Be,Ue){if((typeof Ue!="string"||Ue==="")&&(Ue="utf8"),!ye.isEncoding(Ue))throw new TypeError("Unknown encoding: "+Ue);var He=0|Le(Be,Ue),ot=ke(He),ut=ot.write(Be,Ue);return ut!==He&&(ot=ot.slice(0,ut)),ot}function Ae(Be){for(var Ue=0>Be.length?0:0|$e(Be.length),He=ke(Ue),ot=0;ot<Ue;ot+=1)He[ot]=255&Be[ot];return He}function Te(Be,Ue,He){if(0>Ue||Be.byteLength<Ue)throw new RangeError('"offset" is outside of buffer bounds');if(Be.byteLength<Ue+(He||0))throw new RangeError('"length" is outside of buffer bounds');var ot;return ot=Ue===void 0&&He===void 0?new Uint8Array(Be):He===void 0?new Uint8Array(Be,Ue):new Uint8Array(Be,Ue,He),ot.__proto__=ye.prototype,ot}function Se(Be){if(ye.isBuffer(Be)){var Ue=0|$e(Be.length),He=ke(Ue);return He.length===0||Be.copy(He,0,0,Ue),He}return Be.length===void 0?Be.type==="Buffer"&&Array.isArray(Be.data)?Ae(Be.data):void 0:typeof Be.length!="number"||rt(Be.length)?ke(0):Ae(Be)}function $e(Be){if(Be>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|Be}function Le(Be,Ue){if(ye.isBuffer(Be))return Be.length;if(ArrayBuffer.isView(Be)||Ze(Be,ArrayBuffer))return Be.byteLength;if(typeof Be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Be);var He=Be.length,ot=2<arguments.length&&arguments[2]===!0;if(!ot&&He===0)return 0;for(var ut=!1;;)switch(Ue){case"ascii":case"latin1":case"binary":return He;case"utf8":case"utf-8":return wt(Be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*He;case"hex":return He>>>1;case"base64":return Et(Be).length;default:if(ut)return ot?-1:wt(Be).length;Ue=(""+Ue).toLowerCase(),ut=!0}}function Pe(Be,Ue,He){var ot=!1;if((Ue===void 0||0>Ue)&&(Ue=0),Ue>this.length||((He===void 0||He>this.length)&&(He=this.length),0>=He)||(He>>>=0,Ue>>>=0,He<=Ue))return"";for(Be||(Be="utf8");;)switch(Be){case"hex":return Ge(this,Ue,He);case"utf8":case"utf-8":return at(this,Ue,He);case"ascii":return st(this,Ue,He);case"latin1":case"binary":return it(this,Ue,He);case"base64":return tt(this,Ue,He);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,Ue,He);default:if(ot)throw new TypeError("Unknown encoding: "+Be);Be=(Be+"").toLowerCase(),ot=!0}}function Re(Be,Ue,He){var ot=Be[Ue];Be[Ue]=Be[He],Be[He]=ot}function Ne(Be,Ue,He,ot,ut){if(Be.length===0)return-1;if(typeof He=="string"?(ot=He,He=0):2147483647<He?He=2147483647:-2147483648>He&&(He=-2147483648),He=+He,rt(He)&&(He=ut?0:Be.length-1),0>He&&(He=Be.length+He),He>=Be.length){if(ut)return-1;He=Be.length-1}else if(0>He)if(ut)He=0;else return-1;if(typeof Ue=="string"&&(Ue=ye.from(Ue,ot)),ye.isBuffer(Ue))return Ue.length===0?-1:je(Be,Ue,He,ot,ut);if(typeof Ue=="number")return Ue&=255,typeof Uint8Array.prototype.indexOf=="function"?ut?Uint8Array.prototype.indexOf.call(Be,Ue,He):Uint8Array.prototype.lastIndexOf.call(Be,Ue,He):je(Be,[Ue],He,ot,ut);throw new TypeError("val must be string, number or Buffer")}function je(Be,Ue,He,ot,ut){function gt(xt,Pt){return $t===1?xt[Pt]:xt.readUInt16BE(Pt*$t)}var $t=1,Ke=Be.length,Me=Ue.length;if(ot!==void 0&&(ot=(ot+"").toLowerCase(),ot==="ucs2"||ot==="ucs-2"||ot==="utf16le"||ot==="utf-16le")){if(2>Be.length||2>Ue.length)return-1;$t=2,Ke/=2,Me/=2,He/=2}var Fe;if(ut){var We=-1;for(Fe=He;Fe<Ke;Fe++)if(gt(Be,Fe)!==gt(Ue,We===-1?0:Fe-We))We!==-1&&(Fe-=Fe-We),We=-1;else if(We===-1&&(We=Fe),Fe-We+1===Me)return We*$t}else for(He+Me>Ke&&(He=Ke-Me),Fe=He;0<=Fe;Fe--){for(var ct=!0,_t=0;_t<Me;_t++)if(gt(Be,Fe+_t)!==gt(Ue,_t)){ct=!1;break}if(ct)return Fe}return-1}function Ie(Be,Ue,He,ot){He=+He||0;var ut=Be.length-He;ot?(ot=+ot,ot>ut&&(ot=ut)):ot=ut;var gt=Ue.length;ot>gt/2&&(ot=gt/2);for(var $t,Ke=0;Ke<ot;++Ke){if($t=parseInt(Ue.substr(2*Ke,2),16),rt($t))return Ke;Be[He+Ke]=$t}return Ke}function De(Be,Ue,He,ot){return Tt(wt(Ue,Be.length-He),Be,He,ot)}function Ve(Be,Ue,He,ot){return Tt(St(Ue),Be,He,ot)}function ze(Be,Ue,He,ot){return Ve(Be,Ue,He,ot)}function qe(Be,Ue,He,ot){return Tt(Et(Ue),Be,He,ot)}function Xe(Be,Ue,He,ot){return Tt(At(Ue,Be.length-He),Be,He,ot)}function tt(Be,Ue,He){return Ue===0&&He===Be.length?lt.fromByteArray(Be):lt.fromByteArray(Be.slice(Ue,He))}function at(Be,Ue,He){He=we(Be.length,He);for(var ot=[],ut=Ue;ut<He;){var gt=Be[ut],$t=null,Ke=239<gt?4:223<gt?3:191<gt?2:1;if(ut+Ke<=He){var Me,Fe,We,ct;Ke===1?128>gt&&($t=gt):Ke===2?(Me=Be[ut+1],(192&Me)==128&&(ct=(31&gt)<<6|63&Me,127<ct&&($t=ct))):Ke===3?(Me=Be[ut+1],Fe=Be[ut+2],(192&Me)==128&&(192&Fe)==128&&(ct=(15&gt)<<12|(63&Me)<<6|63&Fe,2047<ct&&(55296>ct||57343<ct)&&($t=ct))):Ke===4&&(Me=Be[ut+1],Fe=Be[ut+2],We=Be[ut+3],(192&Me)==128&&(192&Fe)==128&&(192&We)==128&&(ct=(15&gt)<<18|(63&Me)<<12|(63&Fe)<<6|63&We,65535<ct&&1114112>ct&&($t=ct)))}$t===null?($t=65533,Ke=1):65535<$t&&($t-=65536,ot.push(55296|1023&$t>>>10),$t=56320|1023&$t),ot.push($t),ut+=Ke}return pt(ot)}function pt(Be){var Ue=Be.length;if(Ue<=4096)return fe.apply(String,Be);for(var He="",ot=0;ot<Ue;)He+=fe.apply(String,Be.slice(ot,ot+=4096));return He}function st(Be,Ue,He){var ot="";He=we(Be.length,He);for(var ut=Ue;ut<He;++ut)ot+=fe(127&Be[ut]);return ot}function it(Be,Ue,He){var ot="";He=we(Be.length,He);for(var ut=Ue;ut<He;++ut)ot+=fe(Be[ut]);return ot}function Ge(Be,Ue,He){var ot=Be.length;(!Ue||0>Ue)&&(Ue=0),(!He||0>He||He>ot)&&(He=ot);for(var ut="",gt=Ue;gt<He;++gt)ut+=vt(Be[gt]);return ut}function et(Be,Ue,He){for(var ot=Be.slice(Ue,He),ut="",gt=0;gt<ot.length;gt+=2)ut+=fe(ot[gt]+256*ot[gt+1]);return ut}function Je(Be,Ue,He){if(Be%1!=0||0>Be)throw new RangeError("offset is not uint");if(Be+Ue>He)throw new RangeError("Trying to access beyond buffer length")}function ft(Be,Ue,He,ot,ut,gt){if(!ye.isBuffer(Be))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ue>ut||Ue<gt)throw new RangeError('"value" argument is out of bounds');if(He+ot>Be.length)throw new RangeError("Index out of range")}function dt(Be,Ue,He,ot){if(He+ot>Be.length)throw new RangeError("Index out of range");if(0>He)throw new RangeError("Index out of range")}function Qe(Be,Ue,He,ot,ut){return Ue=+Ue,He>>>=0,ut||dt(Be,Ue,He,4),nt.write(Be,Ue,He,ot,23,4),He+4}function ht(Be,Ue,He,ot,ut){return Ue=+Ue,He>>>=0,ut||dt(Be,Ue,He,8),nt.write(Be,Ue,He,ot,52,8),He+8}function mt(Be){if(Be=Be.split("=")[0],Be=Be.trim().replace(Ye,""),2>Be.length)return"";for(;Be.length%4!=0;)Be+="=";return Be}function vt(Be){return 16>Be?"0"+Be.toString(16):Be.toString(16)}function wt(Be,Ue){Ue=Ue||1/0;for(var He,ot=Be.length,ut=null,gt=[],$t=0;$t<ot;++$t){if(He=Be.charCodeAt($t),55295<He&&57344>He){if(!ut){if(56319<He){-1<(Ue-=3)&&gt.push(239,191,189);continue}else if($t+1===ot){-1<(Ue-=3)&&gt.push(239,191,189);continue}ut=He;continue}if(56320>He){-1<(Ue-=3)&&gt.push(239,191,189),ut=He;continue}He=(ut-55296<<10|He-56320)+65536}else ut&&-1<(Ue-=3)&&gt.push(239,191,189);if(ut=null,128>He){if(0>(Ue-=1))break;gt.push(He)}else if(2048>He){if(0>(Ue-=2))break;gt.push(192|He>>6,128|63&He)}else if(65536>He){if(0>(Ue-=3))break;gt.push(224|He>>12,128|63&He>>6,128|63&He)}else if(1114112>He){if(0>(Ue-=4))break;gt.push(240|He>>18,128|63&He>>12,128|63&He>>6,128|63&He)}else throw new Error("Invalid code point")}return gt}function St(Be){for(var Ue=[],He=0;He<Be.length;++He)Ue.push(255&Be.charCodeAt(He));return Ue}function At(Be,Ue){for(var He,ot,ut,gt=[],$t=0;$t<Be.length&&!(0>(Ue-=2));++$t)He=Be.charCodeAt($t),ot=He>>8,ut=He%256,gt.push(ut),gt.push(ot);return gt}function Et(Be){return lt.toByteArray(mt(Be))}function Tt(Be,Ue,He,ot){for(var ut=0;ut<ot&&!(ut+He>=Ue.length||ut>=Be.length);++ut)Ue[ut+He]=Be[ut];return ut}function Ze(Be,Ue){return Be instanceof Ue||Be!=null&&Be.constructor!=null&&Be.constructor.name!=null&&Be.constructor.name===Ue.name}function rt(Be){return Be!==Be}var lt=re("base64-js"),nt=re("ieee754");le.Buffer=ye,le.SlowBuffer=function(Be){return+Be!=Be&&(Be=0),ye.alloc(+Be)},le.INSPECT_MAX_BYTES=50,le.kMaxLength=2147483647,ye.TYPED_ARRAY_SUPPORT=function(){try{var Be=new Uint8Array(1);return Be.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Be.foo()===42}catch{return!1}}(),ye.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ye.prototype,"parent",{enumerable:!0,get:function(){return ye.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(ye.prototype,"offset",{enumerable:!0,get:function(){return ye.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&ye[Symbol.species]===ye&&Object.defineProperty(ye,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),ye.poolSize=8192,ye.from=function(Be,Ue,He){return ve(Be,Ue,He)},ye.prototype.__proto__=Uint8Array.prototype,ye.__proto__=Uint8Array,ye.alloc=function(Be,Ue,He){return Ce(Be,Ue,He)},ye.allocUnsafe=function(Be){return Ee(Be)},ye.allocUnsafeSlow=function(Be){return Ee(Be)},ye.isBuffer=function(Be){return Be!=null&&Be._isBuffer===!0&&Be!==ye.prototype},ye.compare=function(Be,Ue){if(Ze(Be,Uint8Array)&&(Be=ye.from(Be,Be.offset,Be.byteLength)),Ze(Ue,Uint8Array)&&(Ue=ye.from(Ue,Ue.offset,Ue.byteLength)),!ye.isBuffer(Be)||!ye.isBuffer(Ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Be===Ue)return 0;for(var He=Be.length,ot=Ue.length,ut=0,gt=we(He,ot);ut<gt;++ut)if(Be[ut]!==Ue[ut]){He=Be[ut],ot=Ue[ut];break}return He<ot?-1:ot<He?1:0},ye.isEncoding=function(Be){switch((Be+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ye.concat=function(Be,Ue){if(!Array.isArray(Be))throw new TypeError('"list" argument must be an Array of Buffers');if(Be.length===0)return ye.alloc(0);var He;if(Ue===void 0)for(Ue=0,He=0;He<Be.length;++He)Ue+=Be[He].length;var ot=ye.allocUnsafe(Ue),ut=0;for(He=0;He<Be.length;++He){var gt=Be[He];if(Ze(gt,Uint8Array)&&(gt=ye.from(gt)),!ye.isBuffer(gt))throw new TypeError('"list" argument must be an Array of Buffers');gt.copy(ot,ut),ut+=gt.length}return ot},ye.byteLength=Le,ye.prototype._isBuffer=!0,ye.prototype.swap16=function(){var Be=this.length;if(Be%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Ue=0;Ue<Be;Ue+=2)Re(this,Ue,Ue+1);return this},ye.prototype.swap32=function(){var Be=this.length;if(Be%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Ue=0;Ue<Be;Ue+=4)Re(this,Ue,Ue+3),Re(this,Ue+1,Ue+2);return this},ye.prototype.swap64=function(){var Be=this.length;if(Be%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Ue=0;Ue<Be;Ue+=8)Re(this,Ue,Ue+7),Re(this,Ue+1,Ue+6),Re(this,Ue+2,Ue+5),Re(this,Ue+3,Ue+4);return this},ye.prototype.toString=function(){var Be=this.length;return Be===0?"":arguments.length===0?at(this,0,Be):Pe.apply(this,arguments)},ye.prototype.toLocaleString=ye.prototype.toString,ye.prototype.equals=function(Be){if(!ye.isBuffer(Be))throw new TypeError("Argument must be a Buffer");return this===Be||ye.compare(this,Be)===0},ye.prototype.inspect=function(){var Be="",Ue=le.INSPECT_MAX_BYTES;return Be=this.toString("hex",0,Ue).replace(/(.{2})/g,"$1 ").trim(),this.length>Ue&&(Be+=" ... "),"<Buffer "+Be+">"},ye.prototype.compare=function(Be,Ue,He,ot,ut){if(Ze(Be,Uint8Array)&&(Be=ye.from(Be,Be.offset,Be.byteLength)),!ye.isBuffer(Be))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Be);if(Ue===void 0&&(Ue=0),He===void 0&&(He=Be?Be.length:0),ot===void 0&&(ot=0),ut===void 0&&(ut=this.length),0>Ue||He>Be.length||0>ot||ut>this.length)throw new RangeError("out of range index");if(ot>=ut&&Ue>=He)return 0;if(ot>=ut)return-1;if(Ue>=He)return 1;if(Ue>>>=0,He>>>=0,ot>>>=0,ut>>>=0,this===Be)return 0;for(var gt=ut-ot,$t=He-Ue,Ke=we(gt,$t),Me=this.slice(ot,ut),Fe=Be.slice(Ue,He),We=0;We<Ke;++We)if(Me[We]!==Fe[We]){gt=Me[We],$t=Fe[We];break}return gt<$t?-1:$t<gt?1:0},ye.prototype.includes=function(Be,Ue,He){return this.indexOf(Be,Ue,He)!==-1},ye.prototype.indexOf=function(Be,Ue,He){return Ne(this,Be,Ue,He,!0)},ye.prototype.lastIndexOf=function(Be,Ue,He){return Ne(this,Be,Ue,He,!1)},ye.prototype.write=function(Be,Ue,He,ot){if(Ue===void 0)ot="utf8",He=this.length,Ue=0;else if(He===void 0&&typeof Ue=="string")ot=Ue,He=this.length,Ue=0;else if(isFinite(Ue))Ue>>>=0,isFinite(He)?(He>>>=0,ot===void 0&&(ot="utf8")):(ot=He,He=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ut=this.length-Ue;if((He===void 0||He>ut)&&(He=ut),0<Be.length&&(0>He||0>Ue)||Ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");ot||(ot="utf8");for(var gt=!1;;)switch(ot){case"hex":return Ie(this,Be,Ue,He);case"utf8":case"utf-8":return De(this,Be,Ue,He);case"ascii":return Ve(this,Be,Ue,He);case"latin1":case"binary":return ze(this,Be,Ue,He);case"base64":return qe(this,Be,Ue,He);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xe(this,Be,Ue,He);default:if(gt)throw new TypeError("Unknown encoding: "+ot);ot=(""+ot).toLowerCase(),gt=!0}},ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ye.prototype.slice=function(Be,Ue){var He=this.length;Be=~~Be,Ue=Ue===void 0?He:~~Ue,0>Be?(Be+=He,0>Be&&(Be=0)):Be>He&&(Be=He),0>Ue?(Ue+=He,0>Ue&&(Ue=0)):Ue>He&&(Ue=He),Ue<Be&&(Ue=Be);var ot=this.subarray(Be,Ue);return ot.__proto__=ye.prototype,ot},ye.prototype.readUIntLE=function(Be,Ue,He){Be>>>=0,Ue>>>=0,He||Je(Be,Ue,this.length);for(var ot=this[Be],ut=1,gt=0;++gt<Ue&&(ut*=256);)ot+=this[Be+gt]*ut;return ot},ye.prototype.readUIntBE=function(Be,Ue,He){Be>>>=0,Ue>>>=0,He||Je(Be,Ue,this.length);for(var ot=this[Be+--Ue],ut=1;0<Ue&&(ut*=256);)ot+=this[Be+--Ue]*ut;return ot},ye.prototype.readUInt8=function(Be,Ue){return Be>>>=0,Ue||Je(Be,1,this.length),this[Be]},ye.prototype.readUInt16LE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,2,this.length),this[Be]|this[Be+1]<<8},ye.prototype.readUInt16BE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,2,this.length),this[Be]<<8|this[Be+1]},ye.prototype.readUInt32LE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,4,this.length),(this[Be]|this[Be+1]<<8|this[Be+2]<<16)+16777216*this[Be+3]},ye.prototype.readUInt32BE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,4,this.length),16777216*this[Be]+(this[Be+1]<<16|this[Be+2]<<8|this[Be+3])},ye.prototype.readIntLE=function(Be,Ue,He){Be>>>=0,Ue>>>=0,He||Je(Be,Ue,this.length);for(var ot=this[Be],ut=1,gt=0;++gt<Ue&&(ut*=256);)ot+=this[Be+gt]*ut;return ut*=128,ot>=ut&&(ot-=ne(2,8*Ue)),ot},ye.prototype.readIntBE=function(Be,Ue,He){Be>>>=0,Ue>>>=0,He||Je(Be,Ue,this.length);for(var ot=Ue,ut=1,gt=this[Be+--ot];0<ot&&(ut*=256);)gt+=this[Be+--ot]*ut;return ut*=128,gt>=ut&&(gt-=ne(2,8*Ue)),gt},ye.prototype.readInt8=function(Be,Ue){return Be>>>=0,Ue||Je(Be,1,this.length),128&this[Be]?-1*(255-this[Be]+1):this[Be]},ye.prototype.readInt16LE=function(Be,Ue){Be>>>=0,Ue||Je(Be,2,this.length);var He=this[Be]|this[Be+1]<<8;return 32768&He?4294901760|He:He},ye.prototype.readInt16BE=function(Be,Ue){Be>>>=0,Ue||Je(Be,2,this.length);var He=this[Be+1]|this[Be]<<8;return 32768&He?4294901760|He:He},ye.prototype.readInt32LE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,4,this.length),this[Be]|this[Be+1]<<8|this[Be+2]<<16|this[Be+3]<<24},ye.prototype.readInt32BE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,4,this.length),this[Be]<<24|this[Be+1]<<16|this[Be+2]<<8|this[Be+3]},ye.prototype.readFloatLE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,4,this.length),nt.read(this,Be,!0,23,4)},ye.prototype.readFloatBE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,4,this.length),nt.read(this,Be,!1,23,4)},ye.prototype.readDoubleLE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,8,this.length),nt.read(this,Be,!0,52,8)},ye.prototype.readDoubleBE=function(Be,Ue){return Be>>>=0,Ue||Je(Be,8,this.length),nt.read(this,Be,!1,52,8)},ye.prototype.writeUIntLE=function(Be,Ue,He,ot){if(Be=+Be,Ue>>>=0,He>>>=0,!ot){var ut=ne(2,8*He)-1;ft(this,Be,Ue,He,ut,0)}var gt=1,$t=0;for(this[Ue]=255&Be;++$t<He&&(gt*=256);)this[Ue+$t]=255&Be/gt;return Ue+He},ye.prototype.writeUIntBE=function(Be,Ue,He,ot){if(Be=+Be,Ue>>>=0,He>>>=0,!ot){var ut=ne(2,8*He)-1;ft(this,Be,Ue,He,ut,0)}var gt=He-1,$t=1;for(this[Ue+gt]=255&Be;0<=--gt&&($t*=256);)this[Ue+gt]=255&Be/$t;return Ue+He},ye.prototype.writeUInt8=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,1,255,0),this[Ue]=255&Be,Ue+1},ye.prototype.writeUInt16LE=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,2,65535,0),this[Ue]=255&Be,this[Ue+1]=Be>>>8,Ue+2},ye.prototype.writeUInt16BE=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,2,65535,0),this[Ue]=Be>>>8,this[Ue+1]=255&Be,Ue+2},ye.prototype.writeUInt32LE=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,4,4294967295,0),this[Ue+3]=Be>>>24,this[Ue+2]=Be>>>16,this[Ue+1]=Be>>>8,this[Ue]=255&Be,Ue+4},ye.prototype.writeUInt32BE=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,4,4294967295,0),this[Ue]=Be>>>24,this[Ue+1]=Be>>>16,this[Ue+2]=Be>>>8,this[Ue+3]=255&Be,Ue+4},ye.prototype.writeIntLE=function(Be,Ue,He,ot){if(Be=+Be,Ue>>>=0,!ot){var ut=ne(2,8*He-1);ft(this,Be,Ue,He,ut-1,-ut)}var gt=0,$t=1,Ke=0;for(this[Ue]=255&Be;++gt<He&&($t*=256);)0>Be&&Ke===0&&this[Ue+gt-1]!==0&&(Ke=1),this[Ue+gt]=255&(Be/$t>>0)-Ke;return Ue+He},ye.prototype.writeIntBE=function(Be,Ue,He,ot){if(Be=+Be,Ue>>>=0,!ot){var ut=ne(2,8*He-1);ft(this,Be,Ue,He,ut-1,-ut)}var gt=He-1,$t=1,Ke=0;for(this[Ue+gt]=255&Be;0<=--gt&&($t*=256);)0>Be&&Ke===0&&this[Ue+gt+1]!==0&&(Ke=1),this[Ue+gt]=255&(Be/$t>>0)-Ke;return Ue+He},ye.prototype.writeInt8=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,1,127,-128),0>Be&&(Be=255+Be+1),this[Ue]=255&Be,Ue+1},ye.prototype.writeInt16LE=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,2,32767,-32768),this[Ue]=255&Be,this[Ue+1]=Be>>>8,Ue+2},ye.prototype.writeInt16BE=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,2,32767,-32768),this[Ue]=Be>>>8,this[Ue+1]=255&Be,Ue+2},ye.prototype.writeInt32LE=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,4,2147483647,-2147483648),this[Ue]=255&Be,this[Ue+1]=Be>>>8,this[Ue+2]=Be>>>16,this[Ue+3]=Be>>>24,Ue+4},ye.prototype.writeInt32BE=function(Be,Ue,He){return Be=+Be,Ue>>>=0,He||ft(this,Be,Ue,4,2147483647,-2147483648),0>Be&&(Be=4294967295+Be+1),this[Ue]=Be>>>24,this[Ue+1]=Be>>>16,this[Ue+2]=Be>>>8,this[Ue+3]=255&Be,Ue+4},ye.prototype.writeFloatLE=function(Be,Ue,He){return Qe(this,Be,Ue,!0,He)},ye.prototype.writeFloatBE=function(Be,Ue,He){return Qe(this,Be,Ue,!1,He)},ye.prototype.writeDoubleLE=function(Be,Ue,He){return ht(this,Be,Ue,!0,He)},ye.prototype.writeDoubleBE=function(Be,Ue,He){return ht(this,Be,Ue,!1,He)},ye.prototype.copy=function(Be,Ue,He,ot){if(!ye.isBuffer(Be))throw new TypeError("argument should be a Buffer");if(He||(He=0),ot||ot===0||(ot=this.length),Ue>=Be.length&&(Ue=Be.length),Ue||(Ue=0),0<ot&&ot<He&&(ot=He),ot===He||Be.length===0||this.length===0)return 0;if(0>Ue)throw new RangeError("targetStart out of bounds");if(0>He||He>=this.length)throw new RangeError("Index out of range");if(0>ot)throw new RangeError("sourceEnd out of bounds");ot>this.length&&(ot=this.length),Be.length-Ue<ot-He&&(ot=Be.length-Ue+He);var ut=ot-He;if(this===Be&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(Ue,He,ot);else if(this===Be&&He<Ue&&Ue<ot)for(var gt=ut-1;0<=gt;--gt)Be[gt+Ue]=this[gt+He];else Uint8Array.prototype.set.call(Be,this.subarray(He,ot),Ue);return ut},ye.prototype.fill=function(Be,Ue,He,ot){if(typeof Be=="string"){if(typeof Ue=="string"?(ot=Ue,Ue=0,He=this.length):typeof He=="string"&&(ot=He,He=this.length),ot!==void 0&&typeof ot!="string")throw new TypeError("encoding must be a string");if(typeof ot=="string"&&!ye.isEncoding(ot))throw new TypeError("Unknown encoding: "+ot);if(Be.length===1){var ut=Be.charCodeAt(0);(ot==="utf8"&&128>ut||ot==="latin1")&&(Be=ut)}}else typeof Be=="number"&&(Be&=255);if(0>Ue||this.length<Ue||this.length<He)throw new RangeError("Out of range index");if(He<=Ue)return this;Ue>>>=0,He=He===void 0?this.length:He>>>0,Be||(Be=0);var gt;if(typeof Be=="number")for(gt=Ue;gt<He;++gt)this[gt]=Be;else{var $t=ye.isBuffer(Be)?Be:ye.from(Be,ot),Ke=$t.length;if(Ke===0)throw new TypeError('The value "'+Be+'" is invalid for argument "value"');for(gt=0;gt<He-Ue;++gt)this[gt+Ue]=$t[gt%Ke]}return this};var Ye=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,re("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(re,oe,le){(function(fe){(function(){function we(){let ye;try{ye=le.storage.getItem("debug")}catch{}return!ye&&typeof fe<"u"&&"env"in fe&&(ye=fe.env.DEBUG),ye}le.formatArgs=function(ye){if(ye[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+ye[0]+(this.useColors?"%c ":" ")+"+"+oe.exports.humanize(this.diff),!this.useColors)return;const ve="color: "+this.color;ye.splice(1,0,ve,"color: inherit");let be=0,Ce=0;ye[0].replace(/%[a-zA-Z%]/g,Ee=>{Ee==="%%"||(be++,Ee==="%c"&&(Ce=be))}),ye.splice(Ce,0,ve)},le.save=function(ye){try{ye?le.storage.setItem("debug",ye):le.storage.removeItem("debug")}catch{}},le.load=we,le.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},le.storage=function(){try{return localStorage}catch{}}(),le.destroy=(()=>{let ye=!1;return()=>{ye||(ye=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),le.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],le.log=console.debug||console.log||(()=>{}),oe.exports=re("./common")(le);const{formatters:ke}=oe.exports;ke.j=function(ye){try{return JSON.stringify(ye)}catch(ve){return"[UnexpectedJSONParseError]: "+ve.message}}}).call(this)}).call(this,re("_process"))},{"./common":5,_process:12}],5:[function(re,oe){oe.exports=function(le){function fe(ye){function ve(...Ee){if(!ve.enabled)return;const Oe=ve,Ae=+new Date,Te=Ae-(be||Ae);Oe.diff=Te,Oe.prev=be,Oe.curr=Ae,be=Ae,Ee[0]=fe.coerce(Ee[0]),typeof Ee[0]!="string"&&Ee.unshift("%O");let Se=0;Ee[0]=Ee[0].replace(/%([a-zA-Z%])/g,(Le,Pe)=>{if(Le==="%%")return"%";Se++;const Re=fe.formatters[Pe];if(typeof Re=="function"){const Ne=Ee[Se];Le=Re.call(Oe,Ne),Ee.splice(Se,1),Se--}return Le}),fe.formatArgs.call(Oe,Ee),(Oe.log||fe.log).apply(Oe,Ee)}let be,Ce=null;return ve.namespace=ye,ve.useColors=fe.useColors(),ve.color=fe.selectColor(ye),ve.extend=we,ve.destroy=fe.destroy,Object.defineProperty(ve,"enabled",{enumerable:!0,configurable:!1,get:()=>Ce===null?fe.enabled(ye):Ce,set:Ee=>{Ce=Ee}}),typeof fe.init=="function"&&fe.init(ve),ve}function we(ye,ve){const be=fe(this.namespace+(typeof ve>"u"?":":ve)+ye);return be.log=this.log,be}function ke(ye){return ye.toString().substring(2,ye.toString().length-2).replace(/\.\*\?$/,"*")}return fe.debug=fe,fe.default=fe,fe.coerce=function(ye){return ye instanceof Error?ye.stack||ye.message:ye},fe.disable=function(){const ye=[...fe.names.map(ke),...fe.skips.map(ke).map(ve=>"-"+ve)].join(",");return fe.enable(""),ye},fe.enable=function(ye){fe.save(ye),fe.names=[],fe.skips=[];let ve;const be=(typeof ye=="string"?ye:"").split(/[\s,]+/),Ce=be.length;for(ve=0;ve<Ce;ve++)be[ve]&&(ye=be[ve].replace(/\*/g,".*?"),ye[0]==="-"?fe.skips.push(new RegExp("^"+ye.substr(1)+"$")):fe.names.push(new RegExp("^"+ye+"$")))},fe.enabled=function(ye){if(ye[ye.length-1]==="*")return!0;let ve,be;for(ve=0,be=fe.skips.length;ve<be;ve++)if(fe.skips[ve].test(ye))return!1;for(ve=0,be=fe.names.length;ve<be;ve++)if(fe.names[ve].test(ye))return!0;return!1},fe.humanize=re("ms"),fe.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(le).forEach(ye=>{fe[ye]=le[ye]}),fe.names=[],fe.skips=[],fe.formatters={},fe.selectColor=function(ye){let ve=0;for(let be=0;be<ye.length;be++)ve=(ve<<5)-ve+ye.charCodeAt(be),ve|=0;return fe.colors[te(ve)%fe.colors.length]},fe.enable(fe.load()),fe}},{ms:11}],6:[function(re,oe){function le(fe,we){for(const ke in we)Object.defineProperty(fe,ke,{value:we[ke],enumerable:!0,configurable:!0});return fe}oe.exports=function(fe,we,ke){if(!fe||typeof fe=="string")throw new TypeError("Please pass an Error to err-code");ke||(ke={}),typeof we=="object"&&(ke=we,we=""),we&&(ke.code=we);try{return le(fe,ke)}catch{ke.message=fe.message,ke.stack=fe.stack;const ve=function(){};return ve.prototype=Object.create(Object.getPrototypeOf(fe)),le(new ve,ke)}}},{}],7:[function(re,oe){function le(Ie){console&&console.warn&&console.warn(Ie)}function fe(){fe.init.call(this)}function we(Ie){if(typeof Ie!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ie)}function ke(Ie){return Ie._maxListeners===void 0?fe.defaultMaxListeners:Ie._maxListeners}function ye(Ie,De,Ve,ze){var qe,Xe,tt;if(we(Ve),Xe=Ie._events,Xe===void 0?(Xe=Ie._events=Object.create(null),Ie._eventsCount=0):(Xe.newListener!==void 0&&(Ie.emit("newListener",De,Ve.listener?Ve.listener:Ve),Xe=Ie._events),tt=Xe[De]),tt===void 0)tt=Xe[De]=Ve,++Ie._eventsCount;else if(typeof tt=="function"?tt=Xe[De]=ze?[Ve,tt]:[tt,Ve]:ze?tt.unshift(Ve):tt.push(Ve),qe=ke(Ie),0<qe&&tt.length>qe&&!tt.warned){tt.warned=!0;var at=new Error("Possible EventEmitter memory leak detected. "+tt.length+" "+(De+" listeners added. Use emitter.setMaxListeners() to increase limit"));at.name="MaxListenersExceededWarning",at.emitter=Ie,at.type=De,at.count=tt.length,le(at)}return Ie}function ve(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function be(Ie,De,Ve){var ze={fired:!1,wrapFn:void 0,target:Ie,type:De,listener:Ve},qe=ve.bind(ze);return qe.listener=Ve,ze.wrapFn=qe,qe}function Ce(Ie,De,Ve){var ze=Ie._events;if(ze===void 0)return[];var qe=ze[De];return qe===void 0?[]:typeof qe=="function"?Ve?[qe.listener||qe]:[qe]:Ve?Te(qe):Oe(qe,qe.length)}function Ee(Ie){var De=this._events;if(De!==void 0){var Ve=De[Ie];if(typeof Ve=="function")return 1;if(Ve!==void 0)return Ve.length}return 0}function Oe(Ie,De){for(var Ve=Array(De),ze=0;ze<De;++ze)Ve[ze]=Ie[ze];return Ve}function Ae(Ie,De){for(;De+1<Ie.length;De++)Ie[De]=Ie[De+1];Ie.pop()}function Te(Ie){for(var De=Array(Ie.length),Ve=0;Ve<De.length;++Ve)De[Ve]=Ie[Ve].listener||Ie[Ve];return De}function Se(Ie,De,Ve){typeof Ie.on=="function"&&$e(Ie,"error",De,Ve)}function $e(Ie,De,Ve,ze){if(typeof Ie.on=="function")ze.once?Ie.once(De,Ve):Ie.on(De,Ve);else if(typeof Ie.addEventListener=="function")Ie.addEventListener(De,function qe(Xe){ze.once&&Ie.removeEventListener(De,qe),Ve(Xe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Ie)}var Le,Pe=typeof Reflect=="object"?Reflect:null,Re=Pe&&typeof Pe.apply=="function"?Pe.apply:function(Ie,De,Ve){return Function.prototype.apply.call(Ie,De,Ve)};Le=Pe&&typeof Pe.ownKeys=="function"?Pe.ownKeys:Object.getOwnPropertySymbols?function(Ie){return Object.getOwnPropertyNames(Ie).concat(Object.getOwnPropertySymbols(Ie))}:function(Ie){return Object.getOwnPropertyNames(Ie)};var Ne=Number.isNaN||function(Ie){return Ie!==Ie};oe.exports=fe,oe.exports.once=function(Ie,De){return new Promise(function(Ve,ze){function qe(tt){Ie.removeListener(De,Xe),ze(tt)}function Xe(){typeof Ie.removeListener=="function"&&Ie.removeListener("error",qe),Ve([].slice.call(arguments))}$e(Ie,De,Xe,{once:!0}),De!=="error"&&Se(Ie,qe,{once:!0})})},fe.EventEmitter=fe,fe.prototype._events=void 0,fe.prototype._eventsCount=0,fe.prototype._maxListeners=void 0;var je=10;Object.defineProperty(fe,"defaultMaxListeners",{enumerable:!0,get:function(){return je},set:function(Ie){if(typeof Ie!="number"||0>Ie||Ne(Ie))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Ie+".");je=Ie}}),fe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},fe.prototype.setMaxListeners=function(Ie){if(typeof Ie!="number"||0>Ie||Ne(Ie))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Ie+".");return this._maxListeners=Ie,this},fe.prototype.getMaxListeners=function(){return ke(this)},fe.prototype.emit=function(Ie){for(var De=[],Ve=1;Ve<arguments.length;Ve++)De.push(arguments[Ve]);var ze=Ie==="error",qe=this._events;if(qe!==void 0)ze=ze&&qe.error===void 0;else if(!ze)return!1;if(ze){var Xe;if(0<De.length&&(Xe=De[0]),Xe instanceof Error)throw Xe;var tt=new Error("Unhandled error."+(Xe?" ("+Xe.message+")":""));throw tt.context=Xe,tt}var at=qe[Ie];if(at===void 0)return!1;if(typeof at=="function")Re(at,this,De);else for(var pt=at.length,st=Oe(at,pt),Ve=0;Ve<pt;++Ve)Re(st[Ve],this,De);return!0},fe.prototype.addListener=function(Ie,De){return ye(this,Ie,De,!1)},fe.prototype.on=fe.prototype.addListener,fe.prototype.prependListener=function(Ie,De){return ye(this,Ie,De,!0)},fe.prototype.once=function(Ie,De){return we(De),this.on(Ie,be(this,Ie,De)),this},fe.prototype.prependOnceListener=function(Ie,De){return we(De),this.prependListener(Ie,be(this,Ie,De)),this},fe.prototype.removeListener=function(Ie,De){var Ve,ze,qe,Xe,tt;if(we(De),ze=this._events,ze===void 0)return this;if(Ve=ze[Ie],Ve===void 0)return this;if(Ve===De||Ve.listener===De)--this._eventsCount==0?this._events=Object.create(null):(delete ze[Ie],ze.removeListener&&this.emit("removeListener",Ie,Ve.listener||De));else if(typeof Ve!="function"){for(qe=-1,Xe=Ve.length-1;0<=Xe;Xe--)if(Ve[Xe]===De||Ve[Xe].listener===De){tt=Ve[Xe].listener,qe=Xe;break}if(0>qe)return this;qe===0?Ve.shift():Ae(Ve,qe),Ve.length===1&&(ze[Ie]=Ve[0]),ze.removeListener!==void 0&&this.emit("removeListener",Ie,tt||De)}return this},fe.prototype.off=fe.prototype.removeListener,fe.prototype.removeAllListeners=function(Ie){var De,Ve,ze;if(Ve=this._events,Ve===void 0)return this;if(Ve.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Ve[Ie]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Ve[Ie]),this;if(arguments.length===0){var qe,Xe=Object.keys(Ve);for(ze=0;ze<Xe.length;++ze)qe=Xe[ze],qe!=="removeListener"&&this.removeAllListeners(qe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(De=Ve[Ie],typeof De=="function")this.removeListener(Ie,De);else if(De!==void 0)for(ze=De.length-1;0<=ze;ze--)this.removeListener(Ie,De[ze]);return this},fe.prototype.listeners=function(Ie){return Ce(this,Ie,!0)},fe.prototype.rawListeners=function(Ie){return Ce(this,Ie,!1)},fe.listenerCount=function(Ie,De){return typeof Ie.listenerCount=="function"?Ie.listenerCount(De):Ee.call(Ie,De)},fe.prototype.listenerCount=Ee,fe.prototype.eventNames=function(){return 0<this._eventsCount?Le(this._events):[]}},{}],8:[function(re,oe){oe.exports=function(){if(typeof globalThis>"u")return null;var le={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return le.RTCPeerConnection?le:null}},{}],9:[function(re,oe,le){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */le.read=function(fe,we,ke,ye,ve){var be,Ce,Ee=8*ve-ye-1,Oe=(1<<Ee)-1,Ae=Oe>>1,Te=-7,Se=ke?ve-1:0,$e=ke?-1:1,Le=fe[we+Se];for(Se+=$e,be=Le&(1<<-Te)-1,Le>>=-Te,Te+=Ee;0<Te;be=256*be+fe[we+Se],Se+=$e,Te-=8);for(Ce=be&(1<<-Te)-1,be>>=-Te,Te+=ye;0<Te;Ce=256*Ce+fe[we+Se],Se+=$e,Te-=8);if(be===0)be=1-Ae;else{if(be===Oe)return Ce?NaN:(Le?-1:1)*(1/0);Ce+=ne(2,ye),be-=Ae}return(Le?-1:1)*Ce*ne(2,be-ye)},le.write=function(fe,we,ke,ye,ve,be){var Ce,Ee,Oe,Ae=Math.LN2,Te=Math.log,Se=8*be-ve-1,$e=(1<<Se)-1,Le=$e>>1,Pe=ve===23?ne(2,-24)-ne(2,-77):0,Re=ye?0:be-1,Ne=ye?1:-1,je=0>we||we===0&&0>1/we?1:0;for(we=te(we),isNaN(we)||we===1/0?(Ee=isNaN(we)?1:0,Ce=$e):(Ce=X(Te(we)/Ae),1>we*(Oe=ne(2,-Ce))&&(Ce--,Oe*=2),we+=1<=Ce+Le?Pe/Oe:Pe*ne(2,1-Le),2<=we*Oe&&(Ce++,Oe/=2),Ce+Le>=$e?(Ee=0,Ce=$e):1<=Ce+Le?(Ee=(we*Oe-1)*ne(2,ve),Ce+=Le):(Ee=we*ne(2,Le-1)*ne(2,ve),Ce=0));8<=ve;fe[ke+Re]=255&Ee,Re+=Ne,Ee/=256,ve-=8);for(Ce=Ce<<ve|Ee,Se+=ve;0<Se;fe[ke+Re]=255&Ce,Re+=Ne,Ce/=256,Se-=8);fe[ke+Re-Ne]|=128*je}},{}],10:[function(re,oe){oe.exports=typeof Object.create=="function"?function(le,fe){fe&&(le.super_=fe,le.prototype=Object.create(fe.prototype,{constructor:{value:le,enumerable:!1,writable:!0,configurable:!0}}))}:function(le,fe){if(fe){le.super_=fe;var we=function(){};we.prototype=fe.prototype,le.prototype=new we,le.prototype.constructor=le}}},{}],11:[function(re,oe){var le=Math.round;function fe(ve){if(ve+="",!(100<ve.length)){var be=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(ve);if(be){var Ce=parseFloat(be[1]),Ee=(be[2]||"ms").toLowerCase();return Ee==="years"||Ee==="year"||Ee==="yrs"||Ee==="yr"||Ee==="y"?315576e5*Ce:Ee==="weeks"||Ee==="week"||Ee==="w"?6048e5*Ce:Ee==="days"||Ee==="day"||Ee==="d"?864e5*Ce:Ee==="hours"||Ee==="hour"||Ee==="hrs"||Ee==="hr"||Ee==="h"?36e5*Ce:Ee==="minutes"||Ee==="minute"||Ee==="mins"||Ee==="min"||Ee==="m"?6e4*Ce:Ee==="seconds"||Ee==="second"||Ee==="secs"||Ee==="sec"||Ee==="s"?1e3*Ce:Ee==="milliseconds"||Ee==="millisecond"||Ee==="msecs"||Ee==="msec"||Ee==="ms"?Ce:void 0}}}function we(ve){var be=te(ve);return 864e5<=be?le(ve/864e5)+"d":36e5<=be?le(ve/36e5)+"h":6e4<=be?le(ve/6e4)+"m":1e3<=be?le(ve/1e3)+"s":ve+"ms"}function ke(ve){var be=te(ve);return 864e5<=be?ye(ve,be,864e5,"day"):36e5<=be?ye(ve,be,36e5,"hour"):6e4<=be?ye(ve,be,6e4,"minute"):1e3<=be?ye(ve,be,1e3,"second"):ve+" ms"}function ye(ve,be,Ce,Ee){return le(ve/Ce)+" "+Ee+(be>=1.5*Ce?"s":"")}oe.exports=function(ve,be){be=be||{};var Ce=typeof ve;if(Ce=="string"&&0<ve.length)return fe(ve);if(Ce==="number"&&isFinite(ve))return be.long?ke(ve):we(ve);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(ve))}},{}],12:[function(re,oe){function le(){throw new Error("setTimeout has not been defined")}function fe(){throw new Error("clearTimeout has not been defined")}function we(Pe){if(Ee===setTimeout)return setTimeout(Pe,0);if((Ee===le||!Ee)&&setTimeout)return Ee=setTimeout,setTimeout(Pe,0);try{return Ee(Pe,0)}catch{try{return Ee.call(null,Pe,0)}catch{return Ee.call(this,Pe,0)}}}function ke(Pe){if(Oe===clearTimeout)return clearTimeout(Pe);if((Oe===fe||!Oe)&&clearTimeout)return Oe=clearTimeout,clearTimeout(Pe);try{return Oe(Pe)}catch{try{return Oe.call(null,Pe)}catch{return Oe.call(this,Pe)}}}function ye(){$e&&Te&&($e=!1,Te.length?Se=Te.concat(Se):Le=-1,Se.length&&ve())}function ve(){if(!$e){var Pe=we(ye);$e=!0;for(var Re=Se.length;Re;){for(Te=Se,Se=[];++Le<Re;)Te&&Te[Le].run();Le=-1,Re=Se.length}Te=null,$e=!1,ke(Pe)}}function be(Pe,Re){this.fun=Pe,this.array=Re}function Ce(){}var Ee,Oe,Ae=oe.exports={};(function(){try{Ee=typeof setTimeout=="function"?setTimeout:le}catch{Ee=le}try{Oe=typeof clearTimeout=="function"?clearTimeout:fe}catch{Oe=fe}})();var Te,Se=[],$e=!1,Le=-1;Ae.nextTick=function(Pe){var Re=Array(arguments.length-1);if(1<arguments.length)for(var Ne=1;Ne<arguments.length;Ne++)Re[Ne-1]=arguments[Ne];Se.push(new be(Pe,Re)),Se.length!==1||$e||we(ve)},be.prototype.run=function(){this.fun.apply(null,this.array)},Ae.title="browser",Ae.browser=!0,Ae.env={},Ae.argv=[],Ae.version="",Ae.versions={},Ae.on=Ce,Ae.addListener=Ce,Ae.once=Ce,Ae.off=Ce,Ae.removeListener=Ce,Ae.removeAllListeners=Ce,Ae.emit=Ce,Ae.prependListener=Ce,Ae.prependOnceListener=Ce,Ae.listeners=function(){return[]},Ae.binding=function(){throw new Error("process.binding is not supported")},Ae.cwd=function(){return"/"},Ae.chdir=function(){throw new Error("process.chdir is not supported")},Ae.umask=function(){return 0}},{}],13:[function(re,oe){(function(le){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let fe;oe.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?le:window):we=>(fe||(fe=Promise.resolve())).then(we).catch(ke=>setTimeout(()=>{throw ke},0))}).call(this)}).call(this,typeof commonjsGlobal>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:commonjsGlobal)},{}],14:[function(re,oe){(function(le,fe){(function(){var we=re("safe-buffer").Buffer,ke=fe.crypto||fe.msCrypto;oe.exports=ke&&ke.getRandomValues?function(ye,ve){if(ye>4294967295)throw new RangeError("requested too many random bytes");var be=we.allocUnsafe(ye);if(0<ye)if(65536<ye)for(var Ce=0;Ce<ye;Ce+=65536)ke.getRandomValues(be.slice(Ce,Ce+65536));else ke.getRandomValues(be);return typeof ve=="function"?le.nextTick(function(){ve(null,be)}):be}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,re("_process"),typeof commonjsGlobal>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:commonjsGlobal)},{_process:12,"safe-buffer":30}],15:[function(re,oe){function le(Ce,Ee){Ce.prototype=Object.create(Ee.prototype),Ce.prototype.constructor=Ce,Ce.__proto__=Ee}function fe(Ce,Ee,Oe){function Ae(Se,$e,Le){return typeof Ee=="string"?Ee:Ee(Se,$e,Le)}Oe||(Oe=Error);var Te=function(Se){function $e(Le,Pe,Re){return Se.call(this,Ae(Le,Pe,Re))||this}return le($e,Se),$e}(Oe);Te.prototype.name=Oe.name,Te.prototype.code=Ce,be[Ce]=Te}function we(Ce,Ee){if(Array.isArray(Ce)){var Oe=Ce.length;return Ce=Ce.map(function(Ae){return Ae+""}),2<Oe?"one of ".concat(Ee," ").concat(Ce.slice(0,Oe-1).join(", "),", or ")+Ce[Oe-1]:Oe===2?"one of ".concat(Ee," ").concat(Ce[0]," or ").concat(Ce[1]):"of ".concat(Ee," ").concat(Ce[0])}return"of ".concat(Ee," ").concat(Ce+"")}function ke(Ce,Ee,Oe){return Ce.substr(!Oe||0>Oe?0:+Oe,Ee.length)===Ee}function ye(Ce,Ee,Oe){return(Oe===void 0||Oe>Ce.length)&&(Oe=Ce.length),Ce.substring(Oe-Ee.length,Oe)===Ee}function ve(Ce,Ee,Oe){return typeof Oe!="number"&&(Oe=0),!(Oe+Ee.length>Ce.length)&&Ce.indexOf(Ee,Oe)!==-1}var be={};fe("ERR_INVALID_OPT_VALUE",function(Ce,Ee){return'The value "'+Ee+'" is invalid for option "'+Ce+'"'},TypeError),fe("ERR_INVALID_ARG_TYPE",function(Ce,Ee,Oe){var Ae;typeof Ee=="string"&&ke(Ee,"not ")?(Ae="must not be",Ee=Ee.replace(/^not /,"")):Ae="must be";var Te;if(ye(Ce," argument"))Te="The ".concat(Ce," ").concat(Ae," ").concat(we(Ee,"type"));else{var Se=ve(Ce,".")?"property":"argument";Te='The "'.concat(Ce,'" ').concat(Se," ").concat(Ae," ").concat(we(Ee,"type"))}return Te+=". Received type ".concat(typeof Oe),Te},TypeError),fe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),fe("ERR_METHOD_NOT_IMPLEMENTED",function(Ce){return"The "+Ce+" method is not implemented"}),fe("ERR_STREAM_PREMATURE_CLOSE","Premature close"),fe("ERR_STREAM_DESTROYED",function(Ce){return"Cannot call "+Ce+" after a stream was destroyed"}),fe("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),fe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),fe("ERR_STREAM_WRITE_AFTER_END","write after end"),fe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),fe("ERR_UNKNOWN_ENCODING",function(Ce){return"Unknown encoding: "+Ce},TypeError),fe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),oe.exports.codes=be},{}],16:[function(re,oe){(function(le){(function(){function fe(Ae){return this instanceof fe?(ve.call(this,Ae),be.call(this,Ae),this.allowHalfOpen=!0,void(Ae&&(Ae.readable===!1&&(this.readable=!1),Ae.writable===!1&&(this.writable=!1),Ae.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",we))))):new fe(Ae)}function we(){this._writableState.ended||le.nextTick(ke,this)}function ke(Ae){Ae.end()}var ye=Object.keys||function(Ae){var Te=[];for(var Se in Ae)Te.push(Se);return Te};oe.exports=fe;var ve=re("./_stream_readable"),be=re("./_stream_writable");re("inherits")(fe,ve);for(var Ce,Ee=ye(be.prototype),Oe=0;Oe<Ee.length;Oe++)Ce=Ee[Oe],fe.prototype[Ce]||(fe.prototype[Ce]=be.prototype[Ce]);Object.defineProperty(fe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(fe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(fe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(fe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(Ae){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=Ae,this._writableState.destroyed=Ae)}})}).call(this)}).call(this,re("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(re,oe){function le(we){return this instanceof le?void fe.call(this,we):new le(we)}oe.exports=le;var fe=re("./_stream_transform");re("inherits")(le,fe),le.prototype._transform=function(we,ke,ye){ye(null,we)}},{"./_stream_transform":19,inherits:10}],18:[function(re,oe){(function(le,fe){(function(){function we(Ye){return et.from(Ye)}function ke(Ye){return et.isBuffer(Ye)||Ye instanceof Je}function ye(Ye,Be,Ue){return typeof Ye.prependListener=="function"?Ye.prependListener(Be,Ue):void(Ye._events&&Ye._events[Be]?Array.isArray(Ye._events[Be])?Ye._events[Be].unshift(Ue):Ye._events[Be]=[Ue,Ye._events[Be]]:Ye.on(Be,Ue))}function ve(Ye,Be,Ue){pt=pt||re("./_stream_duplex"),Ye=Ye||{},typeof Ue!="boolean"&&(Ue=Be instanceof pt),this.objectMode=!!Ye.objectMode,Ue&&(this.objectMode=this.objectMode||!!Ye.readableObjectMode),this.highWaterMark=St(this,Ye,"readableHighWaterMark",Ue),this.buffer=new mt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ye.emitClose!==!1,this.autoDestroy=!!Ye.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ye.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ye.encoding&&(!dt&&(dt=re("string_decoder/").StringDecoder),this.decoder=new dt(Ye.encoding),this.encoding=Ye.encoding)}function be(Ye){if(pt=pt||re("./_stream_duplex"),!(this instanceof be))return new be(Ye);var Be=this instanceof pt;this._readableState=new ve(Ye,this,Be),this.readable=!0,Ye&&(typeof Ye.read=="function"&&(this._read=Ye.read),typeof Ye.destroy=="function"&&(this._destroy=Ye.destroy)),Ge.call(this)}function Ce(Ye,Be,Ue,He,ot){st("readableAddChunk",Be);var ut=Ye._readableState;if(Be===null)ut.reading=!1,Se(Ye,ut);else{var gt;if(ot||(gt=Oe(ut,Be)),gt)lt(Ye,gt);else if(!(ut.objectMode||Be&&0<Be.length))He||(ut.reading=!1,Pe(Ye,ut));else if(typeof Be=="string"||ut.objectMode||Object.getPrototypeOf(Be)===et.prototype||(Be=we(Be)),He)ut.endEmitted?lt(Ye,new rt):Ee(Ye,ut,Be,!0);else if(ut.ended)lt(Ye,new Tt);else{if(ut.destroyed)return!1;ut.reading=!1,ut.decoder&&!Ue?(Be=ut.decoder.write(Be),ut.objectMode||Be.length!==0?Ee(Ye,ut,Be,!1):Pe(Ye,ut)):Ee(Ye,ut,Be,!1)}}return!ut.ended&&(ut.length<ut.highWaterMark||ut.length===0)}function Ee(Ye,Be,Ue,He){Be.flowing&&Be.length===0&&!Be.sync?(Be.awaitDrain=0,Ye.emit("data",Ue)):(Be.length+=Be.objectMode?1:Ue.length,He?Be.buffer.unshift(Ue):Be.buffer.push(Ue),Be.needReadable&&$e(Ye)),Pe(Ye,Be)}function Oe(Ye,Be){var Ue;return ke(Be)||typeof Be=="string"||Be===void 0||Ye.objectMode||(Ue=new Et("chunk",["string","Buffer","Uint8Array"],Be)),Ue}function Ae(Ye){return 1073741824<=Ye?Ye=1073741824:(Ye--,Ye|=Ye>>>1,Ye|=Ye>>>2,Ye|=Ye>>>4,Ye|=Ye>>>8,Ye|=Ye>>>16,Ye++),Ye}function Te(Ye,Be){return 0>=Ye||Be.length===0&&Be.ended?0:Be.objectMode?1:Ye===Ye?(Ye>Be.highWaterMark&&(Be.highWaterMark=Ae(Ye)),Ye<=Be.length?Ye:Be.ended?Be.length:(Be.needReadable=!0,0)):Be.flowing&&Be.length?Be.buffer.head.data.length:Be.length}function Se(Ye,Be){if(st("onEofChunk"),!Be.ended){if(Be.decoder){var Ue=Be.decoder.end();Ue&&Ue.length&&(Be.buffer.push(Ue),Be.length+=Be.objectMode?1:Ue.length)}Be.ended=!0,Be.sync?$e(Ye):(Be.needReadable=!1,!Be.emittedReadable&&(Be.emittedReadable=!0,Le(Ye)))}}function $e(Ye){var Be=Ye._readableState;st("emitReadable",Be.needReadable,Be.emittedReadable),Be.needReadable=!1,Be.emittedReadable||(st("emitReadable",Be.flowing),Be.emittedReadable=!0,le.nextTick(Le,Ye))}function Le(Ye){var Be=Ye._readableState;st("emitReadable_",Be.destroyed,Be.length,Be.ended),!Be.destroyed&&(Be.length||Be.ended)&&(Ye.emit("readable"),Be.emittedReadable=!1),Be.needReadable=!Be.flowing&&!Be.ended&&Be.length<=Be.highWaterMark,ze(Ye)}function Pe(Ye,Be){Be.readingMore||(Be.readingMore=!0,le.nextTick(Re,Ye,Be))}function Re(Ye,Be){for(;!Be.reading&&!Be.ended&&(Be.length<Be.highWaterMark||Be.flowing&&Be.length===0);){var Ue=Be.length;if(st("maybeReadMore read 0"),Ye.read(0),Ue===Be.length)break}Be.readingMore=!1}function Ne(Ye){return function(){var Be=Ye._readableState;st("pipeOnDrain",Be.awaitDrain),Be.awaitDrain&&Be.awaitDrain--,Be.awaitDrain===0&&it(Ye,"data")&&(Be.flowing=!0,ze(Ye))}}function je(Ye){var Be=Ye._readableState;Be.readableListening=0<Ye.listenerCount("readable"),Be.resumeScheduled&&!Be.paused?Be.flowing=!0:0<Ye.listenerCount("data")&&Ye.resume()}function Ie(Ye){st("readable nexttick read 0"),Ye.read(0)}function De(Ye,Be){Be.resumeScheduled||(Be.resumeScheduled=!0,le.nextTick(Ve,Ye,Be))}function Ve(Ye,Be){st("resume",Be.reading),Be.reading||Ye.read(0),Be.resumeScheduled=!1,Ye.emit("resume"),ze(Ye),Be.flowing&&!Be.reading&&Ye.read(0)}function ze(Ye){var Be=Ye._readableState;for(st("flow",Be.flowing);Be.flowing&&Ye.read()!==null;);}function qe(Ye,Be){if(Be.length===0)return null;var Ue;return Be.objectMode?Ue=Be.buffer.shift():!Ye||Ye>=Be.length?(Ue=Be.decoder?Be.buffer.join(""):Be.buffer.length===1?Be.buffer.first():Be.buffer.concat(Be.length),Be.buffer.clear()):Ue=Be.buffer.consume(Ye,Be.decoder),Ue}function Xe(Ye){var Be=Ye._readableState;st("endReadable",Be.endEmitted),Be.endEmitted||(Be.ended=!0,le.nextTick(tt,Be,Ye))}function tt(Ye,Be){if(st("endReadableNT",Ye.endEmitted,Ye.length),!Ye.endEmitted&&Ye.length===0&&(Ye.endEmitted=!0,Be.readable=!1,Be.emit("end"),Ye.autoDestroy)){var Ue=Be._writableState;(!Ue||Ue.autoDestroy&&Ue.finished)&&Be.destroy()}}function at(Ye,Be){for(var Ue=0,He=Ye.length;Ue<He;Ue++)if(Ye[Ue]===Be)return Ue;return-1}oe.exports=be;var pt;be.ReadableState=ve;var st;re("events").EventEmitter;var it=function(Ye,Be){return Ye.listeners(Be).length},Ge=re("./internal/streams/stream"),et=re("buffer").Buffer,Je=fe.Uint8Array||function(){},ft=re("util");st=ft&&ft.debuglog?ft.debuglog("stream"):function(){};var dt,Qe,ht,mt=re("./internal/streams/buffer_list"),vt=re("./internal/streams/destroy"),wt=re("./internal/streams/state"),St=wt.getHighWaterMark,At=re("../errors").codes,Et=At.ERR_INVALID_ARG_TYPE,Tt=At.ERR_STREAM_PUSH_AFTER_EOF,Ze=At.ERR_METHOD_NOT_IMPLEMENTED,rt=At.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;re("inherits")(be,Ge);var lt=vt.errorOrDestroy,nt=["error","close","destroy","pause","resume"];Object.defineProperty(be.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ye){this._readableState&&(this._readableState.destroyed=Ye)}}),be.prototype.destroy=vt.destroy,be.prototype._undestroy=vt.undestroy,be.prototype._destroy=function(Ye,Be){Be(Ye)},be.prototype.push=function(Ye,Be){var Ue,He=this._readableState;return He.objectMode?Ue=!0:typeof Ye=="string"&&(Be=Be||He.defaultEncoding,Be!==He.encoding&&(Ye=et.from(Ye,Be),Be=""),Ue=!0),Ce(this,Ye,Be,!1,Ue)},be.prototype.unshift=function(Ye){return Ce(this,Ye,null,!0,!1)},be.prototype.isPaused=function(){return this._readableState.flowing===!1},be.prototype.setEncoding=function(Ye){dt||(dt=re("string_decoder/").StringDecoder);var Be=new dt(Ye);this._readableState.decoder=Be,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ue=this._readableState.buffer.head,He="";Ue!==null;)He+=Be.write(Ue.data),Ue=Ue.next;return this._readableState.buffer.clear(),He!==""&&this._readableState.buffer.push(He),this._readableState.length=He.length,this},be.prototype.read=function(Ye){st("read",Ye),Ye=parseInt(Ye,10);var Be=this._readableState,Ue=Ye;if(Ye!==0&&(Be.emittedReadable=!1),Ye===0&&Be.needReadable&&((Be.highWaterMark===0?0<Be.length:Be.length>=Be.highWaterMark)||Be.ended))return st("read: emitReadable",Be.length,Be.ended),Be.length===0&&Be.ended?Xe(this):$e(this),null;if(Ye=Te(Ye,Be),Ye===0&&Be.ended)return Be.length===0&&Xe(this),null;var He=Be.needReadable;st("need readable",He),(Be.length===0||Be.length-Ye<Be.highWaterMark)&&(He=!0,st("length less than watermark",He)),Be.ended||Be.reading?(He=!1,st("reading or ended",He)):He&&(st("do read"),Be.reading=!0,Be.sync=!0,Be.length===0&&(Be.needReadable=!0),this._read(Be.highWaterMark),Be.sync=!1,!Be.reading&&(Ye=Te(Ue,Be)));var ot;return ot=0<Ye?qe(Ye,Be):null,ot===null?(Be.needReadable=Be.length<=Be.highWaterMark,Ye=0):(Be.length-=Ye,Be.awaitDrain=0),Be.length===0&&(!Be.ended&&(Be.needReadable=!0),Ue!==Ye&&Be.ended&&Xe(this)),ot!==null&&this.emit("data",ot),ot},be.prototype._read=function(){lt(this,new Ze("_read()"))},be.prototype.pipe=function(Ye,Be){function Ue(Nt,Dt){st("onunpipe"),Nt===Fe&&Dt&&Dt.hasUnpiped===!1&&(Dt.hasUnpiped=!0,ot())}function He(){st("onend"),Ye.end()}function ot(){st("cleanup"),Ye.removeListener("close",$t),Ye.removeListener("finish",Ke),Ye.removeListener("drain",xt),Ye.removeListener("error",gt),Ye.removeListener("unpipe",Ue),Fe.removeListener("end",He),Fe.removeListener("end",Me),Fe.removeListener("data",ut),Pt=!0,We.awaitDrain&&(!Ye._writableState||Ye._writableState.needDrain)&&xt()}function ut(Nt){st("ondata");var Dt=Ye.write(Nt);st("dest.write",Dt),Dt===!1&&((We.pipesCount===1&&We.pipes===Ye||1<We.pipesCount&&at(We.pipes,Ye)!==-1)&&!Pt&&(st("false write response, pause",We.awaitDrain),We.awaitDrain++),Fe.pause())}function gt(Nt){st("onerror",Nt),Me(),Ye.removeListener("error",gt),it(Ye,"error")===0&&lt(Ye,Nt)}function $t(){Ye.removeListener("finish",Ke),Me()}function Ke(){st("onfinish"),Ye.removeListener("close",$t),Me()}function Me(){st("unpipe"),Fe.unpipe(Ye)}var Fe=this,We=this._readableState;switch(We.pipesCount){case 0:We.pipes=Ye;break;case 1:We.pipes=[We.pipes,Ye];break;default:We.pipes.push(Ye)}We.pipesCount+=1,st("pipe count=%d opts=%j",We.pipesCount,Be);var ct=(!Be||Be.end!==!1)&&Ye!==le.stdout&&Ye!==le.stderr,_t=ct?He:Me;We.endEmitted?le.nextTick(_t):Fe.once("end",_t),Ye.on("unpipe",Ue);var xt=Ne(Fe);Ye.on("drain",xt);var Pt=!1;return Fe.on("data",ut),ye(Ye,"error",gt),Ye.once("close",$t),Ye.once("finish",Ke),Ye.emit("pipe",Fe),We.flowing||(st("pipe resume"),Fe.resume()),Ye},be.prototype.unpipe=function(Ye){var Be=this._readableState,Ue={hasUnpiped:!1};if(Be.pipesCount===0)return this;if(Be.pipesCount===1)return Ye&&Ye!==Be.pipes?this:(Ye||(Ye=Be.pipes),Be.pipes=null,Be.pipesCount=0,Be.flowing=!1,Ye&&Ye.emit("unpipe",this,Ue),this);if(!Ye){var He=Be.pipes,ot=Be.pipesCount;Be.pipes=null,Be.pipesCount=0,Be.flowing=!1;for(var ut=0;ut<ot;ut++)He[ut].emit("unpipe",this,{hasUnpiped:!1});return this}var gt=at(Be.pipes,Ye);return gt===-1?this:(Be.pipes.splice(gt,1),Be.pipesCount-=1,Be.pipesCount===1&&(Be.pipes=Be.pipes[0]),Ye.emit("unpipe",this,Ue),this)},be.prototype.on=function(Ye,Be){var Ue=Ge.prototype.on.call(this,Ye,Be),He=this._readableState;return Ye==="data"?(He.readableListening=0<this.listenerCount("readable"),He.flowing!==!1&&this.resume()):Ye=="readable"&&!He.endEmitted&&!He.readableListening&&(He.readableListening=He.needReadable=!0,He.flowing=!1,He.emittedReadable=!1,st("on readable",He.length,He.reading),He.length?$e(this):!He.reading&&le.nextTick(Ie,this)),Ue},be.prototype.addListener=be.prototype.on,be.prototype.removeListener=function(Ye,Be){var Ue=Ge.prototype.removeListener.call(this,Ye,Be);return Ye==="readable"&&le.nextTick(je,this),Ue},be.prototype.removeAllListeners=function(Ye){var Be=Ge.prototype.removeAllListeners.apply(this,arguments);return(Ye==="readable"||Ye===void 0)&&le.nextTick(je,this),Be},be.prototype.resume=function(){var Ye=this._readableState;return Ye.flowing||(st("resume"),Ye.flowing=!Ye.readableListening,De(this,Ye)),Ye.paused=!1,this},be.prototype.pause=function(){return st("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(st("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},be.prototype.wrap=function(Ye){var Be=this,Ue=this._readableState,He=!1;for(var ot in Ye.on("end",function(){if(st("wrapped end"),Ue.decoder&&!Ue.ended){var gt=Ue.decoder.end();gt&&gt.length&&Be.push(gt)}Be.push(null)}),Ye.on("data",function(gt){if(st("wrapped data"),Ue.decoder&&(gt=Ue.decoder.write(gt)),!(Ue.objectMode&&gt==null)&&(Ue.objectMode||gt&&gt.length)){var $t=Be.push(gt);$t||(He=!0,Ye.pause())}}),Ye)this[ot]===void 0&&typeof Ye[ot]=="function"&&(this[ot]=function(gt){return function(){return Ye[gt].apply(Ye,arguments)}}(ot));for(var ut=0;ut<nt.length;ut++)Ye.on(nt[ut],this.emit.bind(this,nt[ut]));return this._read=function(gt){st("wrapped _read",gt),He&&(He=!1,Ye.resume())},this},typeof Symbol=="function"&&(be.prototype[Symbol.asyncIterator]=function(){return Qe===void 0&&(Qe=re("./internal/streams/async_iterator")),Qe(this)}),Object.defineProperty(be.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(be.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(be.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ye){this._readableState&&(this._readableState.flowing=Ye)}}),be._fromList=qe,Object.defineProperty(be.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(be.from=function(Ye,Be){return ht===void 0&&(ht=re("./internal/streams/from")),ht(be,Ye,Be)})}).call(this)}).call(this,re("_process"),typeof commonjsGlobal>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:commonjsGlobal)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(re,oe){function le(Ae,Te){var Se=this._transformState;Se.transforming=!1;var $e=Se.writecb;if($e===null)return this.emit("error",new be);Se.writechunk=null,Se.writecb=null,Te!=null&&this.push(Te),$e(Ae);var Le=this._readableState;Le.reading=!1,(Le.needReadable||Le.length<Le.highWaterMark)&&this._read(Le.highWaterMark)}function fe(Ae){return this instanceof fe?(Oe.call(this,Ae),this._transformState={afterTransform:le.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,Ae&&(typeof Ae.transform=="function"&&(this._transform=Ae.transform),typeof Ae.flush=="function"&&(this._flush=Ae.flush)),void this.on("prefinish",we)):new fe(Ae)}function we(){var Ae=this;typeof this._flush!="function"||this._readableState.destroyed?ke(this,null,null):this._flush(function(Te,Se){ke(Ae,Te,Se)})}function ke(Ae,Te,Se){if(Te)return Ae.emit("error",Te);if(Se!=null&&Ae.push(Se),Ae._writableState.length)throw new Ee;if(Ae._transformState.transforming)throw new Ce;return Ae.push(null)}oe.exports=fe;var ye=re("../errors").codes,ve=ye.ERR_METHOD_NOT_IMPLEMENTED,be=ye.ERR_MULTIPLE_CALLBACK,Ce=ye.ERR_TRANSFORM_ALREADY_TRANSFORMING,Ee=ye.ERR_TRANSFORM_WITH_LENGTH_0,Oe=re("./_stream_duplex");re("inherits")(fe,Oe),fe.prototype.push=function(Ae,Te){return this._transformState.needTransform=!1,Oe.prototype.push.call(this,Ae,Te)},fe.prototype._transform=function(Ae,Te,Se){Se(new ve("_transform()"))},fe.prototype._write=function(Ae,Te,Se){var $e=this._transformState;if($e.writecb=Se,$e.writechunk=Ae,$e.writeencoding=Te,!$e.transforming){var Le=this._readableState;($e.needTransform||Le.needReadable||Le.length<Le.highWaterMark)&&this._read(Le.highWaterMark)}},fe.prototype._read=function(){var Ae=this._transformState;Ae.writechunk===null||Ae.transforming?Ae.needTransform=!0:(Ae.transforming=!0,this._transform(Ae.writechunk,Ae.writeencoding,Ae.afterTransform))},fe.prototype._destroy=function(Ae,Te){Oe.prototype._destroy.call(this,Ae,function(Se){Te(Se)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(re,oe){(function(le,fe){(function(){function we(Ze){var rt=this;this.next=null,this.entry=null,this.finish=function(){Xe(rt,Ze)}}function ke(Ze){return st.from(Ze)}function ye(Ze){return st.isBuffer(Ze)||Ze instanceof it}function ve(){}function be(Ze,rt,lt){tt=tt||re("./_stream_duplex"),Ze=Ze||{},typeof lt!="boolean"&&(lt=rt instanceof tt),this.objectMode=!!Ze.objectMode,lt&&(this.objectMode=this.objectMode||!!Ze.writableObjectMode),this.highWaterMark=Je(this,Ze,"writableHighWaterMark",lt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var nt=Ze.decodeStrings===!1;this.decodeStrings=!nt,this.defaultEncoding=Ze.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ye){Pe(rt,Ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ze.emitClose!==!1,this.autoDestroy=!!Ze.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new we(this)}function Ce(Ze){tt=tt||re("./_stream_duplex");var rt=this instanceof tt;return rt||Tt.call(Ce,this)?(this._writableState=new be(Ze,this,rt),this.writable=!0,Ze&&(typeof Ze.write=="function"&&(this._write=Ze.write),typeof Ze.writev=="function"&&(this._writev=Ze.writev),typeof Ze.destroy=="function"&&(this._destroy=Ze.destroy),typeof Ze.final=="function"&&(this._final=Ze.final)),void pt.call(this)):new Ce(Ze)}function Ee(Ze,rt){var lt=new St;Et(Ze,lt),le.nextTick(rt,lt)}function Oe(Ze,rt,lt,nt){var Ye;return lt===null?Ye=new wt:typeof lt!="string"&&!rt.objectMode&&(Ye=new dt("chunk",["string","Buffer"],lt)),!Ye||(Et(Ze,Ye),le.nextTick(nt,Ye),!1)}function Ae(Ze,rt,lt){return Ze.objectMode||Ze.decodeStrings===!1||typeof rt!="string"||(rt=st.from(rt,lt)),rt}function Te(Ze,rt,lt,nt,Ye,Be){if(!lt){var Ue=Ae(rt,nt,Ye);nt!==Ue&&(lt=!0,Ye="buffer",nt=Ue)}var He=rt.objectMode?1:nt.length;rt.length+=He;var ot=rt.length<rt.highWaterMark;if(ot||(rt.needDrain=!0),rt.writing||rt.corked){var ut=rt.lastBufferedRequest;rt.lastBufferedRequest={chunk:nt,encoding:Ye,isBuf:lt,callback:Be,next:null},ut?ut.next=rt.lastBufferedRequest:rt.bufferedRequest=rt.lastBufferedRequest,rt.bufferedRequestCount+=1}else Se(Ze,rt,!1,He,nt,Ye,Be);return ot}function Se(Ze,rt,lt,nt,Ye,Be,Ue){rt.writelen=nt,rt.writecb=Ue,rt.writing=!0,rt.sync=!0,rt.destroyed?rt.onwrite(new vt("write")):lt?Ze._writev(Ye,rt.onwrite):Ze._write(Ye,Be,rt.onwrite),rt.sync=!1}function $e(Ze,rt,lt,nt,Ye){--rt.pendingcb,lt?(le.nextTick(Ye,nt),le.nextTick(ze,Ze,rt),Ze._writableState.errorEmitted=!0,Et(Ze,nt)):(Ye(nt),Ze._writableState.errorEmitted=!0,Et(Ze,nt),ze(Ze,rt))}function Le(Ze){Ze.writing=!1,Ze.writecb=null,Ze.length-=Ze.writelen,Ze.writelen=0}function Pe(Ze,rt){var lt=Ze._writableState,nt=lt.sync,Ye=lt.writecb;if(typeof Ye!="function")throw new ht;if(Le(lt),rt)$e(Ze,lt,nt,rt,Ye);else{var Be=Ie(lt)||Ze.destroyed;Be||lt.corked||lt.bufferProcessing||!lt.bufferedRequest||je(Ze,lt),nt?le.nextTick(Re,Ze,lt,Be,Ye):Re(Ze,lt,Be,Ye)}}function Re(Ze,rt,lt,nt){lt||Ne(Ze,rt),rt.pendingcb--,nt(),ze(Ze,rt)}function Ne(Ze,rt){rt.length===0&&rt.needDrain&&(rt.needDrain=!1,Ze.emit("drain"))}function je(Ze,rt){rt.bufferProcessing=!0;var lt=rt.bufferedRequest;if(Ze._writev&&lt&&lt.next){var nt=rt.bufferedRequestCount,Ye=Array(nt),Be=rt.corkedRequestsFree;Be.entry=lt;for(var Ue=0,He=!0;lt;)Ye[Ue]=lt,lt.isBuf||(He=!1),lt=lt.next,Ue+=1;Ye.allBuffers=He,Se(Ze,rt,!0,rt.length,Ye,"",Be.finish),rt.pendingcb++,rt.lastBufferedRequest=null,Be.next?(rt.corkedRequestsFree=Be.next,Be.next=null):rt.corkedRequestsFree=new we(rt),rt.bufferedRequestCount=0}else{for(;lt;){var ot=lt.chunk,ut=lt.encoding,gt=lt.callback,$t=rt.objectMode?1:ot.length;if(Se(Ze,rt,!1,$t,ot,ut,gt),lt=lt.next,rt.bufferedRequestCount--,rt.writing)break}lt===null&&(rt.lastBufferedRequest=null)}rt.bufferedRequest=lt,rt.bufferProcessing=!1}function Ie(Ze){return Ze.ending&&Ze.length===0&&Ze.bufferedRequest===null&&!Ze.finished&&!Ze.writing}function De(Ze,rt){Ze._final(function(lt){rt.pendingcb--,lt&&Et(Ze,lt),rt.prefinished=!0,Ze.emit("prefinish"),ze(Ze,rt)})}function Ve(Ze,rt){rt.prefinished||rt.finalCalled||(typeof Ze._final!="function"||rt.destroyed?(rt.prefinished=!0,Ze.emit("prefinish")):(rt.pendingcb++,rt.finalCalled=!0,le.nextTick(De,Ze,rt)))}function ze(Ze,rt){var lt=Ie(rt);if(lt&&(Ve(Ze,rt),rt.pendingcb===0&&(rt.finished=!0,Ze.emit("finish"),rt.autoDestroy))){var nt=Ze._readableState;(!nt||nt.autoDestroy&&nt.endEmitted)&&Ze.destroy()}return lt}function qe(Ze,rt,lt){rt.ending=!0,ze(Ze,rt),lt&&(rt.finished?le.nextTick(lt):Ze.once("finish",lt)),rt.ended=!0,Ze.writable=!1}function Xe(Ze,rt,lt){var nt=Ze.entry;for(Ze.entry=null;nt;){var Ye=nt.callback;rt.pendingcb--,Ye(lt),nt=nt.next}rt.corkedRequestsFree.next=Ze}oe.exports=Ce;var tt;Ce.WritableState=be;var at={deprecate:re("util-deprecate")},pt=re("./internal/streams/stream"),st=re("buffer").Buffer,it=fe.Uint8Array||function(){},Ge=re("./internal/streams/destroy"),et=re("./internal/streams/state"),Je=et.getHighWaterMark,ft=re("../errors").codes,dt=ft.ERR_INVALID_ARG_TYPE,Qe=ft.ERR_METHOD_NOT_IMPLEMENTED,ht=ft.ERR_MULTIPLE_CALLBACK,mt=ft.ERR_STREAM_CANNOT_PIPE,vt=ft.ERR_STREAM_DESTROYED,wt=ft.ERR_STREAM_NULL_VALUES,St=ft.ERR_STREAM_WRITE_AFTER_END,At=ft.ERR_UNKNOWN_ENCODING,Et=Ge.errorOrDestroy;re("inherits")(Ce,pt),be.prototype.getBuffer=function(){for(var Ze=this.bufferedRequest,rt=[];Ze;)rt.push(Ze),Ze=Ze.next;return rt},function(){try{Object.defineProperty(be.prototype,"buffer",{get:at.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Tt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Tt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ce,Symbol.hasInstance,{value:function(Ze){return!!Tt.call(this,Ze)||this===Ce&&Ze&&Ze._writableState instanceof be}})):Tt=function(Ze){return Ze instanceof this},Ce.prototype.pipe=function(){Et(this,new mt)},Ce.prototype.write=function(Ze,rt,lt){var nt=this._writableState,Ye=!1,Be=!nt.objectMode&&ye(Ze);return Be&&!st.isBuffer(Ze)&&(Ze=ke(Ze)),typeof rt=="function"&&(lt=rt,rt=null),Be?rt="buffer":!rt&&(rt=nt.defaultEncoding),typeof lt!="function"&&(lt=ve),nt.ending?Ee(this,lt):(Be||Oe(this,nt,Ze,lt))&&(nt.pendingcb++,Ye=Te(this,nt,Be,Ze,rt,lt)),Ye},Ce.prototype.cork=function(){this._writableState.corked++},Ce.prototype.uncork=function(){var Ze=this._writableState;Ze.corked&&(Ze.corked--,!Ze.writing&&!Ze.corked&&!Ze.bufferProcessing&&Ze.bufferedRequest&&je(this,Ze))},Ce.prototype.setDefaultEncoding=function(Ze){if(typeof Ze=="string"&&(Ze=Ze.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ze+"").toLowerCase())))throw new At(Ze);return this._writableState.defaultEncoding=Ze,this},Object.defineProperty(Ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Ce.prototype._write=function(Ze,rt,lt){lt(new Qe("_write()"))},Ce.prototype._writev=null,Ce.prototype.end=function(Ze,rt,lt){var nt=this._writableState;return typeof Ze=="function"?(lt=Ze,Ze=null,rt=null):typeof rt=="function"&&(lt=rt,rt=null),Ze!=null&&this.write(Ze,rt),nt.corked&&(nt.corked=1,this.uncork()),nt.ending||qe(this,nt,lt),this},Object.defineProperty(Ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Ce.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ze){this._writableState&&(this._writableState.destroyed=Ze)}}),Ce.prototype.destroy=Ge.destroy,Ce.prototype._undestroy=Ge.undestroy,Ce.prototype._destroy=function(Ze,rt){rt(Ze)}}).call(this)}).call(this,re("_process"),typeof commonjsGlobal>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:commonjsGlobal)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(re,oe){(function(le){(function(){function fe(Ne,je,Ie){return je in Ne?Object.defineProperty(Ne,je,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):Ne[je]=Ie,Ne}function we(Ne,je){return{value:Ne,done:je}}function ke(Ne){var je=Ne[Ee];if(je!==null){var Ie=Ne[Le].read();Ie!==null&&(Ne[Se]=null,Ne[Ee]=null,Ne[Oe]=null,je(we(Ie,!1)))}}function ye(Ne){le.nextTick(ke,Ne)}function ve(Ne,je){return function(Ie,De){Ne.then(function(){return je[Te]?void Ie(we(void 0,!0)):void je[$e](Ie,De)},De)}}var be,Ce=re("./end-of-stream"),Ee=Symbol("lastResolve"),Oe=Symbol("lastReject"),Ae=Symbol("error"),Te=Symbol("ended"),Se=Symbol("lastPromise"),$e=Symbol("handlePromise"),Le=Symbol("stream"),Pe=Object.getPrototypeOf(function(){}),Re=Object.setPrototypeOf((be={get stream(){return this[Le]},next:function(){var Ne=this,je=this[Ae];if(je!==null)return Promise.reject(je);if(this[Te])return Promise.resolve(we(void 0,!0));if(this[Le].destroyed)return new Promise(function(ze,qe){le.nextTick(function(){Ne[Ae]?qe(Ne[Ae]):ze(we(void 0,!0))})});var Ie,De=this[Se];if(De)Ie=new Promise(ve(De,this));else{var Ve=this[Le].read();if(Ve!==null)return Promise.resolve(we(Ve,!1));Ie=new Promise(this[$e])}return this[Se]=Ie,Ie}},fe(be,Symbol.asyncIterator,function(){return this}),fe(be,"return",function(){var Ne=this;return new Promise(function(je,Ie){Ne[Le].destroy(null,function(De){return De?void Ie(De):void je(we(void 0,!0))})})}),be),Pe);oe.exports=function(Ne){var je,Ie=Object.create(Re,(je={},fe(je,Le,{value:Ne,writable:!0}),fe(je,Ee,{value:null,writable:!0}),fe(je,Oe,{value:null,writable:!0}),fe(je,Ae,{value:null,writable:!0}),fe(je,Te,{value:Ne._readableState.endEmitted,writable:!0}),fe(je,$e,{value:function(De,Ve){var ze=Ie[Le].read();ze?(Ie[Se]=null,Ie[Ee]=null,Ie[Oe]=null,De(we(ze,!1))):(Ie[Ee]=De,Ie[Oe]=Ve)},writable:!0}),je));return Ie[Se]=null,Ce(Ne,function(De){if(De&&De.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Ve=Ie[Oe];return Ve!==null&&(Ie[Se]=null,Ie[Ee]=null,Ie[Oe]=null,Ve(De)),void(Ie[Ae]=De)}var ze=Ie[Ee];ze!==null&&(Ie[Se]=null,Ie[Ee]=null,Ie[Oe]=null,ze(we(void 0,!0))),Ie[Te]=!0}),Ne.on("readable",ye.bind(null,Ie)),Ie}}).call(this)}).call(this,re("_process"))},{"./end-of-stream":24,_process:12}],22:[function(re,oe){function le(Se,$e){var Le=Object.keys(Se);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(Se);$e&&(Pe=Pe.filter(function(Re){return Object.getOwnPropertyDescriptor(Se,Re).enumerable})),Le.push.apply(Le,Pe)}return Le}function fe(Se){for(var $e,Le=1;Le<arguments.length;Le++)$e=arguments[Le]==null?{}:arguments[Le],Le%2?le(Object($e),!0).forEach(function(Pe){we(Se,Pe,$e[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors($e)):le(Object($e)).forEach(function(Pe){Object.defineProperty(Se,Pe,Object.getOwnPropertyDescriptor($e,Pe))});return Se}function we(Se,$e,Le){return $e in Se?Object.defineProperty(Se,$e,{value:Le,enumerable:!0,configurable:!0,writable:!0}):Se[$e]=Le,Se}function ke(Se,$e){if(!(Se instanceof $e))throw new TypeError("Cannot call a class as a function")}function ye(Se,$e){for(var Le,Pe=0;Pe<$e.length;Pe++)Le=$e[Pe],Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(Se,Le.key,Le)}function ve(Se,$e,Le){return $e&&ye(Se.prototype,$e),Le&&ye(Se,Le),Se}function be(Se,$e,Le){Ee.prototype.copy.call(Se,$e,Le)}var Ce=re("buffer"),Ee=Ce.Buffer,Oe=re("util"),Ae=Oe.inspect,Te=Ae&&Ae.custom||"inspect";oe.exports=function(){function Se(){ke(this,Se),this.head=null,this.tail=null,this.length=0}return ve(Se,[{key:"push",value:function($e){var Le={data:$e,next:null};0<this.length?this.tail.next=Le:this.head=Le,this.tail=Le,++this.length}},{key:"unshift",value:function($e){var Le={data:$e,next:this.head};this.length===0&&(this.tail=Le),this.head=Le,++this.length}},{key:"shift",value:function(){if(this.length!==0){var $e=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,$e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function($e){if(this.length===0)return"";for(var Le=this.head,Pe=""+Le.data;Le=Le.next;)Pe+=$e+Le.data;return Pe}},{key:"concat",value:function($e){if(this.length===0)return Ee.alloc(0);for(var Le=Ee.allocUnsafe($e>>>0),Pe=this.head,Re=0;Pe;)be(Pe.data,Le,Re),Re+=Pe.data.length,Pe=Pe.next;return Le}},{key:"consume",value:function($e,Le){var Pe;return $e<this.head.data.length?(Pe=this.head.data.slice(0,$e),this.head.data=this.head.data.slice($e)):$e===this.head.data.length?Pe=this.shift():Pe=Le?this._getString($e):this._getBuffer($e),Pe}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function($e){var Le=this.head,Pe=1,Re=Le.data;for($e-=Re.length;Le=Le.next;){var Ne=Le.data,je=$e>Ne.length?Ne.length:$e;if(Re+=je===Ne.length?Ne:Ne.slice(0,$e),$e-=je,$e===0){je===Ne.length?(++Pe,this.head=Le.next?Le.next:this.tail=null):(this.head=Le,Le.data=Ne.slice(je));break}++Pe}return this.length-=Pe,Re}},{key:"_getBuffer",value:function($e){var Le=Ee.allocUnsafe($e),Pe=this.head,Re=1;for(Pe.data.copy(Le),$e-=Pe.data.length;Pe=Pe.next;){var Ne=Pe.data,je=$e>Ne.length?Ne.length:$e;if(Ne.copy(Le,Le.length-$e,0,je),$e-=je,$e===0){je===Ne.length?(++Re,this.head=Pe.next?Pe.next:this.tail=null):(this.head=Pe,Pe.data=Ne.slice(je));break}++Re}return this.length-=Re,Le}},{key:Te,value:function($e,Le){return Ae(this,fe({},Le,{depth:0,customInspect:!1}))}}]),Se}()},{buffer:3,util:2}],23:[function(re,oe){(function(le){(function(){function fe(ye,ve){ke(ye,ve),we(ye)}function we(ye){ye._writableState&&!ye._writableState.emitClose||ye._readableState&&!ye._readableState.emitClose||ye.emit("close")}function ke(ye,ve){ye.emit("error",ve)}oe.exports={destroy:function(ye,ve){var be=this,Ce=this._readableState&&this._readableState.destroyed,Ee=this._writableState&&this._writableState.destroyed;return Ce||Ee?(ve?ve(ye):ye&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,le.nextTick(ke,this,ye)):le.nextTick(ke,this,ye)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(ye||null,function(Oe){!ve&&Oe?be._writableState?be._writableState.errorEmitted?le.nextTick(we,be):(be._writableState.errorEmitted=!0,le.nextTick(fe,be,Oe)):le.nextTick(fe,be,Oe):ve?(le.nextTick(we,be),ve(Oe)):le.nextTick(we,be)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(ye,ve){var be=ye._readableState,Ce=ye._writableState;be&&be.autoDestroy||Ce&&Ce.autoDestroy?ye.destroy(ve):ye.emit("error",ve)}}}).call(this)}).call(this,re("_process"))},{_process:12}],24:[function(re,oe){function le(ve){var be=!1;return function(){if(!be){be=!0;for(var Ce=arguments.length,Ee=Array(Ce),Oe=0;Oe<Ce;Oe++)Ee[Oe]=arguments[Oe];ve.apply(this,Ee)}}}function fe(){}function we(ve){return ve.setHeader&&typeof ve.abort=="function"}function ke(ve,be,Ce){if(typeof be=="function")return ke(ve,null,be);be||(be={}),Ce=le(Ce||fe);var Ee=be.readable||be.readable!==!1&&ve.readable,Oe=be.writable||be.writable!==!1&&ve.writable,Ae=function(){ve.writable||Se()},Te=ve._writableState&&ve._writableState.finished,Se=function(){Oe=!1,Te=!0,Ee||Ce.call(ve)},$e=ve._readableState&&ve._readableState.endEmitted,Le=function(){Ee=!1,$e=!0,Oe||Ce.call(ve)},Pe=function(je){Ce.call(ve,je)},Re=function(){var je;return Ee&&!$e?(ve._readableState&&ve._readableState.ended||(je=new ye),Ce.call(ve,je)):Oe&&!Te?(ve._writableState&&ve._writableState.ended||(je=new ye),Ce.call(ve,je)):void 0},Ne=function(){ve.req.on("finish",Se)};return we(ve)?(ve.on("complete",Se),ve.on("abort",Re),ve.req?Ne():ve.on("request",Ne)):Oe&&!ve._writableState&&(ve.on("end",Ae),ve.on("close",Ae)),ve.on("end",Le),ve.on("finish",Se),be.error!==!1&&ve.on("error",Pe),ve.on("close",Re),function(){ve.removeListener("complete",Se),ve.removeListener("abort",Re),ve.removeListener("request",Ne),ve.req&&ve.req.removeListener("finish",Se),ve.removeListener("end",Ae),ve.removeListener("close",Ae),ve.removeListener("finish",Se),ve.removeListener("end",Le),ve.removeListener("error",Pe),ve.removeListener("close",Re)}}var ye=re("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;oe.exports=ke},{"../../../errors":15}],25:[function(re,oe){oe.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(re,oe){function le(Te){var Se=!1;return function(){Se||(Se=!0,Te.apply(void 0,arguments))}}function fe(Te){if(Te)throw Te}function we(Te){return Te.setHeader&&typeof Te.abort=="function"}function ke(Te,Se,$e,Le){Le=le(Le);var Pe=!1;Te.on("close",function(){Pe=!0}),Ce===void 0&&(Ce=re("./end-of-stream")),Ce(Te,{readable:Se,writable:$e},function(Ne){return Ne?Le(Ne):(Pe=!0,void Le())});var Re=!1;return function(Ne){if(!Pe)return Re?void 0:(Re=!0,we(Te)?Te.abort():typeof Te.destroy=="function"?Te.destroy():void Le(Ne||new Ae("pipe")))}}function ye(Te){Te()}function ve(Te,Se){return Te.pipe(Se)}function be(Te){return Te.length&&typeof Te[Te.length-1]=="function"?Te.pop():fe}var Ce,Ee=re("../../../errors").codes,Oe=Ee.ERR_MISSING_ARGS,Ae=Ee.ERR_STREAM_DESTROYED;oe.exports=function(){for(var Te=arguments.length,Se=Array(Te),$e=0;$e<Te;$e++)Se[$e]=arguments[$e];var Le=be(Se);if(Array.isArray(Se[0])&&(Se=Se[0]),2>Se.length)throw new Oe("streams");var Pe,Re=Se.map(function(Ne,je){var Ie=je<Se.length-1;return ke(Ne,Ie,0<je,function(De){Pe||(Pe=De),De&&Re.forEach(ye),Ie||(Re.forEach(ye),Le(Pe))})});return Se.reduce(ve)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(re,oe){function le(we,ke,ye){return we.highWaterMark==null?ke?we[ye]:null:we.highWaterMark}var fe=re("../../../errors").codes.ERR_INVALID_OPT_VALUE;oe.exports={getHighWaterMark:function(we,ke,ye,ve){var be=le(ke,ve,ye);if(be!=null){if(!(isFinite(be)&&X(be)===be)||0>be){var Ce=ve?ye:"highWaterMark";throw new fe(Ce,be)}return X(be)}return we.objectMode?16:16384}}},{"../../../errors":15}],28:[function(re,oe){oe.exports=re("events").EventEmitter},{events:7}],29:[function(re,oe,le){le=oe.exports=re("./lib/_stream_readable.js"),le.Stream=le,le.Readable=le,le.Writable=re("./lib/_stream_writable.js"),le.Duplex=re("./lib/_stream_duplex.js"),le.Transform=re("./lib/_stream_transform.js"),le.PassThrough=re("./lib/_stream_passthrough.js"),le.finished=re("./lib/internal/streams/end-of-stream.js"),le.pipeline=re("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(re,oe,le){function fe(ve,be){for(var Ce in ve)be[Ce]=ve[Ce]}function we(ve,be,Ce){return ye(ve,be,Ce)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ke=re("buffer"),ye=ke.Buffer;ye.from&&ye.alloc&&ye.allocUnsafe&&ye.allocUnsafeSlow?oe.exports=ke:(fe(ke,le),le.Buffer=we),we.prototype=Object.create(ye.prototype),fe(ye,we),we.from=function(ve,be,Ce){if(typeof ve=="number")throw new TypeError("Argument must not be a number");return ye(ve,be,Ce)},we.alloc=function(ve,be,Ce){if(typeof ve!="number")throw new TypeError("Argument must be a number");var Ee=ye(ve);return be===void 0?Ee.fill(0):typeof Ce=="string"?Ee.fill(be,Ce):Ee.fill(be),Ee},we.allocUnsafe=function(ve){if(typeof ve!="number")throw new TypeError("Argument must be a number");return ye(ve)},we.allocUnsafeSlow=function(ve){if(typeof ve!="number")throw new TypeError("Argument must be a number");return ke.SlowBuffer(ve)}},{buffer:3}],31:[function(re,oe,le){function fe(Re){if(!Re)return"utf8";for(var Ne;;)switch(Re){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Re;default:if(Ne)return;Re=(""+Re).toLowerCase(),Ne=!0}}function we(Re){var Ne=fe(Re);if(typeof Ne!="string"&&(Le.isEncoding===Pe||!Pe(Re)))throw new Error("Unknown encoding: "+Re);return Ne||Re}function ke(Re){this.encoding=we(Re);var Ne;switch(this.encoding){case"utf16le":this.text=Ee,this.end=Oe,Ne=4;break;case"utf8":this.fillLast=Ce,Ne=4;break;case"base64":this.text=Ae,this.end=Te,Ne=3;break;default:return this.write=Se,void(this.end=$e)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Le.allocUnsafe(Ne)}function ye(Re){return 127>=Re?0:Re>>5==6?2:Re>>4==14?3:Re>>3==30?4:Re>>6==2?-1:-2}function ve(Re,Ne,je){var Ie=Ne.length-1;if(Ie<je)return 0;var De=ye(Ne[Ie]);return 0<=De?(0<De&&(Re.lastNeed=De-1),De):--Ie<je||De===-2?0:(De=ye(Ne[Ie]),0<=De?(0<De&&(Re.lastNeed=De-2),De):--Ie<je||De===-2?0:(De=ye(Ne[Ie]),0<=De?(0<De&&(De===2?De=0:Re.lastNeed=De-3),De):0))}function be(Re,Ne){if((192&Ne[0])!=128)return Re.lastNeed=0,"�";if(1<Re.lastNeed&&1<Ne.length){if((192&Ne[1])!=128)return Re.lastNeed=1,"�";if(2<Re.lastNeed&&2<Ne.length&&(192&Ne[2])!=128)return Re.lastNeed=2,"�"}}function Ce(Re){var Ne=this.lastTotal-this.lastNeed,je=be(this,Re);return je===void 0?this.lastNeed<=Re.length?(Re.copy(this.lastChar,Ne,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(Re.copy(this.lastChar,Ne,0,Re.length),void(this.lastNeed-=Re.length)):je}function Ee(Re,Ne){if((Re.length-Ne)%2==0){var je=Re.toString("utf16le",Ne);if(je){var Ie=je.charCodeAt(je.length-1);if(55296<=Ie&&56319>=Ie)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Re[Re.length-2],this.lastChar[1]=Re[Re.length-1],je.slice(0,-1)}return je}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Re[Re.length-1],Re.toString("utf16le",Ne,Re.length-1)}function Oe(Re){var Ne=Re&&Re.length?this.write(Re):"";if(this.lastNeed){var je=this.lastTotal-this.lastNeed;return Ne+this.lastChar.toString("utf16le",0,je)}return Ne}function Ae(Re,Ne){var je=(Re.length-Ne)%3;return je==0?Re.toString("base64",Ne):(this.lastNeed=3-je,this.lastTotal=3,je==1?this.lastChar[0]=Re[Re.length-1]:(this.lastChar[0]=Re[Re.length-2],this.lastChar[1]=Re[Re.length-1]),Re.toString("base64",Ne,Re.length-je))}function Te(Re){var Ne=Re&&Re.length?this.write(Re):"";return this.lastNeed?Ne+this.lastChar.toString("base64",0,3-this.lastNeed):Ne}function Se(Re){return Re.toString(this.encoding)}function $e(Re){return Re&&Re.length?this.write(Re):""}var Le=re("safe-buffer").Buffer,Pe=Le.isEncoding||function(Re){switch(Re=""+Re,Re&&Re.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};le.StringDecoder=ke,ke.prototype.write=function(Re){if(Re.length===0)return"";var Ne,je;if(this.lastNeed){if(Ne=this.fillLast(Re),Ne===void 0)return"";je=this.lastNeed,this.lastNeed=0}else je=0;return je<Re.length?Ne?Ne+this.text(Re,je):this.text(Re,je):Ne||""},ke.prototype.end=function(Re){var Ne=Re&&Re.length?this.write(Re):"";return this.lastNeed?Ne+"�":Ne},ke.prototype.text=function(Re,Ne){var je=ve(this,Re,Ne);if(!this.lastNeed)return Re.toString("utf8",Ne);this.lastTotal=je;var Ie=Re.length-(je-this.lastNeed);return Re.copy(this.lastChar,0,Ie),Re.toString("utf8",Ne,Ie)},ke.prototype.fillLast=function(Re){return this.lastNeed<=Re.length?(Re.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(Re.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Re.length),void(this.lastNeed-=Re.length))}},{"safe-buffer":30}],32:[function(re,oe){(function(le){(function(){function fe(we){try{if(!le.localStorage)return!1}catch{return!1}var ke=le.localStorage[we];return ke!=null&&(ke+"").toLowerCase()==="true"}oe.exports=function(we,ke){function ye(){if(!ve){if(fe("throwDeprecation"))throw new Error(ke);fe("traceDeprecation")?console.trace(ke):console.warn(ke),ve=!0}return we.apply(this,arguments)}if(fe("noDeprecation"))return we;var ve=!1;return ye}}).call(this)}).call(this,typeof commonjsGlobal>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:commonjsGlobal)},{}],"/":[function(re,oe){function le(Te){return Te.replace(/a=ice-options:trickle\s\n/g,"")}function fe(Te){console.warn(Te)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const we=re("debug")("simple-peer"),ke=re("get-browser-rtc"),ye=re("randombytes"),ve=re("readable-stream"),be=re("queue-microtask"),Ce=re("err-code"),{Buffer:Ee}=re("buffer"),Oe=65536;class Ae extends ve.Duplex{constructor(Se){if(Se=Object.assign({allowHalfOpen:!1},Se),super(Se),this._id=ye(4).toString("hex").slice(0,7),this._debug("new peer %o",Se),this.channelName=Se.initiator?Se.channelName||ye(20).toString("hex"):null,this.initiator=Se.initiator||!1,this.channelConfig=Se.channelConfig||Ae.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Ae.config,Se.config),this.offerOptions=Se.offerOptions||{},this.answerOptions=Se.answerOptions||{},this.sdpTransform=Se.sdpTransform||($e=>$e),this.streams=Se.streams||(Se.stream?[Se.stream]:[]),this.trickle=Se.trickle===void 0||Se.trickle,this.allowHalfTrickle=Se.allowHalfTrickle!==void 0&&Se.allowHalfTrickle,this.iceCompleteTimeout=Se.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=Se.wrtc&&typeof Se.wrtc=="object"?Se.wrtc:ke(),!this._wrtc)throw Ce(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch($e){return void this.destroy(Ce($e,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=$e=>{this._onIceCandidate($e)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch($e=>{this.destroy(Ce($e,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=$e=>{this._setupData($e)},this.streams&&this.streams.forEach($e=>{this.addStream($e)}),this._pc.ontrack=$e=>{this._onTrack($e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(Se){if(!this.destroying){if(this.destroyed)throw Ce(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof Se=="string")try{Se=JSON.parse(Se)}catch{Se={}}this._debug("signal()"),Se.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),Se.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(Se.transceiverRequest.kind,Se.transceiverRequest.init)),Se.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(Se.candidate):this._pendingCandidates.push(Se.candidate)),Se.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(Se)).then(()=>{this.destroyed||(this._pendingCandidates.forEach($e=>{this._addIceCandidate($e)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch($e=>{this.destroy(Ce($e,"ERR_SET_REMOTE_DESCRIPTION"))}),Se.sdp||Se.candidate||Se.renegotiate||Se.transceiverRequest||this.destroy(Ce(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(Se){const $e=new this._wrtc.RTCIceCandidate(Se);this._pc.addIceCandidate($e).catch(Le=>{!$e.address||$e.address.endsWith(".local")?fe("Ignoring unsupported ICE candidate."):this.destroy(Ce(Le,"ERR_ADD_ICE_CANDIDATE"))})}send(Se){if(!this.destroying){if(this.destroyed)throw Ce(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(Se)}}addTransceiver(Se,$e){if(!this.destroying){if(this.destroyed)throw Ce(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(Se,$e),this._needsNegotiation()}catch(Le){this.destroy(Ce(Le,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:Se,init:$e}})}}addStream(Se){if(!this.destroying){if(this.destroyed)throw Ce(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),Se.getTracks().forEach($e=>{this.addTrack($e,Se)})}}addTrack(Se,$e){if(this.destroying)return;if(this.destroyed)throw Ce(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const Le=this._senderMap.get(Se)||new Map;let Pe=Le.get($e);if(!Pe)Pe=this._pc.addTrack(Se,$e),Le.set($e,Pe),this._senderMap.set(Se,Le),this._needsNegotiation();else throw Pe.removed?Ce(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):Ce(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(Se,$e,Le){if(this.destroying)return;if(this.destroyed)throw Ce(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const Pe=this._senderMap.get(Se),Re=Pe?Pe.get(Le):null;if(!Re)throw Ce(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");$e&&this._senderMap.set($e,Pe),Re.replaceTrack==null?this.destroy(Ce(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):Re.replaceTrack($e)}removeTrack(Se,$e){if(this.destroying)return;if(this.destroyed)throw Ce(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const Le=this._senderMap.get(Se),Pe=Le?Le.get($e):null;if(!Pe)throw Ce(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{Pe.removed=!0,this._pc.removeTrack(Pe)}catch(Re){Re.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(Pe):this.destroy(Ce(Re,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(Se){if(!this.destroying){if(this.destroyed)throw Ce(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),Se.getTracks().forEach($e=>{this.removeTrack($e,Se)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,be(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw Ce(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(Se){this._destroy(Se,()=>{})}_destroy(Se,$e){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",Se&&(Se.message||Se)),be(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",Se&&(Se.message||Se)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,Se&&this.emit("error",Se),this.emit("close"),$e()}))}_setupData(Se){if(!Se.channel)return this.destroy(Ce(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=Se.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Oe),this.channelName=this._channel.label,this._channel.onmessage=Le=>{this._onChannelMessage(Le)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=Le=>{const Pe=Le.error instanceof Error?Le.error:new Error(`Datachannel error: ${Le.message} ${Le.filename}:${Le.lineno}:${Le.colno}`);this.destroy(Ce(Pe,"ERR_DATA_CHANNEL"))};let $e=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?($e&&this._onChannelClose(),$e=!0):$e=!1},5e3)}_read(){}_write(Se,$e,Le){if(this.destroyed)return Le(Ce(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(Se)}catch(Pe){return this.destroy(Ce(Pe,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Oe?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=Le):Le(null)}else this._debug("write before connect"),this._chunk=Se,this._cb=Le}_onFinish(){if(!this.destroyed){const Se=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?Se():this.once("connect",Se)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(Se=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(Se.sdp=le(Se.sdp)),Se.sdp=this.sdpTransform(Se.sdp);const $e=()=>{if(!this.destroyed){const Le=this._pc.localDescription||Se;this._debug("signal"),this.emit("signal",{type:Le.type,sdp:Le.sdp})}};this._pc.setLocalDescription(Se).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?$e():this.once("_iceComplete",$e))}).catch(Le=>{this.destroy(Ce(Le,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(Se=>{this.destroy(Ce(Se,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(Se=>{Se.mid||!Se.sender.track||Se.requested||(Se.requested=!0,this.addTransceiver(Se.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(Se=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(Se.sdp=le(Se.sdp)),Se.sdp=this.sdpTransform(Se.sdp);const $e=()=>{if(!this.destroyed){const Le=this._pc.localDescription||Se;this._debug("signal"),this.emit("signal",{type:Le.type,sdp:Le.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(Se).then(()=>{this.destroyed||(this.trickle||this._iceComplete?$e():this.once("_iceComplete",$e))}).catch(Le=>{this.destroy(Ce(Le,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(Se=>{this.destroy(Ce(Se,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(Ce(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const Se=this._pc.iceConnectionState,$e=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",Se,$e),this.emit("iceStateChange",Se,$e),(Se==="connected"||Se==="completed")&&(this._pcReady=!0,this._maybeReady()),Se==="failed"&&this.destroy(Ce(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),Se==="closed"&&this.destroy(Ce(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(Se){const $e=Le=>(Object.prototype.toString.call(Le.values)==="[object Array]"&&Le.values.forEach(Pe=>{Object.assign(Le,Pe)}),Le);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(Le=>{const Pe=[];Le.forEach(Re=>{Pe.push($e(Re))}),Se(null,Pe)},Le=>Se(Le)):0<this._pc.getStats.length?this._pc.getStats(Le=>{if(this.destroyed)return;const Pe=[];Le.result().forEach(Re=>{const Ne={};Re.names().forEach(je=>{Ne[je]=Re.stat(je)}),Ne.id=Re.id,Ne.type=Re.type,Ne.timestamp=Re.timestamp,Pe.push($e(Ne))}),Se(null,Pe)},Le=>Se(Le)):Se(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const Se=()=>{this.destroyed||this.getStats(($e,Le)=>{if(this.destroyed)return;$e&&(Le=[]);const Pe={},Re={},Ne={};let je=!1;Le.forEach(De=>{(De.type==="remotecandidate"||De.type==="remote-candidate")&&(Pe[De.id]=De),(De.type==="localcandidate"||De.type==="local-candidate")&&(Re[De.id]=De),(De.type==="candidatepair"||De.type==="candidate-pair")&&(Ne[De.id]=De)});const Ie=De=>{je=!0;let Ve=Re[De.localCandidateId];Ve&&(Ve.ip||Ve.address)?(this.localAddress=Ve.ip||Ve.address,this.localPort=+Ve.port):Ve&&Ve.ipAddress?(this.localAddress=Ve.ipAddress,this.localPort=+Ve.portNumber):typeof De.googLocalAddress=="string"&&(Ve=De.googLocalAddress.split(":"),this.localAddress=Ve[0],this.localPort=+Ve[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let ze=Pe[De.remoteCandidateId];ze&&(ze.ip||ze.address)?(this.remoteAddress=ze.ip||ze.address,this.remotePort=+ze.port):ze&&ze.ipAddress?(this.remoteAddress=ze.ipAddress,this.remotePort=+ze.portNumber):typeof De.googRemoteAddress=="string"&&(ze=De.googRemoteAddress.split(":"),this.remoteAddress=ze[0],this.remotePort=+ze[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(Le.forEach(De=>{De.type==="transport"&&De.selectedCandidatePairId&&Ie(Ne[De.selectedCandidatePairId]),(De.type==="googCandidatePair"&&De.googActiveConnection==="true"||(De.type==="candidatepair"||De.type==="candidate-pair")&&De.selected)&&Ie(De)}),!je&&(!Object.keys(Ne).length||Object.keys(Re).length))return void setTimeout(Se,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(Ve){return this.destroy(Ce(Ve,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const De=this._cb;this._cb=null,De(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};Se()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>Oe)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(Se=>{this._pc.removeTrack(Se),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(Se){this.destroyed||(Se.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:Se.candidate.candidate,sdpMLineIndex:Se.candidate.sdpMLineIndex,sdpMid:Se.candidate.sdpMid}}):!Se.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),Se.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(Se){if(this.destroyed)return;let $e=Se.data;$e instanceof ArrayBuffer&&($e=Ee.from($e)),this.push($e)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const Se=this._cb;this._cb=null,Se(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(Se){this.destroyed||Se.streams.forEach($e=>{this._debug("on track"),this.emit("track",Se.track,$e),this._remoteTracks.push({track:Se.track,stream:$e}),this._remoteStreams.some(Le=>Le.id===$e.id)||(this._remoteStreams.push($e),be(()=>{this._debug("on stream"),this.emit("stream",$e)}))})}_debug(){const Se=[].slice.call(arguments);Se[0]="["+this._id+"] "+Se[0],we.apply(null,Se)}}Ae.WEBRTC_SUPPORT=!!ke(),Ae.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},Ae.channelConfig={},oe.exports=Ae},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(simplepeer_min);const messageYjsSyncStep1=0,messageYjsSyncStep2=1,messageYjsUpdate=2,writeSyncStep1=(q,j)=>{writeVarUint(q,messageYjsSyncStep1);const X=encodeStateVector(j);writeVarUint8Array(q,X)},writeSyncStep2=(q,j,X)=>{writeVarUint(q,messageYjsSyncStep2),writeVarUint8Array(q,encodeStateAsUpdate(j,X))},readSyncStep1=(q,j,X)=>writeSyncStep2(j,X,readVarUint8Array(q)),readSyncStep2=(q,j,X)=>{try{applyUpdate(j,readVarUint8Array(q),X)}catch(te){console.error("Caught error while handling a Yjs update",te)}},writeUpdate=(q,j)=>{writeVarUint(q,messageYjsUpdate),writeVarUint8Array(q,j)},readUpdate=readSyncStep2,readSyncMessage=(q,j,X,te)=>{const ne=readVarUint(q);switch(ne){case messageYjsSyncStep1:readSyncStep1(q,j,X);break;case messageYjsSyncStep2:readSyncStep2(q,X,te);break;case messageYjsUpdate:readUpdate(q,X,te);break;default:throw new Error("Unknown message type")}return ne},deriveKey=(q,j)=>{const X=encodeUtf8(q).buffer,te=encodeUtf8(j).buffer;return crypto.subtle.importKey("raw",X,"PBKDF2",!1,["deriveKey"]).then(ne=>crypto.subtle.deriveKey({name:"PBKDF2",salt:te,iterations:1e5,hash:"SHA-256"},ne,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},encrypt=(q,j)=>{if(!j)return resolve(q);const X=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:X},j,q).then(te=>{const ne=createEncoder();return writeVarString(ne,"AES-GCM"),writeVarUint8Array(ne,X),writeVarUint8Array(ne,new Uint8Array(te)),toUint8Array(ne)})},encryptJson=(q,j)=>{const X=createEncoder();return writeAny(X,q),encrypt(toUint8Array(X),j)},decrypt=(q,j)=>{if(!j)return resolve(q);const X=createDecoder(q);readVarString(X)!=="AES-GCM"&&reject(create$4("Unknown encryption algorithm"));const ne=readVarUint8Array(X),re=readVarUint8Array(X);return crypto.subtle.decrypt({name:"AES-GCM",iv:ne},j,re).then(oe=>new Uint8Array(oe))},decryptJson=(q,j)=>decrypt(q,j).then(X=>readAny(createDecoder(new Uint8Array(X)))),log=createModuleLogger("y-webrtc"),messageSync=0,messageQueryAwareness=3,messageAwareness=1,messageBcPeerId=4,signalingConns=new Map,rooms=new Map,checkIsSynced=q=>{let j=!0;q.webrtcConns.forEach(X=>{X.synced||(j=!1)}),(!j&&q.synced||j&&!q.synced)&&(q.synced=j,q.provider.emit("synced",[{synced:j}]),log("synced ",BOLD,q.name,UNBOLD," with all peers"))},readMessage=(q,j,X)=>{const te=createDecoder(j),ne=createEncoder(),re=readVarUint(te);if(q===void 0)return null;const oe=q.awareness,le=q.doc;let fe=!1;switch(re){case messageSync:{writeVarUint(ne,messageSync);const we=readSyncMessage(te,ne,le,q);we===messageYjsSyncStep2&&!q.synced&&X(),we===messageYjsSyncStep1&&(fe=!0);break}case messageQueryAwareness:writeVarUint(ne,messageAwareness),writeVarUint8Array(ne,encodeAwarenessUpdate(oe,Array.from(oe.getStates().keys()))),fe=!0;break;case messageAwareness:applyAwarenessUpdate(oe,readVarUint8Array(te),q);break;case messageBcPeerId:{const we=readUint8(te)===1,ke=readVarString(te);if(ke!==q.peerId&&(q.bcConns.has(ke)&&!we||!q.bcConns.has(ke)&&we)){const ye=[],ve=[];we?(q.bcConns.add(ke),ve.push(ke)):(q.bcConns.delete(ke),ye.push(ke)),q.provider.emit("peers",[{added:ve,removed:ye,webrtcPeers:Array.from(q.webrtcConns.keys()),bcPeers:Array.from(q.bcConns)}]),broadcastBcPeerId(q)}break}default:return console.error("Unable to compute message"),ne}return fe?ne:null},readPeerMessage=(q,j)=>{const X=q.room;return log("received message from ",BOLD,q.remotePeerId,GREY," (",X.name,")",UNBOLD,UNCOLOR),readMessage(X,j,()=>{q.synced=!0,log("synced ",BOLD,X.name,UNBOLD," with ",BOLD,q.remotePeerId),checkIsSynced(X)})},sendWebrtcConn=(q,j)=>{log("send message to ",BOLD,q.remotePeerId,UNBOLD,GREY," (",q.room.name,")",UNCOLOR);try{q.peer.send(toUint8Array(j))}catch{}},broadcastWebrtcConn=(q,j)=>{log("broadcast message in ",BOLD,q.name,UNBOLD),q.webrtcConns.forEach(X=>{try{X.peer.send(j)}catch{}})};class WebrtcConn{constructor(j,X,te,ne){log("establishing connection to ",BOLD,te),this.room=ne,this.remotePeerId=te,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new simplepeer_minExports({initiator:X,...ne.provider.peerOpts}),this.peer.on("signal",re=>{publishSignalingMessage(j,ne,{to:te,from:ne.peerId,type:"signal",signal:re})}),this.peer.on("connect",()=>{log("connected to ",BOLD,te),this.connected=!0;const oe=ne.provider.doc,le=ne.awareness,fe=createEncoder();writeVarUint(fe,messageSync),writeSyncStep1(fe,oe),sendWebrtcConn(this,fe);const we=le.getStates();if(we.size>0){const ke=createEncoder();writeVarUint(ke,messageAwareness),writeVarUint8Array(ke,encodeAwarenessUpdate(le,Array.from(we.keys()))),sendWebrtcConn(this,ke)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,ne.webrtcConns.has(this.remotePeerId)&&(ne.webrtcConns.delete(this.remotePeerId),ne.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(ne.webrtcConns.keys()),bcPeers:Array.from(ne.bcConns)}])),checkIsSynced(ne),this.peer.destroy(),log("closed connection to ",BOLD,te),announceSignalingInfo(ne)}),this.peer.on("error",re=>{log("Error in connection to ",BOLD,te,": ",re),announceSignalingInfo(ne)}),this.peer.on("data",re=>{const oe=readPeerMessage(this,re);oe!==null&&sendWebrtcConn(this,oe)})}destroy(){this.peer.destroy()}}const broadcastBcMessage=(q,j)=>encrypt(j,q.key).then(X=>q.mux(()=>publish(q.name,X))),broadcastRoomMessage=(q,j)=>{q.bcconnected&&broadcastBcMessage(q,j),broadcastWebrtcConn(q,j)},announceSignalingInfo=q=>{signalingConns.forEach(j=>{j.connected&&(j.send({type:"subscribe",topics:[q.name]}),q.webrtcConns.size<q.provider.maxConns&&publishSignalingMessage(j,q,{type:"announce",from:q.peerId}))})},broadcastBcPeerId=q=>{if(q.provider.filterBcConns){const j=createEncoder();writeVarUint(j,messageBcPeerId),writeUint8(j,1),writeVarString(j,q.peerId),broadcastBcMessage(q,toUint8Array(j))}};class Room{constructor(j,X,te,ne){this.peerId=uuidv4$1(),this.doc=j,this.awareness=X.awareness,this.provider=X,this.synced=!1,this.name=te,this.key=ne,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=createMutex(),this.bcconnected=!1,this._bcSubscriber=re=>decrypt(new Uint8Array(re),ne).then(oe=>this.mux(()=>{const le=readMessage(this,oe,()=>{});le&&broadcastBcMessage(this,toUint8Array(le))})),this._docUpdateHandler=(re,oe)=>{const le=createEncoder();writeVarUint(le,messageSync),writeUpdate(le,re),broadcastRoomMessage(this,toUint8Array(le))},this._awarenessUpdateHandler=({added:re,updated:oe,removed:le},fe)=>{const we=re.concat(oe).concat(le),ke=createEncoder();writeVarUint(ke,messageAwareness),writeVarUint8Array(ke,encodeAwarenessUpdate(this.awareness,we)),broadcastRoomMessage(this,toUint8Array(ke))},this._beforeUnloadHandler=()=>{removeAwarenessStates(this.awareness,[j.clientID],"window unload"),rooms.forEach(re=>{re.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),announceSignalingInfo(this);const j=this.name;subscribe(j,this._bcSubscriber),this.bcconnected=!0,broadcastBcPeerId(this);const X=createEncoder();writeVarUint(X,messageSync),writeSyncStep1(X,this.doc),broadcastBcMessage(this,toUint8Array(X));const te=createEncoder();writeVarUint(te,messageSync),writeSyncStep2(te,this.doc),broadcastBcMessage(this,toUint8Array(te));const ne=createEncoder();writeVarUint(ne,messageQueryAwareness),broadcastBcMessage(this,toUint8Array(ne));const re=createEncoder();writeVarUint(re,messageAwareness),writeVarUint8Array(re,encodeAwarenessUpdate(this.awareness,[this.doc.clientID])),broadcastBcMessage(this,toUint8Array(re))}disconnect(){signalingConns.forEach(X=>{X.connected&&X.send({type:"unsubscribe",topics:[this.name]})}),removeAwarenessStates(this.awareness,[this.doc.clientID],"disconnect");const j=createEncoder();writeVarUint(j,messageBcPeerId),writeUint8(j,0),writeVarString(j,this.peerId),broadcastBcMessage(this,toUint8Array(j)),unsubscribe(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(X=>X.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const openRoom=(q,j,X,te)=>{if(rooms.has(X))throw create$4(`A Yjs Doc connected to room "${X}" already exists!`);const ne=new Room(q,j,X,te);return rooms.set(X,ne),ne},publishSignalingMessage=(q,j,X)=>{j.key?encryptJson(X,j.key).then(te=>{q.send({type:"publish",topic:j.name,data:toBase64(te)})}):q.send({type:"publish",topic:j.name,data:X})};class SignalingConn extends WebsocketClient{constructor(j){super(j),this.providers=new Set,this.on("connect",()=>{log(`connected (${j})`);const X=Array.from(rooms.keys());this.send({type:"subscribe",topics:X}),rooms.forEach(te=>publishSignalingMessage(this,te,{type:"announce",from:te.peerId}))}),this.on("message",X=>{switch(X.type){case"publish":{const te=X.topic,ne=rooms.get(te);if(ne==null||typeof te!="string")return;const re=oe=>{const le=ne.webrtcConns,fe=ne.peerId;if(oe==null||oe.from===fe||oe.to!==void 0&&oe.to!==fe||ne.bcConns.has(oe.from))return;const we=le.has(oe.from)?()=>{}:()=>ne.provider.emit("peers",[{removed:[],added:[oe.from],webrtcPeers:Array.from(ne.webrtcConns.keys()),bcPeers:Array.from(ne.bcConns)}]);switch(oe.type){case"announce":le.size<ne.provider.maxConns&&(setIfUndefined(le,oe.from,()=>new WebrtcConn(this,!0,oe.from,ne)),we());break;case"signal":oe.to===fe&&(setIfUndefined(le,oe.from,()=>new WebrtcConn(this,!1,oe.from,ne)).peer.signal(oe.signal),we());break}};ne.key?typeof X.data=="string"&&decryptJson(fromBase64(X.data),ne.key).then(re):re(X.data)}}}),this.on("disconnect",()=>log(`disconnect (${j})`))}}class WebrtcProvider extends Observable{constructor(j,X,{signaling:te=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:ne=null,awareness:re=new Awareness(X),maxConns:oe=20+floor(rand()*15),filterBcConns:le=!0,peerOpts:fe={}}={}){super(),this.roomName=j,this.doc=X,this.filterBcConns=le,this.awareness=re,this.shouldConnect=!1,this.signalingUrls=te,this.signalingConns=[],this.maxConns=oe,this.peerOpts=fe,this.key=ne?deriveKey(ne,j):resolve(null),this.room=null,this.key.then(we=>{this.room=openRoom(X,this,j,we),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),X.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(j=>{const X=setIfUndefined(signalingConns,j,()=>new SignalingConn(j));this.signalingConns.push(X),X.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(j=>{j.providers.delete(this),j.providers.size===0&&(j.destroy(),signalingConns.delete(j.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),rooms.delete(this.roomName)}),super.destroy()}}const rtop=q=>create$2((j,X)=>{q.onerror=te=>X(new Error(te.target.error)),q.onblocked=()=>location.reload(),q.onsuccess=te=>j(te.target.result)}),openDB=(q,j)=>create$2((X,te)=>{const ne=indexedDB.open(q);ne.onupgradeneeded=re=>j(re.target.result),ne.onerror=re=>te(create$4(re.target.error)),ne.onblocked=()=>location.reload(),ne.onsuccess=re=>{const oe=re.target.result;oe.onversionchange=()=>{oe.close()},typeof addEventListener<"u"&&addEventListener("unload",()=>oe.close()),X(oe)}}),deleteDB=q=>rtop(indexedDB.deleteDatabase(q)),createStores=(q,j)=>j.forEach(X=>q.createObjectStore.apply(q,X)),transact=(q,j,X="readwrite")=>{const te=q.transaction(j,X);return j.map(ne=>getStore(te,ne))},count=(q,j)=>rtop(q.count(j)),get=(q,j)=>rtop(q.get(j)),del=(q,j)=>rtop(q.delete(j)),put=(q,j,X)=>rtop(q.put(j,X)),addAutoKey=(q,j)=>rtop(q.add(j)),getAll=(q,j,X)=>rtop(q.getAll(j,X)),queryFirst=(q,j,X)=>{let te=null;return iterateKeys(q,j,ne=>(te=ne,!1),X).then(()=>te)},getLastKey=(q,j=null)=>queryFirst(q,j,"prev"),iterateOnRequest=(q,j)=>create$2((X,te)=>{q.onerror=te,q.onsuccess=async ne=>{const re=ne.target.result;if(re===null||await j(re)===!1)return X();re.continue()}}),iterateKeys=(q,j,X,te="next")=>iterateOnRequest(q.openKeyCursor(j,te),ne=>X(ne.key)),getStore=(q,j)=>q.objectStore(j),createIDBKeyRangeUpperBound=(q,j)=>IDBKeyRange.upperBound(q,j),createIDBKeyRangeLowerBound=(q,j)=>IDBKeyRange.lowerBound(q,j),customStoreName="custom",updatesStoreName="updates",PREFERRED_TRIM_SIZE=500,fetchUpdates=(q,j=()=>{})=>{if(!q.db)throw new Error("idbPersistence.db is null");const[X]=transact(q.db,[updatesStoreName]);return getAll(X,createIDBKeyRangeLowerBound(q._dbref,!1)).then(te=>{j(X),transact$1(q.doc,()=>{te.forEach(ne=>applyUpdate(q.doc,ne))},q,!1)}).then(()=>getLastKey(X).then(te=>{q._dbref=te+1})).then(()=>count(X).then(te=>{q._dbsize=te})).then(()=>X)},storeState=(q,j=!0)=>fetchUpdates(q).then(X=>{(j||q._dbsize>=PREFERRED_TRIM_SIZE)&&addAutoKey(X,encodeStateAsUpdate(q.doc)).then(()=>del(X,createIDBKeyRangeUpperBound(q._dbref,!0))).then(()=>count(X).then(te=>{q._dbsize=te}))});class IndexeddbPersistence extends Observable{constructor(j,X){super(),this._dbref=0,this._dbsize=0,this._destroyed=!1,this.synced=!1,this._storeTimeout=1e3,this.doc=X,this.name=j,this.db=null,this._db=openDB(j,te=>createStores(te,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=this._db.then(te=>(this.db=te,fetchUpdates(this,re=>addAutoKey(re,encodeStateAsUpdate(X))).then(()=>this._destroyed?this:(this.emit("synced",[this]),this.synced=!0,this)))),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(te,ne)=>{if(this.db&&ne!==this){const[re]=transact(this.db,[updatesStoreName]);addAutoKey(re,te),++this._dbsize>=PREFERRED_TRIM_SIZE&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{storeState(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},X.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),X.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(j=>{j.close()})}clearData(){return this.destroy().then(()=>{deleteDB(this.name)})}get(j){return this._db.then(X=>{const[te]=transact(X,[customStoreName],"readonly");return get(te,j)})}set(j,X){return this._db.then(te=>{const[ne]=transact(te,[customStoreName]);return put(ne,X,j)})}del(j){return this._db.then(X=>{const[te]=transact(X,[customStoreName]);return del(te,j)})}}const LOCAL_SIGNALING=["ws://localhost:4444"],DEFAULT_SIGNALING=["wss://y-webrtc-signaling-us.herokuapp.com","wss://y-webrtc-signaling-eu.herokuapp.com"],isWeb$2=typeof window<"u",isLocalhost=isWeb$2&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),signaling=isLocalhost?LOCAL_SIGNALING:DEFAULT_SIGNALING;class DebugDocProvider extends WebrtcProvider{constructor(j,X,te){super(j,X,{awareness:(te==null?void 0:te.awareness)??null,signaling})}clearData(){return Promise.resolve()}}class IndexedDBDocProvider extends IndexeddbPersistence{constructor(j,X){super(j,X)}connect(){}disconnect(){}clearData(){return Promise.resolve()}}const SYS_KEYS=new Set(["id","flavour","children"]);function isPrimitive(q){return q!==Object(q)}function assertExists$1(q){if(q==null)throw new Error("val does not exist")}function assertFlavours$1(q,j){if(!j.includes(q.flavour))throw new Error(`model flavour ${q.flavour} is not allowed`)}function matchFlavours$1(q,j){return j.includes(q.flavour)}function assertValidChildren(q,j){Array.isArray(j.children)&&j.children.forEach(X=>{if(!q.has(X.id))throw new Error("Invalid child id: "+X.id)})}function initSysProps(q,j){q.set("sys:id",j.id),q.set("sys:flavour",j.flavour);const X=new YArray;q.set("sys:children",X),Array.isArray(j.children)&&j.children.forEach(te=>X.push([te.id]))}function syncBlockProps(q,j,X){Object.keys(j).forEach(te=>{if(!(SYS_KEYS.has(te)||X.has(te))&&te!=="text"){if(!isPrimitive(j[te]))throw new Error("Only top level primitives are supported for now");j[te]!==void 0&&q.set("prop:"+te,j[te])}}),j.flavour==="affine:paragraph"&&!j.type&&!q.has("prop:type")&&q.set("prop:type","text"),j.flavour==="affine:list"&&!q.has("prop:type")&&q.set("prop:type",j.type??"bulleted"),j.flavour==="affine:list"&&!q.has("prop:checked")&&q.set("prop:checked",j.checked??!1),j.flavour==="affine:group"&&!q.has("prop:xywh")&&q.set("prop:xywh",j.xywh??"[0,0,720,480]"),j.flavour==="affine:embed"&&!q.has("prop:width")&&q.set("prop:width",j.width??20),j.flavour==="affine:embed"&&!q.has("prop:sourceId")&&q.set("prop:sourceId",j.sourceId??""),j.flavour==="affine:embed"&&!q.has("prop:caption")&&q.set("prop:caption",j.caption??""),j.flavour==="affine:shape"&&(q.has("prop:xywh")||q.set("prop:xywh",j.xywh??"[0,0,50,50]"),q.has("prop:type")||q.set("prop:type",j.type??"rectangle"),q.has("prop:color")||q.set("prop:color",j.color??"black"))}function trySyncTextProp(q,j,X){if(X){if(X instanceof Text$1){j.set("prop:text",X._yText);return}if(X instanceof PrelimText){const te=q.values(),ne=te.next().value,re=te.next().value,oe=te.next().value;if(!re.ready)throw new Error("PrelimText left is not ready");if(re.type!=="splitLeft"||oe.type!=="splitRight"||oe!==X)throw new Error("Unmatched text entity");const le=ne._yText;le.meta={split:!0};const fe=le.clone();j.set("prop:text",fe),fe.delete(0,oe.index),le.delete(oe.index,le.length-oe.index),q.clear()}}}function toBlockProps(q){const j={};return Object.keys(q).forEach(X=>{q[X]&&(j[X.replace("sys:","")]=q[X])}),Object.keys(q).forEach(X=>{if(SYS_KEYS.has(X))return;const te=X.replace("prop:","");j[te]=q[X]}),j}function encodeWorkspaceAsYjsUpdateV2(q){return toBase64(encodeStateAsUpdateV2(q.doc))}function applyYjsUpdateV2(q,j){applyUpdateV2(q.doc,fromBase64(j))}const isWeb$1=typeof window<"u";function createChildMap(q){return new Map(q.map((j,X)=>[j,X]))}class Page extends Space{constructor(j,X,te,ne,re=uuidv4$1){super(X,te,ne),this._root=null,this._blockMap=new Map,this._splitSet=new Set,this._synced=!1,this._ignoredKeys=new Set(Object.keys(new BaseBlockModel(this,{}))),this.signals={historyUpdated:new Signal,rootAdded:new Signal,rootDeleted:new Signal,textUpdated:new Signal,updated:new Signal},this._historyAddObserver=oe=>{isWeb$1&&oe.stackItem.meta.set("cursor-location",this.awareness.getLocalCursor()),this._historyObserver()},this._historyPopObserver=oe=>{const le=oe.stackItem.meta.get("cursor-location");le&&(this.awareness.setLocalCursor(le),this._historyObserver())},this._historyObserver=()=>{this.signals.historyUpdated.emit()},this._handleYEvents=oe=>{for(const le of oe)this._handleYEvent(le);this.signals.updated.emit()},this.workspace=j,this._idGenerator=re}get meta(){return this.workspace.meta.getPageMeta(this.id)}get blobs(){return this.workspace.blobs}get _yBlocks(){return this.origin}get root(){return this._root}get isEmpty(){return this._yBlocks.size===0}get canUndo(){return this._history.canUndo()}get canRedo(){return this._history.canRedo()}get Text(){return Text$1}undo(){this._history.undo()}redo(){this._history.redo()}captureSync(){this._history.stopCapturing()}resetHistory(){this._history.clear()}getBlockById(j){return this._blockMap.get(j)??null}getBlockByFlavour(j){return[...this._blockMap.values()].filter(({flavour:X})=>X===j)}getParentById(j,X){if(j===X.id)return null;const te=this._blockMap.get(j);if(!te)return null;for(const[ne]of te.childMap){if(ne===X.id)return te;const re=this.getParentById(ne,X);if(re!==null)return re}return null}getParent(j){return this._root?this.getParentById(this._root.id,j):null}getPreviousSibling(j){const X=this.getParent(j);if(!X)return null;const te=X.children.indexOf(j);if(te===-1)throw new Error("Failed to getPreviousSiblings! Block not found in parent's children");return X.children[te-1]??null}getPreviousSiblings(j){const X=this.getParent(j);if(!X)return[];const te=X.children.indexOf(j);if(te===-1)throw new Error("Failed to getPreviousSiblings! Block not found in parent's children");return X.children.slice(0,te)}getNextSibling(j){const X=this.getParent(j);if(!X)return null;const te=X.children.indexOf(j);if(te===-1)throw new Error("Failed to getPreviousSiblings! Block not found in parent's children");return X.children[te+1]??null}getNextSiblings(j){const X=this.getParent(j);if(!X)return[];const te=X.children.indexOf(j);if(te===-1)throw new Error("Failed to getNextSiblings! Block not found in parent's children");return X.children.slice(te+1)}addBlock(j,X,te){if(!j.flavour)throw new Error("Block props must contain flavour");if(j.flavour==="affine:shape"&&(X!=null||te!=null))throw new Error("Shape block should only be appear under page");const ne={...j},re=this._idGenerator();return ne.id=re,this.transact(()=>{var fe;const oe=new YMap;assertValidChildren(this._yBlocks,ne),initSysProps(oe,ne),syncBlockProps(oe,ne,this._ignoredKeys),trySyncTextProp(this._splitSet,oe,ne.text),typeof X=="string"&&(X=this._blockMap.get(X));const le=(X==null?void 0:X.id)??((fe=this._root)==null?void 0:fe.id);if(le){const ke=this._yBlocks.get(le).get("sys:children"),ye=te??ke.length;ke.insert(ye,[re])}this._yBlocks.set(re,oe)}),re}updateBlockById(j,X){const te=this._blockMap.get(j);this.updateBlock(te,X)}updateBlock(j,X){const te=this._yBlocks.get(j.id);this.transact(()=>{if(X.text instanceof PrelimText?X.text.ready=!0:X.text instanceof Text$1&&(j.text=X.text,te.set("prop:text",X.text._yText)),X.children){const ne=new YArray;ne.insert(0,X.children.map(re=>re.id)),te.set("sys:children",ne)}syncBlockProps(te,X,this._ignoredKeys)})}deleteBlockById(j){const X=this._blockMap.get(j);this.deleteBlock(X)}deleteBlock(j){const X=this.getParent(j),te=(X==null?void 0:X.children.indexOf(j))??-1;te>-1&&(X==null||X.children.splice(X.children.indexOf(j),1)),this._blockMap.delete(j.id),this.transact(()=>{if(this._yBlocks.delete(j.id),j.dispose(),X){const re=this._yBlocks.get(X.id).get("sys:children");te>-1&&re.delete(te,1)}})}attachRichText(j,X){const ne=this._getYBlock(j).get("prop:text");if(!ne)throw new Error(`Block "${j}" does not have text`);const re=new RichTextAdapter(this,ne,X);this.richTextAdapters.set(j,re),X.on("selection-change",()=>{const oe=re.getCursor();oe&&this.awareness.setLocalCursor({...oe,id:j})})}detachRichText(j){const X=this.richTextAdapters.get(j);X==null||X.destroy(),this.richTextAdapters.delete(j)}markTextSplit(j,X,te){this._splitSet.add(j).add(X).add(te)}syncFromExistingDoc(){if(this._synced)throw new Error("Cannot sync from existing doc more than once");this._handleVersion(),this._initYBlocks();const j=new Set;this._yBlocks.forEach((X,te)=>{j.has(te)||(j.add(te),this._handleYBlockAdd(j,te))}),this._synced=!0}dispose(){this.signals.historyUpdated.dispose(),this.signals.rootAdded.dispose(),this.signals.rootDeleted.dispose(),this.signals.textUpdated.dispose(),this.signals.updated.dispose(),this._yBlocks.unobserveDeep(this._handleYEvents),this._yBlocks.clear()}_initYBlocks(){const{_yBlocks:j}=this;j.observeDeep(this._handleYEvents),this._history=new UndoManager([j],{trackedOrigins:new Set([this.doc.clientID]),doc:this.doc}),this._history.on("stack-cleared",this._historyObserver),this._history.on("stack-item-added",this._historyAddObserver),this._history.on("stack-item-popped",this._historyPopObserver),this._history.on("stack-item-updated",this._historyObserver)}_getYBlock(j){const X=this._yBlocks.get(j);if(!X)throw new Error(`Block with id ${j} does not exist`);return X}_createBlockModel(j){const X=this.workspace.flavourMap.get(j.flavour);if(!X)throw new Error(`Block flavour ${j.flavour} is not registered`);return new X(this,j)}_handleYBlockAdd(j,X){const te=this._getYBlock(X),ne=this._blockMap.size===0,re=te.toJSON(),oe=toBlockProps(re),le=this._createBlockModel({...oe,id:X});this._blockMap.set(oe.id,le),matchFlavours$1(le,["affine:paragraph","affine:list","affine:code"])&&!te.get("prop:text")&&this.transact(()=>te.set("prop:text",new YText));const fe=te.get("prop:text"),we=new Text$1(this,fe);le.text=we;const ke=te.get("sys:children");if(ke instanceof YArray&&(le.childMap=createChildMap(ke),ke.forEach(ye=>{const ve=le.childMap.get(ye);if(Number.isInteger(ve)){this._blockMap.has(ye)||(j.add(ye),this._handleYBlockAdd(j,ye));const Ce=this._blockMap.get(ye);le.children[ve]=Ce}})),ne)this._root=le,this.signals.rootAdded.emit(le);else{const ye=this.getParent(le),ve=ye==null?void 0:ye.childMap.get(le.id);ye&&ve!==void 0&&(ye.children[ve]=le,ye.childrenUpdated.emit())}}_handleYBlockDelete(j){this._blockMap.get(j)===this._root&&this.signals.rootDeleted.emit(j),this._blockMap.delete(j)}_handleYBlockUpdate(j){const X=j.target.get("sys:id"),te=this.getBlockById(X);if(!te)return;const ne={};let re=!1,oe=!1;for(const le of j.keysChanged)if(le!=="prop:text"){if(le==="sys:children"){oe=!0;const fe=j.target.get("sys:children");if(!(fe instanceof YArray)){console.error("Failed to update block children!, sys:children is not an Y array",j,fe);continue}te.childMap=createChildMap(fe),te.children=fe.map(we=>this._blockMap.get(we));continue}re=!0,ne[le.replace("prop:","")]=j.target.get(le)}re&&(Object.assign(te,ne),te.propsUpdated.emit()),oe&&te.childrenUpdated.emit()}_handleYEvent(j){if(j.target===this._yBlocks){const X=new Set;j.keys.forEach((te,ne)=>{if(te.action==="add"){if(X.has(ne))return;X.add(ne),this._handleYBlockAdd(X,ne)}else te.action==="delete"&&this._handleYBlockDelete(ne)})}else if(j.target.parent===this._yBlocks)j instanceof YTextEvent?this.signals.textUpdated.emit(j):j instanceof YMapEvent&&this._handleYBlockUpdate(j);else if(j.target.parent instanceof YMap&&j.target.parent.has("sys:id")&&j instanceof YArrayEvent){const X=j.target.parent.get("sys:id"),te=this._blockMap.get(X);if(!te)throw new Error(`Block with id ${X} does not exist`);if(j.path[j.path.length-1]==="sys:children"){const re=j.target.toArray();te.children=re.map(oe=>this._blockMap.get(oe)),te.childMap=createChildMap(j.target),te.childrenUpdated.emit()}}}_handleVersion(){this._yBlocks.size===0?this.workspace.meta.writeVersion(this.workspace):this.workspace.meta.validateVersion(this.workspace)}}var flexsearch_bundleExports={},flexsearch_bundle={get exports(){return flexsearch_bundleExports},set exports(q){flexsearch_bundleExports=q}};(function(module){(function _f(self){try{module&&(self=module)}catch(q){}self._factory=_f;var t;function u(q){return typeof q<"u"?q:!0}function aa(q){const j=Array(q);for(let X=0;X<q;X++)j[X]=v();return j}function v(){return Object.create(null)}function ba(q,j){return j.length-q.length}function x(q){return typeof q=="string"}function C(q){return typeof q=="object"}function D(q){return typeof q=="function"}function ca(q,j){var X=da;if(q&&(j&&(q=E(q,j)),this.H&&(q=E(q,this.H)),this.J&&1<q.length&&(q=E(q,this.J)),X||X==="")){if(q=q.split(X),this.filter){j=this.filter,X=q.length;const te=[];for(let ne=0,re=0;ne<X;ne++){const oe=q[ne];oe&&!j[oe]&&(te[re++]=oe)}q=te}return q}return q}const da=/[\p{Z}\p{S}\p{P}\p{C}]+/u,ea=/[\u0300-\u036f]/g;function fa(q,j){const X=Object.keys(q),te=X.length,ne=[];let re="",oe=0;for(let le=0,fe,we;le<te;le++)fe=X[le],(we=q[fe])?(ne[oe++]=F(j?"(?!\\b)"+fe+"(\\b|_)":fe),ne[oe++]=we):re+=(re?"|":"")+fe;return re&&(ne[oe++]=F(j?"(?!\\b)("+re+")(\\b|_)":"("+re+")"),ne[oe]=""),ne}function E(q,j){for(let X=0,te=j.length;X<te&&(q=q.replace(j[X],j[X+1]),q);X+=2);return q}function F(q){return new RegExp(q,"g")}function ha(q){let j="",X="";for(let te=0,ne=q.length,re;te<ne;te++)(re=q[te])!==X&&(j+=X=re);return j}var ja={encode:ia,F:!1,G:""};function ia(q){return ca.call(this,(""+q).toLowerCase(),!1)}const ka={},G={};function la(q){I(q,"add"),I(q,"append"),I(q,"search"),I(q,"update"),I(q,"remove")}function I(q,j){q[j+"Async"]=function(){const X=this,te=arguments;var ne=te[te.length-1];let re;return D(ne)&&(re=ne,delete te[te.length-1]),ne=new Promise(function(oe){setTimeout(function(){X.async=!0;const le=X[j].apply(X,te);X.async=!1,oe(le)})}),re?(ne.then(re),this):ne}}function ma(q,j,X,te){const ne=q.length;let re=[],oe,le,fe=0;te&&(te=[]);for(let we=ne-1;0<=we;we--){const ke=q[we],ye=ke.length,ve=v();let be=!oe;for(let Ce=0;Ce<ye;Ce++){const Ee=ke[Ce],Oe=Ee.length;if(Oe)for(let Ae=0,Te,Se;Ae<Oe;Ae++)if(Se=Ee[Ae],oe){if(oe[Se]){if(!we){if(X)X--;else if(re[fe++]=Se,fe===j)return re}(we||te)&&(ve[Se]=1),be=!0}if(te&&(le[Se]=(Te=le[Se])?++Te:Te=1,Te<ne)){const $e=te[Te-2]||(te[Te-2]=[]);$e[$e.length]=Se}}else ve[Se]=1}if(te)oe||(le=ve);else if(!be)return[];oe=ve}if(te)for(let we=te.length-1,ke,ye;0<=we;we--){ke=te[we],ye=ke.length;for(let ve=0,be;ve<ye;ve++)if(be=ke[ve],!oe[be]){if(X)X--;else if(re[fe++]=be,fe===j)return re;oe[be]=1}}return re}function na(q,j){const X=v(),te=v(),ne=[];for(let re=0;re<q.length;re++)X[q[re]]=1;for(let re=0,oe;re<j.length;re++){oe=j[re];for(let le=0,fe;le<oe.length;le++)fe=oe[le],X[fe]&&!te[fe]&&(te[fe]=1,ne[ne.length]=fe)}return ne}function J(q){this.l=q!==!0&&q,this.cache=v(),this.h=[]}function oa(q,j,X){C(q)&&(q=q.query);let te=this.cache.get(q);return te||(te=this.search(q,j,X),this.cache.set(q,te)),te}J.prototype.set=function(q,j){if(!this.cache[q]){var X=this.h.length;for(X===this.l?delete this.cache[this.h[X-1]]:X++,--X;0<X;X--)this.h[X]=this.h[X-1];this.h[0]=q}this.cache[q]=j},J.prototype.get=function(q){const j=this.cache[q];if(this.l&&j&&(q=this.h.indexOf(q))){const X=this.h[q-1];this.h[q-1]=this.h[q],this.h[q]=X}return j};const qa={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function ra(q,j,X,te,ne,re){setTimeout(function(){const oe=q(X,JSON.stringify(re));oe&&oe.then?oe.then(function(){j.export(q,j,X,te,ne+1)}):j.export(q,j,X,te,ne+1)})}function K(q,j){if(!(this instanceof K))return new K(q);var X;if(q){x(q)?q=qa[q]:(X=q.preset)&&(q=Object.assign({},X[X],q)),X=q.charset;var te=q.lang;x(X)&&(X.indexOf(":")===-1&&(X+=":default"),X=G[X]),x(te)&&(te=ka[te])}else q={};let ne,re,oe=q.context||{};if(this.encode=q.encode||X&&X.encode||ia,this.register=j||v(),this.D=ne=q.resolution||9,this.G=j=X&&X.G||q.tokenize||"strict",this.depth=j==="strict"&&oe.depth,this.l=u(oe.bidirectional),this.s=re=u(q.optimize),this.m=u(q.fastupdate),this.B=q.minlength||1,this.C=q.boost,this.map=re?aa(ne):v(),this.A=ne=oe.resolution||1,this.h=re?aa(ne):v(),this.F=X&&X.F||q.rtl,this.H=(j=q.matcher||te&&te.H)&&fa(j,!1),this.J=(j=q.stemmer||te&&te.J)&&fa(j,!0),X=j=q.filter||te&&te.filter){X=j,te=v();for(let le=0,fe=X.length;le<fe;le++)te[X[le]]=1;X=te}this.filter=X,this.cache=(j=q.cache)&&new J(j)}t=K.prototype,t.append=function(q,j){return this.add(q,j,!0)},t.add=function(q,j,X,te){if(j&&(q||q===0)){if(!te&&!X&&this.register[q])return this.update(q,j);if(j=this.encode(j),te=j.length){const we=v(),ke=v(),ye=this.depth,ve=this.D;for(let be=0;be<te;be++){let Ce=j[this.F?te-1-be:be];var ne=Ce.length;if(Ce&&ne>=this.B&&(ye||!ke[Ce])){var re=L(ve,te,be),oe="";switch(this.G){case"full":if(3<ne){for(re=0;re<ne;re++)for(var le=ne;le>re;le--)if(le-re>=this.B){var fe=L(ve,te,be,ne,re);oe=Ce.substring(re,le),M(this,ke,oe,fe,q,X)}break}case"reverse":if(2<ne){for(le=ne-1;0<le;le--)oe=Ce[le]+oe,oe.length>=this.B&&M(this,ke,oe,L(ve,te,be,ne,le),q,X);oe=""}case"forward":if(1<ne){for(le=0;le<ne;le++)oe+=Ce[le],oe.length>=this.B&&M(this,ke,oe,re,q,X);break}default:if(this.C&&(re=Math.min(re/this.C(j,Ce,be)|0,ve-1)),M(this,ke,Ce,re,q,X),ye&&1<te&&be<te-1){for(ne=v(),oe=this.A,re=Ce,le=Math.min(ye+1,te-be),ne[re]=1,fe=1;fe<le;fe++)if((Ce=j[this.F?te-1-be-fe:be+fe])&&Ce.length>=this.B&&!ne[Ce]){ne[Ce]=1;const Ee=this.l&&Ce>re;M(this,we,Ee?re:Ce,L(oe+(te/2>oe?0:1),te,be,le-1,fe-1),q,X,Ee?Ce:re)}}}}}this.m||(this.register[q]=1)}}return this};function L(q,j,X,te,ne){return X&&1<q?j+(te||0)<=q?X+(ne||0):(q-1)/(j+(te||0))*(X+(ne||0))+1|0:0}function M(q,j,X,te,ne,re,oe){let le=oe?q.h:q.map;(!j[X]||oe&&!j[X][oe])&&(q.s&&(le=le[te]),oe?(j=j[X]||(j[X]=v()),j[oe]=1,le=le[oe]||(le[oe]=v())):j[X]=1,le=le[X]||(le[X]=[]),q.s||(le=le[te]||(le[te]=[])),re&&le.indexOf(ne)!==-1||(le[le.length]=ne,q.m&&(q=q.register[ne]||(q.register[ne]=[]),q[q.length]=le)))}t.search=function(q,j,X){X||(!j&&C(q)?(X=q,q=X.query):C(j)&&(X=j));let te=[],ne,re,oe=0;if(X){j=X.limit,oe=X.offset||0;var le=X.context;re=X.suggest}if(q&&(q=this.encode(q),ne=q.length,1<ne)){X=v();var fe=[];for(let ke=0,ye=0,ve;ke<ne;ke++)if((ve=q[ke])&&ve.length>=this.B&&!X[ve])if(this.s||re||this.map[ve])fe[ye++]=ve,X[ve]=1;else return te;q=fe,ne=q.length}if(!ne)return te;j||(j=100),le=this.depth&&1<ne&&le!==!1,X=0;let we;le?(we=q[0],X=1):1<ne&&q.sort(ba);for(let ke,ye;X<ne;X++){if(ye=q[X],le?(ke=sa(this,te,re,j,oe,ne===2,ye,we),re&&ke===!1&&te.length||(we=ye)):ke=sa(this,te,re,j,oe,ne===1,ye),ke)return ke;if(re&&X===ne-1){if(fe=te.length,!fe){if(le){le=0,X=-1;continue}return te}if(fe===1)return ta(te[0],j,oe)}}return ma(te,j,oe,re)};function sa(q,j,X,te,ne,re,oe,le){let fe=[],we=le?q.h:q.map;if(q.s||(we=ua(we,oe,le,q.l)),we){let ke=0;const ye=Math.min(we.length,le?q.A:q.D);for(let ve=0,be=0,Ce,Ee;ve<ye&&!((Ce=we[ve])&&(q.s&&(Ce=ua(Ce,oe,le,q.l)),ne&&Ce&&re&&(Ee=Ce.length,Ee<=ne?(ne-=Ee,Ce=null):(Ce=Ce.slice(ne),ne=0)),Ce&&(fe[ke++]=Ce,re&&(be+=Ce.length,be>=te))));ve++);if(ke){if(re)return ta(fe,te,0);j[j.length]=fe;return}}return!X&&fe}function ta(q,j,X){return q=q.length===1?q[0]:[].concat.apply([],q),X||q.length>j?q.slice(X,X+j):q}function ua(q,j,X,te){return X?(te=te&&j>X,q=(q=q[te?j:X])&&q[te?X:j]):q=q[j],q}t.contain=function(q){return!!this.register[q]},t.update=function(q,j){return this.remove(q).add(q,j)},t.remove=function(q,j){const X=this.register[q];if(X){if(this.m)for(let te=0,ne;te<X.length;te++)ne=X[te],ne.splice(ne.indexOf(q),1);else N(this.map,q,this.D,this.s),this.depth&&N(this.h,q,this.A,this.s);if(j||delete this.register[q],this.cache){j=this.cache;for(let te=0,ne,re;te<j.h.length;te++)re=j.h[te],ne=j.cache[re],ne.indexOf(q)!==-1&&(j.h.splice(te--,1),delete j.cache[re])}}return this};function N(q,j,X,te,ne){let re=0;if(q.constructor===Array)if(ne)j=q.indexOf(j),j!==-1?1<q.length&&(q.splice(j,1),re++):re++;else{ne=Math.min(q.length,X);for(let oe=0,le;oe<ne;oe++)(le=q[oe])&&(re=N(le,j,X,te,ne),te||re||delete q[oe])}else for(let oe in q)(re=N(q[oe],j,X,te,ne))||delete q[oe];return re}t.searchCache=oa,t.export=function(q,j,X,te,ne){let re,oe;switch(ne||(ne=0)){case 0:if(re="reg",this.m){oe=v();for(let le in this.register)oe[le]=1}else oe=this.register;break;case 1:re="cfg",oe={doc:0,opt:this.s?1:0};break;case 2:re="map",oe=this.map;break;case 3:re="ctx",oe=this.h;break;default:return}return ra(q,j||this,X?X+"."+re:re,te,ne,oe),!0},t.import=function(q,j){if(j)switch(x(j)&&(j=JSON.parse(j)),q){case"cfg":this.s=!!j.opt;break;case"reg":this.m=!1,this.register=j;break;case"map":this.map=j;break;case"ctx":this.h=j}},la(K.prototype);function va(q){q=q.data;var j=self._index;const X=q.args;var te=q.task;switch(te){case"init":te=q.options||{},q=q.factory,j=te.encode,te.cache=!1,j&&j.indexOf("function")===0&&(te.encode=Function("return "+j)()),q?(Function("return "+q)()(self),self._index=new self.FlexSearch.Index(te),delete self.FlexSearch):self._index=new K(te);break;default:q=q.id,j=j[te].apply(j,X),postMessage(te==="search"?{id:q,msg:j}:{id:q})}}let wa=0;function O(q){if(!(this instanceof O))return new O(q);var j;q?D(j=q.encode)&&(q.encode=j.toString()):q={},(j=(self||window)._factory)&&(j=j.toString());const X=self.exports,te=this;this.o=xa(j,X,q.worker),this.h=v(),this.o&&(X?this.o.on("message",function(ne){te.h[ne.id](ne.msg),delete te.h[ne.id]}):this.o.onmessage=function(ne){ne=ne.data,te.h[ne.id](ne.msg),delete te.h[ne.id]},this.o.postMessage({task:"init",factory:j,options:q}))}P("add"),P("append"),P("search"),P("update"),P("remove");function P(q){O.prototype[q]=O.prototype[q+"Async"]=function(){const j=this,X=[].slice.call(arguments);var te=X[X.length-1];let ne;return D(te)&&(ne=te,X.splice(X.length-1,1)),te=new Promise(function(re){setTimeout(function(){j.h[++wa]=re,j.o.postMessage({task:q,id:wa,args:X})})}),ne?(te.then(ne),this):te}}function xa(a,b,c){let d;try{d=b?eval('new (require("worker_threads")["Worker"])("../dist/node/node.js")'):a?new Worker(URL.createObjectURL(new Blob(["onmessage="+va.toString()],{type:"text/javascript"}))):new Worker(x(c)?c:"worker/worker.js",{type:"module"})}catch(q){}return d}function Q(q){if(!(this instanceof Q))return new Q(q);var j=q.document||q.doc||q,X;this.K=[],this.h=[],this.A=[],this.register=v(),this.key=(X=j.key||j.id)&&S(X,this.A)||"id",this.m=u(q.fastupdate),this.C=(X=j.store)&&X!==!0&&[],this.store=X&&v(),this.I=(X=j.tag)&&S(X,this.A),this.l=X&&v(),this.cache=(X=q.cache)&&new J(X),q.cache=!1,this.o=q.worker,this.async=!1,X=v();let te=j.index||j.field||j;x(te)&&(te=[te]);for(let ne=0,re,oe;ne<te.length;ne++)re=te[ne],x(re)||(oe=re,re=re.field),oe=C(oe)?Object.assign({},q,oe):q,this.o&&(X[re]=new O(oe),X[re].o||(this.o=!1)),this.o||(X[re]=new K(oe,this.register)),this.K[ne]=S(re,this.A),this.h[ne]=re;if(this.C)for(q=j.store,x(q)&&(q=[q]),j=0;j<q.length;j++)this.C[j]=S(q[j],this.A);this.index=X}function S(q,j){const X=q.split(":");let te=0;for(let ne=0;ne<X.length;ne++)q=X[ne],0<=q.indexOf("[]")&&(q=q.substring(0,q.length-2))&&(j[te]=!0),q&&(X[te++]=q);return te<X.length&&(X.length=te),1<te?X:X[0]}function T(q,j){if(x(j))q=q[j];else for(let X=0;q&&X<j.length;X++)q=q[j[X]];return q}function U(q,j,X,te,ne){if(q=q[ne],te===X.length-1)j[ne]=q;else if(q)if(q.constructor===Array)for(j=j[ne]=Array(q.length),ne=0;ne<q.length;ne++)U(q,j,X,te,ne);else j=j[ne]||(j[ne]=v()),ne=X[++te],U(q,j,X,te,ne)}function V(q,j,X,te,ne,re,oe,le){if(q=q[oe])if(te===j.length-1){if(q.constructor===Array){if(X[te]){for(j=0;j<q.length;j++)ne.add(re,q[j],!0,!0);return}q=q.join(" ")}ne.add(re,q,le,!0)}else if(q.constructor===Array)for(oe=0;oe<q.length;oe++)V(q,j,X,te,ne,re,oe,le);else oe=j[++te],V(q,j,X,te,ne,re,oe,le)}t=Q.prototype,t.add=function(q,j,X){if(C(q)&&(j=q,q=T(j,this.key)),j&&(q||q===0)){if(!X&&this.register[q])return this.update(q,j);for(let te=0,ne,re;te<this.h.length;te++)re=this.h[te],ne=this.K[te],x(ne)&&(ne=[ne]),V(j,ne,this.A,0,this.index[re],q,ne[0],X);if(this.I){let te=T(j,this.I),ne=v();x(te)&&(te=[te]);for(let re=0,oe,le;re<te.length;re++)if(oe=te[re],!ne[oe]&&(ne[oe]=1,le=this.l[oe]||(this.l[oe]=[]),!X||le.indexOf(q)===-1)&&(le[le.length]=q,this.m)){const fe=this.register[q]||(this.register[q]=[]);fe[fe.length]=le}}if(this.store&&(!X||!this.store[q])){let te;if(this.C){te=v();for(let ne=0,re;ne<this.C.length;ne++)re=this.C[ne],x(re)?te[re]=j[re]:U(j,te,re,0,re[0])}this.store[q]=te||j}}return this},t.append=function(q,j){return this.add(q,j,!0)},t.update=function(q,j){return this.remove(q).add(q,j)},t.remove=function(q){if(C(q)&&(q=T(q,this.key)),this.register[q]){for(var j=0;j<this.h.length&&(this.index[this.h[j]].remove(q,!this.o),!this.m);j++);if(this.I&&!this.m)for(let X in this.l){j=this.l[X];const te=j.indexOf(q);te!==-1&&(1<j.length?j.splice(te,1):delete this.l[X])}this.store&&delete this.store[q],delete this.register[q]}return this},t.search=function(q,j,X,te){X||(!j&&C(q)?(X=q,q=X.query):C(j)&&(X=j,j=0));let ne=[],re=[],oe,le,fe,we,ke,ye,ve=0;if(X)if(X.constructor===Array)fe=X,X=null;else{if(fe=(oe=X.pluck)||X.index||X.field,we=X.tag,le=this.store&&X.enrich,ke=X.bool==="and",j=X.limit||100,ye=X.offset||0,we&&(x(we)&&(we=[we]),!q)){for(let Ce=0,Ee;Ce<we.length;Ce++)(Ee=ya.call(this,we[Ce],j,ye,le))&&(ne[ne.length]=Ee,ve++);return ve?ne:[]}x(fe)&&(fe=[fe])}fe||(fe=this.h),ke=ke&&(1<fe.length||we&&1<we.length);const be=!te&&(this.o||this.async)&&[];for(let Ce=0,Ee,Oe,Ae;Ce<fe.length;Ce++){let Te;if(Oe=fe[Ce],x(Oe)||(Te=Oe,Oe=Oe.field),be)be[Ce]=this.index[Oe].searchAsync(q,j,Te||X);else{if(te?Ee=te[Ce]:Ee=this.index[Oe].search(q,j,Te||X),Ae=Ee&&Ee.length,we&&Ae){const Se=[];let $e=0;ke&&(Se[0]=[Ee]);for(let Le=0,Pe,Re;Le<we.length;Le++)Pe=we[Le],(Ae=(Re=this.l[Pe])&&Re.length)&&($e++,Se[Se.length]=ke?[Re]:Re);$e&&(Ee=ke?ma(Se,j||100,ye||0):na(Ee,Se),Ae=Ee.length)}if(Ae)re[ve]=Oe,ne[ve++]=Ee;else if(ke)return[]}}if(be){const Ce=this;return new Promise(function(Ee){Promise.all(be).then(function(Oe){Ee(Ce.search(q,j,X,Oe))})})}if(!ve)return[];if(oe&&(!le||!this.store))return ne[0];for(let Ce=0,Ee;Ce<re.length;Ce++){if(Ee=ne[Ce],Ee.length&&le&&(Ee=za.call(this,Ee)),oe)return Ee;ne[Ce]={field:re[Ce],result:Ee}}return ne};function ya(q,j,X,te){let ne=this.l[q],re=ne&&ne.length-X;if(re&&0<re)return(re>j||X)&&(ne=ne.slice(X,X+j)),te&&(ne=za.call(this,ne)),{tag:q,result:ne}}function za(q){const j=Array(q.length);for(let X=0,te;X<q.length;X++)te=q[X],j[X]={id:te,doc:this.store[te]};return j}t.contain=function(q){return!!this.register[q]},t.get=function(q){return this.store[q]},t.set=function(q,j){return this.store[q]=j,this},t.searchCache=oa,t.export=function(q,j,X,te,ne){if(ne||(ne=0),te||(te=0),te<this.h.length){const re=this.h[te],oe=this.index[re];j=this,setTimeout(function(){oe.export(q,j,ne?re.replace(":","-"):"",te,ne++)||(te++,ne=1,j.export(q,j,re,te,ne))})}else{let re;switch(ne){case 1:X="tag",re=this.l;break;case 2:X="store",re=this.store;break;default:return}ra(q,this,X,te,ne,re)}},t.import=function(q,j){if(j)switch(x(j)&&(j=JSON.parse(j)),q){case"tag":this.l=j;break;case"reg":this.m=!1,this.register=j;for(let te=0,ne;te<this.h.length;te++)ne=this.index[this.h[te]],ne.register=j,ne.m=!1;break;case"store":this.store=j;break;default:q=q.split(".");const X=q[0];q=q[1],X&&q&&this.index[X].import(q,j)}},la(Q.prototype);var Ba={encode:Aa,F:!1,G:""};const Ca=[F("[àáâãäå]"),"a",F("[èéêë]"),"e",F("[ìíîï]"),"i",F("[òóôõöő]"),"o",F("[ùúûüű]"),"u",F("[ýŷÿ]"),"y",F("ñ"),"n",F("[çc]"),"k",F("ß"),"s",F(" & ")," and "];function Aa(q){var j=q;return j.normalize&&(j=j.normalize("NFD").replace(ea,"")),ca.call(this,j.toLowerCase(),!q.normalize&&Ca)}var Ea={encode:Da,F:!1,G:"strict"};const Fa=/[^a-z0-9]+/,Ga={b:"p",v:"f",w:"f",z:"s",x:"s",ß:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function Da(q){q=Aa.call(this,q).join(" ");const j=[];if(q){const X=q.split(Fa),te=X.length;for(let ne=0,re,oe=0;ne<te;ne++)if((q=X[ne])&&(!this.filter||!this.filter[q])){re=q[0];let le=Ga[re]||re,fe=le;for(let we=1;we<q.length;we++){re=q[we];const ke=Ga[re]||re;ke&&ke!==fe&&(le+=ke,fe=ke)}j[oe++]=le}}return j}var Ia={encode:Ha,F:!1,G:""};const Ja=[F("ae"),"a",F("oe"),"o",F("sh"),"s",F("th"),"t",F("ph"),"f",F("pf"),"f",F("(?![aeo])h(?![aeo])"),"",F("(?!^[aeo])h(?!^[aeo])"),""];function Ha(q,j){return q&&(q=Da.call(this,q).join(" "),2<q.length&&(q=E(q,Ja)),j||(1<q.length&&(q=ha(q)),q&&(q=q.split(" ")))),q}var La={encode:Ka,F:!1,G:""};const Ma=F("(?!\\b)[aeo]");function Ka(q){return q&&(q=Ha.call(this,q,!0),1<q.length&&(q=q.replace(Ma,"")),1<q.length&&(q=ha(q)),q&&(q=q.split(" "))),q}G["latin:default"]=ja,G["latin:simple"]=Ba,G["latin:balance"]=Ea,G["latin:advanced"]=Ia,G["latin:extra"]=La;const W=self;let Y;const Z={Index:K,Document:Q,Worker:O,registerCharset:function(q,j){G[q]=j},registerLanguage:function(q,j){ka[q]=j}};(Y=W.define)&&Y.amd?Y([],function(){return Z}):W.exports?W.exports=Z:W.FlexSearch=Z})(commonjsGlobal)})(flexsearch_bundle);const FlexSearch=flexsearch_bundleExports,DocumentIndexer=FlexSearch.Document,Index=FlexSearch.Index;function tokenize(q){const j=Intl==null?void 0:Intl.Segmenter;if(j){const X=new Index({charset:"latin:advanced"}),te=X.encode.bind(X),ne=/^[\p{Script=Latin}\p{Mark}\d]+$/u,re=new j([q],{granularity:"word"});return oe=>{const le=[];return[...Array.from(re.segment(oe)).filter(we=>{if(we.isWordLike){if(!ne.test(we.segment))return!0;le.push(we.segment)}return!1}).map(we=>we.segment),...te(le.join(" "))]}}return X=>X.replace(/[\x00-\x7F]/g,"").split("")}class Indexer{constructor(j,X="en-US"){this._doc=j,this._indexer=new DocumentIndexer({document:{id:"id",index:["content","reference","space"],tag:"tags",store:["space"]},encode:tokenize(X),tokenize:"forward",context:!0}),Array.from(j.share.keys()).map(te=>[te,this._getPage(te)]).forEach(([te,ne])=>this._handlePageIndexing(te,ne))}onCreatePage(j){this._handlePageIndexing(j,this._getPage(j))}search(j){return new Map(this._search(j).flatMap(({result:X})=>X.map(te=>[te.id,te.doc.space])))}_search(j){return typeof j=="object"?this._indexer.search({...j,enrich:!0}):this._indexer.search(j,{enrich:!0})}_handlePageIndexing(j,X){X&&(X.forEach((te,ne)=>{this._refreshIndex(j,ne,"add",X.get(ne))}),X.observeDeep(te=>{const ne=te.flatMap(re=>{var oe;return(((oe=re.path)==null?void 0:oe.length)|0)>0?[[re.path[0],"update"]]:Array.from(re.changes.keys.entries()).map(([le,{action:fe}])=>[le,fe])});ne.length&&ne.forEach(([re,oe])=>{this._refreshIndex(j,re,oe,X.get(re))})}))}_refreshIndex(j,X,te,ne){switch(te){case"add":case"update":{if(ne){const re=this._toContent(ne.get("prop:title")||ne.get("prop:text"));re&&this._indexer.add(X,{content:re,space:j,tags:[j]})}break}case"delete":{this._indexer.remove(X);break}}}_toContent(j){if(j){if(typeof j=="string")return j;if(j instanceof YText)return j.toJSON()}}_getPage(j){try{return j.startsWith("space:")||(j=`space:${j}`),this._doc.getMap(j)}catch{return}}}class WorkspaceMeta extends Space{constructor(j,X,te){super(j,X,te,{valueInitializer:{pages:()=>new YArray,versions:()=>new YMap,avatar:()=>"",name:()=>""}}),this._prevPages=new Set,this.pageAdded=new Signal,this.pageRemoved=new Signal,this.pagesUpdated=new Signal,this.commonFieldsUpdated=new Signal,this._handleEvents=ne=>{ne.forEach(re=>{const oe=le=>re.target===this.origin&&re.changes.keys.has(le);re.target===this.pages||re.target.parent===this.pages||oe("pages")?this._handlePageEvent():(oe("name")||oe("avatar"))&&this._handleCommonFieldsEvent()})},this.origin.observeDeep(this._handleEvents)}get pages(){return this.proxy.pages}get name(){return this.proxy.name}get avatar(){return this.proxy.avatar}setName(j){this.doc.transact(()=>{this.proxy.name=j})}setAvatar(j){this.doc.transact(()=>{this.proxy.avatar=j})}get pageMetas(){return this.proxy.pages.toJSON()}getPageMeta(j){return this.pageMetas.find(X=>X.id===j)}addPageMeta(j,X){const te=new YMap;this.doc.transact(()=>{Object.entries(j).forEach(([ne,re])=>{te.set(ne,re)}),X===void 0?this.pages.push([te]):this.pages.insert(X,[te])})}setPageMeta(j,X){const ne=this.pages.toJSON().findIndex(re=>j===re.id);this.doc.transact(()=>{if(ne===-1)return;const re=this.pages.get(ne);Object.entries(X).forEach(([oe,le])=>{re.set(oe,le)})})}removePage(j){const te=this.pages.toJSON().findIndex(ne=>j===ne.id);this.doc.transact(()=>{te!==-1&&this.pages.delete(te,1)})}writeVersion(j){const X=this.proxy.versions;j.flavourMap.forEach((te,ne)=>{X.set(ne,te.version)})}validateVersion(j){const X=this.proxy.versions.toJSON(),te=Object.keys(X);if(te.length===0)throw new Error("Invalid workspace data, missing versions field. Please make sure the data is valid.");te.forEach(ne=>{var le;const re=X[ne],oe=(le=j.flavourMap.get(ne))==null?void 0:le.version;if(oe){if(re>oe)throw new Error(`Editor doesn't support ${ne}@${re}. Please upgrade the editor.`);if(re<oe)throw new Error(`In workspace data, the block flavour ${ne}@${re} is outdated. Please downgrade the editor or try data migration.`)}else throw new Error(`Editor missing ${ne} flavour. Please make sure this block flavour is registered.`)})}_handlePageEvent(){const{pageMetas:j,_prevPages:X}=this;j.forEach(te=>{this.doc.getMap("space:"+te.id),X.has(te.id)||setTimeout(()=>this.pageAdded.emit(te.id))}),X.forEach(te=>{!j.find(re=>re.id===te)&&this.pageRemoved.emit(te)}),X.clear(),j.forEach(te=>X.add(te.id)),this.pagesUpdated.emit()}_handleCommonFieldsEvent(){this.commonFieldsUpdated.emit()}}class Workspace{constructor(j){this.flavourMap=new Map,this._store=new Store(j),this._indexer=new Indexer(this.doc),j.isSSR?this._blobStorage=Promise.resolve(null):this._blobStorage=getBlobStorage(j.room),this.room=j.room,this.meta=new WorkspaceMeta("space:meta",this.doc,this._store.awareness),this.signals={pagesUpdated:this.meta.pagesUpdated,pageAdded:this.meta.pageAdded,pageRemoved:this.meta.pageRemoved},this._handlePageEvent()}get providers(){return this._store.providers}get blobs(){return this._blobStorage}get _pages(){return this._store.spaces}get doc(){return this._store.doc}register(j){return Object.keys(j).forEach(X=>{this.flavourMap.set(X,j[X])}),this}_hasPage(j){return this._pages.has("space:"+j)}getPage(j){return j.startsWith("space:")||(j="space:"+j),this._pages.get(j)??null}_handlePageEvent(){this.signals.pageAdded.on(j=>{const X=new Page(this,j,this.doc,this._store.awareness,this._store.idGenerator);this._store.addSpace(X),X.syncFromExistingDoc(),this._indexer.onCreatePage(j)}),this.signals.pageRemoved.on(j=>{const X=this.getPage(j);X.dispose(),this._store.removeSpace(X)})}createPage(j){if(this._hasPage(j))throw new Error("page already exists");this.meta.addPageMeta({id:j,title:"",createDate:+new Date})}setPageMeta(j,X){this.meta.setPageMeta(j,X)}removePage(j){this.meta.removePage(j)}search(j){return this._indexer.search(j)}exportYDoc(){const j=encodeStateAsUpdate(this.doc),X=new Blob([j],{type:"application/octet-stream"}),te=URL.createObjectURL(X),ne=document.createElement("a");ne.href=te,ne.download="workspace.ydoc",ne.click(),URL.revokeObjectURL(te)}exportJSX(j="0"){return this._store.exportJSX(j)}}Workspace.Y=Y;const env$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},importIdentifier$2="__ $BLOCKSUITE_STORE$ __";env$2[importIdentifier$2]===!0&&console.error("@blocksuite/store was already imported. This breaks constructor checks and will lead to issues!");env$2[importIdentifier$2]=!0;const BLOCK_ID_ATTR="data-block-id",PREVENT_DEFAULT=!1,ALLOW_DEFAULT=!0,HOTKEYS={UNDO:"command+z,ctrl+z",REDO:"command+shift+z,ctrl+shift+z,ctrl+y",BACKSPACE:"backspace",SELECT_ALL:"command+a,ctrl+a",SHIFT_UP:"shift+up",SHIFT_DOWN:"shift+down",INLINE_CODE:"command+e,ctrl+e",STRIKE:"command+shift+s,ctrl+shift+s",LINK:"command+k,ctrl+k",TEXT:"command+option+0,ctrl+shift+0",H1:"command+option+1,ctrl+shift+1",H2:"command+option+2,ctrl+shift+2",H3:"command+option+3,ctrl+shift+3",H4:"command+option+4,ctrl+shift+4",H5:"command+option+5,ctrl+shift+5",H6:"command+option+6,ctrl+shift+6",CODE_BLOCK:"command+option+c,ctrl+alt+c",BULLETED:"command+option+8,ctrl+shift+8",NUMBERED_LIST:"command+option+9,ctrl+shift+9",UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",ENTER:"enter"};function assertExists(q){assertExists$1(q)}const assertFlavours=assertFlavours$1,matchFlavours=matchFlavours$1,isWeb=typeof window<"u",isFirefox$1=isWeb&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function caretRangeFromPoint(q,j){if(isFirefox$1){const X=document.caretPositionFromPoint(q,j),te=document.createRange();return te.setStart(X.offsetNode,X.offset),te}return document.caretRangeFromPoint(q,j)}function almostEqual(q,j){return Math.abs(q-j)<1e-4}function createEvent(q,j){return new CustomEvent(q,{detail:j})}function noop(){}const sleep=(q=0)=>new Promise(j=>setTimeout(j,q)),throttle=(q,j,{leading:X=!0,trailing:te=!0}={})=>{let ne=null,re=null;const oe=()=>{re&&te?(q(...re),re=null,ne=setTimeout(oe,j)):ne=null};return function(...le){if(ne){re=le;return}X&&q.apply(this,le),ne=setTimeout(oe,j)}},clamp$1=(q,j,X)=>q<j?j:q>X?X:q;async function asyncFocusRichText(q,j){await sleep();const X=q.richTextAdapters.get(j);X==null||X.quill.focus()}function isCollapsedAtBlockStart(q){var j,X;return((j=q.getSelection(!0))==null?void 0:j.index)===0&&((X=q.getSelection())==null?void 0:X.length)===0}function convertToList(q,j,X,te,ne){var re,oe,le,fe,we;if(matchFlavours(j,["affine:list"])&&j.type===X)return!1;if(matchFlavours(j,["affine:paragraph"])){const ke=q.getParent(j);if(!ke)return!1;const ye=ke.children.indexOf(j);(re=j.text)==null||re.insert(" ",te.length),q.captureSync(),(oe=j.text)==null||oe.delete(0,te.length+1);const ve={flavour:"affine:list",type:X,text:(le=j==null?void 0:j.text)==null?void 0:le.clone(),children:j.children,...ne};q.deleteBlock(j);const be=q.addBlock(ve,ke,ye);asyncFocusRichText(q,be)}else matchFlavours(j,["affine:list"])&&j.type!==X&&((fe=j.text)==null||fe.insert(" ",te.length),q.captureSync(),(we=j.text)==null||we.delete(0,te.length+1),q.updateBlock(j,{type:X}));return!0}function convertToParagraph(q,j,X,te){var ne,re,oe,le,fe;if(matchFlavours(j,["affine:paragraph"])&&j.type===X)return!1;if(matchFlavours(j,["affine:paragraph"]))matchFlavours(j,["affine:paragraph"])&&j.type!==X&&((le=j.text)==null||le.insert(" ",te.length),q.captureSync(),(fe=j.text)==null||fe.delete(0,te.length+1),q.updateBlock(j,{type:X}));else{const we=q.getParent(j);if(!we)return!1;const ke=we.children.indexOf(j);(ne=j.text)==null||ne.insert(" ",te.length),q.captureSync(),(re=j.text)==null||re.delete(0,te.length+1);const ye={flavour:"affine:paragraph",type:X,text:(oe=j==null?void 0:j.text)==null?void 0:oe.clone(),children:j.children};q.deleteBlock(j);const ve=q.addBlock(ye,we,ke);asyncFocusRichText(q,ve)}return!0}function convertToDivider(q,j,X){var te,ne;if(matchFlavours(j,["affine:divider"]))return!1;if(!matchFlavours(j,["affine:divider"])){const re=q.getParent(j);if(!re)return!1;const oe=re.children.indexOf(j);(te=j.text)==null||te.insert(" ",X.length),q.captureSync(),(ne=j.text)==null||ne.delete(0,X.length+1);const le={flavour:"affine:divider",children:j.children};q.addBlock(le,re,oe);const fe=q.id;asyncFocusRichText(q,fe)}return!0}class Point{constructor(j,X){this.x=j,this.y=X}equals({x:j,y:X}){return this.x===j&&this.y===X}xDistance({x:j}){return this.x-j}yDistance({y:j}){return this.y-j}xDistanceAbsolute(j){return Math.abs(this.xDistance(j))}yDistanceAbsolute(j){return Math.abs(this.yDistance(j))}distance(j){return Math.sqrt(Math.pow(this.xDistance(j),2)+Math.pow(this.yDistance(j),2))}}class Rect{constructor(j,X,te,ne){const[re,oe]=X<=ne?[X,ne]:[ne,X],[le,fe]=j<=te?[j,te]:[te,j];this._top=re,this._right=fe,this._left=le,this._bottom=oe}get width(){return Math.abs(this._left-this._right)}get height(){return Math.abs(this._bottom-this._top)}get top(){return this._top}get left(){return this._left}get bottom(){return this._bottom}get right(){return this._right}equals({top:j,left:X,bottom:te,right:ne}){return j===this._top&&te===this._bottom&&X===this._left&&ne===this._right}isContainPoint({x:j,y:X}){return X>=this._top&&X<=this._bottom&&j>=this.left&&j<=this._right}isContain({top:j,left:X,bottom:te,right:ne}){return j>=this._top&&j<=this._bottom&&te>=this._top&&te<=this._bottom&&X>=this._left&&X<=this.right&&ne>=this.left&&ne<=this._right}isIntersect(j){const{left:X,top:te,width:ne,height:re}=j,{left:oe,top:le,width:fe,height:we}=this,ke=X+ne>=oe+fe?X+ne:oe+fe,ye=te+re>=le+we?te+re:le+we,ve=X<=oe?X:oe,be=te<=le?te:le;return ke-ve<=ne+fe&&ye-be<=re+we}isPointDown({x:j,y:X}){return this.bottom<X&&this.left<=j&&this.right>=j}isPointUp({x:j,y:X}){return X<this.top&&this.left<=j&&this.right>=j}isPointLeft({x:j,y:X}){return j<this.left&&this.top<=X&&this.bottom>=X}isPointRight({x:j,y:X}){return j>this.right&&this.top<=X&&this.bottom>=X}fromNewLeft(j){return this._left=j,new Rect(j,this.top,this.right,this.bottom)}static fromLTRB(j,X,te,ne){return new Rect(j,X,te,ne)}static fromLWTH(j,X,te,ne){return new Rect(j,te,j+X,te+ne)}static fromPoints(j,X){const{y:te,x:ne}=j,{y:re,x:oe}=X;return Rect.fromLTRB(ne,te,oe,re)}static fromDom(j){const{top:X,width:te,left:ne,height:re}=j.getBoundingClientRect();return Rect.fromLWTH(ne,te,X,re)}}var isff=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function addEvent(q,j,X,te){q.addEventListener?q.addEventListener(j,X,te):q.attachEvent&&q.attachEvent("on".concat(j),function(){X(window.event)})}function getMods(q,j){for(var X=j.slice(0,j.length-1),te=0;te<X.length;te++)X[te]=q[X[te].toLowerCase()];return X}function getKeys(q){typeof q!="string"&&(q=""),q=q.replace(/\s/g,"");for(var j=q.split(","),X=j.lastIndexOf("");X>=0;)j[X-1]+=",",j.splice(X,1),X=j.lastIndexOf("");return j}function compareArray(q,j){for(var X=q.length>=j.length?q:j,te=q.length>=j.length?j:q,ne=!0,re=0;re<X.length;re++)te.indexOf(X[re])===-1&&(ne=!1);return ne}var _keyMap={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":isff?173:189,"=":isff?61:187,";":isff?59:186,"'":222,"[":219,"]":221,"\\":220},_modifier={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},_mods={16:!1,18:!1,17:!1,91:!1},_handlers={};for(var k$2=1;k$2<20;k$2++)_keyMap["f".concat(k$2)]=111+k$2;var _downKeys=[],winListendFocus=!1,_scope="all",elementHasBindEvent=[],code=function q(j){return _keyMap[j.toLowerCase()]||_modifier[j.toLowerCase()]||j.toUpperCase().charCodeAt(0)},getKey=function q(j){return Object.keys(_keyMap).find(function(X){return _keyMap[X]===j})},getModifier=function q(j){return Object.keys(_modifier).find(function(X){return _modifier[X]===j})};function setScope(q){_scope=q||"all"}function getScope(){return _scope||"all"}function getPressedKeyCodes(){return _downKeys.slice(0)}function getPressedKeyString(){return _downKeys.map(function(q){return getKey(q)||getModifier(q)||String.fromCharCode(q)})}function filter$1(q){var j=q.target||q.srcElement,X=j.tagName,te=!0;return(j.isContentEditable||(X==="INPUT"||X==="TEXTAREA"||X==="SELECT")&&!j.readOnly)&&(te=!1),te}function isPressed(q){return typeof q=="string"&&(q=code(q)),_downKeys.indexOf(q)!==-1}function deleteScope(q,j){var X,te;q||(q=getScope());for(var ne in _handlers)if(Object.prototype.hasOwnProperty.call(_handlers,ne))for(X=_handlers[ne],te=0;te<X.length;)X[te].scope===q?X.splice(te,1):te++;getScope()===q&&setScope(j||"all")}function clearModifier(q){var j=q.keyCode||q.which||q.charCode,X=_downKeys.indexOf(j);if(X>=0&&_downKeys.splice(X,1),q.key&&q.key.toLowerCase()==="meta"&&_downKeys.splice(0,_downKeys.length),(j===93||j===224)&&(j=91),j in _mods){_mods[j]=!1;for(var te in _modifier)_modifier[te]===j&&(hotkeys$1[te]=!1)}}function unbind(q){if(typeof q>"u")Object.keys(_handlers).forEach(function(oe){return delete _handlers[oe]});else if(Array.isArray(q))q.forEach(function(oe){oe.key&&eachUnbind(oe)});else if(typeof q=="object")q.key&&eachUnbind(q);else if(typeof q=="string"){for(var j=arguments.length,X=new Array(j>1?j-1:0),te=1;te<j;te++)X[te-1]=arguments[te];var ne=X[0],re=X[1];typeof ne=="function"&&(re=ne,ne=""),eachUnbind({key:q,scope:ne,method:re,splitKey:"+"})}}var eachUnbind=function q(j){var X=j.key,te=j.scope,ne=j.method,re=j.splitKey,oe=re===void 0?"+":re,le=getKeys(X);le.forEach(function(fe){var we=fe.split(oe),ke=we.length,ye=we[ke-1],ve=ye==="*"?"*":code(ye);if(_handlers[ve]){te||(te=getScope());var be=ke>1?getMods(_modifier,we):[];_handlers[ve]=_handlers[ve].filter(function(Ce){var Ee=ne?Ce.method===ne:!0;return!(Ee&&Ce.scope===te&&compareArray(Ce.mods,be))})}})};function eventHandler(q,j,X,te){if(j.element===te){var ne;if(j.scope===X||j.scope==="all"){ne=j.mods.length>0;for(var re in _mods)Object.prototype.hasOwnProperty.call(_mods,re)&&(!_mods[re]&&j.mods.indexOf(+re)>-1||_mods[re]&&j.mods.indexOf(+re)===-1)&&(ne=!1);(j.mods.length===0&&!_mods[16]&&!_mods[18]&&!_mods[17]&&!_mods[91]||ne||j.shortcut==="*")&&j.method(q,j)===!1&&(q.preventDefault?q.preventDefault():q.returnValue=!1,q.stopPropagation&&q.stopPropagation(),q.cancelBubble&&(q.cancelBubble=!0))}}}function dispatch(q,j){var X=_handlers["*"],te=q.keyCode||q.which||q.charCode;if(hotkeys$1.filter.call(this,q)){if((te===93||te===224)&&(te=91),_downKeys.indexOf(te)===-1&&te!==229&&_downKeys.push(te),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(Ce){var Ee=modifierMap[Ce];q[Ce]&&_downKeys.indexOf(Ee)===-1?_downKeys.push(Ee):!q[Ce]&&_downKeys.indexOf(Ee)>-1?_downKeys.splice(_downKeys.indexOf(Ee),1):Ce==="metaKey"&&q[Ce]&&_downKeys.length===3&&(q.ctrlKey||q.shiftKey||q.altKey||(_downKeys=_downKeys.slice(_downKeys.indexOf(Ee))))}),te in _mods){_mods[te]=!0;for(var ne in _modifier)_modifier[ne]===te&&(hotkeys$1[ne]=!0);if(!X)return}for(var re in _mods)Object.prototype.hasOwnProperty.call(_mods,re)&&(_mods[re]=q[modifierMap[re]]);q.getModifierState&&!(q.altKey&&!q.ctrlKey)&&q.getModifierState("AltGraph")&&(_downKeys.indexOf(17)===-1&&_downKeys.push(17),_downKeys.indexOf(18)===-1&&_downKeys.push(18),_mods[17]=!0,_mods[18]=!0);var oe=getScope();if(X)for(var le=0;le<X.length;le++)X[le].scope===oe&&(q.type==="keydown"&&X[le].keydown||q.type==="keyup"&&X[le].keyup)&&eventHandler(q,X[le],oe,j);if(te in _handlers){for(var fe=0;fe<_handlers[te].length;fe++)if((q.type==="keydown"&&_handlers[te][fe].keydown||q.type==="keyup"&&_handlers[te][fe].keyup)&&_handlers[te][fe].key){for(var we=_handlers[te][fe],ke=we.splitKey,ye=we.key.split(ke),ve=[],be=0;be<ye.length;be++)ve.push(code(ye[be]));ve.sort().join("")===_downKeys.sort().join("")&&eventHandler(q,we,oe,j)}}}}function isElementBind(q){return elementHasBindEvent.indexOf(q)>-1}function hotkeys$1(q,j,X){_downKeys=[];var te=getKeys(q),ne=[],re="all",oe=document,le=0,fe=!1,we=!0,ke="+",ye=!1;for(X===void 0&&typeof j=="function"&&(X=j),Object.prototype.toString.call(j)==="[object Object]"&&(j.scope&&(re=j.scope),j.element&&(oe=j.element),j.keyup&&(fe=j.keyup),j.keydown!==void 0&&(we=j.keydown),j.capture!==void 0&&(ye=j.capture),typeof j.splitKey=="string"&&(ke=j.splitKey)),typeof j=="string"&&(re=j);le<te.length;le++)q=te[le].split(ke),ne=[],q.length>1&&(ne=getMods(_modifier,q)),q=q[q.length-1],q=q==="*"?"*":code(q),q in _handlers||(_handlers[q]=[]),_handlers[q].push({keyup:fe,keydown:we,scope:re,mods:ne,shortcut:te[le],method:X,key:te[le],splitKey:ke,element:oe});typeof oe<"u"&&!isElementBind(oe)&&window&&(elementHasBindEvent.push(oe),addEvent(oe,"keydown",function(ve){dispatch(ve,oe)},ye),winListendFocus||(winListendFocus=!0,addEvent(window,"focus",function(){_downKeys=[]},ye)),addEvent(oe,"keyup",function(ve){dispatch(ve,oe),clearModifier(ve)},ye))}function trigger(q){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(_handlers).forEach(function(X){var te=_handlers[X].filter(function(ne){return ne.scope===j&&ne.shortcut===q});te.forEach(function(ne){ne&&ne.method&&ne.method()})})}var _api={getPressedKeyString,setScope,getScope,deleteScope,getPressedKeyCodes,isPressed,filter:filter$1,trigger,unbind,keyMap:_keyMap,modifier:_modifier,modifierMap};for(var a$6 in _api)Object.prototype.hasOwnProperty.call(_api,a$6)&&(hotkeys$1[a$6]=_api[a$6]);if(typeof window<"u"){var _hotkeys=window.hotkeys;hotkeys$1.noConflict=function(q){return q&&window.hotkeys===hotkeys$1&&(window.hotkeys=_hotkeys),hotkeys$1},window.hotkeys=hotkeys$1}const hotkeys=hotkeys$1;hotkeys.filter=()=>!0;const SCOPE={AFFINE_PAGE:"affine:page",OTHER:"other"};class HotkeyManager{constructor(){this._hotkeys=hotkeys}_setScope(j){this._hotkeys.setScope(j)}addListener(j,X,te=SCOPE.AFFINE_PAGE){this._hotkeys(j,{scope:te},X)}removeListener(j,X=SCOPE.AFFINE_PAGE){this._hotkeys.unbind((Array.isArray(j)?j:[j]).join(","),X)}disableHotkey(){this._hotkeys.setScope(SCOPE.OTHER)}enableHotkey(){this._setScope(SCOPE.AFFINE_PAGE)}async withDisabledHotkey(j){this.disableHotkey();try{return await j()}finally{this.enableHotkey()}}withDisabledHotkeyFn(j){return(...X)=>this.withDisabledHotkey(()=>j(...X))}}const hotkey=new HotkeyManager;function getShapeBlockHitBox(q){var X;const j=getBlockById(q);if((j==null?void 0:j.tagName)!==ShapeBlockTag.toUpperCase())throw new Error(`data-block-id: ${q} is not shape block`);return((X=j.shadowRoot)==null?void 0:X.querySelector(".affine-shape-block-hit-box"))??null}function getBlockById(q,j=document.body){return j.querySelector(`[${BLOCK_ID_ATTR}="${q}"]`)}function getParentBlockById(q,j=document.body){var te;const X=getBlockById(q,j);return((te=X==null?void 0:X.parentElement)==null?void 0:te.closest(`[${BLOCK_ID_ATTR}]`))||null}function getSiblingsById(q,j=document.body){var ne;const X=getParentBlockById(q,j),te=(ne=X==null?void 0:X.model)==null?void 0:ne.children;if(te!=null&&te.length){const re=te.map(oe=>`[${BLOCK_ID_ATTR}='${oe.id}']`).join(",");return Array.from(j.querySelectorAll(re))}return[]}function getPreviousSiblingById(q,j=document.body){const X=getSiblingsById(q,j),te=getBlockById(q,j);if(X&&X.length>0&&te){const ne=[...X].indexOf(te);return X[ne-1]||null}return null}function getNextSiblingById(q,j=document.body){const X=getSiblingsById(q,j),te=getBlockById(q,j);if(X&&X.length>0&&te){const ne=[...X].indexOf(te);return X[ne+1]||null}return null}function getNextBlock(q){let j=getBlockById(q);if(j!=null&&j.model.children.length)return j.model.children[0];for(;j;){const X=getParentBlockById(j.model.id);if(X){const te=getNextSiblingById(j.model.id);if(te)return te.model}j=X}return null}function getPreviousBlock(q,j){const X=getParentBlockById(j,q);if(X){const te=getPreviousSiblingById(j,q);if(te!=null&&te.model){if(te.model.children.length){let ne=te.model.children[te.model.children.length-1];for(;ne.children.length;)ne=ne.children[ne.children.length-1];return ne}return te.model}return X.model}return null}function getDefaultPageBlock(q){return assertExists(q.page.root),document.querySelector(`[${BLOCK_ID_ATTR}="${q.page.root.id}"]`)}function getContainerByModel(q){assertExists(q.page.root);const X=document.querySelector(`[${BLOCK_ID_ATTR}="${q.page.root.id}"]`).closest("editor-container");return assertExists(X),X}function getBlockElementByModel(q){assertExists(q.page.root);const j=document.querySelector(`[${BLOCK_ID_ATTR}="${q.page.root.id}"]`);return j?q.id===q.page.root.id?j:j.querySelector(`[${BLOCK_ID_ATTR}="${q.id}"]`):null}function getStartModelBySelection(){const q=window.getSelection();if(q.rangeCount===0)throw new Error("Can't get start model by selection, rangeCount is 0");const j=q.getRangeAt(0);return(j.startContainer instanceof Text?j.startContainer.parentElement:j.startContainer).closest(`[${BLOCK_ID_ATTR}]`).model}function getRichTextByModel(q){const j=getBlockElementByModel(q),X=j==null?void 0:j.querySelector("rich-text");return X||null}function getModelsByRange(q){var ne;let j=q.commonAncestorContainer;if(j.nodeType===Node.TEXT_NODE)return[getStartModelBySelection()];if(j.attributes&&!j.attributes.getNamedItem(BLOCK_ID_ATTR)){const re=(ne=j.closest(`[${BLOCK_ID_ATTR}]`))==null?void 0:ne.parentElement;re!=null&&(j=re)}const X=[],te=j.querySelectorAll(`[${BLOCK_ID_ATTR}]`);return te.length>1?(te.forEach(re=>{const oe=re;assertExists(oe.model);const le=getBlockElementByModel(oe.model),fe=matchFlavours(oe.model,["affine:page"])?le==null?void 0:le.querySelector(".affine-default-page-block-title-container"):le==null?void 0:le.querySelector("rich-text");fe&&q.intersectsNode(fe)&&(le==null?void 0:le.tagName)!=="AFFINE-GROUP"&&X.push(oe.model)}),X):[getStartModelBySelection()]}function getModelByElement(q){const j=q.closest(`[${BLOCK_ID_ATTR}]`);return assertExists(j.model),j.model}function mergeRect(q,j){return new DOMRect(Math.min(q.left,j.left),Math.min(q.top,j.top),Math.max(q.right,j.right)-Math.min(q.left,j.left),Math.max(q.bottom,j.bottom)-Math.min(q.top,j.top))}function getDOMRectByLine(q,j){const X=Array.from(q);if(j==="first"){let te=0;for(let re=0;re<X.length&&!(X[re].left<0&&X[re].right<0&&X[re].height===1);re++)te=re;return X.slice(0,te+1).reduce(mergeRect)}else{let te=X.length-1;for(let re=X.length-1;re>=0&&X[re].height!==0;re--)te=re;return X.slice(te).reduce(mergeRect)}}function getCurrentRange(q=window.getSelection()){if(!q)throw new Error("Failed to get current range, selection is null");if(q.rangeCount===0)throw new Error("Failed to get current range, rangeCount is 0");return q.rangeCount>1&&console.warn("getCurrentRange may be wrong, rangeCount > 1"),q.getRangeAt(0)}function textWithoutNode(q,j){let X="";for(let te=0;te<q.childNodes.length;te++){const ne=q.childNodes[te];if(ne!==j||!j.contains(ne))X+=ne.textContent||ne.innerText||"";else return X}return X}function getQuillIndexByNativeSelection(q,j,X){var oe,le;if(q instanceof Element&&q.classList.contains("affine-default-page-block-title-container"))return(X?(oe=q.querySelector("input"))==null?void 0:oe.selectionStart:(le=q.querySelector("input"))==null?void 0:le.selectionEnd)||0;let te=0,ne=q,re=!1;for(;q&&(!(ne!=null&&ne.getAttributeNode)||!ne.getAttributeNode("contenteditable"));){if(q instanceof Element&&q.hasAttribute("data-block-id")){te=0;break}re?te+=textWithoutNode(q,ne).length:(re=!0,te+=j),ne=q,q=q==null?void 0:q.parentNode}return te}function getTextNodeBySelectedBlock(q){const j=getBlockById(q.id),X=q.startPos??q.endPos??0;if(!j)throw new Error("Failed to get block element, block id: "+q.id);const te=j.querySelector("rich-text");if(!te)throw new Error("Failed to get rich text element");const ne=te.quill,[re,oe]=ne.getLeaf(X);return[re.domNode,oe]}function getAllBlocks(){return Array.from(document.querySelectorAll(`[${BLOCK_ID_ATTR}]`)).filter(j=>j.tagName!=="AFFINE-DEFAULT-PAGE"&&j.tagName!=="AFFINE-GROUP")}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e$7=Symbol.for(""),l$7=q=>{if((q==null?void 0:q.r)===e$7)return q==null?void 0:q._$litStatic$},i$7=(q,...j)=>({_$litStatic$:j.reduce((X,te,ne)=>X+(re=>{if(re._$litStatic$!==void 0)return re._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${re}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(te)+q[ne+1],q[0]),r:e$7}),s$5=new Map,a$5=q=>(j,...X)=>{const te=X.length;let ne,re;const oe=[],le=[];let fe,we=0,ke=!1;for(;we<te;){for(fe=j[we];we<te&&(re=X[we],(ne=l$7(re))!==void 0);)fe+=ne+j[++we],ke=!0;le.push(re),oe.push(fe),we++}if(we===te&&oe.push(j[te]),ke){const ye=oe.join("$$lit$$");(j=s$5.get(ye))===void 0&&(oe.raw=oe,s$5.set(ye,j=oe)),X=le}return q(j,...X)},n$5=a$5(y$1);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$6={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$6=q=>(...j)=>({_$litDirective$:q,values:j});let i$6=class{constructor(j){}get _$AU(){return this._$AM._$AU}_$AT(j,X,te){this._$Ct=j,this._$AM=X,this._$Ci=te}_$AS(j,X){return this.update(j,X)}update(j,X){return this.render(...X)}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:l$6}=L$2,c$3=()=>document.createComment(""),r$3=(q,j,X)=>{var te;const ne=q._$AA.parentNode,re=j===void 0?q._$AB:j._$AA;if(X===void 0){const oe=ne.insertBefore(c$3(),re),le=ne.insertBefore(c$3(),re);X=new l$6(oe,le,q,q.options)}else{const oe=X._$AB.nextSibling,le=X._$AM,fe=le!==q;if(fe){let we;(te=X._$AQ)===null||te===void 0||te.call(X,q),X._$AM=q,X._$AP!==void 0&&(we=q._$AU)!==le._$AU&&X._$AP(we)}if(oe!==re||fe){let we=X._$AA;for(;we!==oe;){const ke=we.nextSibling;ne.insertBefore(we,re),we=ke}}}return X},u$3=(q,j,X=q)=>(q._$AI(j,X),q),f$3={},s$4=(q,j=f$3)=>q._$AH=j,m$3=q=>q._$AH,p$2=q=>{var j;(j=q._$AP)===null||j===void 0||j.call(q,!1,!0);let X=q._$AA;const te=q._$AB.nextSibling;for(;X!==te;){const ne=X.nextSibling;X.remove(),X=ne}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const u$2=(q,j,X)=>{const te=new Map;for(let ne=j;ne<=X;ne++)te.set(q[ne],ne);return te},c$2=e$6(class extends i$6{constructor(q){if(super(q),q.type!==t$6.CHILD)throw Error("repeat() can only be used in text expressions")}ht(q,j,X){let te;X===void 0?X=j:j!==void 0&&(te=j);const ne=[],re=[];let oe=0;for(const le of q)ne[oe]=te?te(le,oe):oe,re[oe]=X(le,oe),oe++;return{values:re,keys:ne}}render(q,j,X){return this.ht(q,j,X).values}update(q,[j,X,te]){var ne;const re=m$3(q),{values:oe,keys:le}=this.ht(j,X,te);if(!Array.isArray(re))return this.ut=le,oe;const fe=(ne=this.ut)!==null&&ne!==void 0?ne:this.ut=[],we=[];let ke,ye,ve=0,be=re.length-1,Ce=0,Ee=oe.length-1;for(;ve<=be&&Ce<=Ee;)if(re[ve]===null)ve++;else if(re[be]===null)be--;else if(fe[ve]===le[Ce])we[Ce]=u$3(re[ve],oe[Ce]),ve++,Ce++;else if(fe[be]===le[Ee])we[Ee]=u$3(re[be],oe[Ee]),be--,Ee--;else if(fe[ve]===le[Ee])we[Ee]=u$3(re[ve],oe[Ee]),r$3(q,we[Ee+1],re[ve]),ve++,Ee--;else if(fe[be]===le[Ce])we[Ce]=u$3(re[be],oe[Ce]),r$3(q,re[ve],re[be]),be--,Ce++;else if(ke===void 0&&(ke=u$2(le,Ce,Ee),ye=u$2(fe,ve,be)),ke.has(fe[ve]))if(ke.has(fe[be])){const Oe=ye.get(le[Ce]),Ae=Oe!==void 0?re[Oe]:null;if(Ae===null){const Te=r$3(q,re[ve]);u$3(Te,oe[Ce]),we[Ce]=Te}else we[Ce]=u$3(Ae,oe[Ce]),r$3(q,re[ve],Ae),re[Oe]=null;Ce++}else p$2(re[be]),be--;else p$2(re[ve]),ve++;for(;Ce<=Ee;){const Oe=r$3(q,we[Ee+1]);u$3(Oe,oe[Ce]),we[Ce++]=Oe}for(;ve<=be;){const Oe=re[ve++];Oe!==null&&p$2(Oe)}return this.ut=le,s$4(q,we),x$2}});class CodeBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:code",this.type="code",this.tag=i$7`affine-code`,this.language="JavaScript"}setLang(j){this.page.updateBlockById(this.id,{language:j})}block2html(j,X,te,ne,re){const oe=document.querySelector(`[data-block-id="${this.id}"] pre`);return oe?(oe.setAttribute("code-lang",this.language),oe.outerHTML):super.block2html(j,X,te,ne,re)}}CodeBlockModel.version=1;class DividerBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:divider",this.tag=i$7`affine-divider`}block2html(j,X){return"<hr/>"}}DividerBlockModel.version=1;class EmbedBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:embed",this.tag=i$7`affine-embed`,this.type=X.type??"image",this.caption=X.caption??"image",this.sourceId=X.sourceId??"",this.width=X.width??0,this.height=X.height??0}}EmbedBlockModel.version=1;class GroupBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:group",this.tag=i$7`affine-group`,this.xywh=X.xywh??"[0,0,720,480]"}}GroupBlockModel.version=1;class ListBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:list",this.tag=i$7`affine-list`,this.type=X.type??"bulleted",this.checked=X.checked??!1}block2html(j,X,te,ne,re){let oe=super.block2html(j,X,te,ne,re);const le=this.page.getBlockById(X),fe=this.page.getBlockById(te);switch(this.type){case"bulleted":oe=`<li>${oe}</li>`;break;case"numbered":oe=`<li>${oe}</li>`;break;case"todo":oe=`<li><input disabled type="checkbox" ${this.checked?"checked":""}>${oe}</li>`;break}if((le==null?void 0:le.flavour)!==this.flavour||le.type!==this.type)switch(this.type){case"bulleted":case"todo":oe=`<ul>${oe}`;break;case"numbered":oe=`<ol>${oe}`;break}if((fe==null?void 0:fe.flavour)!==this.flavour||fe.type!==this.type)switch(this.type){case"bulleted":case"todo":oe=`${oe}</ul>`;break;case"numbered":oe=`${oe}</ol>`;break}return oe}}ListBlockModel.version=1;class PageBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:page",this.title="",this.title=X.title??""}block2html(j,X,te,ne,re){return`<div>${this.title}${j}</div>`}block2Text(j,X,te){return`${(this.title||"").slice(X||0,te)}${j}`}}PageBlockModel.version=1;class ParagraphBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:paragraph",this.tag=i$7`affine-paragraph`,this.type="text",this.type=X.type??"text"}}ParagraphBlockModel.version=1;var TDShapeType=(q=>(q.Sticky="sticky",q.Ellipse="ellipse",q.Rectangle="rectangle",q.Triangle="triangle",q.Draw="draw",q.Arrow="arrow",q.Line="line",q.Text="text",q.Group="group",q.Image="image",q.Video="video",q))(TDShapeType||{}),ColorStyle=(q=>(q.White="white",q.LightGray="lightGray",q.Gray="gray",q.Black="black",q.Green="green",q.Cyan="cyan",q.Blue="blue",q.Indigo="indigo",q.Violet="violet",q.Red="red",q.Orange="orange",q.Yellow="yellow",q))(ColorStyle||{}),SizeStyle=(q=>(q.Small="small",q.Medium="medium",q.Large="large",q))(SizeStyle||{}),DashStyle=(q=>(q.Draw="draw",q.Solid="solid",q.Dashed="dashed",q.Dotted="dotted",q))(DashStyle||{}),FontSize=(q=>(q.Small="small",q.Medium="medium",q.Large="large",q.ExtraLarge="extraLarge",q))(FontSize||{}),AlignStyle=(q=>(q.Start="start",q.Middle="middle",q.End="end",q.Justify="justify",q))(AlignStyle||{}),FontStyle=(q=>(q.Script="script",q.Sans="sans",q.Serif="serif",q.Mono="mono",q))(FontStyle||{}),TLBoundsEdge=(q=>(q.Top="top_edge",q.Right="right_edge",q.Bottom="bottom_edge",q.Left="left_edge",q))(TLBoundsEdge||{}),TLBoundsCorner=(q=>(q.TopLeft="top_left_corner",q.TopRight="top_right_corner",q.BottomRight="bottom_right_corner",q.BottomLeft="bottom_left_corner",q))(TLBoundsCorner||{}),SnapPoints=(q=>(q.minX="minX",q.midX="midX",q.maxX="maxX",q.minY="minY",q.midY="midY",q.maxY="maxY",q))(SnapPoints||{});class ShapeBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:shape",this.tag=i$7`affine-shape`,this.xywh=X.xywh??"[0,0,100,100]",this.type=X.type??TDShapeType.Rectangle,this.color=X.color??ColorStyle.Black}}ShapeBlockModel.version=1;class ParagraphBlockService{constructor(){this.isLoaded=!0}block2html(j,X,te,ne,re,oe){const le=j.block2html(X,te,ne,re,oe);switch(j.type){case"text":return`<p>${le}</p>`;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return`<${j.type}>${le}</${j.type}>`;case"quote":return`<blockquote>${le}</blockquote>`;default:return le}}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o$5=e$6(class extends i$6{constructor(q){var j;if(super(q),q.type!==t$6.ATTRIBUTE||q.name!=="class"||((j=q.strings)===null||j===void 0?void 0:j.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(q){return" "+Object.keys(q).filter(j=>q[j]).join(" ")+" "}update(q,[j]){var X,te;if(this.nt===void 0){this.nt=new Set,q.strings!==void 0&&(this.st=new Set(q.strings.join(" ").split(/\s/).filter(re=>re!=="")));for(const re in j)j[re]&&!(!((X=this.st)===null||X===void 0)&&X.has(re))&&this.nt.add(re);return this.render(j)}const ne=q.element.classList;this.nt.forEach(re=>{re in j||(ne.remove(re),this.nt.delete(re))});for(const re in j){const oe=!!j[re];oe===this.nt.has(re)||!((te=this.st)===null||te===void 0)&&te.has(re)||(oe?(ne.add(re),this.nt.add(re)):(ne.remove(re),this.nt.delete(re)))}return x$2}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$5=e$6(class extends i$6{constructor(q){var j;if(super(q),q.type!==t$6.ATTRIBUTE||q.name!=="style"||((j=q.strings)===null||j===void 0?void 0:j.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(q){return Object.keys(q).reduce((j,X)=>{const te=q[X];return te==null?j:j+`${X=X.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${te};`},"")}update(q,[j]){const{style:X}=q.element;if(this.vt===void 0){this.vt=new Set;for(const te in j)this.vt.add(te);return this.render(j)}this.vt.forEach(te=>{j[te]==null&&(this.vt.delete(te),te.includes("-")?X.removeProperty(te):X[te]="")});for(const te in j){const ne=j[te];ne!=null&&(this.vt.add(te),te.includes("-")?X.setProperty(te,ne):X[te]=ne)}return x$2}});var __defProp$C=Object.defineProperty,__getOwnPropDesc$C=Object.getOwnPropertyDescriptor,__decorateClass$C=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$C(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$C(j,X,ne),ne};let TextFieldElement=class extends s$6{static valueToRender(q){return q}static valueToCompare(q){return q}render(){return y$1`<div
      class=${o$5({"affine-text-field":!0})}
      style=${i$5({})}
    >
      <affine-input
        value=${TextFieldElement.valueToRender(this.field)}
      ></affine-input>
    </div>`}};TextFieldElement.styles=i$c``;__decorateClass$C([e$8()],TextFieldElement.prototype,"field",2);TextFieldElement=__decorateClass$C([e$9("affine-text-field")],TextFieldElement);const TextFieldElement$1=TextFieldElement;var __defProp$B=Object.defineProperty,__getOwnPropDesc$B=Object.getOwnPropertyDescriptor,__decorateClass$B=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$B(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$B(j,X,ne),ne};let NumberFieldElement=class extends s$6{static valueToRender(q){return isNaN(q)?"":q+""}static valueToCompare(q){return q}render(){return y$1`<div
      class=${o$5({"affine-number-field":!0})}
      style=${i$5({})}
    >
      <affine-input
        value=${NumberFieldElement.valueToRender(this.field)}
        type="number"
      ></affine-input>
    </div>`}};NumberFieldElement.styles=i$c``;__decorateClass$B([e$8()],NumberFieldElement.prototype,"field",2);NumberFieldElement=__decorateClass$B([e$9("affine-number-field")],NumberFieldElement);const NumberFieldElement$1=NumberFieldElement;var __defProp$A=Object.defineProperty,__getOwnPropDesc$A=Object.getOwnPropertyDescriptor,__decorateClass$A=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$A(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$A(j,X,ne),ne};let CheckboxFieldElement=class extends s$6{static valueToRender(q){return""}static valueToCompare(q){return q}render(){return y$1`<div
      class=${o$5({"affine-checkbox-field":!0})}
      style=${i$5({})}
    >
      <input
        type="checkbox"
        ?checked=${this.field}
        @change=${this.handleChange}
      />
    </div>`}handleChange(q){this.dispatchEvent(new CustomEvent("change",{detail:{value:q.target.checked},bubbles:!0,composed:!0}))}};CheckboxFieldElement.styles=i$c`
    .affine-checkbox-field {
      padding: 0 8px;
    }
  `;__decorateClass$A([e$8()],CheckboxFieldElement.prototype,"field",2);CheckboxFieldElement=__decorateClass$A([e$9("affine-checkbox-field")],CheckboxFieldElement);const CheckboxFieldElement$1=CheckboxFieldElement;var __defProp$z=Object.defineProperty,__getOwnPropDesc$z=Object.getOwnPropertyDescriptor,__decorateClass$z=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$z(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$z(j,X,ne),ne};let SelectFieldElement=class extends s$6{getDefaultField(){return{multi:!1,options:["yes","no"],selected:[0]}}static valueToRender(q){return q&&q.options[q.selected[0]]||""}static valueToCompare(q){return q?q.selected[0]:""}render(){const q=this.field||this.getDefaultField();return y$1`<div
      class=${o$5({"affine-select-field":!0})}
      style=${i$5({})}
    >
      <select
        ?multiple=${q.multi}
        @change=${j=>this.handleChange(j)}
      >
        ${c$2(q.options,(j,X)=>y$1`
              <option
                ?selected=${q.selected.includes(X)}
                value=${j}
                data-index=${X}
              >
                ${j}
              </option>
            `)}
      </select>
    </div>`}handleChange(q){const j=this.field||this.getDefaultField(),X=[q.target.selectedIndex];this.dispatchEvent(new CustomEvent("change",{detail:{value:{...j,selected:X}},bubbles:!0,composed:!0}))}};SelectFieldElement.styles=i$c`
    .affine-select-field {
      padding: 0 8px;
    }
  `;__decorateClass$z([e$8()],SelectFieldElement.prototype,"field",2);SelectFieldElement=__decorateClass$z([e$9("affine-select-field")],SelectFieldElement);const SelectFieldElement$1=SelectFieldElement;var __defProp$y=Object.defineProperty,__getOwnPropDesc$y=Object.getOwnPropertyDescriptor,__decorateClass$y=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$y(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$y(j,X,ne),ne};let DateFieldElement=class extends s$6{static valueToRender(q){return q?new Date(q).toLocaleDateString():""}static valueToCompare(q){return q}render(){return y$1`<div
      class=${o$5({"affine-date-field":!0})}
      style=${i$5({})}
    >
      <affine-input
        value=${DateFieldElement.valueToRender(this.field)}
      ></affine-input>
    </div>`}};DateFieldElement.styles=i$c``;__decorateClass$y([e$8()],DateFieldElement.prototype,"field",2);DateFieldElement=__decorateClass$y([e$9("affine-date-field")],DateFieldElement);const DateFieldElement$1=DateFieldElement;var FieldType=(q=>(q[q.Text=0]="Text",q[q.Number=1]="Number",q[q.Checkbox=2]="Checkbox",q[q.Select=3]="Select",q[q.Date=4]="Date",q[q.Url=5]="Url",q[q.Image=6]="Image",q))(FieldType||{});class FieldFactory{static create(j){return{}}static getField(j){switch(j){case 0:return TextFieldElement$1;case 1:return NumberFieldElement$1;case 2:return CheckboxFieldElement$1;case 3:return SelectFieldElement$1;case 4:return DateFieldElement$1;default:return}}static renderField(j,X,te){switch(j){case 0:return y$1`<affine-text-field
          .field=${X}
          @change=${te}
        ></affine-text-field>`;case 1:return y$1`<affine-number-field
          .field=${X}
          @change=${te}
        ></affine-number-field>`;case 2:return y$1`<affine-checkbox-field
          .field=${X}
          @change=${te}
        ></affine-checkbox-field>`;case 3:return y$1`<affine-select-field
          .field=${X}
          @change=${te}
        ></affine-select-field>`;case 4:return y$1`<affine-date-field
          .field=${X}
          @change=${te}
        ></affine-date-field>`;default:return X+""}}static compareField(j,X,te){const ne=FieldFactory.getField(j);if(!ne)return 0;const re=ne==null?void 0:ne.valueToCompare(X),oe=ne==null?void 0:ne.valueToCompare(te);switch(typeof re){case"number":return re-oe;default:return(re+"").localeCompare(oe+"")}}}const style$e=`.affine-table{width:100%;overflow-x:scroll;overflow-y:auto}.affine-table-cell{border-right:1px solid #eee;border-bottom:1px solid #eee;display:inline-block;height:100%}.affine-table-row{display:flex;border-bottom:1px solid #eee}.affine-table-footer{display:flex;height:40px}.affine-table-row-group-header{height:36px;line-height:36px;padding:0 4px;border-bottom:1px solid #eee}.affine-table-row-group-footer{height:32px;line-height:32px;border-bottom:6px solid #eee}
`;class DatabaseItemBlockModel extends BaseBlockModel{constructor(j,X){super(j,X),this.flavour="affine:database-item",this.fields=X.fields||{}}syncFields(){this.propsUpdated.emit()}addField(j,X){this.fields[j]=X,this.syncFields()}updateField(j,X){this.fields[j]=X,this.syncFields()}deleteField(j){delete this.fields[j],this.syncFields()}}var __defProp$x=Object.defineProperty,__getOwnPropDesc$x=Object.getOwnPropertyDescriptor,__decorateClass$x=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$x(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$x(j,X,ne),ne};let Input=class extends s$6{willUpdate(q){}render(){return y$1`<input
      class="affine-input"
      value=${this.value}
      type=${this.type}
      placeholder=${this.placeholder}
      @change=${this.handleChange}
    />`}handleChange(q){q.target.value!=this.value&&this.dispatchEvent(new CustomEvent("change",{detail:{value:q.target.value},bubbles:!0,composed:!0}))}};Input.styles=i$c`
    .affine-input {
      display: inline-block;
      border-radius: 5px;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      font-family: inherit;
      font-size: inherit;
      padding: 0 5px;
      border: none;
    }
    .affine-input:focus {
      outline: none;
      border-color: #6af;
    }
    .affine-input::placeholder {
      color: #ccc;
    }
    .affine-input:disabled {
      background-color: #f5f5f5;
      border-color: #eee;
    }
  `;__decorateClass$x([e$8()],Input.prototype,"value",2);__decorateClass$x([e$8()],Input.prototype,"type",2);__decorateClass$x([e$8()],Input.prototype,"placeholder",2);Input=__decorateClass$x([e$9("affine-input")],Input);var __defProp$w=Object.defineProperty,__getOwnPropDesc$w=Object.getOwnPropertyDescriptor,__decorateClass$w=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$w(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$w(j,X,ne),ne};let Table=class extends s$6{connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","table"),super.connectedCallback()}render(){return y$1`<div class="affine-table">
      ${this.renderTableHead()}${this.renderTableBody()}${this.renderTableFooter()}
      <slot></slot>
    </div>`}willUpdate(q){console.log(this.model,q)}getRowHeight(q){var j,X;return((X=(j=this.currentView.row)==null?void 0:j[q])==null?void 0:X.height)||Table.defaultRowHeight}getColWidth(q){var j,X;return((X=(j=this.currentView.col)==null?void 0:j[q])==null?void 0:X.width)||Table.defaultColWidth}renderTableHead(){return y$1`<affine-table-row .height=${Table.defaultRowHeight}
      >${c$2(this.schemas,q=>y$1`<affine-table-cell .width=${this.getColWidth(q.id)}
            ><affine-input
              value=${q.name}
              @change=${j=>this.handleSchemaChange(j,q.id)}
            ></affine-input>
          </affine-table-cell>`)}
      <button @click=${()=>this.model.addSchema()}>+</button>
    </affine-table-row>`}renderTableBody(){return y$1`
      ${c$2(this.items,q=>q.id,q=>q instanceof DatabaseItemBlockModel?this.renderRow(q):this.renderRowGroup(q))}
    `}renderRow(q){return y$1`<affine-table-row
      .model=${q}
      .schemas=${this.schemas}
      .height=${this.getRowHeight(q.id)}
      >${c$2(this.schemas,j=>j.id,j=>y$1`<affine-table-cell .width=${this.getColWidth(j.id)}>
            ${FieldFactory.renderField(j.type,q.fields[j.id],X=>{this.handleFieldChange(X,q,j.id)})}
          </affine-table-cell>`)}</affine-table-row
    >`}renderRowGroup(q){return y$1`<affine-table-row-group
      .title=${q.id}
      .model=${this.model}
      .group=${q.group}
    >
      ${c$2(q.items,j=>j.id,j=>y$1`${this.renderRow(j)}`)}
    </affine-table-row-group> `}renderTableFooter(){if(!this.model.hasGroup())return y$1`<div class="affine-table-footer">
      <button @click=${()=>this.model.addItem()}>+</button>
    </div>`}handleSchemaChange(q,j){this.model.updateSchema(j,{name:q.detail.value})}handleFieldChange(q,j,X){j.updateField(X,q.detail.value)}};Table.styles=i$c`
    ${r$6(style$e)}
  `;Table.defaultRowHeight=36;Table.defaultColWidth=150;__decorateClass$w([e$8()],Table.prototype,"model",2);__decorateClass$w([e$8()],Table.prototype,"host",2);__decorateClass$w([e$8()],Table.prototype,"schemas",2);__decorateClass$w([e$8()],Table.prototype,"items",2);__decorateClass$w([e$8()],Table.prototype,"currentView",2);Table=__decorateClass$w([e$9("affine-table")],Table);var __defProp$v=Object.defineProperty,__getOwnPropDesc$v=Object.getOwnPropertyDescriptor,__decorateClass$v=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$v(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$v(j,X,ne),ne};let TableCell=class extends s$6{render(){return y$1`<div
      class=${o$5({"affine-table-cell":!0})}
      style=${i$5({width:this.width+"px"})}
    >
      <slot></slot>
    </div>`}};TableCell.styles=i$c`
    ${r$6(style$e)}
  `;__decorateClass$v([e$8()],TableCell.prototype,"width",2);TableCell=__decorateClass$v([e$9("affine-table-cell")],TableCell);var __defProp$u=Object.defineProperty,__getOwnPropDesc$u=Object.getOwnPropertyDescriptor,__decorateClass$u=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$u(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$u(j,X,ne),ne};let TableRow=class extends s$6{render(){return y$1`<div
      class=${o$5({"affine-table-row":!0})}
      style=${i$5({height:this.height+"px",lineHeight:this.height+"px"})}
    >
      <slot></slot>
    </div> `}};TableRow.styles=i$c`
    ${r$6(style$e)}
  `;__decorateClass$u([e$8()],TableRow.prototype,"model",2);__decorateClass$u([e$8()],TableRow.prototype,"schemas",2);__decorateClass$u([e$8()],TableRow.prototype,"height",2);__decorateClass$u([e$8()],TableRow.prototype,"selected",2);TableRow=__decorateClass$u([e$9("affine-table-row")],TableRow);var __defProp$t=Object.defineProperty,__getOwnPropDesc$t=Object.getOwnPropertyDescriptor,__decorateClass$t=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$t(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$t(j,X,ne),ne};let TableRowGroup=class extends s$6{render(){return y$1`<div
      class=${o$5({"affine-table-row-group":!0})}
      style=${i$5({})}
    >
      <div class="affine-table-row-group-header">${this.title||""}</div>
      <slot></slot>
      <div class="affine-table-row-group-footer">
        <button
          @click=${()=>{this.model.addItem({}).updateField(this.group.id,this.title)}}
        >
          +
        </button>
      </div>
    </div> `}};TableRowGroup.styles=i$c`
    ${r$6(style$e)}
  `;__decorateClass$t([e$8()],TableRowGroup.prototype,"model",2);__decorateClass$t([e$8()],TableRowGroup.prototype,"schemas",2);__decorateClass$t([e$8()],TableRowGroup.prototype,"selected",2);__decorateClass$t([e$8()],TableRowGroup.prototype,"hide",2);__decorateClass$t([e$8()],TableRowGroup.prototype,"title",2);__decorateClass$t([e$8()],TableRowGroup.prototype,"group",2);TableRowGroup=__decorateClass$t([e$9("affine-table-row-group")],TableRowGroup);var __defProp$s=Object.defineProperty,__getOwnPropDesc$s=Object.getOwnPropertyDescriptor,__decorateClass$s=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$s(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$s(j,X,ne),ne};let Card=class extends s$6{render(){return y$1`<div class="affine-card">
      <slot></slot>
    </div>`}willUpdate(q){console.log(this.model,q)}};Card.styles=i$c`
    .affine-card {
      box-shadow: rgb(15 15 15 / 10%) 0px 0px 0px 1px,
        rgb(15 15 15 / 10%) 0px 2px 4px;
      border-radius: 3px;
      padding: 8px 10px;
      margin-bottom: 16px;
      margin-right: 16px;
    }
  `;__decorateClass$s([e$8()],Card.prototype,"model",2);__decorateClass$s([e$8()],Card.prototype,"view",2);__decorateClass$s([e$8()],Card.prototype,"schema",2);__decorateClass$s([e$8()],Card.prototype,"item",2);Card=__decorateClass$s([e$9("affine-card")],Card);var __defProp$r=Object.defineProperty,__getOwnPropDesc$r=Object.getOwnPropertyDescriptor,__decorateClass$r=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$r(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$r(j,X,ne),ne};let Gallery=class extends s$6{render(){return y$1`<div class="affine-gallery">
      ${c$2(this.items,q=>q.id,q=>y$1`<affine-card .item=${q}>
          ${c$2(this.schemas,j=>j.id,j=>y$1` ${FieldFactory.renderField(j.type,q.fields[j.id],X=>{this.handleFieldChange(X,q,j.id)})}`)}
        </affine-card>`)}
      <slot></slot>
    </div>`}willUpdate(q){console.log(this.model,q)}handleSchemaChange(q,j){this.model.updateSchema(j,{name:q.detail.value})}handleFieldChange(q,j,X){j.updateField(X,q.detail.value)}};Gallery.styles=i$c`
    .affine-gallery {
      display: grid;
      position: relative;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      padding: 16px 2px;
    }
  `;Gallery.defaultHeight=36;Gallery.defaultWidth=150;__decorateClass$r([e$8()],Gallery.prototype,"model",2);__decorateClass$r([e$8()],Gallery.prototype,"host",2);__decorateClass$r([e$8()],Gallery.prototype,"schemas",2);__decorateClass$r([e$8()],Gallery.prototype,"items",2);__decorateClass$r([e$8()],Gallery.prototype,"currentView",2);Gallery=__decorateClass$r([e$9("affine-gallery")],Gallery);var __defProp$q=Object.defineProperty,__getOwnPropDesc$q=Object.getOwnPropertyDescriptor,__decorateClass$q=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$q(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$q(j,X,ne),ne};let Board=class extends s$6{render(){return y$1`<div class="affine-board">
      ${c$2(this.items,q=>q.id,q=>y$1`<div class="affine-board-group">
          <div>
            <span class="affine-board-title">${q.id||"No Type"}</span>
            <span class="affine-board-item-count"
              >${q.items.length}</span
            >
          </div>
          ${c$2(q.items,j=>j.id,j=>y$1`<affine-card .item=${j}>
              ${c$2(this.schemas,X=>X.id,X=>y$1` ${FieldFactory.renderField(X.type,j.fields[X.id],te=>{this.handleFieldChange(te,j,X.id)})}`)}
            </affine-card>`)}
          <button
            @click=${()=>{this.model.addItem({}).updateField(q.group.id,q.id)}}
          >
            +
          </button>
        </div>`)}
      <slot></slot>
    </div>`}willUpdate(q){console.log(this.model,q)}handleSchemaChange(q,j){this.model.updateSchema(j,{name:q.detail.value})}handleFieldChange(q,j,X){j.updateField(X,q.detail.value)}};Board.styles=i$c`
    .affine-board {
      display: flex;
      padding: 16px 2px;
    }
    .affine-board-group {
    }
    .affine-board-item-count {
      font-size: 14px;
      color: #ccc;
    }
  `;Board.defaultHeight=36;Board.defaultWidth=150;__decorateClass$q([e$8()],Board.prototype,"model",2);__decorateClass$q([e$8()],Board.prototype,"host",2);__decorateClass$q([e$8()],Board.prototype,"schemas",2);__decorateClass$q([e$8()],Board.prototype,"items",2);__decorateClass$q([e$8()],Board.prototype,"currentView",2);Board=__decorateClass$q([e$9("affine-board")],Board);var DataBaseViewType=(q=>(q[q.Table=0]="Table",q[q.Board=1]="Board",q[q.Timeline=2]="Timeline",q[q.Calender=3]="Calender",q[q.List=4]="List",q[q.Gallery=5]="Gallery",q))(DataBaseViewType||{}),FilterOperator=(q=>(q[q.IS_EQUAL=0]="IS_EQUAL",q[q.IS_NOT_EQUAL=1]="IS_NOT_EQUAL",q[q.IS_NULL=2]="IS_NULL",q[q.IS_NOT_NULL=3]="IS_NOT_NULL",q[q.GREATER_THAN=4]="GREATER_THAN",q[q.LESS_THAN=5]="LESS_THAN",q))(FilterOperator||{});function isFiltered(q,j,X){var oe;const te=(oe=FieldFactory.getField(j))==null?void 0:oe.valueToCompare(X),ne=te==null||te==null,re=FieldFactory.compareField(j,te,q.value);switch(q.operator){case 2:return ne;case 3:return!ne;case 0:return!ne&&re==0;case 1:return re!=0;case 4:return!ne&&re>0;case 5:return!ne&&re<0;default:return!1}}function filter(q,j,X=0,te){return!te||!te.length?[...q]:q.filter(ne=>X==1?te.some(re=>isFiltered(re,j[re.id].type,ne.fields[re.id])):te.every(re=>isFiltered(re,j[re.id].type,ne.fields[re.id])))}var SortDirection=(q=>(q[q.ASC=0]="ASC",q[q.DESC=1]="DESC",q[q.NONE=2]="NONE",q))(SortDirection||{});function sort(q,j,X){return!X||!X.length?q:[...q].sort((te,ne)=>{let re=0;return X.some(oe=>{var fe;if(oe.direction==2)return;const le=(fe=j[oe.id])==null?void 0:fe.type;if(le!=null&&(re=FieldFactory.compareField(le,te.fields[oe.id],ne.fields[oe.id]),re!=0))return re=oe.direction===0?re:-re,!0}),re})}function groupBy(q,j,X){const te=new Map;return q.forEach(ne=>{var le;const re=ne.fields[X.id],oe=re?((le=FieldFactory.getField(X.type))==null?void 0:le.valueToCompare(re))+"":"";te.get(oe)||te.set(oe,{id:oe,group:j,schema:X,items:[]}),te.get(oe).items.push(ne)}),[...te.values()].sort((ne,re)=>ne.id.length?j.sort==SortDirection.DESC?re.id.localeCompare(ne.id):ne.id.localeCompare(re.id):1)}function group(q,j,X=[]){const te=X[0];return groupBy(q,te,j[te.id])}class DatabaseBlockModel extends BaseBlockModel{constructor(j,X){var te;if(super(j,X),this.flavour="affine:database",this.name="",this.views=[],this.children=[],this.schemas=[],this.currentViewId="",!X.views)return DatabaseBlockModel.createDefaultDatabaseBlock(j,X);this.views=X.views||[],this.schemas=X.schemas||[],this.children=X.children||[],this.name=X.name||"",this.setActiveView(X.currentViewId||((te=this.views[0])==null?void 0:te.id))}static createDefaultDatabaseBlock(j,X){const te=new DatabaseBlockModel(j,{...X,name:"TEST_DATABASE",views:[],children:[],schemas:[{id:"0",name:"Text",type:FieldType.Text},{id:"1",name:"Number",type:FieldType.Number},{id:"2",name:"Checkbox",type:FieldType.Checkbox},{id:"3",name:"Select",type:FieldType.Select}],currentViewId:"0"});return te.addView({name:"Table"}),te.addView({type:DataBaseViewType.Gallery,name:"Gallery"}),te.addView({type:DataBaseViewType.Board,name:"Board"}),te}getItems(j){var re;const X=this.currentView,te=this.schemas.reduce((oe,le)=>(oe[le.id]=le,oe),{});let ne=filter(this.children,te,X.filterType,X.filters);if(ne=sort(ne,te,X.sorts),j){if((re=this.currentView.groups)!=null&&re.length)return group(ne,te,X.groups);if(this.currentView.type==DataBaseViewType.Board)return group(ne,te,[{id:this.schemas[0].id}])}return ne}getItemById(j){const X=this.childMap.get(j);if(!(X==null||X<0||X>this.children.length))return this.children[X]}addItem(j={},X=this.children.length){const te=this.page.addBlock({flavour:"affine:database-item",...j},this,X);return this.page.getBlockById(te)}updateItem(j,X){this.page.updateBlockById(j,X)}deleteItem(j){this.page.deleteBlockById(j)}syncViews(){this.propsUpdated.emit()}addView(j,X=this.views.length){const te={id:`${this.views.length}`,name:`View${this.views.length}`,type:DataBaseViewType.Table,...j};this.views.splice(X,0,te),this.views=[...this.views],this.syncViews(),this.setActiveView(te.id)}updateView(j,X){const te=this.views.findIndex(ne=>ne.id==j);this.views[te]={...this.views[te],...X},this.syncViews()}deleteView(j){this.views=this.views.filter(X=>X.id!==j),this.syncViews()}setActiveView(j){this.page.updateBlock(this,{currentViewId:j}),this.currentView=this.views.find(X=>X.id==this.currentViewId)||this.views[0]}syncSchemas(){this.propsUpdated.emit()}addSchema(j,X=this.schemas.length){const te={id:`${this.schemas.length}`,name:`Text${this.schemas.length}`,type:FieldType.Text,...j};this.schemas.splice(X,0,te),this.schemas=[...this.schemas],this.syncSchemas(),this.children.forEach(ne=>ne.addField(te.id))}updateSchema(j,X){const te=this.schemas.findIndex(ne=>ne.id==j);this.schemas[te]={...this.schemas[te],...X},this.syncSchemas(),this.children.forEach(ne=>ne.updateField(j))}deleteSchema(j){this.schemas=this.schemas.filter(X=>X.id!==j),this.syncSchemas(),this.children.forEach(X=>X.deleteField(j))}getSchemaById(j){return this.schemas.find(X=>X.id==j)}get currentSorts(){var j;return((j=this.currentView)==null?void 0:j.sorts)||[]}get currentFilters(){var j;return((j=this.currentView)==null?void 0:j.filters)||[]}get currentGroups(){var j;return((j=this.currentView)==null?void 0:j.groups)||[]}addSort(j={},X=this.currentSorts.length){const te={id:this.schemas[0].id,direction:SortDirection.ASC,...j},ne=this.currentSorts;ne.splice(X,0,te),this.currentView.sorts=[...ne],this.syncViews()}updateSort(j,X){const te=this.currentSorts.findIndex(ne=>ne.id==j);this.currentSorts[te]={...this.currentSorts[te],...X},this.syncViews()}deleteSort(j){this.currentView.sorts=this.currentSorts.filter(X=>X.id!==j),this.syncViews()}addFilter(j={},X=this.currentFilters.length){const te={id:this.schemas[0].id,value:"",operator:FilterOperator.IS_NOT_NULL,...j},ne=this.currentFilters;ne.splice(X,0,te),this.currentView.filters=[...ne],this.syncViews()}updateFilter(j,X){const te=this.currentFilters.findIndex(ne=>ne.id==j);this.currentFilters[te]={...this.currentFilters[te],...X},this.syncViews()}deleteFilter(j){this.currentView.filters=this.currentFilters.filter(X=>X.id!==j),this.syncViews()}hasGroup(){var j;return(j=this.currentView.groups)==null?void 0:j.length}addGroup(j={},X=this.currentGroups.length){const te={id:this.schemas[0].id,...j},ne=this.currentGroups;ne.splice(X,0,te),this.currentView.groups=[...ne],this.syncViews()}updateGroup(j,X){const te=this.currentGroups.findIndex(ne=>ne.id==j);this.currentGroups[te]={...this.currentGroups[te],...X},this.syncViews()}deleteGroup(j){this.currentView.groups=this.currentGroups.filter(X=>X.id!==j),this.syncViews()}}const style$d="",style$c=`.affine-database-toolbar{height:40px;line-height:40px;border-bottom:1px solid #eee;display:flex}.view-list{flex:1}.view-name{padding:0 8px;color:#aaa;cursor:pointer;border-radius:4px}.view-name:hover{background:var(--affine-hover-background)}.view-name.active{padding:0 8px;color:inherit}
`;var __defProp$p=Object.defineProperty,__getOwnPropDesc$p=Object.getOwnPropertyDescriptor,__decorateClass$p=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$p(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$p(j,X,ne),ne};let ToolBar=class extends s$6{render(){return y$1`<div class="affine-database-toolbar">
      <div class="view-list">
        ${c$2(this.views,q=>y$1`<span
              class=${o$5({"view-name":!0,active:this.currentView.id==q.id})}
              @click=${()=>{this.model.setActiveView(q.id)}}
              >${q.name}</span
            >`)}
        <button
          @click=${()=>{this.model.addView()}}
        >
          +
        </button>
      </div>
      <div>
        <button
          @click=${()=>{const q=this.model.currentSorts[0];q?this.model.updateSort(q.id,{direction:q.direction==SortDirection.ASC?SortDirection.DESC:SortDirection.ASC}):this.model.addSort()}}
        >
          排序
        </button>
        <button
          @click=${()=>{const q=this.model.schemas[0].id;this.model.currentFilters.find(X=>X.id==q)?this.model.deleteFilter(q):this.model.addFilter()}}
        >
          筛选第一列不为空
        </button>
        <button
          @click=${()=>{const q=this.model.schemas[1].id;this.model.currentFilters.find(X=>X.id==q)?this.model.deleteFilter(q):this.model.addFilter({id:q,value:5,operator:FilterOperator.GREATER_THAN})}}
        >
          筛选第二列大于5
        </button>
        <button
          @click=${()=>{var q;(q=this.currentView.groups)!=null&&q.length?this.currentView.groups.forEach(j=>{this.model.deleteGroup(j.id)}):this.model.addGroup()}}
        >
          分组
        </button>
      </div>

      <slot></slot>
    </div>`}};ToolBar.styles=i$c`
    ${r$6(style$c)}
  `;__decorateClass$p([e$8()],ToolBar.prototype,"model",2);__decorateClass$p([e$8()],ToolBar.prototype,"views",2);__decorateClass$p([e$8()],ToolBar.prototype,"currentView",2);ToolBar=__decorateClass$p([e$9("affine-database-toolbar")],ToolBar);var __defProp$o=Object.defineProperty,__getOwnPropDesc$o=Object.getOwnPropertyDescriptor,__decorateClass$o=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$o(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$o(j,X,ne),ne};let DatabaseBlockComponent=class extends s$6{createRenderRoot(){return this}firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}render(){this.setAttribute(BLOCK_ID_ATTR,this.model.id);const q=BlockChildrenContainer(this.model,this.host,()=>this.requestUpdate());return y$1`
      <div
        class="affine-database-block-container"
        @mousedown=${j=>j.stopPropagation()}
        @mouseup=${j=>j.stopPropagation()}
      >
        <affine-database-toolbar
          .model=${this.model}
          .views=${this.model.views}
          .currentView=${this.model.currentView}
        ></affine-database-toolbar>
        ${this.renderView()}${q}
      </div>
    `}renderView(){var q;switch((q=this.model.currentView)==null?void 0:q.type){case DataBaseViewType.Table:return y$1`<affine-table
          .model=${this.model}
          .host=${this.host}
          .items=${this.model.getItems(!0)}
          .currentView=${this.model.currentView}
          .schemas=${this.model.schemas}
        ></affine-table>`;case DataBaseViewType.Gallery:return y$1`<affine-gallery
          .model=${this.model}
          .host=${this.host}
          .items=${this.model.getItems()}
          .currentView=${this.model.currentView}
          .schemas=${this.model.schemas}
        ></affine-gallery>`;case DataBaseViewType.Board:return y$1`<affine-board
          .model=${this.model}
          .host=${this.host}
          .items=${this.model.getItems(!0)}
          .currentView=${this.model.currentView}
          .schemas=${this.model.schemas}
        ></affine-board>`;default:return null}}};DatabaseBlockComponent.styles=i$c`
    ${r$6(style$d)}
  `;__decorateClass$o([e$8({hasChanged(){return!0}})],DatabaseBlockComponent.prototype,"model",2);__decorateClass$o([e$8()],DatabaseBlockComponent.prototype,"host",2);DatabaseBlockComponent=__decorateClass$o([e$9("database-block")],DatabaseBlockComponent);const BlockSchema={"affine:paragraph":ParagraphBlockModel,"affine:page":PageBlockModel,"affine:list":ListBlockModel,"affine:group":GroupBlockModel,"affine:code":CodeBlockModel,"affine:divider":DividerBlockModel,"affine:embed":EmbedBlockModel,"affine:shape":ShapeBlockModel,"affine:database":DatabaseBlockModel,"affine:database-item":DatabaseItemBlockModel},blockService={"affine:code":async()=>__vitePreload(()=>import("./code-service-0b17b394.js"),[]),"affine:paragraph":ParagraphBlockService};var __defProp$n=Object.defineProperty,__getOwnPropDesc$n=Object.getOwnPropertyDescriptor,__decorateClass$n=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$n(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$n(j,X,ne),ne};let Loader=class extends s$6{constructor(){super(),this.radius="8px"}connectedCallback(){super.connectedCallback()}render(){return y$1`
      <div class="load-container">
        <div class="load load1"></div>
        <div class="load load2"></div>
        <div class="load"></div>
      </div>
    `}};Loader.styles=i$c`
    .load-container {
      margin: 10px auto;
      width: 150px;
      text-align: center;
    }

    .load-container .load {
      width: 8px;
      height: 8px;
      background-color: var(--affine-code-color);

      border-radius: 100%;
      display: inline-block;
      -webkit-animation: bouncedelay 1.4s infinite ease-in-out;
      animation: bouncedelay 1.4s infinite ease-in-out;
      /* Prevent first frame from flickering when animation starts */
      -webkit-animation-fill-mode: both;
      animation-fill-mode: both;
    }
    .load-container .load1 {
      -webkit-animation-delay: -0.32s;
      animation-delay: -0.32s;
    }
    .load-container .load2 {
      -webkit-animation-delay: -0.16s;
      animation-delay: -0.16s;
    }

    @-webkit-keyframes bouncedelay {
      0%,
      80%,
      100% {
        -webkit-transform: scale(0.625);
      }
      40% {
        -webkit-transform: scale(1);
      }
    }

    @keyframes bouncedelay {
      0%,
      80%,
      100% {
        transform: scale(0);
        -webkit-transform: scale(0.625);
      }
      40% {
        transform: scale(1);
        -webkit-transform: scale(1);
      }
    }
  `;__decorateClass$n([e$8()],Loader.prototype,"radius",2);Loader=__decorateClass$n([e$9("loader-element")],Loader);const services=new Map;function hasService(q){return services.has(q)}function registerService(q,j){if(services.has(q)){console.error(`'${q}' already be registered!`);return}if(j.constructor.name==="AsyncFunction"){const X=j;return new Promise(te=>{X().then(async ne=>{const re=new ne.default;"load"in re&&typeof re.load=="function"?re.load().then(()=>{re.isLoaded=!0,services.set(q,re),te()}):(re.isLoaded=!0,services.set(q,re),te())})})}else{const X=j,te=new X;if("load"in te&&typeof te.load=="function")return new Promise(ne=>{te.load().then(()=>{te.isLoaded=!0,services.set(q,te),ne()})});te.isLoaded=!0,services.set(q,te);return}}function getService(q,j=!0){const X=services.get(q);if(j&&!X)throw new Error(`cannot find service '${q}'`);return X}function BlockElement(q,j,X=!1){switch(q.flavour){case"affine:paragraph":case"affine:list":case"affine:group":case"affine:divider":case"affine:code":return n$5`
        <${q.tag}
          .model=${q}
          .host=${j}
        ></${q.tag}>
      `;case"affine:database":return n$5`
        <database-block
          .model=${q}
          .host=${j}
        ></database-block>
      `;case"affine:database-item":return"";case"affine:shape":return X?n$5`
          <${q.tag}
            .model=${q}
            .host=${j}
          ></${q.tag}>
        `:null;case"affine:embed":return EmbedBlock(q,j)}return n$5`<div>Unknown block flavour: "${q.flavour}"</div>`}function EmbedBlock(q,j){switch(q.type){case"image":return n$5`
        <affine-image
          .model=${q}
          .host=${j}
        ></affine-image>
      `;default:return n$5`<div>Unknown embed type: "${q.type}"</div>`}}function BlockElementWithService(q,j,X){if(hasService(q.flavour))return BlockElement(q,j);{const te=blockService[q.flavour];if(te){const ne=registerService(q.flavour,te);if(ne instanceof Promise)return ne.then(()=>{X()}),n$5`<loader-element />`}return BlockElement(q,j)}}function BlockChildrenContainer(q,j,X){return n$5`
    <style>
      .affine-block-children-container {
        padding-left: 26px;
      }
    </style>
    <div class="affine-block-children-container">
      ${c$2(q.children,te=>te.id,te=>BlockElementWithService(te,j,X))}
    </div>
  `}function isFarEnough(q,j,X=2){return Math.pow(q.x-j.x,2)+Math.pow(q.y-j.y,2)>X*X}function toSelectionEvent(q,j,X,te,ne=null){const re=j(),oe={x:0,y:0},le={x:X,y:te},fe=q.clientX-re.left,we=q.clientY-re.top,ke={x:fe,y:we,raw:q,containerOffset:{x:re.left,y:re.top},delta:oe,start:le,keys:{shift:q.shiftKey,cmd:q.metaKey||q.ctrlKey,alt:q.altKey},button:q.button};return ne&&(oe.x=fe-ne.x,oe.y=we-ne.y),ke}function isPageTitle(q){return q.target instanceof HTMLTextAreaElement&&q.target.classList.contains("affine-default-page-block-title")}function isInput(q){return q.target instanceof HTMLTextAreaElement}function isTable(q){var X;const j=(X=q.target)==null?void 0:X.tagName;return j=="AFFINE-TABLE"||j=="AFFINE-GALLERY"||j=="AFFINE-BOARD"}function tryPreventDefault(q){!isInput(q)&&!isTable(q)&&q.preventDefault()}function initMouseEventHandlers(q,j,X,te,ne,re,oe,le,fe){let we=-1/0,ke=-1/0,ye=!1,ve=null;const be=()=>q.getBoundingClientRect(),Ce=Le=>le(toSelectionEvent(Le,be,we,ke)),Ee=Le=>{tryPreventDefault(Le);const Pe=be();we=Le.clientX-Pe.left,ke=Le.clientY-Pe.top,ye=!1,Le.button||(ve=toSelectionEvent(Le,be,we,ke)),document.addEventListener("mouseup",Ae),document.addEventListener("mouseout",Ce)},Oe=Le=>{tryPreventDefault(Le);const Pe=be(),Re={x:we,y:ke},Ne=Le.clientX-Pe.left,je=Le.clientY-Pe.top,Ie={x:Ne,y:je};if(!ve){oe(toSelectionEvent(Le,be,we,ke,ve));return}isFarEnough(Re,Ie)&&!ye&&(ye=!0,j(ve)),ye&&(X(toSelectionEvent(Le,be,we,ke,ve)),oe(toSelectionEvent(Le,be,we,ke,ve)),ve=toSelectionEvent(Le,be,we,ke))},Ae=Le=>{tryPreventDefault(Le),ye?te(toSelectionEvent(Le,be,we,ke,ve)):ne(toSelectionEvent(Le,be,we,ke)),we=ke=-1/0,ye=!1,ve=null,document.removeEventListener("mouseup",Ae),document.removeEventListener("mouseout",Ce)},Te=Le=>{fe(toSelectionEvent(Le,be,we,ke))},Se=Le=>{re(toSelectionEvent(Le,be,we,ke))};return q.addEventListener("mousedown",Ee),q.addEventListener("mousemove",Oe),q.addEventListener("contextmenu",Te),q.addEventListener("dblclick",Se),()=>{q.removeEventListener("mousedown",Ee),q.removeEventListener("mousemove",Oe),q.removeEventListener("contextmenu",Te),q.removeEventListener("dblclick",Se)}}const SCROLL_THRESHOLD=100,notStrictCharacterReg=/[^\p{Alpha}\p{M}\p{Nd}\p{Pc}\p{Join_C}]/u,notStrictCharacterAndSpaceReg=/[^\p{Alpha}\p{M}\p{Nd}\p{Pc}\p{Join_C}\s]/u;function forwardSelect(q,j){var X,te;if(q.endContainer.nodeType!==Node.TEXT_NODE){const ne=getLastTextNode(q.endContainer);ne&&(q=document.createRange(),q.setStart(ne,((X=ne.textContent)==null?void 0:X.length)||0),q.setEnd(ne,((te=ne.textContent)==null?void 0:te.length)||0))}j.setEnd(q.endContainer,q.endOffset)}function backwardSelect(q,j){if(q.startContainer.nodeType!==Node.TEXT_NODE){const X=getFirstTextNode(q.startContainer);X&&(q=document.createRange(),q.setStart(X,0),q.setEnd(X,0))}j.setStart(q.endContainer,q.endOffset)}function fixCurrentRangeToText(q,j,X,te,ne){const re=ne?te.endContainer:te.startContainer;let oe=te;if(re.nodeType!==Node.TEXT_NODE){const le=Array.from(te.commonAncestorContainer.querySelectorAll(".ql-editor"));if(le.length){const fe=ne?le.reverse().find(ye=>{const ve=ye.getBoundingClientRect();return j>=ve.top}):le.find(ye=>{const ve=ye.getBoundingClientRect();return j<=ve.bottom});if(!fe)throw new Error("Failed to focus text node!");const we=fe.getBoundingClientRect(),ke=ne?we.bottom-X.y-6:we.top-X.y+6;oe=caretRangeFromPoint(q,ke),ne&&oe?forwardSelect(oe,te):!ne&&oe&&backwardSelect(oe,te)}}return te}function setStartRange(q){const j=document.createRange();let X=q.firstChild;for(;X!=null&&X.firstChild;)X=X.firstChild;return X&&(j.setStart(X,0),j.setEnd(X,0)),j}function setEndRange(q){var te,ne;const j=document.createRange();let X=q.lastChild;for(;X!=null&&X.lastChild;)X=X.lastChild;return X&&(j.setStart(X,((te=X.textContent)==null?void 0:te.length)||0),j.setEnd(X,((ne=X.textContent)==null?void 0:ne.length)||0)),j}async function setNewTop(q,j){const X=j.closest(".affine-default-viewport"),{top:te,bottom:ne}=Rect.fromDom(j),{clientHeight:re}=document.documentElement,oe=Number(window.getComputedStyle(j).lineHeight.replace(/\D+$/,""))||16;switch(ne<q){case!0:{let fe=ne;return ne<SCROLL_THRESHOLD&&X&&(X.scrollTop=X.scrollTop-SCROLL_THRESHOLD+ne,await sleep(),fe=j.getBoundingClientRect().bottom),fe-oe/2}case!1:{let fe=te;return X&&te>re-SCROLL_THRESHOLD&&(X.scrollTop=X.scrollTop+(te+SCROLL_THRESHOLD-re),await sleep(),fe=j.getBoundingClientRect().top),fe+oe/2}}}async function focusRichText(q,j="end"){const{left:X,right:te}=Rect.fromDom(q);let ne=null;switch(j){case"start":ne=setStartRange(q);break;case"end":ne=setEndRange(q);break;default:{const{x:re,y:oe}=j;let le=re;const fe=await setNewTop(oe,q);re<=X&&(le=X+1),re>=te&&(le=te-1),ne=caretRangeFromPoint(le,fe),resetNativeSelection(ne);break}}resetNativeSelection(ne)}function focusBlockByModel(q,j="end"){var re;const X=getDefaultPageBlock(q);if(matchFlavours(q,["affine:embed","affine:divider"])){X.selection.state.clear();const oe=(re=getBlockElementByModel(q))==null?void 0:re.getBoundingClientRect();oe&&X.signals.updateSelectedRects.emit([oe]);const le=getBlockElementByModel(q);assertExists(le),X.selection.state.selectedBlocks.push(le),X.selection.state.type="block",resetNativeSelection(null),document.activeElement.blur();return}if(matchFlavours(q,["affine:code"])){const oe=X.selection,fe=getBlockElementByModel(q).getBoundingClientRect();oe.resetSelectedBlockByRect(fe,"focus"),resetNativeSelection(null);return}const te=getBlockElementByModel(q),ne=te==null?void 0:te.querySelector("[contenteditable]");X.selection.state.clear(),ne&&focusRichText(ne,j)}function focusPreviousBlock(q,j){const X=getDefaultPageBlock(q),te=getContainerByModel(q);let ne=j;ne?X.lastSelectionPosition=ne:X.lastSelectionPosition&&(ne=X.lastSelectionPosition);const re=getPreviousBlock(te,q.id);re&&ne&&focusBlockByModel(re,ne)}function focusNextBlock(q,j="start"){const X=getDefaultPageBlock(q);let te=j;te?X.lastSelectionPosition=te:X.lastSelectionPosition&&(te=X.lastSelectionPosition);const ne=getNextBlock(q.id);ne&&focusBlockByModel(ne,te)}function resetNativeSelection(q){const j=window.getSelection();assertExists(j),j.removeAllRanges(),q&&j.addRange(q)}function focusRichTextByOffset(q,j){const X=q.querySelector("rich-text");assertExists(X);const te=X.getBoundingClientRect(),ne=te.y+te.height/2,re=caretRangeFromPoint(j,ne);(re==null?void 0:re.startContainer)instanceof Node&&resetNativeSelection(re)}function focusRichTextStart(q){var te;const j=(te=q.querySelector("p"))==null?void 0:te.childNodes[0],X=document.createRange();X.setStart(j,0),resetNativeSelection(X)}function isNoneSelection(){const q=window.getSelection();return q?q.type==="None":!0}function isCollapsedSelection(){const q=window.getSelection();return q?q.isCollapsed:!1}function isRangeSelection(){const q=window.getSelection();return q?!q.isCollapsed:!1}function isMultiBlockRange(q){return getModelsByRange(q).length>1}function isMultiLineRange(q){const{height:j}=q.getBoundingClientRect(),X=document.createRange();X.setStart(q.startContainer,q.startOffset);const{height:te}=X.getBoundingClientRect();return j>te}function getSelectedBlock(q){var te;const j=[],X=new Map;for(let ne=0;ne<q.length;ne++){const re=q[ne],oe=re.page.getParent(re),le={id:re.id,children:[]};!oe||!X.has(oe.id)?j.push(le):(te=X.get(oe.id))==null||te.children.push(le),X.set(re.id,le)}return j}function getLastSelectBlock(q){if(q.length===0)return null;const j=q[q.length-1];return j.children.length===0?j:getLastSelectBlock(j.children)}function getSelectInfo(q){if(!q.root)return{type:"None",selectedBlocks:[]};let j="None",X=[],te=[];const ne=getDefaultPageBlock(q.root),{state:re}=ne.selection,oe=window.getSelection();if(re.type==="block"){j="Block";const{selectedBlocks:le}=re;te=le.map(fe=>getModelByElement(fe))}else oe&&oe.type!=="None"&&(j=oe.type,te=getModelsByRange(getCurrentRange()));if(j!=="None"&&(X=getSelectedBlock(te),j!=="Block"&&oe&&X.length>0)){const le=oe.getRangeAt(0),fe=getQuillIndexByNativeSelection(le.startContainer,le.startOffset,!0),we=getQuillIndexByNativeSelection(le.endContainer,le.endOffset,!1);X[0].startPos=fe;const ke=getLastSelectBlock(X);ke&&(ke.endPos=we)}return{type:j,selectedBlocks:X}}function handleNativeRangeDragMove(q,j){const X=j.x>j.start.x||j.y>j.start.y;assertExists(q);const{startContainer:te,startOffset:ne,endContainer:re,endOffset:oe}=q;let le=caretRangeFromPoint(j.raw.clientX,j.raw.clientY);X?le==null||le.setStart(te,ne):le==null||le.setEnd(re,oe),le&&(le=fixCurrentRangeToText(j.raw.clientX,j.raw.clientY,j.containerOffset,le,X)),resetNativeSelection(le)}function isBlankAreaBetweenBlocks(q){return q instanceof HTMLElement?q.className.includes("affine-paragraph-block-container"):!1}function isBlankAreaAfterLastBlock(q){return q.tagName==="AFFINE-GROUP"}function isBlankAreaBeforeFirstBlock(q){return q instanceof HTMLElement?q.className.includes("affine-group-block-container"):!1}function isBlankArea(q){const{cursor:j}=window.getComputedStyle(q.raw.target);return j!=="text"}function handleNativeRangeClick(q,j){const X=caretRangeFromPoint(j.raw.clientX,j.raw.clientY),te=X==null?void 0:X.startContainer;if(!j.button&&(te instanceof Node&&resetNativeSelection(X),te instanceof HTMLElement)){if(isBlankAreaBetweenBlocks(te)||isBlankAreaBeforeFirstBlock(te))focusRichTextByOffset(te,j.raw.clientX);else if(isBlankAreaAfterLastBlock(te)){const{root:ne}=q,re=ne==null?void 0:ne.lastChild();if(assertExists(re),matchFlavours(re,["affine:paragraph","affine:list"])){const oe=getBlockElementByModel(re);if(!oe)return;focusRichTextByOffset(oe,j.raw.clientX)}}}}function handleNativeRangeDblClick(q,j){var te;const X=window.getSelection();if(X&&X.isCollapsed&&X.anchorNode){const ne=(te=X.anchorNode.parentElement)==null?void 0:te.closest("[contenteditable]");return ne?expandRangeByCharacter(X,ne):null}return null}function expandRangeByCharacter(q,j){const X=leftFirstSearchLeafNodes(j);if(!X.length)return null;const[te,ne,re]=getNewRangeForDblClick(X,q),oe=trySelectBySegmenter(q,te,ne,X,re);return oe&&resetNativeSelection(oe),oe}function getNewStartAndEndForDblClick(q,j,X,te){var fe,we,ke;let ne=j[0],re=0,oe=j[j.length-1],le=((fe=oe.textContent)==null?void 0:fe.length)||0;for(let ye=q;ye>=0;ye--){const ve=j[ye];if(ve instanceof Text){const be=(we=ve.textContent)==null?void 0:we.slice(0,ye===q?X.anchorOffset:void 0);if(be){const Ce=Array.from(be).reverse().join(""),Ee=Ce.search(te);if(Ee!==-1){ne=ve,re=Ce.length-Ee;break}}}}for(let ye=q;ye<j.length;ye++){const ve=j[ye];if(ve instanceof Text){const be=(ke=ve.textContent)==null?void 0:ke.slice(ye===q?X.anchorOffset:void 0);if(be){const Ce=be.search(te);if(Ce!==-1){oe=ve,le=ye===q?X.anchorOffset+Ce:Ce;break}}}}return[ne,re,oe,le]}function getNewRangeForDblClick(q,j){var ke,ye;let X=q[0],te=0,ne=q[q.length-1],re=((ke=ne.textContent)==null?void 0:ke.length)||0;const oe=j.anchorNode instanceof Element?j.anchorNode.firstChild:j.anchorNode,le=((ye=oe==null?void 0:oe.textContent)==null?void 0:ye[j.anchorOffset])||"",fe=q.findIndex(ve=>ve===oe);if(le&&notStrictCharacterAndSpaceReg.test(le)&&oe)X=oe,ne=oe,te=j.anchorOffset,re=j.anchorOffset+1;else{let ve=notStrictCharacterReg;/\s/.test(le)&&(ve=/\S/),/\w/.test(le)&&(ve=/\W/);const[be,Ce,Ee,Oe]=getNewStartAndEndForDblClick(fe,q,j,ve);X=be,te=Ce,ne=Ee,re=Oe}const we=document.createRange();return we.setStart(X,te),we.setEnd(ne,re),[we,le,fe]}function trySelectBySegmenter(q,j,X,te,ne){var re,oe;if(Intl.Segmenter&&!notStrictCharacterAndSpaceReg.test(X)&&!/\w/.test(X)){const[le,fe]=getCurrentCharIndex(j,te,q,X);if(le===-1)return null;let we=le,ke=fe.length-le;for(let ye=ne;ye>=0;ye--){const ve=te[ye],be=ye===ne?q.anchorOffset:((re=ve.textContent)==null?void 0:re.length)||0;if(we<=be){j.setStart(ve,be-we);break}else we=we-be}for(let ye=ne;ye<te.length;ye++){const ve=te[ye],be=((oe=ve.textContent)==null?void 0:oe.length)||0,Ce=ye===ne?be-q.anchorOffset:be;if(ke<=Ce){j.setEnd(ve,be-Ce+ke);break}else ke=ke-Ce}}return j}function getCurrentCharIndex(q,j,X,te){var ve;const ne=q.toString(),oe=new Intl.Segmenter([],{granularity:"word"}).segment(ne)[Symbol.iterator](),le=Array.from(oe);if(le.length===0)return[-1,""];let fe=0,we=!1;for(let be=0;be<j.length;be++){const Ce=j[be];if(we||Ce===q.startContainer)if(we=!0,Ce!==X.anchorNode)fe=fe+(((ve=Ce.textContent)==null?void 0:ve.length)||0);else{fe=fe+X.anchorOffset-q.startOffset;break}}let ke=le[le.length-1].segment;for(let be=0;be<le.length;be++){const Ce=le[be];if(fe===Ce.index){ke=Ce.segment;break}if(fe<Ce.index){ke=le[be-1].segment;break}}return[ke.indexOf(te),ke]}function leftFirstSearchLeafNodes(q,j=[]){if(q.nodeType===Node.TEXT_NODE)j.push(q);else{const X=q.childNodes;for(let te=0;te<X.length;te++)leftFirstSearchLeafNodes(X[te],j)}return j}function getLastTextNode(q){return leftFirstSearchLeafNodes(q).pop()}function getFirstTextNode(q){return leftFirstSearchLeafNodes(q)[0]}function getSplicedTitle(q){const j=[...q.value];return assertExists(q.selectionStart),assertExists(q.selectionEnd),j.splice(q.selectionStart,q.selectionEnd-q.selectionStart),j.join("")}function isEmbed(q){return!!q.raw.target.classList.contains("resize")}const saveBlockSelection=(q=window.getSelection())=>{assertExists(q);const j=getModelsByRange(getCurrentRange(q)),X=getQuillIndexByNativeSelection(q.anchorNode,q.anchorOffset,!0),te=getQuillIndexByNativeSelection(q.focusNode,q.focusOffset,!1);return[{id:j[0].id,startPos:X,children:[]},{id:j[j.length-1].id,endPos:te,children:[]}]};function restoreSelection(q){const j=q[0],[X,te]=getTextNodeBySelectedBlock(j),ne=q[q.length-1],[re,oe]=getTextNodeBySelectedBlock(ne);if(!X||!re){console.warn("restoreSelection: startNode or endNode is null",X,re);return}const le=getCurrentRange();return le.setStart(X,te),le.setEnd(re,oe),resetNativeSelection(le),le}class NonShadowLitElement extends s$6{static finalizeStyles(j){let X=super.finalizeStyles(j);const te=document.head;return this.disableShadowRoot&&(X.forEach(ne=>{if(ne instanceof o$a){const re=document.createElement("style");re.textContent=ne.cssText,te.appendChild(re)}else console.error("unreachable")}),X=[]),X}createRenderRoot(){return this.constructor.disableShadowRoot?this:super.createRenderRoot()}}NonShadowLitElement.disableShadowRoot=!0;const std=Object.freeze(Object.defineProperty({__proto__:null,BLOCK_ID_ATTR,PREVENT_DEFAULT,ALLOW_DEFAULT,HOTKEYS,asyncFocusRichText,isCollapsedAtBlockStart,convertToList,convertToParagraph,convertToDivider,Point,Rect,hotkey,getShapeBlockHitBox,getBlockById,getParentBlockById,getPreviousSiblingById,getNextSiblingById,getNextBlock,getPreviousBlock,getDefaultPageBlock,getContainerByModel,getBlockElementByModel,getStartModelBySelection,getRichTextByModel,getModelsByRange,getModelByElement,getDOMRectByLine,getCurrentRange,getQuillIndexByNativeSelection,getTextNodeBySelectedBlock,getAllBlocks,BlockElement,BlockChildrenContainer,isPageTitle,isInput,isTable,initMouseEventHandlers,focusRichText,focusBlockByModel,focusPreviousBlock,focusNextBlock,resetNativeSelection,focusRichTextByOffset,focusRichTextStart,isNoneSelection,isCollapsedSelection,isRangeSelection,isMultiBlockRange,isMultiLineRange,getSelectInfo,handleNativeRangeDragMove,isBlankArea,handleNativeRangeClick,handleNativeRangeDblClick,leftFirstSearchLeafNodes,getLastTextNode,getFirstTextNode,getSplicedTitle,isEmbed,saveBlockSelection,restoreSelection,assertExists,assertFlavours,matchFlavours,caretRangeFromPoint,almostEqual,createEvent,noop,sleep,throttle,clamp:clamp$1,TDShapeType,ColorStyle,SizeStyle,DashStyle,FontSize,AlignStyle,FontStyle,TLBoundsEdge,TLBoundsCorner,SnapPoints,NonShadowLitElement},Symbol.toStringTag,{value:"Module"}));function repairContextMenuRange(q){var te;const j=(te=window.getSelection())==null?void 0:te.getRangeAt(0),X=caretRangeFromPoint(q.raw.x,q.raw.y);j&&X&&j.isPointInRange(X.startContainer,X.startOffset)&&j.isPointInRange(X.endContainer,X.endOffset)&&requestAnimationFrame(()=>{resetNativeSelection(j)})}function getDragDirection(q){const j=q.start.x,X=q.start.y,te=q.x,ne=q.y,re=te>j,oe=getCurrentRange(),le=!isMultiLineRange(oe);return re?le||ne>=X?"right-bottom":"right-top":le||ne<=X?"left-top":"left-bottom"}function getNativeSelectionMouseDragInfo(q){const j=getCurrentRange(),X=getDragDirection(q);return{selectedType:j.collapsed||j.toString().length===0?"Caret":"Text",direction:X}}function calcPositionPointByRange(q,j){const{startContainer:X,startOffset:te,endContainer:ne,endOffset:re}=q,oe=j.includes("top"),[le,fe]=oe?[X,te]:[ne,re],we=new Range;j.includes("center")?(we.setStart(X,te),we.setEnd(ne,re)):we.setStart(le,fe);const ke=we.getBoundingClientRect();ke.x===0&&ke.y===0&&ke.width===0&&ke.height===0&&(we.setStart(X,te),we.setEnd(ne,re));const ve=we.getBoundingClientRect(),be=j.includes("bottom");return{x:ve.x+ve.width/2,y:ve.y+(be?ve.height:0)}}function calcSafeCoordinate({positioningPoint:q,objRect:j={width:0,height:0},boundaryRect:X=document.body.getBoundingClientRect(),offsetX:te=0,offsetY:ne=0,edgeGap:re=20}){const oe=clamp$1(q.x+te,re,X.width-j.width-re),le=q.y+ne;return{x:oe,y:le}}var __defProp$m=Object.defineProperty,__getOwnPropDesc$m=Object.getOwnPropertyDescriptor,__decorateClass$m=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$m(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$m(j,X,ne),ne};let IconButton=class extends s$6{constructor(){super(),this.size="28px",this.text=null,this.disabled=!1,this.addEventListener("keypress",q=>{this.disabled||q.key==="Enter"&&this.click()})}connectedCallback(){super.connectedCallback(),this.tabIndex=0,this.style.setProperty("--button-size",typeof this.size=="string"?this.size:`${this.size}px`),this.style.setProperty("--button-width",typeof this.size=="string"?this.size:`${this.size}px`),this.style.setProperty("--button-height",typeof this.size=="string"?this.size:`${this.size}px`)}render(){return y$1`<slot></slot> ${this.text?y$1`<span style="margin-left: 12px;">${this.text}</span>`:""}`}};IconButton.styles=i$c`
    :host {
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      border: none;
      width: var(--button-width);
      height: var(--button-height);
      border-radius: 5px;
      background: transparent;
      cursor: pointer;
      user-select: none;
      fill: var(--affine-icon-color);
      font-family: var(--affine-font-family);
      color: var(--affine-popover-color);
    }

    :host(:hover) {
      background: var(--affine-hover-background);
      fill: var(--affine-primary-color);
      color: var(--affine-primary-color);
    }

    :host(:active) {
      background: transparent;
      fill: var(--affine-primary-color);
      color: var(--affine-primary-color);
    }

    :host([disabled]),
    :host(:disabled) {
      background: transparent;
      fill: var(--affine-icon-color);
      cursor: not-allowed;
    }

    /* You can add a 'active' attribute to the button to revert the active style */
    :host([active]) {
      fill: var(--affine-primary-color);
    }

    :host(:active[active]) {
      background: transparent;
      fill: var(--affine-icon-color);
    }
  `;__decorateClass$m([e$8()],IconButton.prototype,"size",2);__decorateClass$m([e$8()],IconButton.prototype,"text",2);__decorateClass$m([e$8({type:Boolean})],IconButton.prototype,"disabled",2);IconButton=__decorateClass$m([e$9("icon-button")],IconButton);var __defProp$l=Object.defineProperty,__getOwnPropDesc$l=Object.getOwnPropertyDescriptor,__decorateClass$l=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$l(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$l(j,X,ne),ne};let FormatBarButton=class extends IconButton{constructor(){super(...arguments),this.width="32px",this.height="32px",this.active=!1}connectedCallback(){super.connectedCallback(),this.style.setProperty("--button-width",typeof this.width=="string"?this.width:`${this.width}px`),this.style.setProperty("--button-height",typeof this.height=="string"?this.height:`${this.height}px`)}};FormatBarButton.styles=i$c`
    ${IconButton.styles}

    :host {
      width: var(--button-width);
      height: var(--button-height);
      fill: var(--affine-icon-color);
    }
  `;__decorateClass$l([e$8()],FormatBarButton.prototype,"width",2);__decorateClass$l([e$8()],FormatBarButton.prototype,"height",2);__decorateClass$l([e$8()],FormatBarButton.prototype,"active",2);FormatBarButton=__decorateClass$l([e$9("format-bar-button")],FormatBarButton);var quillExports={},quill={get exports(){return quillExports},set exports(q){quillExports=q}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(q,j){(function(te,ne){q.exports=ne()})(typeof self<"u"?self:commonjsGlobal,function(){return function(X){var te={};function ne(re){if(te[re])return te[re].exports;var oe=te[re]={i:re,l:!1,exports:{}};return X[re].call(oe.exports,oe,oe.exports,ne),oe.l=!0,oe.exports}return ne.m=X,ne.c=te,ne.d=function(re,oe,le){ne.o(re,oe)||Object.defineProperty(re,oe,{configurable:!1,enumerable:!0,get:le})},ne.n=function(re){var oe=re&&re.__esModule?function(){return re.default}:function(){return re};return ne.d(oe,"a",oe),oe},ne.o=function(re,oe){return Object.prototype.hasOwnProperty.call(re,oe)},ne.p="",ne(ne.s=109)}([function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(17),oe=ne(18),le=ne(19),fe=ne(45),we=ne(46),ke=ne(47),ye=ne(48),ve=ne(49),be=ne(12),Ce=ne(32),Ee=ne(33),Oe=ne(31),Ae=ne(1),Te={Scope:Ae.Scope,create:Ae.create,find:Ae.find,query:Ae.query,register:Ae.register,Container:re.default,Format:oe.default,Leaf:le.default,Embed:ye.default,Scroll:fe.default,Block:ke.default,Inline:we.default,Text:ve.default,Attributor:{Attribute:be.default,Class:Ce.default,Style:Ee.default,Store:Oe.default}};te.default=Te},function(X,te,ne){var re=this&&this.__extends||function(){var Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ae,Te){Ae.__proto__=Te}||function(Ae,Te){for(var Se in Te)Te.hasOwnProperty(Se)&&(Ae[Se]=Te[Se])};return function(Ae,Te){Oe(Ae,Te);function Se(){this.constructor=Ae}Ae.prototype=Te===null?Object.create(Te):(Se.prototype=Te.prototype,new Se)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=function(Oe){re(Ae,Oe);function Ae(Te){var Se=this;return Te="[Parchment] "+Te,Se=Oe.call(this,Te)||this,Se.message=Te,Se.name=Se.constructor.name,Se}return Ae}(Error);te.ParchmentError=oe;var le={},fe={},we={},ke={};te.DATA_KEY="__blot";var ye;(function(Oe){Oe[Oe.TYPE=3]="TYPE",Oe[Oe.LEVEL=12]="LEVEL",Oe[Oe.ATTRIBUTE=13]="ATTRIBUTE",Oe[Oe.BLOT=14]="BLOT",Oe[Oe.INLINE=7]="INLINE",Oe[Oe.BLOCK=11]="BLOCK",Oe[Oe.BLOCK_BLOT=10]="BLOCK_BLOT",Oe[Oe.INLINE_BLOT=6]="INLINE_BLOT",Oe[Oe.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Oe[Oe.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Oe[Oe.ANY=15]="ANY"})(ye=te.Scope||(te.Scope={}));function ve(Oe,Ae){var Te=Ce(Oe);if(Te==null)throw new oe("Unable to create "+Oe+" blot");var Se=Te,$e=Oe instanceof Node||Oe.nodeType===Node.TEXT_NODE?Oe:Se.create(Ae);return new Se($e,Ae)}te.create=ve;function be(Oe,Ae){return Ae===void 0&&(Ae=!1),Oe==null?null:Oe[te.DATA_KEY]!=null?Oe[te.DATA_KEY].blot:Ae?be(Oe.parentNode,Ae):null}te.find=be;function Ce(Oe,Ae){Ae===void 0&&(Ae=ye.ANY);var Te;if(typeof Oe=="string")Te=ke[Oe]||le[Oe];else if(Oe instanceof Text||Oe.nodeType===Node.TEXT_NODE)Te=ke.text;else if(typeof Oe=="number")Oe&ye.LEVEL&ye.BLOCK?Te=ke.block:Oe&ye.LEVEL&ye.INLINE&&(Te=ke.inline);else if(Oe instanceof HTMLElement){var Se=(Oe.getAttribute("class")||"").split(/\s+/);for(var $e in Se)if(Te=fe[Se[$e]],Te)break;Te=Te||we[Oe.tagName]}return Te==null?null:Ae&ye.LEVEL&Te.scope&&Ae&ye.TYPE&Te.scope?Te:null}te.query=Ce;function Ee(){for(var Oe=[],Ae=0;Ae<arguments.length;Ae++)Oe[Ae]=arguments[Ae];if(Oe.length>1)return Oe.map(function($e){return Ee($e)});var Te=Oe[0];if(typeof Te.blotName!="string"&&typeof Te.attrName!="string")throw new oe("Invalid definition");if(Te.blotName==="abstract")throw new oe("Cannot register abstract class");if(ke[Te.blotName||Te.attrName]=Te,typeof Te.keyName=="string")le[Te.keyName]=Te;else if(Te.className!=null&&(fe[Te.className]=Te),Te.tagName!=null){Array.isArray(Te.tagName)?Te.tagName=Te.tagName.map(function($e){return $e.toUpperCase()}):Te.tagName=Te.tagName.toUpperCase();var Se=Array.isArray(Te.tagName)?Te.tagName:[Te.tagName];Se.forEach(function($e){(we[$e]==null||Te.className==null)&&(we[$e]=Te)})}return Te}te.register=Ee},function(X,te,ne){var re=ne(51),oe=ne(11),le=ne(3),fe=ne(20),we=String.fromCharCode(0),ke=function(ye){Array.isArray(ye)?this.ops=ye:ye!=null&&Array.isArray(ye.ops)?this.ops=ye.ops:this.ops=[]};ke.prototype.insert=function(ye,ve){var be={};return ye.length===0?this:(be.insert=ye,ve!=null&&typeof ve=="object"&&Object.keys(ve).length>0&&(be.attributes=ve),this.push(be))},ke.prototype.delete=function(ye){return ye<=0?this:this.push({delete:ye})},ke.prototype.retain=function(ye,ve){if(ye<=0)return this;var be={retain:ye};return ve!=null&&typeof ve=="object"&&Object.keys(ve).length>0&&(be.attributes=ve),this.push(be)},ke.prototype.push=function(ye){var ve=this.ops.length,be=this.ops[ve-1];if(ye=le(!0,{},ye),typeof be=="object"){if(typeof ye.delete=="number"&&typeof be.delete=="number")return this.ops[ve-1]={delete:be.delete+ye.delete},this;if(typeof be.delete=="number"&&ye.insert!=null&&(ve-=1,be=this.ops[ve-1],typeof be!="object"))return this.ops.unshift(ye),this;if(oe(ye.attributes,be.attributes)){if(typeof ye.insert=="string"&&typeof be.insert=="string")return this.ops[ve-1]={insert:be.insert+ye.insert},typeof ye.attributes=="object"&&(this.ops[ve-1].attributes=ye.attributes),this;if(typeof ye.retain=="number"&&typeof be.retain=="number")return this.ops[ve-1]={retain:be.retain+ye.retain},typeof ye.attributes=="object"&&(this.ops[ve-1].attributes=ye.attributes),this}}return ve===this.ops.length?this.ops.push(ye):this.ops.splice(ve,0,ye),this},ke.prototype.chop=function(){var ye=this.ops[this.ops.length-1];return ye&&ye.retain&&!ye.attributes&&this.ops.pop(),this},ke.prototype.filter=function(ye){return this.ops.filter(ye)},ke.prototype.forEach=function(ye){this.ops.forEach(ye)},ke.prototype.map=function(ye){return this.ops.map(ye)},ke.prototype.partition=function(ye){var ve=[],be=[];return this.forEach(function(Ce){var Ee=ye(Ce)?ve:be;Ee.push(Ce)}),[ve,be]},ke.prototype.reduce=function(ye,ve){return this.ops.reduce(ye,ve)},ke.prototype.changeLength=function(){return this.reduce(function(ye,ve){return ve.insert?ye+fe.length(ve):ve.delete?ye-ve.delete:ye},0)},ke.prototype.length=function(){return this.reduce(function(ye,ve){return ye+fe.length(ve)},0)},ke.prototype.slice=function(ye,ve){ye=ye||0,typeof ve!="number"&&(ve=1/0);for(var be=[],Ce=fe.iterator(this.ops),Ee=0;Ee<ve&&Ce.hasNext();){var Oe;Ee<ye?Oe=Ce.next(ye-Ee):(Oe=Ce.next(ve-Ee),be.push(Oe)),Ee+=fe.length(Oe)}return new ke(be)},ke.prototype.compose=function(ye){var ve=fe.iterator(this.ops),be=fe.iterator(ye.ops),Ce=[],Ee=be.peek();if(Ee!=null&&typeof Ee.retain=="number"&&Ee.attributes==null){for(var Oe=Ee.retain;ve.peekType()==="insert"&&ve.peekLength()<=Oe;)Oe-=ve.peekLength(),Ce.push(ve.next());Ee.retain-Oe>0&&be.next(Ee.retain-Oe)}for(var Ae=new ke(Ce);ve.hasNext()||be.hasNext();)if(be.peekType()==="insert")Ae.push(be.next());else if(ve.peekType()==="delete")Ae.push(ve.next());else{var Te=Math.min(ve.peekLength(),be.peekLength()),Se=ve.next(Te),$e=be.next(Te);if(typeof $e.retain=="number"){var Le={};typeof Se.retain=="number"?Le.retain=Te:Le.insert=Se.insert;var Pe=fe.attributes.compose(Se.attributes,$e.attributes,typeof Se.retain=="number");if(Pe&&(Le.attributes=Pe),Ae.push(Le),!be.hasNext()&&oe(Ae.ops[Ae.ops.length-1],Le)){var Re=new ke(ve.rest());return Ae.concat(Re).chop()}}else typeof $e.delete=="number"&&typeof Se.retain=="number"&&Ae.push($e)}return Ae.chop()},ke.prototype.concat=function(ye){var ve=new ke(this.ops.slice());return ye.ops.length>0&&(ve.push(ye.ops[0]),ve.ops=ve.ops.concat(ye.ops.slice(1))),ve},ke.prototype.diff=function(ye,ve){if(this.ops===ye.ops)return new ke;var be=[this,ye].map(function(Te){return Te.map(function(Se){if(Se.insert!=null)return typeof Se.insert=="string"?Se.insert:we;var $e=Te===ye?"on":"with";throw new Error("diff() called "+$e+" non-document")}).join("")}),Ce=new ke,Ee=re(be[0],be[1],ve),Oe=fe.iterator(this.ops),Ae=fe.iterator(ye.ops);return Ee.forEach(function(Te){for(var Se=Te[1].length;Se>0;){var $e=0;switch(Te[0]){case re.INSERT:$e=Math.min(Ae.peekLength(),Se),Ce.push(Ae.next($e));break;case re.DELETE:$e=Math.min(Se,Oe.peekLength()),Oe.next($e),Ce.delete($e);break;case re.EQUAL:$e=Math.min(Oe.peekLength(),Ae.peekLength(),Se);var Le=Oe.next($e),Pe=Ae.next($e);oe(Le.insert,Pe.insert)?Ce.retain($e,fe.attributes.diff(Le.attributes,Pe.attributes)):Ce.push(Pe).delete($e);break}Se-=$e}}),Ce.chop()},ke.prototype.eachLine=function(ye,ve){ve=ve||`
`;for(var be=fe.iterator(this.ops),Ce=new ke,Ee=0;be.hasNext();){if(be.peekType()!=="insert")return;var Oe=be.peek(),Ae=fe.length(Oe)-be.peekLength(),Te=typeof Oe.insert=="string"?Oe.insert.indexOf(ve,Ae)-Ae:-1;if(Te<0)Ce.push(be.next());else if(Te>0)Ce.push(be.next(Te));else{if(ye(Ce,be.next(1).attributes||{},Ee)===!1)return;Ee+=1,Ce=new ke}}Ce.length()>0&&ye(Ce,{},Ee)},ke.prototype.transform=function(ye,ve){if(ve=!!ve,typeof ye=="number")return this.transformPosition(ye,ve);for(var be=fe.iterator(this.ops),Ce=fe.iterator(ye.ops),Ee=new ke;be.hasNext()||Ce.hasNext();)if(be.peekType()==="insert"&&(ve||Ce.peekType()!=="insert"))Ee.retain(fe.length(be.next()));else if(Ce.peekType()==="insert")Ee.push(Ce.next());else{var Oe=Math.min(be.peekLength(),Ce.peekLength()),Ae=be.next(Oe),Te=Ce.next(Oe);if(Ae.delete)continue;Te.delete?Ee.push(Te):Ee.retain(Oe,fe.attributes.transform(Ae.attributes,Te.attributes,ve))}return Ee.chop()},ke.prototype.transformPosition=function(ye,ve){ve=!!ve;for(var be=fe.iterator(this.ops),Ce=0;be.hasNext()&&Ce<=ye;){var Ee=be.peekLength(),Oe=be.peekType();if(be.next(),Oe==="delete"){ye-=Math.min(Ee,ye-Ce);continue}else Oe==="insert"&&(Ce<ye||!ve)&&(ye+=Ee);Ce+=Ee}return ye},X.exports=ke},function(X,te){var ne=Object.prototype.hasOwnProperty,re=Object.prototype.toString,oe=Object.defineProperty,le=Object.getOwnPropertyDescriptor,fe=function(be){return typeof Array.isArray=="function"?Array.isArray(be):re.call(be)==="[object Array]"},we=function(be){if(!be||re.call(be)!=="[object Object]")return!1;var Ce=ne.call(be,"constructor"),Ee=be.constructor&&be.constructor.prototype&&ne.call(be.constructor.prototype,"isPrototypeOf");if(be.constructor&&!Ce&&!Ee)return!1;var Oe;for(Oe in be);return typeof Oe>"u"||ne.call(be,Oe)},ke=function(be,Ce){oe&&Ce.name==="__proto__"?oe(be,Ce.name,{enumerable:!0,configurable:!0,value:Ce.newValue,writable:!0}):be[Ce.name]=Ce.newValue},ye=function(be,Ce){if(Ce==="__proto__")if(ne.call(be,Ce)){if(le)return le(be,Ce).value}else return;return be[Ce]};X.exports=function ve(){var be,Ce,Ee,Oe,Ae,Te,Se=arguments[0],$e=1,Le=arguments.length,Pe=!1;for(typeof Se=="boolean"&&(Pe=Se,Se=arguments[1]||{},$e=2),(Se==null||typeof Se!="object"&&typeof Se!="function")&&(Se={});$e<Le;++$e)if(be=arguments[$e],be!=null)for(Ce in be)Ee=ye(Se,Ce),Oe=ye(be,Ce),Se!==Oe&&(Pe&&Oe&&(we(Oe)||(Ae=fe(Oe)))?(Ae?(Ae=!1,Te=Ee&&fe(Ee)?Ee:[]):Te=Ee&&we(Ee)?Ee:{},ke(Se,{name:Ce,newValue:ve(Pe,Te,Oe)})):typeof Oe<"u"&&ke(Se,{name:Ce,newValue:Oe}));return Se}},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.BlockEmbed=te.bubbleFormats=void 0;var re=function(){function De(Ve,ze){for(var qe=0;qe<ze.length;qe++){var Xe=ze[qe];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(Ve,Xe.key,Xe)}}return function(Ve,ze,qe){return ze&&De(Ve.prototype,ze),qe&&De(Ve,qe),Ve}}(),oe=function De(Ve,ze,qe){Ve===null&&(Ve=Function.prototype);var Xe=Object.getOwnPropertyDescriptor(Ve,ze);if(Xe===void 0){var tt=Object.getPrototypeOf(Ve);return tt===null?void 0:De(tt,ze,qe)}else{if("value"in Xe)return Xe.value;var at=Xe.get;return at===void 0?void 0:at.call(qe)}},le=ne(3),fe=Se(le),we=ne(2),ke=Se(we),ye=ne(0),ve=Se(ye),be=ne(16),Ce=Se(be),Ee=ne(6),Oe=Se(Ee),Ae=ne(7),Te=Se(Ae);function Se(De){return De&&De.__esModule?De:{default:De}}function $e(De,Ve){if(!(De instanceof Ve))throw new TypeError("Cannot call a class as a function")}function Le(De,Ve){if(!De)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ve&&(typeof Ve=="object"||typeof Ve=="function")?Ve:De}function Pe(De,Ve){if(typeof Ve!="function"&&Ve!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ve);De.prototype=Object.create(Ve&&Ve.prototype,{constructor:{value:De,enumerable:!1,writable:!0,configurable:!0}}),Ve&&(Object.setPrototypeOf?Object.setPrototypeOf(De,Ve):De.__proto__=Ve)}var Re=1,Ne=function(De){Pe(Ve,De);function Ve(){return $e(this,Ve),Le(this,(Ve.__proto__||Object.getPrototypeOf(Ve)).apply(this,arguments))}return re(Ve,[{key:"attach",value:function(){oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"attach",this).call(this),this.attributes=new ve.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new ke.default().insert(this.value(),(0,fe.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(qe,Xe){var tt=ve.default.query(qe,ve.default.Scope.BLOCK_ATTRIBUTE);tt!=null&&this.attributes.attribute(tt,Xe)}},{key:"formatAt",value:function(qe,Xe,tt,at){this.format(tt,at)}},{key:"insertAt",value:function(qe,Xe,tt){if(typeof Xe=="string"&&Xe.endsWith(`
`)){var at=ve.default.create(je.blotName);this.parent.insertBefore(at,qe===0?this:this.next),at.insertAt(0,Xe.slice(0,-1))}else oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"insertAt",this).call(this,qe,Xe,tt)}}]),Ve}(ve.default.Embed);Ne.scope=ve.default.Scope.BLOCK_BLOT;var je=function(De){Pe(Ve,De);function Ve(ze){$e(this,Ve);var qe=Le(this,(Ve.__proto__||Object.getPrototypeOf(Ve)).call(this,ze));return qe.cache={},qe}return re(Ve,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(ve.default.Leaf).reduce(function(qe,Xe){return Xe.length()===0?qe:qe.insert(Xe.value(),Ie(Xe))},new ke.default).insert(`
`,Ie(this))),this.cache.delta}},{key:"deleteAt",value:function(qe,Xe){oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"deleteAt",this).call(this,qe,Xe),this.cache={}}},{key:"formatAt",value:function(qe,Xe,tt,at){Xe<=0||(ve.default.query(tt,ve.default.Scope.BLOCK)?qe+Xe===this.length()&&this.format(tt,at):oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"formatAt",this).call(this,qe,Math.min(Xe,this.length()-qe-1),tt,at),this.cache={})}},{key:"insertAt",value:function(qe,Xe,tt){if(tt!=null)return oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"insertAt",this).call(this,qe,Xe,tt);if(Xe.length!==0){var at=Xe.split(`
`),pt=at.shift();pt.length>0&&(qe<this.length()-1||this.children.tail==null?oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"insertAt",this).call(this,Math.min(qe,this.length()-1),pt):this.children.tail.insertAt(this.children.tail.length(),pt),this.cache={});var st=this;at.reduce(function(it,Ge){return st=st.split(it,!0),st.insertAt(0,Ge),Ge.length},qe+pt.length)}}},{key:"insertBefore",value:function(qe,Xe){var tt=this.children.head;oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"insertBefore",this).call(this,qe,Xe),tt instanceof Ce.default&&tt.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"length",this).call(this)+Re),this.cache.length}},{key:"moveChildren",value:function(qe,Xe){oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"moveChildren",this).call(this,qe,Xe),this.cache={}}},{key:"optimize",value:function(qe){oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"optimize",this).call(this,qe),this.cache={}}},{key:"path",value:function(qe){return oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"path",this).call(this,qe,!0)}},{key:"removeChild",value:function(qe){oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"removeChild",this).call(this,qe),this.cache={}}},{key:"split",value:function(qe){var Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Xe&&(qe===0||qe>=this.length()-Re)){var tt=this.clone();return qe===0?(this.parent.insertBefore(tt,this),this):(this.parent.insertBefore(tt,this.next),tt)}else{var at=oe(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"split",this).call(this,qe,Xe);return this.cache={},at}}}]),Ve}(ve.default.Block);je.blotName="block",je.tagName="P",je.defaultChild="break",je.allowedChildren=[Oe.default,ve.default.Embed,Te.default];function Ie(De){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return De==null||(typeof De.formats=="function"&&(Ve=(0,fe.default)(Ve,De.formats())),De.parent==null||De.parent.blotName=="scroll"||De.parent.statics.scope!==De.statics.scope)?Ve:Ie(De.parent,Ve)}te.bubbleFormats=Ie,te.BlockEmbed=Ne,te.default=je},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.overload=te.expandConfig=void 0;var re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},oe=function(){function st(it,Ge){var et=[],Je=!0,ft=!1,dt=void 0;try{for(var Qe=it[Symbol.iterator](),ht;!(Je=(ht=Qe.next()).done)&&(et.push(ht.value),!(Ge&&et.length===Ge));Je=!0);}catch(mt){ft=!0,dt=mt}finally{try{!Je&&Qe.return&&Qe.return()}finally{if(ft)throw dt}}return et}return function(it,Ge){if(Array.isArray(it))return it;if(Symbol.iterator in Object(it))return st(it,Ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),le=function(){function st(it,Ge){for(var et=0;et<Ge.length;et++){var Je=Ge[et];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(it,Je.key,Je)}}return function(it,Ge,et){return Ge&&st(it.prototype,Ge),et&&st(it,et),it}}();ne(50);var fe=ne(2),we=Ie(fe),ke=ne(14),ye=Ie(ke),ve=ne(8),be=Ie(ve),Ce=ne(9),Ee=Ie(Ce),Oe=ne(0),Ae=Ie(Oe),Te=ne(15),Se=Ie(Te),$e=ne(3),Le=Ie($e),Pe=ne(10),Re=Ie(Pe),Ne=ne(34),je=Ie(Ne);function Ie(st){return st&&st.__esModule?st:{default:st}}function De(st,it,Ge){return it in st?Object.defineProperty(st,it,{value:Ge,enumerable:!0,configurable:!0,writable:!0}):st[it]=Ge,st}function Ve(st,it){if(!(st instanceof it))throw new TypeError("Cannot call a class as a function")}var ze=(0,Re.default)("quill"),qe=function(){le(st,null,[{key:"debug",value:function(Ge){Ge===!0&&(Ge="log"),Re.default.level(Ge)}},{key:"find",value:function(Ge){return Ge.__quill||Ae.default.find(Ge)}},{key:"import",value:function(Ge){return this.imports[Ge]==null&&ze.error("Cannot import "+Ge+". Are you sure it was registered?"),this.imports[Ge]}},{key:"register",value:function(Ge,et){var Je=this,ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof Ge!="string"){var dt=Ge.attrName||Ge.blotName;typeof dt=="string"?this.register("formats/"+dt,Ge,et):Object.keys(Ge).forEach(function(Qe){Je.register(Qe,Ge[Qe],et)})}else this.imports[Ge]!=null&&!ft&&ze.warn("Overwriting "+Ge+" with",et),this.imports[Ge]=et,(Ge.startsWith("blots/")||Ge.startsWith("formats/"))&&et.blotName!=="abstract"?Ae.default.register(et):Ge.startsWith("modules")&&typeof et.register=="function"&&et.register()}}]);function st(it){var Ge=this,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ve(this,st),this.options=Xe(it,et),this.container=this.options.container,this.container==null)return ze.error("Invalid Quill container",it);this.options.debug&&st.debug(this.options.debug);var Je=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new be.default,this.scroll=Ae.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new ye.default(this.scroll),this.selection=new Se.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(be.default.events.EDITOR_CHANGE,function(dt){dt===be.default.events.TEXT_CHANGE&&Ge.root.classList.toggle("ql-blank",Ge.editor.isBlank())}),this.emitter.on(be.default.events.SCROLL_UPDATE,function(dt,Qe){var ht=Ge.selection.lastRange,mt=ht&&ht.length===0?ht.index:void 0;tt.call(Ge,function(){return Ge.editor.update(null,Qe,mt)},dt)});var ft=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+Je+"<p><br></p></div>");this.setContents(ft),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return le(st,[{key:"addContainer",value:function(Ge){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof Ge=="string"){var Je=Ge;Ge=document.createElement("div"),Ge.classList.add(Je)}return this.container.insertBefore(Ge,et),Ge}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(Ge,et,Je){var ft=this,dt=at(Ge,et,Je),Qe=oe(dt,4);return Ge=Qe[0],et=Qe[1],Je=Qe[3],tt.call(this,function(){return ft.editor.deleteText(Ge,et)},Je,Ge,-1*et)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(Ge),this.container.classList.toggle("ql-disabled",!Ge)}},{key:"focus",value:function(){var Ge=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=Ge,this.scrollIntoView()}},{key:"format",value:function(Ge,et){var Je=this,ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:be.default.sources.API;return tt.call(this,function(){var dt=Je.getSelection(!0),Qe=new we.default;if(dt==null)return Qe;if(Ae.default.query(Ge,Ae.default.Scope.BLOCK))Qe=Je.editor.formatLine(dt.index,dt.length,De({},Ge,et));else{if(dt.length===0)return Je.selection.format(Ge,et),Qe;Qe=Je.editor.formatText(dt.index,dt.length,De({},Ge,et))}return Je.setSelection(dt,be.default.sources.SILENT),Qe},ft)}},{key:"formatLine",value:function(Ge,et,Je,ft,dt){var Qe=this,ht=void 0,mt=at(Ge,et,Je,ft,dt),vt=oe(mt,4);return Ge=vt[0],et=vt[1],ht=vt[2],dt=vt[3],tt.call(this,function(){return Qe.editor.formatLine(Ge,et,ht)},dt,Ge,0)}},{key:"formatText",value:function(Ge,et,Je,ft,dt){var Qe=this,ht=void 0,mt=at(Ge,et,Je,ft,dt),vt=oe(mt,4);return Ge=vt[0],et=vt[1],ht=vt[2],dt=vt[3],tt.call(this,function(){return Qe.editor.formatText(Ge,et,ht)},dt,Ge,0)}},{key:"getBounds",value:function(Ge){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Je=void 0;typeof Ge=="number"?Je=this.selection.getBounds(Ge,et):Je=this.selection.getBounds(Ge.index,Ge.length);var ft=this.container.getBoundingClientRect();return{bottom:Je.bottom-ft.top,height:Je.height,left:Je.left-ft.left,right:Je.right-ft.left,top:Je.top-ft.top,width:Je.width}}},{key:"getContents",value:function(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Ge,Je=at(Ge,et),ft=oe(Je,2);return Ge=ft[0],et=ft[1],this.editor.getContents(Ge,et)}},{key:"getFormat",value:function(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof Ge=="number"?this.editor.getFormat(Ge,et):this.editor.getFormat(Ge.index,Ge.length)}},{key:"getIndex",value:function(Ge){return Ge.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(Ge){return this.scroll.leaf(Ge)}},{key:"getLine",value:function(Ge){return this.scroll.line(Ge)}},{key:"getLines",value:function(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof Ge!="number"?this.scroll.lines(Ge.index,Ge.length):this.scroll.lines(Ge,et)}},{key:"getModule",value:function(Ge){return this.theme.modules[Ge]}},{key:"getSelection",value:function(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Ge&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Ge,Je=at(Ge,et),ft=oe(Je,2);return Ge=ft[0],et=ft[1],this.editor.getText(Ge,et)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(Ge,et,Je){var ft=this,dt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:st.sources.API;return tt.call(this,function(){return ft.editor.insertEmbed(Ge,et,Je)},dt,Ge)}},{key:"insertText",value:function(Ge,et,Je,ft,dt){var Qe=this,ht=void 0,mt=at(Ge,0,Je,ft,dt),vt=oe(mt,4);return Ge=vt[0],ht=vt[2],dt=vt[3],tt.call(this,function(){return Qe.editor.insertText(Ge,et,ht)},dt,Ge,et.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(Ge,et,Je){this.clipboard.dangerouslyPasteHTML(Ge,et,Je)}},{key:"removeFormat",value:function(Ge,et,Je){var ft=this,dt=at(Ge,et,Je),Qe=oe(dt,4);return Ge=Qe[0],et=Qe[1],Je=Qe[3],tt.call(this,function(){return ft.editor.removeFormat(Ge,et)},Je,Ge)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(Ge){var et=this,Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be.default.sources.API;return tt.call(this,function(){Ge=new we.default(Ge);var ft=et.getLength(),dt=et.editor.deleteText(0,ft),Qe=et.editor.applyDelta(Ge),ht=Qe.ops[Qe.ops.length-1];ht!=null&&typeof ht.insert=="string"&&ht.insert[ht.insert.length-1]===`
`&&(et.editor.deleteText(et.getLength()-1,1),Qe.delete(1));var mt=dt.compose(Qe);return mt},Je)}},{key:"setSelection",value:function(Ge,et,Je){if(Ge==null)this.selection.setRange(null,et||st.sources.API);else{var ft=at(Ge,et,Je),dt=oe(ft,4);Ge=dt[0],et=dt[1],Je=dt[3],this.selection.setRange(new Te.Range(Ge,et),Je),Je!==be.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(Ge){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be.default.sources.API,Je=new we.default().insert(Ge);return this.setContents(Je,et)}},{key:"update",value:function(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:be.default.sources.USER,et=this.scroll.update(Ge);return this.selection.update(Ge),et}},{key:"updateContents",value:function(Ge){var et=this,Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be.default.sources.API;return tt.call(this,function(){return Ge=new we.default(Ge),et.editor.applyDelta(Ge,Je)},Je,!0)}}]),st}();qe.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},qe.events=be.default.events,qe.sources=be.default.sources,qe.version="1.3.7",qe.imports={delta:we.default,parchment:Ae.default,"core/module":Ee.default,"core/theme":je.default};function Xe(st,it){if(it=(0,Le.default)(!0,{container:st,modules:{clipboard:!0,keyboard:!0,history:!0}},it),!it.theme||it.theme===qe.DEFAULTS.theme)it.theme=je.default;else if(it.theme=qe.import("themes/"+it.theme),it.theme==null)throw new Error("Invalid theme "+it.theme+". Did you register it?");var Ge=(0,Le.default)(!0,{},it.theme.DEFAULTS);[Ge,it].forEach(function(ft){ft.modules=ft.modules||{},Object.keys(ft.modules).forEach(function(dt){ft.modules[dt]===!0&&(ft.modules[dt]={})})});var et=Object.keys(Ge.modules).concat(Object.keys(it.modules)),Je=et.reduce(function(ft,dt){var Qe=qe.import("modules/"+dt);return Qe==null?ze.error("Cannot load "+dt+" module. Are you sure you registered it?"):ft[dt]=Qe.DEFAULTS||{},ft},{});return it.modules!=null&&it.modules.toolbar&&it.modules.toolbar.constructor!==Object&&(it.modules.toolbar={container:it.modules.toolbar}),it=(0,Le.default)(!0,{},qe.DEFAULTS,{modules:Je},Ge,it),["bounds","container","scrollingContainer"].forEach(function(ft){typeof it[ft]=="string"&&(it[ft]=document.querySelector(it[ft]))}),it.modules=Object.keys(it.modules).reduce(function(ft,dt){return it.modules[dt]&&(ft[dt]=it.modules[dt]),ft},{}),it}function tt(st,it,Ge,et){if(this.options.strict&&!this.isEnabled()&&it===be.default.sources.USER)return new we.default;var Je=Ge==null?null:this.getSelection(),ft=this.editor.delta,dt=st();if(Je!=null&&(Ge===!0&&(Ge=Je.index),et==null?Je=pt(Je,dt,it):et!==0&&(Je=pt(Je,Ge,et,it)),this.setSelection(Je,be.default.sources.SILENT)),dt.length()>0){var Qe,ht=[be.default.events.TEXT_CHANGE,dt,ft,it];if((Qe=this.emitter).emit.apply(Qe,[be.default.events.EDITOR_CHANGE].concat(ht)),it!==be.default.sources.SILENT){var mt;(mt=this.emitter).emit.apply(mt,ht)}}return dt}function at(st,it,Ge,et,Je){var ft={};return typeof st.index=="number"&&typeof st.length=="number"?typeof it!="number"?(Je=et,et=Ge,Ge=it,it=st.length,st=st.index):(it=st.length,st=st.index):typeof it!="number"&&(Je=et,et=Ge,Ge=it,it=0),(typeof Ge>"u"?"undefined":re(Ge))==="object"?(ft=Ge,Je=et):typeof Ge=="string"&&(et!=null?ft[Ge]=et:Je=Ge),Je=Je||be.default.sources.API,[st,it,ft,Je]}function pt(st,it,Ge,et){if(st==null)return null;var Je=void 0,ft=void 0;if(it instanceof we.default){var dt=[st.index,st.index+st.length].map(function(vt){return it.transformPosition(vt,et!==be.default.sources.USER)}),Qe=oe(dt,2);Je=Qe[0],ft=Qe[1]}else{var ht=[st.index,st.index+st.length].map(function(vt){return vt<it||vt===it&&et===be.default.sources.USER?vt:Ge>=0?vt+Ge:Math.max(it,vt+Ge)}),mt=oe(ht,2);Je=mt[0],ft=mt[1]}return new Te.Range(Je,ft-Je)}te.expandConfig=Xe,te.overload=at,te.default=qe},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Oe(Ae,Te){for(var Se=0;Se<Te.length;Se++){var $e=Te[Se];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(Ae,$e.key,$e)}}return function(Ae,Te,Se){return Te&&Oe(Ae.prototype,Te),Se&&Oe(Ae,Se),Ae}}(),oe=function Oe(Ae,Te,Se){Ae===null&&(Ae=Function.prototype);var $e=Object.getOwnPropertyDescriptor(Ae,Te);if($e===void 0){var Le=Object.getPrototypeOf(Ae);return Le===null?void 0:Oe(Le,Te,Se)}else{if("value"in $e)return $e.value;var Pe=$e.get;return Pe===void 0?void 0:Pe.call(Se)}},le=ne(7),fe=ye(le),we=ne(0),ke=ye(we);function ye(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function ve(Oe,Ae){if(!(Oe instanceof Ae))throw new TypeError("Cannot call a class as a function")}function be(Oe,Ae){if(!Oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ae&&(typeof Ae=="object"||typeof Ae=="function")?Ae:Oe}function Ce(Oe,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ae);Oe.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),Ae&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,Ae):Oe.__proto__=Ae)}var Ee=function(Oe){Ce(Ae,Oe);function Ae(){return ve(this,Ae),be(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).apply(this,arguments))}return re(Ae,[{key:"formatAt",value:function(Se,$e,Le,Pe){if(Ae.compare(this.statics.blotName,Le)<0&&ke.default.query(Le,ke.default.Scope.BLOT)){var Re=this.isolate(Se,$e);Pe&&Re.wrap(Le,Pe)}else oe(Ae.prototype.__proto__||Object.getPrototypeOf(Ae.prototype),"formatAt",this).call(this,Se,$e,Le,Pe)}},{key:"optimize",value:function(Se){if(oe(Ae.prototype.__proto__||Object.getPrototypeOf(Ae.prototype),"optimize",this).call(this,Se),this.parent instanceof Ae&&Ae.compare(this.statics.blotName,this.parent.statics.blotName)>0){var $e=this.parent.isolate(this.offset(),this.length());this.moveChildren($e),$e.wrap(this)}}}],[{key:"compare",value:function(Se,$e){var Le=Ae.order.indexOf(Se),Pe=Ae.order.indexOf($e);return Le>=0||Pe>=0?Le-Pe:Se===$e?0:Se<$e?-1:1}}]),Ae}(ke.default.Inline);Ee.allowedChildren=[Ee,ke.default.Embed,fe.default],Ee.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],te.default=Ee},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(0),oe=le(re);function le(ve){return ve&&ve.__esModule?ve:{default:ve}}function fe(ve,be){if(!(ve instanceof be))throw new TypeError("Cannot call a class as a function")}function we(ve,be){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be&&(typeof be=="object"||typeof be=="function")?be:ve}function ke(ve,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof be);ve.prototype=Object.create(be&&be.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),be&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,be):ve.__proto__=be)}var ye=function(ve){ke(be,ve);function be(){return fe(this,be),we(this,(be.__proto__||Object.getPrototypeOf(be)).apply(this,arguments))}return be}(oe.default.Text);te.default=ye},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Te(Se,$e){for(var Le=0;Le<$e.length;Le++){var Pe=$e[Le];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(Se,Pe.key,Pe)}}return function(Se,$e,Le){return $e&&Te(Se.prototype,$e),Le&&Te(Se,Le),Se}}(),oe=function Te(Se,$e,Le){Se===null&&(Se=Function.prototype);var Pe=Object.getOwnPropertyDescriptor(Se,$e);if(Pe===void 0){var Re=Object.getPrototypeOf(Se);return Re===null?void 0:Te(Re,$e,Le)}else{if("value"in Pe)return Pe.value;var Ne=Pe.get;return Ne===void 0?void 0:Ne.call(Le)}},le=ne(54),fe=ye(le),we=ne(10),ke=ye(we);function ye(Te){return Te&&Te.__esModule?Te:{default:Te}}function ve(Te,Se){if(!(Te instanceof Se))throw new TypeError("Cannot call a class as a function")}function be(Te,Se){if(!Te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se&&(typeof Se=="object"||typeof Se=="function")?Se:Te}function Ce(Te,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Se);Te.prototype=Object.create(Se&&Se.prototype,{constructor:{value:Te,enumerable:!1,writable:!0,configurable:!0}}),Se&&(Object.setPrototypeOf?Object.setPrototypeOf(Te,Se):Te.__proto__=Se)}var Ee=(0,ke.default)("quill:events"),Oe=["selectionchange","mousedown","mouseup","click"];Oe.forEach(function(Te){document.addEventListener(Te,function(){for(var Se=arguments.length,$e=Array(Se),Le=0;Le<Se;Le++)$e[Le]=arguments[Le];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(Pe){if(Pe.__quill&&Pe.__quill.emitter){var Re;(Re=Pe.__quill.emitter).handleDOM.apply(Re,$e)}})})});var Ae=function(Te){Ce(Se,Te);function Se(){ve(this,Se);var $e=be(this,(Se.__proto__||Object.getPrototypeOf(Se)).call(this));return $e.listeners={},$e.on("error",Ee.error),$e}return re(Se,[{key:"emit",value:function(){Ee.log.apply(Ee,arguments),oe(Se.prototype.__proto__||Object.getPrototypeOf(Se.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(Le){for(var Pe=arguments.length,Re=Array(Pe>1?Pe-1:0),Ne=1;Ne<Pe;Ne++)Re[Ne-1]=arguments[Ne];(this.listeners[Le.type]||[]).forEach(function(je){var Ie=je.node,De=je.handler;(Le.target===Ie||Ie.contains(Le.target))&&De.apply(void 0,[Le].concat(Re))})}},{key:"listenDOM",value:function(Le,Pe,Re){this.listeners[Le]||(this.listeners[Le]=[]),this.listeners[Le].push({node:Pe,handler:Re})}}]),Se}(fe.default);Ae.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},Ae.sources={API:"api",SILENT:"silent",USER:"user"},te.default=Ae},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});function re(le,fe){if(!(le instanceof fe))throw new TypeError("Cannot call a class as a function")}var oe=function le(fe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};re(this,le),this.quill=fe,this.options=we};oe.DEFAULTS={},te.default=oe},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=["error","warn","log","info"],oe="warn";function le(we){if(re.indexOf(we)<=re.indexOf(oe)){for(var ke,ye=arguments.length,ve=Array(ye>1?ye-1:0),be=1;be<ye;be++)ve[be-1]=arguments[be];(ke=console)[we].apply(ke,ve)}}function fe(we){return re.reduce(function(ke,ye){return ke[ye]=le.bind(console,ye,we),ke},{})}le.level=fe.level=function(we){oe=we},te.default=fe},function(X,te,ne){var re=Array.prototype.slice,oe=ne(52),le=ne(53),fe=X.exports=function(ve,be,Ce){return Ce||(Ce={}),ve===be?!0:ve instanceof Date&&be instanceof Date?ve.getTime()===be.getTime():!ve||!be||typeof ve!="object"&&typeof be!="object"?Ce.strict?ve===be:ve==be:ye(ve,be,Ce)};function we(ve){return ve==null}function ke(ve){return!(!ve||typeof ve!="object"||typeof ve.length!="number"||typeof ve.copy!="function"||typeof ve.slice!="function"||ve.length>0&&typeof ve[0]!="number")}function ye(ve,be,Ce){var Ee,Oe;if(we(ve)||we(be)||ve.prototype!==be.prototype)return!1;if(le(ve))return le(be)?(ve=re.call(ve),be=re.call(be),fe(ve,be,Ce)):!1;if(ke(ve)){if(!ke(be)||ve.length!==be.length)return!1;for(Ee=0;Ee<ve.length;Ee++)if(ve[Ee]!==be[Ee])return!1;return!0}try{var Ae=oe(ve),Te=oe(be)}catch{return!1}if(Ae.length!=Te.length)return!1;for(Ae.sort(),Te.sort(),Ee=Ae.length-1;Ee>=0;Ee--)if(Ae[Ee]!=Te[Ee])return!1;for(Ee=Ae.length-1;Ee>=0;Ee--)if(Oe=Ae[Ee],!fe(ve[Oe],be[Oe],Ce))return!1;return typeof ve==typeof be}},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(1),oe=function(){function le(fe,we,ke){ke===void 0&&(ke={}),this.attrName=fe,this.keyName=we;var ye=re.Scope.TYPE&re.Scope.ATTRIBUTE;ke.scope!=null?this.scope=ke.scope&re.Scope.LEVEL|ye:this.scope=re.Scope.ATTRIBUTE,ke.whitelist!=null&&(this.whitelist=ke.whitelist)}return le.keys=function(fe){return[].map.call(fe.attributes,function(we){return we.name})},le.prototype.add=function(fe,we){return this.canAdd(fe,we)?(fe.setAttribute(this.keyName,we),!0):!1},le.prototype.canAdd=function(fe,we){var ke=re.query(fe,re.Scope.BLOT&(this.scope|re.Scope.TYPE));return ke==null?!1:this.whitelist==null?!0:typeof we=="string"?this.whitelist.indexOf(we.replace(/["']/g,""))>-1:this.whitelist.indexOf(we)>-1},le.prototype.remove=function(fe){fe.removeAttribute(this.keyName)},le.prototype.value=function(fe){var we=fe.getAttribute(this.keyName);return this.canAdd(fe,we)&&we?we:""},le}();te.default=oe},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.Code=void 0;var re=function(){function Ne(je,Ie){var De=[],Ve=!0,ze=!1,qe=void 0;try{for(var Xe=je[Symbol.iterator](),tt;!(Ve=(tt=Xe.next()).done)&&(De.push(tt.value),!(Ie&&De.length===Ie));Ve=!0);}catch(at){ze=!0,qe=at}finally{try{!Ve&&Xe.return&&Xe.return()}finally{if(ze)throw qe}}return De}return function(je,Ie){if(Array.isArray(je))return je;if(Symbol.iterator in Object(je))return Ne(je,Ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),oe=function(){function Ne(je,Ie){for(var De=0;De<Ie.length;De++){var Ve=Ie[De];Ve.enumerable=Ve.enumerable||!1,Ve.configurable=!0,"value"in Ve&&(Ve.writable=!0),Object.defineProperty(je,Ve.key,Ve)}}return function(je,Ie,De){return Ie&&Ne(je.prototype,Ie),De&&Ne(je,De),je}}(),le=function Ne(je,Ie,De){je===null&&(je=Function.prototype);var Ve=Object.getOwnPropertyDescriptor(je,Ie);if(Ve===void 0){var ze=Object.getPrototypeOf(je);return ze===null?void 0:Ne(ze,Ie,De)}else{if("value"in Ve)return Ve.value;var qe=Ve.get;return qe===void 0?void 0:qe.call(De)}},fe=ne(2),we=Te(fe),ke=ne(0),ye=Te(ke),ve=ne(4),be=Te(ve),Ce=ne(6),Ee=Te(Ce),Oe=ne(7),Ae=Te(Oe);function Te(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function Se(Ne,je){if(!(Ne instanceof je))throw new TypeError("Cannot call a class as a function")}function $e(Ne,je){if(!Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je&&(typeof je=="object"||typeof je=="function")?je:Ne}function Le(Ne,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof je);Ne.prototype=Object.create(je&&je.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),je&&(Object.setPrototypeOf?Object.setPrototypeOf(Ne,je):Ne.__proto__=je)}var Pe=function(Ne){Le(je,Ne);function je(){return Se(this,je),$e(this,(je.__proto__||Object.getPrototypeOf(je)).apply(this,arguments))}return je}(Ee.default);Pe.blotName="code",Pe.tagName="CODE";var Re=function(Ne){Le(je,Ne);function je(){return Se(this,je),$e(this,(je.__proto__||Object.getPrototypeOf(je)).apply(this,arguments))}return oe(je,[{key:"delta",value:function(){var De=this,Ve=this.domNode.textContent;return Ve.endsWith(`
`)&&(Ve=Ve.slice(0,-1)),Ve.split(`
`).reduce(function(ze,qe){return ze.insert(qe).insert(`
`,De.formats())},new we.default)}},{key:"format",value:function(De,Ve){if(!(De===this.statics.blotName&&Ve)){var ze=this.descendant(Ae.default,this.length()-1),qe=re(ze,1),Xe=qe[0];Xe!=null&&Xe.deleteAt(Xe.length()-1,1),le(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"format",this).call(this,De,Ve)}}},{key:"formatAt",value:function(De,Ve,ze,qe){if(Ve!==0&&!(ye.default.query(ze,ye.default.Scope.BLOCK)==null||ze===this.statics.blotName&&qe===this.statics.formats(this.domNode))){var Xe=this.newlineIndex(De);if(!(Xe<0||Xe>=De+Ve)){var tt=this.newlineIndex(De,!0)+1,at=Xe-tt+1,pt=this.isolate(tt,at),st=pt.next;pt.format(ze,qe),st instanceof je&&st.formatAt(0,De-tt+Ve-at,ze,qe)}}}},{key:"insertAt",value:function(De,Ve,ze){if(ze==null){var qe=this.descendant(Ae.default,De),Xe=re(qe,2),tt=Xe[0],at=Xe[1];tt.insertAt(at,Ve)}}},{key:"length",value:function(){var De=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?De:De+1}},{key:"newlineIndex",value:function(De){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ve)return this.domNode.textContent.slice(0,De).lastIndexOf(`
`);var ze=this.domNode.textContent.slice(De).indexOf(`
`);return ze>-1?De+ze:-1}},{key:"optimize",value:function(De){this.domNode.textContent.endsWith(`
`)||this.appendChild(ye.default.create("text",`
`)),le(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"optimize",this).call(this,De);var Ve=this.next;Ve!=null&&Ve.prev===this&&Ve.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===Ve.statics.formats(Ve.domNode)&&(Ve.optimize(De),Ve.moveChildren(this),Ve.remove())}},{key:"replace",value:function(De){le(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"replace",this).call(this,De),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(Ve){var ze=ye.default.find(Ve);ze==null?Ve.parentNode.removeChild(Ve):ze instanceof ye.default.Embed?ze.remove():ze.unwrap()})}}],[{key:"create",value:function(De){var Ve=le(je.__proto__||Object.getPrototypeOf(je),"create",this).call(this,De);return Ve.setAttribute("spellcheck",!1),Ve}},{key:"formats",value:function(){return!0}}]),je}(be.default);Re.blotName="code-block",Re.tagName="PRE",Re.TAB="  ",te.Code=Pe,te.default=Re},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(st){return typeof st}:function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},oe=function(){function st(it,Ge){var et=[],Je=!0,ft=!1,dt=void 0;try{for(var Qe=it[Symbol.iterator](),ht;!(Je=(ht=Qe.next()).done)&&(et.push(ht.value),!(Ge&&et.length===Ge));Je=!0);}catch(mt){ft=!0,dt=mt}finally{try{!Je&&Qe.return&&Qe.return()}finally{if(ft)throw dt}}return et}return function(it,Ge){if(Array.isArray(it))return it;if(Symbol.iterator in Object(it))return st(it,Ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),le=function(){function st(it,Ge){for(var et=0;et<Ge.length;et++){var Je=Ge[et];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(it,Je.key,Je)}}return function(it,Ge,et){return Ge&&st(it.prototype,Ge),et&&st(it,et),it}}(),fe=ne(2),we=Ve(fe),ke=ne(20),ye=Ve(ke),ve=ne(0),be=Ve(ve),Ce=ne(13),Ee=Ve(Ce),Oe=ne(24),Ae=Ve(Oe),Te=ne(4),Se=Ve(Te),$e=ne(16),Le=Ve($e),Pe=ne(21),Re=Ve(Pe),Ne=ne(11),je=Ve(Ne),Ie=ne(3),De=Ve(Ie);function Ve(st){return st&&st.__esModule?st:{default:st}}function ze(st,it,Ge){return it in st?Object.defineProperty(st,it,{value:Ge,enumerable:!0,configurable:!0,writable:!0}):st[it]=Ge,st}function qe(st,it){if(!(st instanceof it))throw new TypeError("Cannot call a class as a function")}var Xe=/^[ -~]*$/,tt=function(){function st(it){qe(this,st),this.scroll=it,this.delta=this.getDelta()}return le(st,[{key:"applyDelta",value:function(Ge){var et=this,Je=!1;this.scroll.update();var ft=this.scroll.length();return this.scroll.batchStart(),Ge=pt(Ge),Ge.reduce(function(dt,Qe){var ht=Qe.retain||Qe.delete||Qe.insert.length||1,mt=Qe.attributes||{};if(Qe.insert!=null){if(typeof Qe.insert=="string"){var vt=Qe.insert;vt.endsWith(`
`)&&Je&&(Je=!1,vt=vt.slice(0,-1)),dt>=ft&&!vt.endsWith(`
`)&&(Je=!0),et.scroll.insertAt(dt,vt);var wt=et.scroll.line(dt),St=oe(wt,2),At=St[0],Et=St[1],Tt=(0,De.default)({},(0,Te.bubbleFormats)(At));if(At instanceof Se.default){var Ze=At.descendant(be.default.Leaf,Et),rt=oe(Ze,1),lt=rt[0];Tt=(0,De.default)(Tt,(0,Te.bubbleFormats)(lt))}mt=ye.default.attributes.diff(Tt,mt)||{}}else if(re(Qe.insert)==="object"){var nt=Object.keys(Qe.insert)[0];if(nt==null)return dt;et.scroll.insertAt(dt,nt,Qe.insert[nt])}ft+=ht}return Object.keys(mt).forEach(function(Ye){et.scroll.formatAt(dt,ht,Ye,mt[Ye])}),dt+ht},0),Ge.reduce(function(dt,Qe){return typeof Qe.delete=="number"?(et.scroll.deleteAt(dt,Qe.delete),dt):dt+(Qe.retain||Qe.insert.length||1)},0),this.scroll.batchEnd(),this.update(Ge)}},{key:"deleteText",value:function(Ge,et){return this.scroll.deleteAt(Ge,et),this.update(new we.default().retain(Ge).delete(et))}},{key:"formatLine",value:function(Ge,et){var Je=this,ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ft).forEach(function(dt){if(!(Je.scroll.whitelist!=null&&!Je.scroll.whitelist[dt])){var Qe=Je.scroll.lines(Ge,Math.max(et,1)),ht=et;Qe.forEach(function(mt){var vt=mt.length();if(!(mt instanceof Ee.default))mt.format(dt,ft[dt]);else{var wt=Ge-mt.offset(Je.scroll),St=mt.newlineIndex(wt+ht)-wt+1;mt.formatAt(wt,St,dt,ft[dt])}ht-=vt})}}),this.scroll.optimize(),this.update(new we.default().retain(Ge).retain(et,(0,Re.default)(ft)))}},{key:"formatText",value:function(Ge,et){var Je=this,ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ft).forEach(function(dt){Je.scroll.formatAt(Ge,et,dt,ft[dt])}),this.update(new we.default().retain(Ge).retain(et,(0,Re.default)(ft)))}},{key:"getContents",value:function(Ge,et){return this.delta.slice(Ge,Ge+et)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(Ge,et){return Ge.concat(et.delta())},new we.default)}},{key:"getFormat",value:function(Ge){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Je=[],ft=[];et===0?this.scroll.path(Ge).forEach(function(Qe){var ht=oe(Qe,1),mt=ht[0];mt instanceof Se.default?Je.push(mt):mt instanceof be.default.Leaf&&ft.push(mt)}):(Je=this.scroll.lines(Ge,et),ft=this.scroll.descendants(be.default.Leaf,Ge,et));var dt=[Je,ft].map(function(Qe){if(Qe.length===0)return{};for(var ht=(0,Te.bubbleFormats)(Qe.shift());Object.keys(ht).length>0;){var mt=Qe.shift();if(mt==null)return ht;ht=at((0,Te.bubbleFormats)(mt),ht)}return ht});return De.default.apply(De.default,dt)}},{key:"getText",value:function(Ge,et){return this.getContents(Ge,et).filter(function(Je){return typeof Je.insert=="string"}).map(function(Je){return Je.insert}).join("")}},{key:"insertEmbed",value:function(Ge,et,Je){return this.scroll.insertAt(Ge,et,Je),this.update(new we.default().retain(Ge).insert(ze({},et,Je)))}},{key:"insertText",value:function(Ge,et){var Je=this,ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return et=et.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(Ge,et),Object.keys(ft).forEach(function(dt){Je.scroll.formatAt(Ge,et.length,dt,ft[dt])}),this.update(new we.default().retain(Ge).insert(et,(0,Re.default)(ft)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var Ge=this.scroll.children.head;return Ge.statics.blotName!==Se.default.blotName||Ge.children.length>1?!1:Ge.children.head instanceof Le.default}},{key:"removeFormat",value:function(Ge,et){var Je=this.getText(Ge,et),ft=this.scroll.line(Ge+et),dt=oe(ft,2),Qe=dt[0],ht=dt[1],mt=0,vt=new we.default;Qe!=null&&(Qe instanceof Ee.default?mt=Qe.newlineIndex(ht)-ht+1:mt=Qe.length()-ht,vt=Qe.delta().slice(ht,ht+mt-1).insert(`
`));var wt=this.getContents(Ge,et+mt),St=wt.diff(new we.default().insert(Je).concat(vt)),At=new we.default().retain(Ge).concat(St);return this.applyDelta(At)}},{key:"update",value:function(Ge){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ft=this.delta;if(et.length===1&&et[0].type==="characterData"&&et[0].target.data.match(Xe)&&be.default.find(et[0].target)){var dt=be.default.find(et[0].target),Qe=(0,Te.bubbleFormats)(dt),ht=dt.offset(this.scroll),mt=et[0].oldValue.replace(Ae.default.CONTENTS,""),vt=new we.default().insert(mt),wt=new we.default().insert(dt.value()),St=new we.default().retain(ht).concat(vt.diff(wt,Je));Ge=St.reduce(function(At,Et){return Et.insert?At.insert(Et.insert,Qe):At.push(Et)},new we.default),this.delta=ft.compose(Ge)}else this.delta=this.getDelta(),(!Ge||!(0,je.default)(ft.compose(Ge),this.delta))&&(Ge=ft.diff(this.delta,Je));return Ge}}]),st}();function at(st,it){return Object.keys(it).reduce(function(Ge,et){return st[et]==null||(it[et]===st[et]?Ge[et]=it[et]:Array.isArray(it[et])?it[et].indexOf(st[et])<0&&(Ge[et]=it[et].concat([st[et]])):Ge[et]=[it[et],st[et]]),Ge},{})}function pt(st){return st.reduce(function(it,Ge){if(Ge.insert===1){var et=(0,Re.default)(Ge.attributes);return delete et.image,it.insert({image:Ge.attributes.image},et)}if(Ge.attributes!=null&&(Ge.attributes.list===!0||Ge.attributes.bullet===!0)&&(Ge=(0,Re.default)(Ge),Ge.attributes.list?Ge.attributes.list="ordered":(Ge.attributes.list="bullet",delete Ge.attributes.bullet)),typeof Ge.insert=="string"){var Je=Ge.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return it.insert(Je,Ge.attributes)}return it.push(Ge)},new we.default)}te.default=tt},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.Range=void 0;var re=function(){function Ne(je,Ie){var De=[],Ve=!0,ze=!1,qe=void 0;try{for(var Xe=je[Symbol.iterator](),tt;!(Ve=(tt=Xe.next()).done)&&(De.push(tt.value),!(Ie&&De.length===Ie));Ve=!0);}catch(at){ze=!0,qe=at}finally{try{!Ve&&Xe.return&&Xe.return()}finally{if(ze)throw qe}}return De}return function(je,Ie){if(Array.isArray(je))return je;if(Symbol.iterator in Object(je))return Ne(je,Ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),oe=function(){function Ne(je,Ie){for(var De=0;De<Ie.length;De++){var Ve=Ie[De];Ve.enumerable=Ve.enumerable||!1,Ve.configurable=!0,"value"in Ve&&(Ve.writable=!0),Object.defineProperty(je,Ve.key,Ve)}}return function(je,Ie,De){return Ie&&Ne(je.prototype,Ie),De&&Ne(je,De),je}}(),le=ne(0),fe=Ae(le),we=ne(21),ke=Ae(we),ye=ne(11),ve=Ae(ye),be=ne(8),Ce=Ae(be),Ee=ne(10),Oe=Ae(Ee);function Ae(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function Te(Ne){if(Array.isArray(Ne)){for(var je=0,Ie=Array(Ne.length);je<Ne.length;je++)Ie[je]=Ne[je];return Ie}else return Array.from(Ne)}function Se(Ne,je){if(!(Ne instanceof je))throw new TypeError("Cannot call a class as a function")}var $e=(0,Oe.default)("quill:selection"),Le=function Ne(je){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Se(this,Ne),this.index=je,this.length=Ie},Pe=function(){function Ne(je,Ie){var De=this;Se(this,Ne),this.emitter=Ie,this.scroll=je,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=fe.default.create("cursor",this),this.lastRange=this.savedRange=new Le(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){De.mouseDown||setTimeout(De.update.bind(De,Ce.default.sources.USER),1)}),this.emitter.on(Ce.default.events.EDITOR_CHANGE,function(Ve,ze){Ve===Ce.default.events.TEXT_CHANGE&&ze.length()>0&&De.update(Ce.default.sources.SILENT)}),this.emitter.on(Ce.default.events.SCROLL_BEFORE_UPDATE,function(){if(De.hasFocus()){var Ve=De.getNativeRange();Ve!=null&&Ve.start.node!==De.cursor.textNode&&De.emitter.once(Ce.default.events.SCROLL_UPDATE,function(){try{De.setNativeRange(Ve.start.node,Ve.start.offset,Ve.end.node,Ve.end.offset)}catch{}})}}),this.emitter.on(Ce.default.events.SCROLL_OPTIMIZE,function(Ve,ze){if(ze.range){var qe=ze.range,Xe=qe.startNode,tt=qe.startOffset,at=qe.endNode,pt=qe.endOffset;De.setNativeRange(Xe,tt,at,pt)}}),this.update(Ce.default.sources.SILENT)}return oe(Ne,[{key:"handleComposition",value:function(){var Ie=this;this.root.addEventListener("compositionstart",function(){Ie.composing=!0}),this.root.addEventListener("compositionend",function(){if(Ie.composing=!1,Ie.cursor.parent){var De=Ie.cursor.restore();if(!De)return;setTimeout(function(){Ie.setNativeRange(De.startNode,De.startOffset,De.endNode,De.endOffset)},1)}})}},{key:"handleDragging",value:function(){var Ie=this;this.emitter.listenDOM("mousedown",document.body,function(){Ie.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){Ie.mouseDown=!1,Ie.update(Ce.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(Ie,De){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[Ie])){this.scroll.update();var Ve=this.getNativeRange();if(!(Ve==null||!Ve.native.collapsed||fe.default.query(Ie,fe.default.Scope.BLOCK))){if(Ve.start.node!==this.cursor.textNode){var ze=fe.default.find(Ve.start.node,!1);if(ze==null)return;if(ze instanceof fe.default.Leaf){var qe=ze.split(Ve.start.offset);ze.parent.insertBefore(this.cursor,qe)}else ze.insertBefore(this.cursor,Ve.start.node);this.cursor.attach()}this.cursor.format(Ie,De),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(Ie){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ve=this.scroll.length();Ie=Math.min(Ie,Ve-1),De=Math.min(Ie+De,Ve-1)-Ie;var ze=void 0,qe=this.scroll.leaf(Ie),Xe=re(qe,2),tt=Xe[0],at=Xe[1];if(tt==null)return null;var pt=tt.position(at,!0),st=re(pt,2);ze=st[0],at=st[1];var it=document.createRange();if(De>0){it.setStart(ze,at);var Ge=this.scroll.leaf(Ie+De),et=re(Ge,2);if(tt=et[0],at=et[1],tt==null)return null;var Je=tt.position(at,!0),ft=re(Je,2);return ze=ft[0],at=ft[1],it.setEnd(ze,at),it.getBoundingClientRect()}else{var dt="left",Qe=void 0;return ze instanceof Text?(at<ze.data.length?(it.setStart(ze,at),it.setEnd(ze,at+1)):(it.setStart(ze,at-1),it.setEnd(ze,at),dt="right"),Qe=it.getBoundingClientRect()):(Qe=tt.domNode.getBoundingClientRect(),at>0&&(dt="right")),{bottom:Qe.top+Qe.height,height:Qe.height,left:Qe[dt],right:Qe[dt],top:Qe.top,width:0}}}},{key:"getNativeRange",value:function(){var Ie=document.getSelection();if(Ie==null||Ie.rangeCount<=0)return null;var De=Ie.getRangeAt(0);if(De==null)return null;var Ve=this.normalizeNative(De);return $e.info("getNativeRange",Ve),Ve}},{key:"getRange",value:function(){var Ie=this.getNativeRange();if(Ie==null)return[null,null];var De=this.normalizedToRange(Ie);return[De,Ie]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(Ie){var De=this,Ve=[[Ie.start.node,Ie.start.offset]];Ie.native.collapsed||Ve.push([Ie.end.node,Ie.end.offset]);var ze=Ve.map(function(tt){var at=re(tt,2),pt=at[0],st=at[1],it=fe.default.find(pt,!0),Ge=it.offset(De.scroll);return st===0?Ge:it instanceof fe.default.Container?Ge+it.length():Ge+it.index(pt,st)}),qe=Math.min(Math.max.apply(Math,Te(ze)),this.scroll.length()-1),Xe=Math.min.apply(Math,[qe].concat(Te(ze)));return new Le(Xe,qe-Xe)}},{key:"normalizeNative",value:function(Ie){if(!Re(this.root,Ie.startContainer)||!Ie.collapsed&&!Re(this.root,Ie.endContainer))return null;var De={start:{node:Ie.startContainer,offset:Ie.startOffset},end:{node:Ie.endContainer,offset:Ie.endOffset},native:Ie};return[De.start,De.end].forEach(function(Ve){for(var ze=Ve.node,qe=Ve.offset;!(ze instanceof Text)&&ze.childNodes.length>0;)if(ze.childNodes.length>qe)ze=ze.childNodes[qe],qe=0;else if(ze.childNodes.length===qe)ze=ze.lastChild,qe=ze instanceof Text?ze.data.length:ze.childNodes.length+1;else break;Ve.node=ze,Ve.offset=qe}),De}},{key:"rangeToNative",value:function(Ie){var De=this,Ve=Ie.collapsed?[Ie.index]:[Ie.index,Ie.index+Ie.length],ze=[],qe=this.scroll.length();return Ve.forEach(function(Xe,tt){Xe=Math.min(qe-1,Xe);var at=void 0,pt=De.scroll.leaf(Xe),st=re(pt,2),it=st[0],Ge=st[1],et=it.position(Ge,tt!==0),Je=re(et,2);at=Je[0],Ge=Je[1],ze.push(at,Ge)}),ze.length<2&&(ze=ze.concat(ze)),ze}},{key:"scrollIntoView",value:function(Ie){var De=this.lastRange;if(De!=null){var Ve=this.getBounds(De.index,De.length);if(Ve!=null){var ze=this.scroll.length()-1,qe=this.scroll.line(Math.min(De.index,ze)),Xe=re(qe,1),tt=Xe[0],at=tt;if(De.length>0){var pt=this.scroll.line(Math.min(De.index+De.length,ze)),st=re(pt,1);at=st[0]}if(!(tt==null||at==null)){var it=Ie.getBoundingClientRect();Ve.top<it.top?Ie.scrollTop-=it.top-Ve.top:Ve.bottom>it.bottom&&(Ie.scrollTop+=Ve.bottom-it.bottom)}}}}},{key:"setNativeRange",value:function(Ie,De){var Ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ie,ze=arguments.length>3&&arguments[3]!==void 0?arguments[3]:De,qe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if($e.info("setNativeRange",Ie,De,Ve,ze),!(Ie!=null&&(this.root.parentNode==null||Ie.parentNode==null||Ve.parentNode==null))){var Xe=document.getSelection();if(Xe!=null)if(Ie!=null){this.hasFocus()||this.root.focus();var tt=(this.getNativeRange()||{}).native;if(tt==null||qe||Ie!==tt.startContainer||De!==tt.startOffset||Ve!==tt.endContainer||ze!==tt.endOffset){Ie.tagName=="BR"&&(De=[].indexOf.call(Ie.parentNode.childNodes,Ie),Ie=Ie.parentNode),Ve.tagName=="BR"&&(ze=[].indexOf.call(Ve.parentNode.childNodes,Ve),Ve=Ve.parentNode);var at=document.createRange();at.setStart(Ie,De),at.setEnd(Ve,ze),Xe.removeAllRanges(),Xe.addRange(at)}}else Xe.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(Ie){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.default.sources.API;if(typeof De=="string"&&(Ve=De,De=!1),$e.info("setRange",Ie),Ie!=null){var ze=this.rangeToNative(Ie);this.setNativeRange.apply(this,Te(ze).concat([De]))}else this.setNativeRange(null);this.update(Ve)}},{key:"update",value:function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ce.default.sources.USER,De=this.lastRange,Ve=this.getRange(),ze=re(Ve,2),qe=ze[0],Xe=ze[1];if(this.lastRange=qe,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,ve.default)(De,this.lastRange)){var tt;!this.composing&&Xe!=null&&Xe.native.collapsed&&Xe.start.node!==this.cursor.textNode&&this.cursor.restore();var at=[Ce.default.events.SELECTION_CHANGE,(0,ke.default)(this.lastRange),(0,ke.default)(De),Ie];if((tt=this.emitter).emit.apply(tt,[Ce.default.events.EDITOR_CHANGE].concat(at)),Ie!==Ce.default.sources.SILENT){var pt;(pt=this.emitter).emit.apply(pt,at)}}}}]),Ne}();function Re(Ne,je){try{je.parentNode}catch{return!1}return je instanceof Text&&(je=je.parentNode),Ne.contains(je)}te.Range=Le,te.default=Pe},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ce(Ee,Oe){for(var Ae=0;Ae<Oe.length;Ae++){var Te=Oe[Ae];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(Ee,Te.key,Te)}}return function(Ee,Oe,Ae){return Oe&&Ce(Ee.prototype,Oe),Ae&&Ce(Ee,Ae),Ee}}(),oe=function Ce(Ee,Oe,Ae){Ee===null&&(Ee=Function.prototype);var Te=Object.getOwnPropertyDescriptor(Ee,Oe);if(Te===void 0){var Se=Object.getPrototypeOf(Ee);return Se===null?void 0:Ce(Se,Oe,Ae)}else{if("value"in Te)return Te.value;var $e=Te.get;return $e===void 0?void 0:$e.call(Ae)}},le=ne(0),fe=we(le);function we(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function ke(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")}function ye(Ce,Ee){if(!Ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:Ce}function ve(Ce,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);Ce.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ce,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Ce,Ee):Ce.__proto__=Ee)}var be=function(Ce){ve(Ee,Ce);function Ee(){return ke(this,Ee),ye(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).apply(this,arguments))}return re(Ee,[{key:"insertInto",value:function(Ae,Te){Ae.children.length===0?oe(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"insertInto",this).call(this,Ae,Te):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),Ee}(fe.default.Embed);be.blotName="break",be.tagName="BR",te.default=be},function(X,te,ne){var re=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,be){ve.__proto__=be}||function(ve,be){for(var Ce in be)be.hasOwnProperty(Ce)&&(ve[Ce]=be[Ce])};return function(ve,be){ye(ve,be);function Ce(){this.constructor=ve}ve.prototype=be===null?Object.create(be):(Ce.prototype=be.prototype,new Ce)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(44),le=ne(30),fe=ne(1),we=function(ye){re(ve,ye);function ve(be){var Ce=ye.call(this,be)||this;return Ce.build(),Ce}return ve.prototype.appendChild=function(be){this.insertBefore(be)},ve.prototype.attach=function(){ye.prototype.attach.call(this),this.children.forEach(function(be){be.attach()})},ve.prototype.build=function(){var be=this;this.children=new oe.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(Ce){try{var Ee=ke(Ce);be.insertBefore(Ee,be.children.head||void 0)}catch(Oe){if(Oe instanceof fe.ParchmentError)return;throw Oe}})},ve.prototype.deleteAt=function(be,Ce){if(be===0&&Ce===this.length())return this.remove();this.children.forEachAt(be,Ce,function(Ee,Oe,Ae){Ee.deleteAt(Oe,Ae)})},ve.prototype.descendant=function(be,Ce){var Ee=this.children.find(Ce),Oe=Ee[0],Ae=Ee[1];return be.blotName==null&&be(Oe)||be.blotName!=null&&Oe instanceof be?[Oe,Ae]:Oe instanceof ve?Oe.descendant(be,Ae):[null,-1]},ve.prototype.descendants=function(be,Ce,Ee){Ce===void 0&&(Ce=0),Ee===void 0&&(Ee=Number.MAX_VALUE);var Oe=[],Ae=Ee;return this.children.forEachAt(Ce,Ee,function(Te,Se,$e){(be.blotName==null&&be(Te)||be.blotName!=null&&Te instanceof be)&&Oe.push(Te),Te instanceof ve&&(Oe=Oe.concat(Te.descendants(be,Se,Ae))),Ae-=$e}),Oe},ve.prototype.detach=function(){this.children.forEach(function(be){be.detach()}),ye.prototype.detach.call(this)},ve.prototype.formatAt=function(be,Ce,Ee,Oe){this.children.forEachAt(be,Ce,function(Ae,Te,Se){Ae.formatAt(Te,Se,Ee,Oe)})},ve.prototype.insertAt=function(be,Ce,Ee){var Oe=this.children.find(be),Ae=Oe[0],Te=Oe[1];if(Ae)Ae.insertAt(Te,Ce,Ee);else{var Se=Ee==null?fe.create("text",Ce):fe.create(Ce,Ee);this.appendChild(Se)}},ve.prototype.insertBefore=function(be,Ce){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(Ee){return be instanceof Ee}))throw new fe.ParchmentError("Cannot insert "+be.statics.blotName+" into "+this.statics.blotName);be.insertInto(this,Ce)},ve.prototype.length=function(){return this.children.reduce(function(be,Ce){return be+Ce.length()},0)},ve.prototype.moveChildren=function(be,Ce){this.children.forEach(function(Ee){be.insertBefore(Ee,Ce)})},ve.prototype.optimize=function(be){if(ye.prototype.optimize.call(this,be),this.children.length===0)if(this.statics.defaultChild!=null){var Ce=fe.create(this.statics.defaultChild);this.appendChild(Ce),Ce.optimize(be)}else this.remove()},ve.prototype.path=function(be,Ce){Ce===void 0&&(Ce=!1);var Ee=this.children.find(be,Ce),Oe=Ee[0],Ae=Ee[1],Te=[[this,be]];return Oe instanceof ve?Te.concat(Oe.path(Ae,Ce)):(Oe!=null&&Te.push([Oe,Ae]),Te)},ve.prototype.removeChild=function(be){this.children.remove(be)},ve.prototype.replace=function(be){be instanceof ve&&be.moveChildren(this),ye.prototype.replace.call(this,be)},ve.prototype.split=function(be,Ce){if(Ce===void 0&&(Ce=!1),!Ce){if(be===0)return this;if(be===this.length())return this.next}var Ee=this.clone();return this.parent.insertBefore(Ee,this.next),this.children.forEachAt(be,this.length(),function(Oe,Ae,Te){Oe=Oe.split(Ae,Ce),Ee.appendChild(Oe)}),Ee},ve.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},ve.prototype.update=function(be,Ce){var Ee=this,Oe=[],Ae=[];be.forEach(function(Te){Te.target===Ee.domNode&&Te.type==="childList"&&(Oe.push.apply(Oe,Te.addedNodes),Ae.push.apply(Ae,Te.removedNodes))}),Ae.forEach(function(Te){if(!(Te.parentNode!=null&&Te.tagName!=="IFRAME"&&document.body.compareDocumentPosition(Te)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var Se=fe.find(Te);Se!=null&&(Se.domNode.parentNode==null||Se.domNode.parentNode===Ee.domNode)&&Se.detach()}}),Oe.filter(function(Te){return Te.parentNode==Ee.domNode}).sort(function(Te,Se){return Te===Se?0:Te.compareDocumentPosition(Se)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(Te){var Se=null;Te.nextSibling!=null&&(Se=fe.find(Te.nextSibling));var $e=ke(Te);($e.next!=Se||$e.next==null)&&($e.parent!=null&&$e.parent.removeChild(Ee),Ee.insertBefore($e,Se||void 0))})},ve}(le.default);function ke(ye){var ve=fe.find(ye);if(ve==null)try{ve=fe.create(ye)}catch{ve=fe.create(fe.Scope.INLINE),[].slice.call(ye.childNodes).forEach(function(Ce){ve.domNode.appendChild(Ce)}),ye.parentNode&&ye.parentNode.replaceChild(ve.domNode,ye),ve.attach()}return ve}te.default=we},function(X,te,ne){var re=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,be){ve.__proto__=be}||function(ve,be){for(var Ce in be)be.hasOwnProperty(Ce)&&(ve[Ce]=be[Ce])};return function(ve,be){ye(ve,be);function Ce(){this.constructor=ve}ve.prototype=be===null?Object.create(be):(Ce.prototype=be.prototype,new Ce)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(12),le=ne(31),fe=ne(17),we=ne(1),ke=function(ye){re(ve,ye);function ve(be){var Ce=ye.call(this,be)||this;return Ce.attributes=new le.default(Ce.domNode),Ce}return ve.formats=function(be){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return be.tagName.toLowerCase()},ve.prototype.format=function(be,Ce){var Ee=we.query(be);Ee instanceof oe.default?this.attributes.attribute(Ee,Ce):Ce&&Ee!=null&&(be!==this.statics.blotName||this.formats()[be]!==Ce)&&this.replaceWith(be,Ce)},ve.prototype.formats=function(){var be=this.attributes.values(),Ce=this.statics.formats(this.domNode);return Ce!=null&&(be[this.statics.blotName]=Ce),be},ve.prototype.replaceWith=function(be,Ce){var Ee=ye.prototype.replaceWith.call(this,be,Ce);return this.attributes.copy(Ee),Ee},ve.prototype.update=function(be,Ce){var Ee=this;ye.prototype.update.call(this,be,Ce),be.some(function(Oe){return Oe.target===Ee.domNode&&Oe.type==="attributes"})&&this.attributes.build()},ve.prototype.wrap=function(be,Ce){var Ee=ye.prototype.wrap.call(this,be,Ce);return Ee instanceof ve&&Ee.statics.scope===this.statics.scope&&this.attributes.move(Ee),Ee},ve}(fe.default);te.default=ke},function(X,te,ne){var re=this&&this.__extends||function(){var we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,ye){ke.__proto__=ye}||function(ke,ye){for(var ve in ye)ye.hasOwnProperty(ve)&&(ke[ve]=ye[ve])};return function(ke,ye){we(ke,ye);function ve(){this.constructor=ke}ke.prototype=ye===null?Object.create(ye):(ve.prototype=ye.prototype,new ve)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(30),le=ne(1),fe=function(we){re(ke,we);function ke(){return we!==null&&we.apply(this,arguments)||this}return ke.value=function(ye){return!0},ke.prototype.index=function(ye,ve){return this.domNode===ye||this.domNode.compareDocumentPosition(ye)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(ve,1):-1},ke.prototype.position=function(ye,ve){var be=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return ye>0&&(be+=1),[this.parent.domNode,be]},ke.prototype.value=function(){var ye;return ye={},ye[this.statics.blotName]=this.statics.value(this.domNode)||!0,ye},ke.scope=le.Scope.INLINE_BLOT,ke}(oe.default);te.default=fe},function(X,te,ne){var re=ne(11),oe=ne(3),le={attributes:{compose:function(we,ke,ye){typeof we!="object"&&(we={}),typeof ke!="object"&&(ke={});var ve=oe(!0,{},ke);ye||(ve=Object.keys(ve).reduce(function(Ce,Ee){return ve[Ee]!=null&&(Ce[Ee]=ve[Ee]),Ce},{}));for(var be in we)we[be]!==void 0&&ke[be]===void 0&&(ve[be]=we[be]);return Object.keys(ve).length>0?ve:void 0},diff:function(we,ke){typeof we!="object"&&(we={}),typeof ke!="object"&&(ke={});var ye=Object.keys(we).concat(Object.keys(ke)).reduce(function(ve,be){return re(we[be],ke[be])||(ve[be]=ke[be]===void 0?null:ke[be]),ve},{});return Object.keys(ye).length>0?ye:void 0},transform:function(we,ke,ye){if(typeof we!="object")return ke;if(typeof ke=="object"){if(!ye)return ke;var ve=Object.keys(ke).reduce(function(be,Ce){return we[Ce]===void 0&&(be[Ce]=ke[Ce]),be},{});return Object.keys(ve).length>0?ve:void 0}}},iterator:function(we){return new fe(we)},length:function(we){return typeof we.delete=="number"?we.delete:typeof we.retain=="number"?we.retain:typeof we.insert=="string"?we.insert.length:1}};function fe(we){this.ops=we,this.index=0,this.offset=0}fe.prototype.hasNext=function(){return this.peekLength()<1/0},fe.prototype.next=function(we){we||(we=1/0);var ke=this.ops[this.index];if(ke){var ye=this.offset,ve=le.length(ke);if(we>=ve-ye?(we=ve-ye,this.index+=1,this.offset=0):this.offset+=we,typeof ke.delete=="number")return{delete:we};var be={};return ke.attributes&&(be.attributes=ke.attributes),typeof ke.retain=="number"?be.retain=we:typeof ke.insert=="string"?be.insert=ke.insert.substr(ye,we):be.insert=ke.insert,be}else return{retain:1/0}},fe.prototype.peek=function(){return this.ops[this.index]},fe.prototype.peekLength=function(){return this.ops[this.index]?le.length(this.ops[this.index])-this.offset:1/0},fe.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},fe.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var we=this.offset,ke=this.index,ye=this.next(),ve=this.ops.slice(this.index);return this.offset=we,this.index=ke,[ye].concat(ve)}else return[]},X.exports=le},function(X,te){var ne=function(){function re(Ee,Oe){return Oe!=null&&Ee instanceof Oe}var oe;try{oe=Map}catch{oe=function(){}}var le;try{le=Set}catch{le=function(){}}var fe;try{fe=Promise}catch{fe=function(){}}function we(Ee,Oe,Ae,Te,Se){typeof Oe=="object"&&(Ae=Oe.depth,Te=Oe.prototype,Se=Oe.includeNonEnumerable,Oe=Oe.circular);var $e=[],Le=[],Pe=typeof Buffer<"u";typeof Oe>"u"&&(Oe=!0),typeof Ae>"u"&&(Ae=1/0);function Re(Ne,je){if(Ne===null)return null;if(je===0)return Ne;var Ie,De;if(typeof Ne!="object")return Ne;if(re(Ne,oe))Ie=new oe;else if(re(Ne,le))Ie=new le;else if(re(Ne,fe))Ie=new fe(function(it,Ge){Ne.then(function(et){it(Re(et,je-1))},function(et){Ge(Re(et,je-1))})});else if(we.__isArray(Ne))Ie=[];else if(we.__isRegExp(Ne))Ie=new RegExp(Ne.source,Ce(Ne)),Ne.lastIndex&&(Ie.lastIndex=Ne.lastIndex);else if(we.__isDate(Ne))Ie=new Date(Ne.getTime());else{if(Pe&&Buffer.isBuffer(Ne))return Buffer.allocUnsafe?Ie=Buffer.allocUnsafe(Ne.length):Ie=new Buffer(Ne.length),Ne.copy(Ie),Ie;re(Ne,Error)?Ie=Object.create(Ne):typeof Te>"u"?(De=Object.getPrototypeOf(Ne),Ie=Object.create(De)):(Ie=Object.create(Te),De=Te)}if(Oe){var Ve=$e.indexOf(Ne);if(Ve!=-1)return Le[Ve];$e.push(Ne),Le.push(Ie)}re(Ne,oe)&&Ne.forEach(function(it,Ge){var et=Re(Ge,je-1),Je=Re(it,je-1);Ie.set(et,Je)}),re(Ne,le)&&Ne.forEach(function(it){var Ge=Re(it,je-1);Ie.add(Ge)});for(var ze in Ne){var qe;De&&(qe=Object.getOwnPropertyDescriptor(De,ze)),!(qe&&qe.set==null)&&(Ie[ze]=Re(Ne[ze],je-1))}if(Object.getOwnPropertySymbols)for(var Xe=Object.getOwnPropertySymbols(Ne),ze=0;ze<Xe.length;ze++){var tt=Xe[ze],at=Object.getOwnPropertyDescriptor(Ne,tt);at&&!at.enumerable&&!Se||(Ie[tt]=Re(Ne[tt],je-1),at.enumerable||Object.defineProperty(Ie,tt,{enumerable:!1}))}if(Se)for(var pt=Object.getOwnPropertyNames(Ne),ze=0;ze<pt.length;ze++){var st=pt[ze],at=Object.getOwnPropertyDescriptor(Ne,st);at&&at.enumerable||(Ie[st]=Re(Ne[st],je-1),Object.defineProperty(Ie,st,{enumerable:!1}))}return Ie}return Re(Ee,Ae)}we.clonePrototype=function(Oe){if(Oe===null)return null;var Ae=function(){};return Ae.prototype=Oe,new Ae};function ke(Ee){return Object.prototype.toString.call(Ee)}we.__objToStr=ke;function ye(Ee){return typeof Ee=="object"&&ke(Ee)==="[object Date]"}we.__isDate=ye;function ve(Ee){return typeof Ee=="object"&&ke(Ee)==="[object Array]"}we.__isArray=ve;function be(Ee){return typeof Ee=="object"&&ke(Ee)==="[object RegExp]"}we.__isRegExp=be;function Ce(Ee){var Oe="";return Ee.global&&(Oe+="g"),Ee.ignoreCase&&(Oe+="i"),Ee.multiline&&(Oe+="m"),Oe}return we.__getRegExpFlags=Ce,we}();typeof X=="object"&&X.exports&&(X.exports=ne)},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ie(De,Ve){var ze=[],qe=!0,Xe=!1,tt=void 0;try{for(var at=De[Symbol.iterator](),pt;!(qe=(pt=at.next()).done)&&(ze.push(pt.value),!(Ve&&ze.length===Ve));qe=!0);}catch(st){Xe=!0,tt=st}finally{try{!qe&&at.return&&at.return()}finally{if(Xe)throw tt}}return ze}return function(De,Ve){if(Array.isArray(De))return De;if(Symbol.iterator in Object(De))return Ie(De,Ve);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),oe=function(){function Ie(De,Ve){for(var ze=0;ze<Ve.length;ze++){var qe=Ve[ze];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(De,qe.key,qe)}}return function(De,Ve,ze){return Ve&&Ie(De.prototype,Ve),ze&&Ie(De,ze),De}}(),le=function Ie(De,Ve,ze){De===null&&(De=Function.prototype);var qe=Object.getOwnPropertyDescriptor(De,Ve);if(qe===void 0){var Xe=Object.getPrototypeOf(De);return Xe===null?void 0:Ie(Xe,Ve,ze)}else{if("value"in qe)return qe.value;var tt=qe.get;return tt===void 0?void 0:tt.call(ze)}},fe=ne(0),we=$e(fe),ke=ne(8),ye=$e(ke),ve=ne(4),be=$e(ve),Ce=ne(16),Ee=$e(Ce),Oe=ne(13),Ae=$e(Oe),Te=ne(25),Se=$e(Te);function $e(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}function Le(Ie,De){if(!(Ie instanceof De))throw new TypeError("Cannot call a class as a function")}function Pe(Ie,De){if(!Ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return De&&(typeof De=="object"||typeof De=="function")?De:Ie}function Re(Ie,De){if(typeof De!="function"&&De!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof De);Ie.prototype=Object.create(De&&De.prototype,{constructor:{value:Ie,enumerable:!1,writable:!0,configurable:!0}}),De&&(Object.setPrototypeOf?Object.setPrototypeOf(Ie,De):Ie.__proto__=De)}function Ne(Ie){return Ie instanceof be.default||Ie instanceof ve.BlockEmbed}var je=function(Ie){Re(De,Ie);function De(Ve,ze){Le(this,De);var qe=Pe(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,Ve));return qe.emitter=ze.emitter,Array.isArray(ze.whitelist)&&(qe.whitelist=ze.whitelist.reduce(function(Xe,tt){return Xe[tt]=!0,Xe},{})),qe.domNode.addEventListener("DOMNodeInserted",function(){}),qe.optimize(),qe.enable(),qe}return oe(De,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(ze,qe){var Xe=this.line(ze),tt=re(Xe,2),at=tt[0],pt=tt[1],st=this.line(ze+qe),it=re(st,1),Ge=it[0];if(le(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"deleteAt",this).call(this,ze,qe),Ge!=null&&at!==Ge&&pt>0){if(at instanceof ve.BlockEmbed||Ge instanceof ve.BlockEmbed){this.optimize();return}if(at instanceof Ae.default){var et=at.newlineIndex(at.length(),!0);if(et>-1&&(at=at.split(et+1),at===Ge)){this.optimize();return}}else if(Ge instanceof Ae.default){var Je=Ge.newlineIndex(0);Je>-1&&Ge.split(Je+1)}var ft=Ge.children.head instanceof Ee.default?null:Ge.children.head;at.moveChildren(Ge,ft),at.remove()}this.optimize()}},{key:"enable",value:function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",ze)}},{key:"formatAt",value:function(ze,qe,Xe,tt){this.whitelist!=null&&!this.whitelist[Xe]||(le(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"formatAt",this).call(this,ze,qe,Xe,tt),this.optimize())}},{key:"insertAt",value:function(ze,qe,Xe){if(!(Xe!=null&&this.whitelist!=null&&!this.whitelist[qe])){if(ze>=this.length())if(Xe==null||we.default.query(qe,we.default.Scope.BLOCK)==null){var tt=we.default.create(this.statics.defaultChild);this.appendChild(tt),Xe==null&&qe.endsWith(`
`)&&(qe=qe.slice(0,-1)),tt.insertAt(0,qe,Xe)}else{var at=we.default.create(qe,Xe);this.appendChild(at)}else le(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"insertAt",this).call(this,ze,qe,Xe);this.optimize()}}},{key:"insertBefore",value:function(ze,qe){if(ze.statics.scope===we.default.Scope.INLINE_BLOT){var Xe=we.default.create(this.statics.defaultChild);Xe.appendChild(ze),ze=Xe}le(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"insertBefore",this).call(this,ze,qe)}},{key:"leaf",value:function(ze){return this.path(ze).pop()||[null,-1]}},{key:"line",value:function(ze){return ze===this.length()?this.line(ze-1):this.descendant(Ne,ze)}},{key:"lines",value:function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Xe=function tt(at,pt,st){var it=[],Ge=st;return at.children.forEachAt(pt,st,function(et,Je,ft){Ne(et)?it.push(et):et instanceof we.default.Container&&(it=it.concat(tt(et,Je,Ge))),Ge-=ft}),it};return Xe(this,ze,qe)}},{key:"optimize",value:function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(le(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"optimize",this).call(this,ze,qe),ze.length>0&&this.emitter.emit(ye.default.events.SCROLL_OPTIMIZE,ze,qe))}},{key:"path",value:function(ze){return le(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"path",this).call(this,ze).slice(1)}},{key:"update",value:function(ze){if(this.batch!==!0){var qe=ye.default.sources.USER;typeof ze=="string"&&(qe=ze),Array.isArray(ze)||(ze=this.observer.takeRecords()),ze.length>0&&this.emitter.emit(ye.default.events.SCROLL_BEFORE_UPDATE,qe,ze),le(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"update",this).call(this,ze.concat([])),ze.length>0&&this.emitter.emit(ye.default.events.SCROLL_UPDATE,qe,ze)}}}]),De}(we.default.Scroll);je.blotName="scroll",je.className="ql-editor",je.tagName="DIV",je.defaultChild="block",je.allowedChildren=[be.default,ve.BlockEmbed,Se.default],te.default=je},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.SHORTKEY=te.default=void 0;var re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Qe){return typeof Qe}:function(Qe){return Qe&&typeof Symbol=="function"&&Qe.constructor===Symbol&&Qe!==Symbol.prototype?"symbol":typeof Qe},oe=function(){function Qe(ht,mt){var vt=[],wt=!0,St=!1,At=void 0;try{for(var Et=ht[Symbol.iterator](),Tt;!(wt=(Tt=Et.next()).done)&&(vt.push(Tt.value),!(mt&&vt.length===mt));wt=!0);}catch(Ze){St=!0,At=Ze}finally{try{!wt&&Et.return&&Et.return()}finally{if(St)throw At}}return vt}return function(ht,mt){if(Array.isArray(ht))return ht;if(Symbol.iterator in Object(ht))return Qe(ht,mt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),le=function(){function Qe(ht,mt){for(var vt=0;vt<mt.length;vt++){var wt=mt[vt];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(ht,wt.key,wt)}}return function(ht,mt,vt){return mt&&Qe(ht.prototype,mt),vt&&Qe(ht,vt),ht}}(),fe=ne(21),we=Ie(fe),ke=ne(11),ye=Ie(ke),ve=ne(3),be=Ie(ve),Ce=ne(2),Ee=Ie(Ce),Oe=ne(20),Ae=Ie(Oe),Te=ne(0),Se=Ie(Te),$e=ne(5),Le=Ie($e),Pe=ne(10),Re=Ie(Pe),Ne=ne(9),je=Ie(Ne);function Ie(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}}function De(Qe,ht,mt){return ht in Qe?Object.defineProperty(Qe,ht,{value:mt,enumerable:!0,configurable:!0,writable:!0}):Qe[ht]=mt,Qe}function Ve(Qe,ht){if(!(Qe instanceof ht))throw new TypeError("Cannot call a class as a function")}function ze(Qe,ht){if(!Qe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ht&&(typeof ht=="object"||typeof ht=="function")?ht:Qe}function qe(Qe,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ht);Qe.prototype=Object.create(ht&&ht.prototype,{constructor:{value:Qe,enumerable:!1,writable:!0,configurable:!0}}),ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Qe,ht):Qe.__proto__=ht)}var Xe=(0,Re.default)("quill:keyboard"),tt=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",at=function(Qe){qe(ht,Qe),le(ht,null,[{key:"match",value:function(vt,wt){return wt=dt(wt),["altKey","ctrlKey","metaKey","shiftKey"].some(function(St){return!!wt[St]!==vt[St]&&wt[St]!==null})?!1:wt.key===(vt.which||vt.keyCode)}}]);function ht(mt,vt){Ve(this,ht);var wt=ze(this,(ht.__proto__||Object.getPrototypeOf(ht)).call(this,mt,vt));return wt.bindings={},Object.keys(wt.options.bindings).forEach(function(St){St==="list autofill"&&mt.scroll.whitelist!=null&&!mt.scroll.whitelist.list||wt.options.bindings[St]&&wt.addBinding(wt.options.bindings[St])}),wt.addBinding({key:ht.keys.ENTER,shiftKey:null},et),wt.addBinding({key:ht.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(wt.addBinding({key:ht.keys.BACKSPACE},{collapsed:!0},st),wt.addBinding({key:ht.keys.DELETE},{collapsed:!0},it)):(wt.addBinding({key:ht.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},st),wt.addBinding({key:ht.keys.DELETE},{collapsed:!0,suffix:/^.?$/},it)),wt.addBinding({key:ht.keys.BACKSPACE},{collapsed:!1},Ge),wt.addBinding({key:ht.keys.DELETE},{collapsed:!1},Ge),wt.addBinding({key:ht.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},st),wt.listen(),wt}return le(ht,[{key:"addBinding",value:function(vt){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},At=dt(vt);if(At==null||At.key==null)return Xe.warn("Attempted to add invalid keyboard binding",At);typeof wt=="function"&&(wt={handler:wt}),typeof St=="function"&&(St={handler:St}),At=(0,be.default)(At,wt,St),this.bindings[At.key]=this.bindings[At.key]||[],this.bindings[At.key].push(At)}},{key:"listen",value:function(){var vt=this;this.quill.root.addEventListener("keydown",function(wt){if(!wt.defaultPrevented){var St=wt.which||wt.keyCode,At=(vt.bindings[St]||[]).filter(function(We){return ht.match(wt,We)});if(At.length!==0){var Et=vt.quill.getSelection();if(!(Et==null||!vt.quill.hasFocus())){var Tt=vt.quill.getLine(Et.index),Ze=oe(Tt,2),rt=Ze[0],lt=Ze[1],nt=vt.quill.getLeaf(Et.index),Ye=oe(nt,2),Be=Ye[0],Ue=Ye[1],He=Et.length===0?[Be,Ue]:vt.quill.getLeaf(Et.index+Et.length),ot=oe(He,2),ut=ot[0],gt=ot[1],$t=Be instanceof Se.default.Text?Be.value().slice(0,Ue):"",Ke=ut instanceof Se.default.Text?ut.value().slice(gt):"",Me={collapsed:Et.length===0,empty:Et.length===0&&rt.length()<=1,format:vt.quill.getFormat(Et),offset:lt,prefix:$t,suffix:Ke},Fe=At.some(function(We){if(We.collapsed!=null&&We.collapsed!==Me.collapsed||We.empty!=null&&We.empty!==Me.empty||We.offset!=null&&We.offset!==Me.offset)return!1;if(Array.isArray(We.format)){if(We.format.every(function(ct){return Me.format[ct]==null}))return!1}else if(re(We.format)==="object"&&!Object.keys(We.format).every(function(ct){return We.format[ct]===!0?Me.format[ct]!=null:We.format[ct]===!1?Me.format[ct]==null:(0,ye.default)(We.format[ct],Me.format[ct])}))return!1;return We.prefix!=null&&!We.prefix.test(Me.prefix)||We.suffix!=null&&!We.suffix.test(Me.suffix)?!1:We.handler.call(vt,Et,Me)!==!0});Fe&&wt.preventDefault()}}}})}}]),ht}(je.default);at.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},at.DEFAULTS={bindings:{bold:ft("bold"),italic:ft("italic"),underline:ft("underline"),indent:{key:at.keys.TAB,format:["blockquote","indent","list"],handler:function(ht,mt){if(mt.collapsed&&mt.offset!==0)return!0;this.quill.format("indent","+1",Le.default.sources.USER)}},outdent:{key:at.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ht,mt){if(mt.collapsed&&mt.offset!==0)return!0;this.quill.format("indent","-1",Le.default.sources.USER)}},"outdent backspace":{key:at.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ht,mt){mt.format.indent!=null?this.quill.format("indent","-1",Le.default.sources.USER):mt.format.list!=null&&this.quill.format("list",!1,Le.default.sources.USER)}},"indent code-block":Je(!0),"outdent code-block":Je(!1),"remove tab":{key:at.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ht){this.quill.deleteText(ht.index-1,1,Le.default.sources.USER)}},tab:{key:at.keys.TAB,handler:function(ht){this.quill.history.cutoff();var mt=new Ee.default().retain(ht.index).delete(ht.length).insert("	");this.quill.updateContents(mt,Le.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ht.index+1,Le.default.sources.SILENT)}},"list empty enter":{key:at.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ht,mt){this.quill.format("list",!1,Le.default.sources.USER),mt.format.indent&&this.quill.format("indent",!1,Le.default.sources.USER)}},"checklist enter":{key:at.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ht){var mt=this.quill.getLine(ht.index),vt=oe(mt,2),wt=vt[0],St=vt[1],At=(0,be.default)({},wt.formats(),{list:"checked"}),Et=new Ee.default().retain(ht.index).insert(`
`,At).retain(wt.length()-St-1).retain(1,{list:"unchecked"});this.quill.updateContents(Et,Le.default.sources.USER),this.quill.setSelection(ht.index+1,Le.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:at.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ht,mt){var vt=this.quill.getLine(ht.index),wt=oe(vt,2),St=wt[0],At=wt[1],Et=new Ee.default().retain(ht.index).insert(`
`,mt.format).retain(St.length()-At-1).retain(1,{header:null});this.quill.updateContents(Et,Le.default.sources.USER),this.quill.setSelection(ht.index+1,Le.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ht,mt){var vt=mt.prefix.length,wt=this.quill.getLine(ht.index),St=oe(wt,2),At=St[0],Et=St[1];if(Et>vt)return!0;var Tt=void 0;switch(mt.prefix.trim()){case"[]":case"[ ]":Tt="unchecked";break;case"[x]":Tt="checked";break;case"-":case"*":Tt="bullet";break;default:Tt="ordered"}this.quill.insertText(ht.index," ",Le.default.sources.USER),this.quill.history.cutoff();var Ze=new Ee.default().retain(ht.index-Et).delete(vt+1).retain(At.length()-2-Et).retain(1,{list:Tt});this.quill.updateContents(Ze,Le.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ht.index-vt,Le.default.sources.SILENT)}},"code exit":{key:at.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ht){var mt=this.quill.getLine(ht.index),vt=oe(mt,2),wt=vt[0],St=vt[1],At=new Ee.default().retain(ht.index+wt.length()-St-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(At,Le.default.sources.USER)}},"embed left":pt(at.keys.LEFT,!1),"embed left shift":pt(at.keys.LEFT,!0),"embed right":pt(at.keys.RIGHT,!1),"embed right shift":pt(at.keys.RIGHT,!0)}};function pt(Qe,ht){var mt,vt=Qe===at.keys.LEFT?"prefix":"suffix";return mt={key:Qe,shiftKey:ht,altKey:null},De(mt,vt,/^$/),De(mt,"handler",function(St){var At=St.index;Qe===at.keys.RIGHT&&(At+=St.length+1);var Et=this.quill.getLeaf(At),Tt=oe(Et,1),Ze=Tt[0];return Ze instanceof Se.default.Embed?(Qe===at.keys.LEFT?ht?this.quill.setSelection(St.index-1,St.length+1,Le.default.sources.USER):this.quill.setSelection(St.index-1,Le.default.sources.USER):ht?this.quill.setSelection(St.index,St.length+1,Le.default.sources.USER):this.quill.setSelection(St.index+St.length+1,Le.default.sources.USER),!1):!0}),mt}function st(Qe,ht){if(!(Qe.index===0||this.quill.getLength()<=1)){var mt=this.quill.getLine(Qe.index),vt=oe(mt,1),wt=vt[0],St={};if(ht.offset===0){var At=this.quill.getLine(Qe.index-1),Et=oe(At,1),Tt=Et[0];if(Tt!=null&&Tt.length()>1){var Ze=wt.formats(),rt=this.quill.getFormat(Qe.index-1,1);St=Ae.default.attributes.diff(Ze,rt)||{}}}var lt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ht.prefix)?2:1;this.quill.deleteText(Qe.index-lt,lt,Le.default.sources.USER),Object.keys(St).length>0&&this.quill.formatLine(Qe.index-lt,lt,St,Le.default.sources.USER),this.quill.focus()}}function it(Qe,ht){var mt=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ht.suffix)?2:1;if(!(Qe.index>=this.quill.getLength()-mt)){var vt={},wt=0,St=this.quill.getLine(Qe.index),At=oe(St,1),Et=At[0];if(ht.offset>=Et.length()-1){var Tt=this.quill.getLine(Qe.index+1),Ze=oe(Tt,1),rt=Ze[0];if(rt){var lt=Et.formats(),nt=this.quill.getFormat(Qe.index,1);vt=Ae.default.attributes.diff(lt,nt)||{},wt=rt.length()}}this.quill.deleteText(Qe.index,mt,Le.default.sources.USER),Object.keys(vt).length>0&&this.quill.formatLine(Qe.index+wt-1,mt,vt,Le.default.sources.USER)}}function Ge(Qe){var ht=this.quill.getLines(Qe),mt={};if(ht.length>1){var vt=ht[0].formats(),wt=ht[ht.length-1].formats();mt=Ae.default.attributes.diff(wt,vt)||{}}this.quill.deleteText(Qe,Le.default.sources.USER),Object.keys(mt).length>0&&this.quill.formatLine(Qe.index,1,mt,Le.default.sources.USER),this.quill.setSelection(Qe.index,Le.default.sources.SILENT),this.quill.focus()}function et(Qe,ht){var mt=this;Qe.length>0&&this.quill.scroll.deleteAt(Qe.index,Qe.length);var vt=Object.keys(ht.format).reduce(function(wt,St){return Se.default.query(St,Se.default.Scope.BLOCK)&&!Array.isArray(ht.format[St])&&(wt[St]=ht.format[St]),wt},{});this.quill.insertText(Qe.index,`
`,vt,Le.default.sources.USER),this.quill.setSelection(Qe.index+1,Le.default.sources.SILENT),this.quill.focus(),Object.keys(ht.format).forEach(function(wt){vt[wt]==null&&(Array.isArray(ht.format[wt])||wt!=="link"&&mt.quill.format(wt,ht.format[wt],Le.default.sources.USER))})}function Je(Qe){return{key:at.keys.TAB,shiftKey:!Qe,format:{"code-block":!0},handler:function(mt){var vt=Se.default.query("code-block"),wt=mt.index,St=mt.length,At=this.quill.scroll.descendant(vt,wt),Et=oe(At,2),Tt=Et[0],Ze=Et[1];if(Tt!=null){var rt=this.quill.getIndex(Tt),lt=Tt.newlineIndex(Ze,!0)+1,nt=Tt.newlineIndex(rt+Ze+St),Ye=Tt.domNode.textContent.slice(lt,nt).split(`
`);Ze=0,Ye.forEach(function(Be,Ue){Qe?(Tt.insertAt(lt+Ze,vt.TAB),Ze+=vt.TAB.length,Ue===0?wt+=vt.TAB.length:St+=vt.TAB.length):Be.startsWith(vt.TAB)&&(Tt.deleteAt(lt+Ze,vt.TAB.length),Ze-=vt.TAB.length,Ue===0?wt-=vt.TAB.length:St-=vt.TAB.length),Ze+=Be.length+1}),this.quill.update(Le.default.sources.USER),this.quill.setSelection(wt,St,Le.default.sources.SILENT)}}}}function ft(Qe){return{key:Qe[0].toUpperCase(),shortKey:!0,handler:function(mt,vt){this.quill.format(Qe,!vt.format[Qe],Le.default.sources.USER)}}}function dt(Qe){if(typeof Qe=="string"||typeof Qe=="number")return dt({key:Qe});if((typeof Qe>"u"?"undefined":re(Qe))==="object"&&(Qe=(0,we.default)(Qe,!1)),typeof Qe.key=="string")if(at.keys[Qe.key.toUpperCase()]!=null)Qe.key=at.keys[Qe.key.toUpperCase()];else if(Qe.key.length===1)Qe.key=Qe.key.toUpperCase().charCodeAt(0);else return null;return Qe.shortKey&&(Qe[tt]=Qe.shortKey,delete Qe.shortKey),Qe}te.default=at,te.SHORTKEY=tt},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ae(Te,Se){var $e=[],Le=!0,Pe=!1,Re=void 0;try{for(var Ne=Te[Symbol.iterator](),je;!(Le=(je=Ne.next()).done)&&($e.push(je.value),!(Se&&$e.length===Se));Le=!0);}catch(Ie){Pe=!0,Re=Ie}finally{try{!Le&&Ne.return&&Ne.return()}finally{if(Pe)throw Re}}return $e}return function(Te,Se){if(Array.isArray(Te))return Te;if(Symbol.iterator in Object(Te))return Ae(Te,Se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),oe=function Ae(Te,Se,$e){Te===null&&(Te=Function.prototype);var Le=Object.getOwnPropertyDescriptor(Te,Se);if(Le===void 0){var Pe=Object.getPrototypeOf(Te);return Pe===null?void 0:Ae(Pe,Se,$e)}else{if("value"in Le)return Le.value;var Re=Le.get;return Re===void 0?void 0:Re.call($e)}},le=function(){function Ae(Te,Se){for(var $e=0;$e<Se.length;$e++){var Le=Se[$e];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(Te,Le.key,Le)}}return function(Te,Se,$e){return Se&&Ae(Te.prototype,Se),$e&&Ae(Te,$e),Te}}(),fe=ne(0),we=ve(fe),ke=ne(7),ye=ve(ke);function ve(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function be(Ae,Te){if(!(Ae instanceof Te))throw new TypeError("Cannot call a class as a function")}function Ce(Ae,Te){if(!Ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:Ae}function Ee(Ae,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);Ae.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Ae,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(Ae,Te):Ae.__proto__=Te)}var Oe=function(Ae){Ee(Te,Ae),le(Te,null,[{key:"value",value:function(){}}]);function Te(Se,$e){be(this,Te);var Le=Ce(this,(Te.__proto__||Object.getPrototypeOf(Te)).call(this,Se));return Le.selection=$e,Le.textNode=document.createTextNode(Te.CONTENTS),Le.domNode.appendChild(Le.textNode),Le._length=0,Le}return le(Te,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function($e,Le){if(this._length!==0)return oe(Te.prototype.__proto__||Object.getPrototypeOf(Te.prototype),"format",this).call(this,$e,Le);for(var Pe=this,Re=0;Pe!=null&&Pe.statics.scope!==we.default.Scope.BLOCK_BLOT;)Re+=Pe.offset(Pe.parent),Pe=Pe.parent;Pe!=null&&(this._length=Te.CONTENTS.length,Pe.optimize(),Pe.formatAt(Re,Te.CONTENTS.length,$e,Le),this._length=0)}},{key:"index",value:function($e,Le){return $e===this.textNode?0:oe(Te.prototype.__proto__||Object.getPrototypeOf(Te.prototype),"index",this).call(this,$e,Le)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){oe(Te.prototype.__proto__||Object.getPrototypeOf(Te.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var $e=this.textNode,Le=this.selection.getNativeRange(),Pe=void 0,Re=void 0,Ne=void 0;if(Le!=null&&Le.start.node===$e&&Le.end.node===$e){var je=[$e,Le.start.offset,Le.end.offset];Pe=je[0],Re=je[1],Ne=je[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==Te.CONTENTS){var Ie=this.textNode.data.split(Te.CONTENTS).join("");this.next instanceof ye.default?(Pe=this.next.domNode,this.next.insertAt(0,Ie),this.textNode.data=Te.CONTENTS):(this.textNode.data=Ie,this.parent.insertBefore(we.default.create(this.textNode),this),this.textNode=document.createTextNode(Te.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),Re!=null){var De=[Re,Ne].map(function(ze){return Math.max(0,Math.min(Pe.data.length,ze-1))}),Ve=re(De,2);return Re=Ve[0],Ne=Ve[1],{startNode:Pe,startOffset:Re,endNode:Pe,endOffset:Ne}}}}},{key:"update",value:function($e,Le){var Pe=this;if($e.some(function(Ne){return Ne.type==="characterData"&&Ne.target===Pe.textNode})){var Re=this.restore();Re&&(Le.range=Re)}}},{key:"value",value:function(){return""}}]),Te}(we.default.Embed);Oe.blotName="cursor",Oe.className="ql-cursor",Oe.tagName="span",Oe.CONTENTS="\uFEFF",te.default=Oe},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(0),oe=we(re),le=ne(4),fe=we(le);function we(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function ke(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")}function ye(Ce,Ee){if(!Ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:Ce}function ve(Ce,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);Ce.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ce,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Ce,Ee):Ce.__proto__=Ee)}var be=function(Ce){ve(Ee,Ce);function Ee(){return ke(this,Ee),ye(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).apply(this,arguments))}return Ee}(oe.default.Container);be.allowedChildren=[fe.default,le.BlockEmbed,be],te.default=be},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.ColorStyle=te.ColorClass=te.ColorAttributor=void 0;var re=function(){function Oe(Ae,Te){for(var Se=0;Se<Te.length;Se++){var $e=Te[Se];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(Ae,$e.key,$e)}}return function(Ae,Te,Se){return Te&&Oe(Ae.prototype,Te),Se&&Oe(Ae,Se),Ae}}(),oe=function Oe(Ae,Te,Se){Ae===null&&(Ae=Function.prototype);var $e=Object.getOwnPropertyDescriptor(Ae,Te);if($e===void 0){var Le=Object.getPrototypeOf(Ae);return Le===null?void 0:Oe(Le,Te,Se)}else{if("value"in $e)return $e.value;var Pe=$e.get;return Pe===void 0?void 0:Pe.call(Se)}},le=ne(0),fe=we(le);function we(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function ke(Oe,Ae){if(!(Oe instanceof Ae))throw new TypeError("Cannot call a class as a function")}function ye(Oe,Ae){if(!Oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ae&&(typeof Ae=="object"||typeof Ae=="function")?Ae:Oe}function ve(Oe,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ae);Oe.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),Ae&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,Ae):Oe.__proto__=Ae)}var be=function(Oe){ve(Ae,Oe);function Ae(){return ke(this,Ae),ye(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).apply(this,arguments))}return re(Ae,[{key:"value",value:function(Se){var $e=oe(Ae.prototype.__proto__||Object.getPrototypeOf(Ae.prototype),"value",this).call(this,Se);return $e.startsWith("rgb(")?($e=$e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+$e.split(",").map(function(Le){return("00"+parseInt(Le).toString(16)).slice(-2)}).join("")):$e}}]),Ae}(fe.default.Attributor.Style),Ce=new fe.default.Attributor.Class("color","ql-color",{scope:fe.default.Scope.INLINE}),Ee=new be("color","color",{scope:fe.default.Scope.INLINE});te.ColorAttributor=be,te.ColorClass=Ce,te.ColorStyle=Ee},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.sanitize=te.default=void 0;var re=function(){function Ee(Oe,Ae){for(var Te=0;Te<Ae.length;Te++){var Se=Ae[Te];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(Oe,Se.key,Se)}}return function(Oe,Ae,Te){return Ae&&Ee(Oe.prototype,Ae),Te&&Ee(Oe,Te),Oe}}(),oe=function Ee(Oe,Ae,Te){Oe===null&&(Oe=Function.prototype);var Se=Object.getOwnPropertyDescriptor(Oe,Ae);if(Se===void 0){var $e=Object.getPrototypeOf(Oe);return $e===null?void 0:Ee($e,Ae,Te)}else{if("value"in Se)return Se.value;var Le=Se.get;return Le===void 0?void 0:Le.call(Te)}},le=ne(6),fe=we(le);function we(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}function ke(Ee,Oe){if(!(Ee instanceof Oe))throw new TypeError("Cannot call a class as a function")}function ye(Ee,Oe){if(!Ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Oe&&(typeof Oe=="object"||typeof Oe=="function")?Oe:Ee}function ve(Ee,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Oe);Ee.prototype=Object.create(Oe&&Oe.prototype,{constructor:{value:Ee,enumerable:!1,writable:!0,configurable:!0}}),Oe&&(Object.setPrototypeOf?Object.setPrototypeOf(Ee,Oe):Ee.__proto__=Oe)}var be=function(Ee){ve(Oe,Ee);function Oe(){return ke(this,Oe),ye(this,(Oe.__proto__||Object.getPrototypeOf(Oe)).apply(this,arguments))}return re(Oe,[{key:"format",value:function(Te,Se){if(Te!==this.statics.blotName||!Se)return oe(Oe.prototype.__proto__||Object.getPrototypeOf(Oe.prototype),"format",this).call(this,Te,Se);Se=this.constructor.sanitize(Se),this.domNode.setAttribute("href",Se)}}],[{key:"create",value:function(Te){var Se=oe(Oe.__proto__||Object.getPrototypeOf(Oe),"create",this).call(this,Te);return Te=this.sanitize(Te),Se.setAttribute("href",Te),Se.setAttribute("rel","noopener noreferrer"),Se.setAttribute("target","_blank"),Se}},{key:"formats",value:function(Te){return Te.getAttribute("href")}},{key:"sanitize",value:function(Te){return Ce(Te,this.PROTOCOL_WHITELIST)?Te:this.SANITIZED_URL}}]),Oe}(fe.default);be.blotName="link",be.tagName="A",be.SANITIZED_URL="about:blank",be.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function Ce(Ee,Oe){var Ae=document.createElement("a");Ae.href=Ee;var Te=Ae.href.slice(0,Ae.href.indexOf(":"));return Oe.indexOf(Te)>-1}te.default=be,te.sanitize=Ce},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},oe=function(){function Oe(Ae,Te){for(var Se=0;Se<Te.length;Se++){var $e=Te[Se];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(Ae,$e.key,$e)}}return function(Ae,Te,Se){return Te&&Oe(Ae.prototype,Te),Se&&Oe(Ae,Se),Ae}}(),le=ne(23),fe=ye(le),we=ne(107),ke=ye(we);function ye(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function ve(Oe,Ae){if(!(Oe instanceof Ae))throw new TypeError("Cannot call a class as a function")}var be=0;function Ce(Oe,Ae){Oe.setAttribute(Ae,Oe.getAttribute(Ae)!=="true")}var Ee=function(){function Oe(Ae){var Te=this;ve(this,Oe),this.select=Ae,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){Te.togglePicker()}),this.label.addEventListener("keydown",function(Se){switch(Se.keyCode){case fe.default.keys.ENTER:Te.togglePicker();break;case fe.default.keys.ESCAPE:Te.escape(),Se.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return oe(Oe,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),Ce(this.label,"aria-expanded"),Ce(this.options,"aria-hidden")}},{key:"buildItem",value:function(Te){var Se=this,$e=document.createElement("span");return $e.tabIndex="0",$e.setAttribute("role","button"),$e.classList.add("ql-picker-item"),Te.hasAttribute("value")&&$e.setAttribute("data-value",Te.getAttribute("value")),Te.textContent&&$e.setAttribute("data-label",Te.textContent),$e.addEventListener("click",function(){Se.selectItem($e,!0)}),$e.addEventListener("keydown",function(Le){switch(Le.keyCode){case fe.default.keys.ENTER:Se.selectItem($e,!0),Le.preventDefault();break;case fe.default.keys.ESCAPE:Se.escape(),Le.preventDefault();break}}),$e}},{key:"buildLabel",value:function(){var Te=document.createElement("span");return Te.classList.add("ql-picker-label"),Te.innerHTML=ke.default,Te.tabIndex="0",Te.setAttribute("role","button"),Te.setAttribute("aria-expanded","false"),this.container.appendChild(Te),Te}},{key:"buildOptions",value:function(){var Te=this,Se=document.createElement("span");Se.classList.add("ql-picker-options"),Se.setAttribute("aria-hidden","true"),Se.tabIndex="-1",Se.id="ql-picker-options-"+be,be+=1,this.label.setAttribute("aria-controls",Se.id),this.options=Se,[].slice.call(this.select.options).forEach(function($e){var Le=Te.buildItem($e);Se.appendChild(Le),$e.selected===!0&&Te.selectItem(Le)}),this.container.appendChild(Se)}},{key:"buildPicker",value:function(){var Te=this;[].slice.call(this.select.attributes).forEach(function(Se){Te.container.setAttribute(Se.name,Se.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var Te=this;this.close(),setTimeout(function(){return Te.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(Te){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,$e=this.container.querySelector(".ql-selected");if(Te!==$e&&($e!=null&&$e.classList.remove("ql-selected"),Te!=null&&(Te.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(Te.parentNode.children,Te),Te.hasAttribute("data-value")?this.label.setAttribute("data-value",Te.getAttribute("data-value")):this.label.removeAttribute("data-value"),Te.hasAttribute("data-label")?this.label.setAttribute("data-label",Te.getAttribute("data-label")):this.label.removeAttribute("data-label"),Se))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":re(Event))==="object"){var Le=document.createEvent("Event");Le.initEvent("change",!0,!0),this.select.dispatchEvent(Le)}this.close()}}},{key:"update",value:function(){var Te=void 0;if(this.select.selectedIndex>-1){var Se=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];Te=this.select.options[this.select.selectedIndex],this.selectItem(Se)}else this.selectItem(null);var $e=Te!=null&&Te!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",$e)}}]),Oe}();te.default=Ee},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(0),oe=Xe(re),le=ne(5),fe=Xe(le),we=ne(4),ke=Xe(we),ye=ne(16),ve=Xe(ye),be=ne(25),Ce=Xe(be),Ee=ne(24),Oe=Xe(Ee),Ae=ne(35),Te=Xe(Ae),Se=ne(6),$e=Xe(Se),Le=ne(22),Pe=Xe(Le),Re=ne(7),Ne=Xe(Re),je=ne(55),Ie=Xe(je),De=ne(42),Ve=Xe(De),ze=ne(23),qe=Xe(ze);function Xe(tt){return tt&&tt.__esModule?tt:{default:tt}}fe.default.register({"blots/block":ke.default,"blots/block/embed":we.BlockEmbed,"blots/break":ve.default,"blots/container":Ce.default,"blots/cursor":Oe.default,"blots/embed":Te.default,"blots/inline":$e.default,"blots/scroll":Pe.default,"blots/text":Ne.default,"modules/clipboard":Ie.default,"modules/history":Ve.default,"modules/keyboard":qe.default}),oe.default.register(ke.default,ve.default,Oe.default,$e.default,Pe.default,Ne.default),te.default=fe.default},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(1),oe=function(){function le(fe){this.domNode=fe,this.domNode[re.DATA_KEY]={blot:this}}return Object.defineProperty(le.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),le.create=function(fe){if(this.tagName==null)throw new re.ParchmentError("Blot definition missing tagName");var we;return Array.isArray(this.tagName)?(typeof fe=="string"&&(fe=fe.toUpperCase(),parseInt(fe).toString()===fe&&(fe=parseInt(fe))),typeof fe=="number"?we=document.createElement(this.tagName[fe-1]):this.tagName.indexOf(fe)>-1?we=document.createElement(fe):we=document.createElement(this.tagName[0])):we=document.createElement(this.tagName),this.className&&we.classList.add(this.className),we},le.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},le.prototype.clone=function(){var fe=this.domNode.cloneNode(!1);return re.create(fe)},le.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[re.DATA_KEY]},le.prototype.deleteAt=function(fe,we){var ke=this.isolate(fe,we);ke.remove()},le.prototype.formatAt=function(fe,we,ke,ye){var ve=this.isolate(fe,we);if(re.query(ke,re.Scope.BLOT)!=null&&ye)ve.wrap(ke,ye);else if(re.query(ke,re.Scope.ATTRIBUTE)!=null){var be=re.create(this.statics.scope);ve.wrap(be),be.format(ke,ye)}},le.prototype.insertAt=function(fe,we,ke){var ye=ke==null?re.create("text",we):re.create(we,ke),ve=this.split(fe);this.parent.insertBefore(ye,ve)},le.prototype.insertInto=function(fe,we){we===void 0&&(we=null),this.parent!=null&&this.parent.children.remove(this);var ke=null;fe.children.insertBefore(this,we),we!=null&&(ke=we.domNode),(this.domNode.parentNode!=fe.domNode||this.domNode.nextSibling!=ke)&&fe.domNode.insertBefore(this.domNode,ke),this.parent=fe,this.attach()},le.prototype.isolate=function(fe,we){var ke=this.split(fe);return ke.split(we),ke},le.prototype.length=function(){return 1},le.prototype.offset=function(fe){return fe===void 0&&(fe=this.parent),this.parent==null||this==fe?0:this.parent.children.offset(this)+this.parent.offset(fe)},le.prototype.optimize=function(fe){this.domNode[re.DATA_KEY]!=null&&delete this.domNode[re.DATA_KEY].mutations},le.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},le.prototype.replace=function(fe){fe.parent!=null&&(fe.parent.insertBefore(this,fe.next),fe.remove())},le.prototype.replaceWith=function(fe,we){var ke=typeof fe=="string"?re.create(fe,we):fe;return ke.replace(this),ke},le.prototype.split=function(fe,we){return fe===0?this:this.next},le.prototype.update=function(fe,we){},le.prototype.wrap=function(fe,we){var ke=typeof fe=="string"?re.create(fe,we):fe;return this.parent!=null&&this.parent.insertBefore(ke,this.next),ke.appendChild(this),ke},le.blotName="abstract",le}();te.default=oe},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(12),oe=ne(32),le=ne(33),fe=ne(1),we=function(){function ke(ye){this.attributes={},this.domNode=ye,this.build()}return ke.prototype.attribute=function(ye,ve){ve?ye.add(this.domNode,ve)&&(ye.value(this.domNode)!=null?this.attributes[ye.attrName]=ye:delete this.attributes[ye.attrName]):(ye.remove(this.domNode),delete this.attributes[ye.attrName])},ke.prototype.build=function(){var ye=this;this.attributes={};var ve=re.default.keys(this.domNode),be=oe.default.keys(this.domNode),Ce=le.default.keys(this.domNode);ve.concat(be).concat(Ce).forEach(function(Ee){var Oe=fe.query(Ee,fe.Scope.ATTRIBUTE);Oe instanceof re.default&&(ye.attributes[Oe.attrName]=Oe)})},ke.prototype.copy=function(ye){var ve=this;Object.keys(this.attributes).forEach(function(be){var Ce=ve.attributes[be].value(ve.domNode);ye.format(be,Ce)})},ke.prototype.move=function(ye){var ve=this;this.copy(ye),Object.keys(this.attributes).forEach(function(be){ve.attributes[be].remove(ve.domNode)}),this.attributes={}},ke.prototype.values=function(){var ye=this;return Object.keys(this.attributes).reduce(function(ve,be){return ve[be]=ye.attributes[be].value(ye.domNode),ve},{})},ke}();te.default=we},function(X,te,ne){var re=this&&this.__extends||function(){var we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,ye){ke.__proto__=ye}||function(ke,ye){for(var ve in ye)ye.hasOwnProperty(ve)&&(ke[ve]=ye[ve])};return function(ke,ye){we(ke,ye);function ve(){this.constructor=ke}ke.prototype=ye===null?Object.create(ye):(ve.prototype=ye.prototype,new ve)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(12);function le(we,ke){var ye=we.getAttribute("class")||"";return ye.split(/\s+/).filter(function(ve){return ve.indexOf(ke+"-")===0})}var fe=function(we){re(ke,we);function ke(){return we!==null&&we.apply(this,arguments)||this}return ke.keys=function(ye){return(ye.getAttribute("class")||"").split(/\s+/).map(function(ve){return ve.split("-").slice(0,-1).join("-")})},ke.prototype.add=function(ye,ve){return this.canAdd(ye,ve)?(this.remove(ye),ye.classList.add(this.keyName+"-"+ve),!0):!1},ke.prototype.remove=function(ye){var ve=le(ye,this.keyName);ve.forEach(function(be){ye.classList.remove(be)}),ye.classList.length===0&&ye.removeAttribute("class")},ke.prototype.value=function(ye){var ve=le(ye,this.keyName)[0]||"",be=ve.slice(this.keyName.length+1);return this.canAdd(ye,be)?be:""},ke}(oe.default);te.default=fe},function(X,te,ne){var re=this&&this.__extends||function(){var we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,ye){ke.__proto__=ye}||function(ke,ye){for(var ve in ye)ye.hasOwnProperty(ve)&&(ke[ve]=ye[ve])};return function(ke,ye){we(ke,ye);function ve(){this.constructor=ke}ke.prototype=ye===null?Object.create(ye):(ve.prototype=ye.prototype,new ve)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(12);function le(we){var ke=we.split("-"),ye=ke.slice(1).map(function(ve){return ve[0].toUpperCase()+ve.slice(1)}).join("");return ke[0]+ye}var fe=function(we){re(ke,we);function ke(){return we!==null&&we.apply(this,arguments)||this}return ke.keys=function(ye){return(ye.getAttribute("style")||"").split(";").map(function(ve){var be=ve.split(":");return be[0].trim()})},ke.prototype.add=function(ye,ve){return this.canAdd(ye,ve)?(ye.style[le(this.keyName)]=ve,!0):!1},ke.prototype.remove=function(ye){ye.style[le(this.keyName)]="",ye.getAttribute("style")||ye.removeAttribute("style")},ke.prototype.value=function(ye){var ve=ye.style[le(this.keyName)];return this.canAdd(ye,ve)?ve:""},ke}(oe.default);te.default=fe},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function fe(we,ke){for(var ye=0;ye<ke.length;ye++){var ve=ke[ye];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(we,ve.key,ve)}}return function(we,ke,ye){return ke&&fe(we.prototype,ke),ye&&fe(we,ye),we}}();function oe(fe,we){if(!(fe instanceof we))throw new TypeError("Cannot call a class as a function")}var le=function(){function fe(we,ke){oe(this,fe),this.quill=we,this.options=ke,this.modules={}}return re(fe,[{key:"init",value:function(){var ke=this;Object.keys(this.options.modules).forEach(function(ye){ke.modules[ye]==null&&ke.addModule(ye)})}},{key:"addModule",value:function(ke){var ye=this.quill.constructor.import("modules/"+ke);return this.modules[ke]=new ye(this.quill,this.options.modules[ke]||{}),this.modules[ke]}}]),fe}();le.DEFAULTS={modules:{}},le.themes={default:le},te.default=le},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ae(Te,Se){for(var $e=0;$e<Se.length;$e++){var Le=Se[$e];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(Te,Le.key,Le)}}return function(Te,Se,$e){return Se&&Ae(Te.prototype,Se),$e&&Ae(Te,$e),Te}}(),oe=function Ae(Te,Se,$e){Te===null&&(Te=Function.prototype);var Le=Object.getOwnPropertyDescriptor(Te,Se);if(Le===void 0){var Pe=Object.getPrototypeOf(Te);return Pe===null?void 0:Ae(Pe,Se,$e)}else{if("value"in Le)return Le.value;var Re=Le.get;return Re===void 0?void 0:Re.call($e)}},le=ne(0),fe=ye(le),we=ne(7),ke=ye(we);function ye(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function ve(Ae,Te){if(!(Ae instanceof Te))throw new TypeError("Cannot call a class as a function")}function be(Ae,Te){if(!Ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:Ae}function Ce(Ae,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);Ae.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Ae,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(Ae,Te):Ae.__proto__=Te)}var Ee="\uFEFF",Oe=function(Ae){Ce(Te,Ae);function Te(Se){ve(this,Te);var $e=be(this,(Te.__proto__||Object.getPrototypeOf(Te)).call(this,Se));return $e.contentNode=document.createElement("span"),$e.contentNode.setAttribute("contenteditable",!1),[].slice.call($e.domNode.childNodes).forEach(function(Le){$e.contentNode.appendChild(Le)}),$e.leftGuard=document.createTextNode(Ee),$e.rightGuard=document.createTextNode(Ee),$e.domNode.appendChild($e.leftGuard),$e.domNode.appendChild($e.contentNode),$e.domNode.appendChild($e.rightGuard),$e}return re(Te,[{key:"index",value:function($e,Le){return $e===this.leftGuard?0:$e===this.rightGuard?1:oe(Te.prototype.__proto__||Object.getPrototypeOf(Te.prototype),"index",this).call(this,$e,Le)}},{key:"restore",value:function($e){var Le=void 0,Pe=void 0,Re=$e.data.split(Ee).join("");if($e===this.leftGuard)if(this.prev instanceof ke.default){var Ne=this.prev.length();this.prev.insertAt(Ne,Re),Le={startNode:this.prev.domNode,startOffset:Ne+Re.length}}else Pe=document.createTextNode(Re),this.parent.insertBefore(fe.default.create(Pe),this),Le={startNode:Pe,startOffset:Re.length};else $e===this.rightGuard&&(this.next instanceof ke.default?(this.next.insertAt(0,Re),Le={startNode:this.next.domNode,startOffset:Re.length}):(Pe=document.createTextNode(Re),this.parent.insertBefore(fe.default.create(Pe),this.next),Le={startNode:Pe,startOffset:Re.length}));return $e.data=Ee,Le}},{key:"update",value:function($e,Le){var Pe=this;$e.forEach(function(Re){if(Re.type==="characterData"&&(Re.target===Pe.leftGuard||Re.target===Pe.rightGuard)){var Ne=Pe.restore(Re.target);Ne&&(Le.range=Ne)}})}}]),Te}(fe.default.Embed);te.default=Oe},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.AlignStyle=te.AlignClass=te.AlignAttribute=void 0;var re=ne(0),oe=le(re);function le(ve){return ve&&ve.__esModule?ve:{default:ve}}var fe={scope:oe.default.Scope.BLOCK,whitelist:["right","center","justify"]},we=new oe.default.Attributor.Attribute("align","align",fe),ke=new oe.default.Attributor.Class("align","ql-align",fe),ye=new oe.default.Attributor.Style("align","text-align",fe);te.AlignAttribute=we,te.AlignClass=ke,te.AlignStyle=ye},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.BackgroundStyle=te.BackgroundClass=void 0;var re=ne(0),oe=fe(re),le=ne(26);function fe(ye){return ye&&ye.__esModule?ye:{default:ye}}var we=new oe.default.Attributor.Class("background","ql-bg",{scope:oe.default.Scope.INLINE}),ke=new le.ColorAttributor("background","background-color",{scope:oe.default.Scope.INLINE});te.BackgroundClass=we,te.BackgroundStyle=ke},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.DirectionStyle=te.DirectionClass=te.DirectionAttribute=void 0;var re=ne(0),oe=le(re);function le(ve){return ve&&ve.__esModule?ve:{default:ve}}var fe={scope:oe.default.Scope.BLOCK,whitelist:["rtl"]},we=new oe.default.Attributor.Attribute("direction","dir",fe),ke=new oe.default.Attributor.Class("direction","ql-direction",fe),ye=new oe.default.Attributor.Style("direction","direction",fe);te.DirectionAttribute=we,te.DirectionClass=ke,te.DirectionStyle=ye},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.FontClass=te.FontStyle=void 0;var re=function(){function Ae(Te,Se){for(var $e=0;$e<Se.length;$e++){var Le=Se[$e];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(Te,Le.key,Le)}}return function(Te,Se,$e){return Se&&Ae(Te.prototype,Se),$e&&Ae(Te,$e),Te}}(),oe=function Ae(Te,Se,$e){Te===null&&(Te=Function.prototype);var Le=Object.getOwnPropertyDescriptor(Te,Se);if(Le===void 0){var Pe=Object.getPrototypeOf(Te);return Pe===null?void 0:Ae(Pe,Se,$e)}else{if("value"in Le)return Le.value;var Re=Le.get;return Re===void 0?void 0:Re.call($e)}},le=ne(0),fe=we(le);function we(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function ke(Ae,Te){if(!(Ae instanceof Te))throw new TypeError("Cannot call a class as a function")}function ye(Ae,Te){if(!Ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:Ae}function ve(Ae,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);Ae.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Ae,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(Ae,Te):Ae.__proto__=Te)}var be={scope:fe.default.Scope.INLINE,whitelist:["serif","monospace"]},Ce=new fe.default.Attributor.Class("font","ql-font",be),Ee=function(Ae){ve(Te,Ae);function Te(){return ke(this,Te),ye(this,(Te.__proto__||Object.getPrototypeOf(Te)).apply(this,arguments))}return re(Te,[{key:"value",value:function($e){return oe(Te.prototype.__proto__||Object.getPrototypeOf(Te.prototype),"value",this).call(this,$e).replace(/["']/g,"")}}]),Te}(fe.default.Attributor.Style),Oe=new Ee("font","font-family",be);te.FontStyle=Oe,te.FontClass=Ce},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.SizeStyle=te.SizeClass=void 0;var re=ne(0),oe=le(re);function le(ke){return ke&&ke.__esModule?ke:{default:ke}}var fe=new oe.default.Attributor.Class("size","ql-size",{scope:oe.default.Scope.INLINE,whitelist:["small","large","huge"]}),we=new oe.default.Attributor.Style("size","font-size",{scope:oe.default.Scope.INLINE,whitelist:["10px","18px","32px"]});te.SizeClass=fe,te.SizeStyle=we},function(X,te,ne){X.exports={align:{"":ne(76),center:ne(77),right:ne(78),justify:ne(79)},background:ne(80),blockquote:ne(81),bold:ne(82),clean:ne(83),code:ne(58),"code-block":ne(58),color:ne(84),direction:{"":ne(85),rtl:ne(86)},float:{center:ne(87),full:ne(88),left:ne(89),right:ne(90)},formula:ne(91),header:{1:ne(92),2:ne(93)},italic:ne(94),image:ne(95),indent:{"+1":ne(96),"-1":ne(97)},link:ne(98),list:{ordered:ne(99),bullet:ne(100),check:ne(101)},script:{sub:ne(102),super:ne(103)},strike:ne(104),underline:ne(105),video:ne(106)}},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.getLastChangeIndex=te.default=void 0;var re=function(){function Se($e,Le){for(var Pe=0;Pe<Le.length;Pe++){var Re=Le[Pe];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty($e,Re.key,Re)}}return function($e,Le,Pe){return Le&&Se($e.prototype,Le),Pe&&Se($e,Pe),$e}}(),oe=ne(0),le=ve(oe),fe=ne(5),we=ve(fe),ke=ne(9),ye=ve(ke);function ve(Se){return Se&&Se.__esModule?Se:{default:Se}}function be(Se,$e){if(!(Se instanceof $e))throw new TypeError("Cannot call a class as a function")}function Ce(Se,$e){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:Se}function Ee(Se,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);Se.prototype=Object.create($e&&$e.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,$e):Se.__proto__=$e)}var Oe=function(Se){Ee($e,Se);function $e(Le,Pe){be(this,$e);var Re=Ce(this,($e.__proto__||Object.getPrototypeOf($e)).call(this,Le,Pe));return Re.lastRecorded=0,Re.ignoreChange=!1,Re.clear(),Re.quill.on(we.default.events.EDITOR_CHANGE,function(Ne,je,Ie,De){Ne!==we.default.events.TEXT_CHANGE||Re.ignoreChange||(!Re.options.userOnly||De===we.default.sources.USER?Re.record(je,Ie):Re.transform(je))}),Re.quill.keyboard.addBinding({key:"Z",shortKey:!0},Re.undo.bind(Re)),Re.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},Re.redo.bind(Re)),/Win/i.test(navigator.platform)&&Re.quill.keyboard.addBinding({key:"Y",shortKey:!0},Re.redo.bind(Re)),Re}return re($e,[{key:"change",value:function(Pe,Re){if(this.stack[Pe].length!==0){var Ne=this.stack[Pe].pop();this.stack[Re].push(Ne),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(Ne[Pe],we.default.sources.USER),this.ignoreChange=!1;var je=Te(Ne[Pe]);this.quill.setSelection(je)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(Pe,Re){if(Pe.ops.length!==0){this.stack.redo=[];var Ne=this.quill.getContents().diff(Re),je=Date.now();if(this.lastRecorded+this.options.delay>je&&this.stack.undo.length>0){var Ie=this.stack.undo.pop();Ne=Ne.compose(Ie.undo),Pe=Ie.redo.compose(Pe)}else this.lastRecorded=je;this.stack.undo.push({redo:Pe,undo:Ne}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(Pe){this.stack.undo.forEach(function(Re){Re.undo=Pe.transform(Re.undo,!0),Re.redo=Pe.transform(Re.redo,!0)}),this.stack.redo.forEach(function(Re){Re.undo=Pe.transform(Re.undo,!0),Re.redo=Pe.transform(Re.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),$e}(ye.default);Oe.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function Ae(Se){var $e=Se.ops[Se.ops.length-1];return $e==null?!1:$e.insert!=null?typeof $e.insert=="string"&&$e.insert.endsWith(`
`):$e.attributes!=null?Object.keys($e.attributes).some(function(Le){return le.default.query(Le,le.default.Scope.BLOCK)!=null}):!1}function Te(Se){var $e=Se.reduce(function(Pe,Re){return Pe+=Re.delete||0,Pe},0),Le=Se.length()-$e;return Ae(Se)&&(Le-=1),Le}te.default=Oe,te.getLastChangeIndex=Te},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.BaseTooltip=void 0;var re=function(){function et(Je,ft){for(var dt=0;dt<ft.length;dt++){var Qe=ft[dt];Qe.enumerable=Qe.enumerable||!1,Qe.configurable=!0,"value"in Qe&&(Qe.writable=!0),Object.defineProperty(Je,Qe.key,Qe)}}return function(Je,ft,dt){return ft&&et(Je.prototype,ft),dt&&et(Je,dt),Je}}(),oe=function et(Je,ft,dt){Je===null&&(Je=Function.prototype);var Qe=Object.getOwnPropertyDescriptor(Je,ft);if(Qe===void 0){var ht=Object.getPrototypeOf(Je);return ht===null?void 0:et(ht,ft,dt)}else{if("value"in Qe)return Qe.value;var mt=Qe.get;return mt===void 0?void 0:mt.call(dt)}},le=ne(3),fe=je(le),we=ne(2),ke=je(we),ye=ne(8),ve=je(ye),be=ne(23),Ce=je(be),Ee=ne(34),Oe=je(Ee),Ae=ne(59),Te=je(Ae),Se=ne(60),$e=je(Se),Le=ne(28),Pe=je(Le),Re=ne(61),Ne=je(Re);function je(et){return et&&et.__esModule?et:{default:et}}function Ie(et,Je){if(!(et instanceof Je))throw new TypeError("Cannot call a class as a function")}function De(et,Je){if(!et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Je&&(typeof Je=="object"||typeof Je=="function")?Je:et}function Ve(et,Je){if(typeof Je!="function"&&Je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Je);et.prototype=Object.create(Je&&Je.prototype,{constructor:{value:et,enumerable:!1,writable:!0,configurable:!0}}),Je&&(Object.setPrototypeOf?Object.setPrototypeOf(et,Je):et.__proto__=Je)}var ze=[!1,"center","right","justify"],qe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Xe=[!1,"serif","monospace"],tt=["1","2","3",!1],at=["small",!1,"large","huge"],pt=function(et){Ve(Je,et);function Je(ft,dt){Ie(this,Je);var Qe=De(this,(Je.__proto__||Object.getPrototypeOf(Je)).call(this,ft,dt)),ht=function mt(vt){if(!document.body.contains(ft.root))return document.body.removeEventListener("click",mt);Qe.tooltip!=null&&!Qe.tooltip.root.contains(vt.target)&&document.activeElement!==Qe.tooltip.textbox&&!Qe.quill.hasFocus()&&Qe.tooltip.hide(),Qe.pickers!=null&&Qe.pickers.forEach(function(wt){wt.container.contains(vt.target)||wt.close()})};return ft.emitter.listenDOM("click",document.body,ht),Qe}return re(Je,[{key:"addModule",value:function(dt){var Qe=oe(Je.prototype.__proto__||Object.getPrototypeOf(Je.prototype),"addModule",this).call(this,dt);return dt==="toolbar"&&this.extendToolbar(Qe),Qe}},{key:"buildButtons",value:function(dt,Qe){dt.forEach(function(ht){var mt=ht.getAttribute("class")||"";mt.split(/\s+/).forEach(function(vt){if(vt.startsWith("ql-")&&(vt=vt.slice(3),Qe[vt]!=null))if(vt==="direction")ht.innerHTML=Qe[vt][""]+Qe[vt].rtl;else if(typeof Qe[vt]=="string")ht.innerHTML=Qe[vt];else{var wt=ht.value||"";wt!=null&&Qe[vt][wt]&&(ht.innerHTML=Qe[vt][wt])}})})}},{key:"buildPickers",value:function(dt,Qe){var ht=this;this.pickers=dt.map(function(vt){if(vt.classList.contains("ql-align"))return vt.querySelector("option")==null&&Ge(vt,ze),new $e.default(vt,Qe.align);if(vt.classList.contains("ql-background")||vt.classList.contains("ql-color")){var wt=vt.classList.contains("ql-background")?"background":"color";return vt.querySelector("option")==null&&Ge(vt,qe,wt==="background"?"#ffffff":"#000000"),new Te.default(vt,Qe[wt])}else return vt.querySelector("option")==null&&(vt.classList.contains("ql-font")?Ge(vt,Xe):vt.classList.contains("ql-header")?Ge(vt,tt):vt.classList.contains("ql-size")&&Ge(vt,at)),new Pe.default(vt)});var mt=function(){ht.pickers.forEach(function(wt){wt.update()})};this.quill.on(ve.default.events.EDITOR_CHANGE,mt)}}]),Je}(Oe.default);pt.DEFAULTS=(0,fe.default)(!0,{},Oe.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var Je=this,ft=this.container.querySelector("input.ql-image[type=file]");ft==null&&(ft=document.createElement("input"),ft.setAttribute("type","file"),ft.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ft.classList.add("ql-image"),ft.addEventListener("change",function(){if(ft.files!=null&&ft.files[0]!=null){var dt=new FileReader;dt.onload=function(Qe){var ht=Je.quill.getSelection(!0);Je.quill.updateContents(new ke.default().retain(ht.index).delete(ht.length).insert({image:Qe.target.result}),ve.default.sources.USER),Je.quill.setSelection(ht.index+1,ve.default.sources.SILENT),ft.value=""},dt.readAsDataURL(ft.files[0])}}),this.container.appendChild(ft)),ft.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var st=function(et){Ve(Je,et);function Je(ft,dt){Ie(this,Je);var Qe=De(this,(Je.__proto__||Object.getPrototypeOf(Je)).call(this,ft,dt));return Qe.textbox=Qe.root.querySelector('input[type="text"]'),Qe.listen(),Qe}return re(Je,[{key:"listen",value:function(){var dt=this;this.textbox.addEventListener("keydown",function(Qe){Ce.default.match(Qe,"enter")?(dt.save(),Qe.preventDefault()):Ce.default.match(Qe,"escape")&&(dt.cancel(),Qe.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),Qe!=null?this.textbox.value=Qe:dt!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+dt)||""),this.root.setAttribute("data-mode",dt)}},{key:"restoreFocus",value:function(){var dt=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=dt}},{key:"save",value:function(){var dt=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var Qe=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",dt,ve.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",dt,ve.default.sources.USER)),this.quill.root.scrollTop=Qe;break}case"video":dt=it(dt);case"formula":{if(!dt)break;var ht=this.quill.getSelection(!0);if(ht!=null){var mt=ht.index+ht.length;this.quill.insertEmbed(mt,this.root.getAttribute("data-mode"),dt,ve.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(mt+1," ",ve.default.sources.USER),this.quill.setSelection(mt+2,ve.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),Je}(Ne.default);function it(et){var Je=et.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||et.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return Je?(Je[1]||"https")+"://www.youtube.com/embed/"+Je[2]+"?showinfo=0":(Je=et.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(Je[1]||"https")+"://player.vimeo.com/video/"+Je[2]+"/":et}function Ge(et,Je){var ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Je.forEach(function(dt){var Qe=document.createElement("option");dt===ft?Qe.setAttribute("selected","selected"):Qe.setAttribute("value",dt),et.appendChild(Qe)})}te.BaseTooltip=st,te.default=pt},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function oe(){this.head=this.tail=null,this.length=0}return oe.prototype.append=function(){for(var le=[],fe=0;fe<arguments.length;fe++)le[fe]=arguments[fe];this.insertBefore(le[0],null),le.length>1&&this.append.apply(this,le.slice(1))},oe.prototype.contains=function(le){for(var fe,we=this.iterator();fe=we();)if(fe===le)return!0;return!1},oe.prototype.insertBefore=function(le,fe){le&&(le.next=fe,fe!=null?(le.prev=fe.prev,fe.prev!=null&&(fe.prev.next=le),fe.prev=le,fe===this.head&&(this.head=le)):this.tail!=null?(this.tail.next=le,le.prev=this.tail,this.tail=le):(le.prev=null,this.head=this.tail=le),this.length+=1)},oe.prototype.offset=function(le){for(var fe=0,we=this.head;we!=null;){if(we===le)return fe;fe+=we.length(),we=we.next}return-1},oe.prototype.remove=function(le){this.contains(le)&&(le.prev!=null&&(le.prev.next=le.next),le.next!=null&&(le.next.prev=le.prev),le===this.head&&(this.head=le.next),le===this.tail&&(this.tail=le.prev),this.length-=1)},oe.prototype.iterator=function(le){return le===void 0&&(le=this.head),function(){var fe=le;return le!=null&&(le=le.next),fe}},oe.prototype.find=function(le,fe){fe===void 0&&(fe=!1);for(var we,ke=this.iterator();we=ke();){var ye=we.length();if(le<ye||fe&&le===ye&&(we.next==null||we.next.length()!==0))return[we,le];le-=ye}return[null,0]},oe.prototype.forEach=function(le){for(var fe,we=this.iterator();fe=we();)le(fe)},oe.prototype.forEachAt=function(le,fe,we){if(!(fe<=0))for(var ke=this.find(le),ye=ke[0],ve=ke[1],be,Ce=le-ve,Ee=this.iterator(ye);(be=Ee())&&Ce<le+fe;){var Oe=be.length();le>Ce?we(be,le-Ce,Math.min(fe,Ce+Oe-le)):we(be,0,Math.min(Oe,le+fe-Ce)),Ce+=Oe}},oe.prototype.map=function(le){return this.reduce(function(fe,we){return fe.push(le(we)),fe},[])},oe.prototype.reduce=function(le,fe){for(var we,ke=this.iterator();we=ke();)fe=le(fe,we);return fe},oe}();te.default=re},function(X,te,ne){var re=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,be){ve.__proto__=be}||function(ve,be){for(var Ce in be)be.hasOwnProperty(Ce)&&(ve[Ce]=be[Ce])};return function(ve,be){ye(ve,be);function Ce(){this.constructor=ve}ve.prototype=be===null?Object.create(be):(Ce.prototype=be.prototype,new Ce)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(17),le=ne(1),fe={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},we=100,ke=function(ye){re(ve,ye);function ve(be){var Ce=ye.call(this,be)||this;return Ce.scroll=Ce,Ce.observer=new MutationObserver(function(Ee){Ce.update(Ee)}),Ce.observer.observe(Ce.domNode,fe),Ce.attach(),Ce}return ve.prototype.detach=function(){ye.prototype.detach.call(this),this.observer.disconnect()},ve.prototype.deleteAt=function(be,Ce){this.update(),be===0&&Ce===this.length()?this.children.forEach(function(Ee){Ee.remove()}):ye.prototype.deleteAt.call(this,be,Ce)},ve.prototype.formatAt=function(be,Ce,Ee,Oe){this.update(),ye.prototype.formatAt.call(this,be,Ce,Ee,Oe)},ve.prototype.insertAt=function(be,Ce,Ee){this.update(),ye.prototype.insertAt.call(this,be,Ce,Ee)},ve.prototype.optimize=function(be,Ce){var Ee=this;be===void 0&&(be=[]),Ce===void 0&&(Ce={}),ye.prototype.optimize.call(this,Ce);for(var Oe=[].slice.call(this.observer.takeRecords());Oe.length>0;)be.push(Oe.pop());for(var Ae=function(Le,Pe){Pe===void 0&&(Pe=!0),!(Le==null||Le===Ee)&&Le.domNode.parentNode!=null&&(Le.domNode[le.DATA_KEY].mutations==null&&(Le.domNode[le.DATA_KEY].mutations=[]),Pe&&Ae(Le.parent))},Te=function(Le){Le.domNode[le.DATA_KEY]==null||Le.domNode[le.DATA_KEY].mutations==null||(Le instanceof oe.default&&Le.children.forEach(Te),Le.optimize(Ce))},Se=be,$e=0;Se.length>0;$e+=1){if($e>=we)throw new Error("[Parchment] Maximum optimize iterations reached");for(Se.forEach(function(Le){var Pe=le.find(Le.target,!0);Pe!=null&&(Pe.domNode===Le.target&&(Le.type==="childList"?(Ae(le.find(Le.previousSibling,!1)),[].forEach.call(Le.addedNodes,function(Re){var Ne=le.find(Re,!1);Ae(Ne,!1),Ne instanceof oe.default&&Ne.children.forEach(function(je){Ae(je,!1)})})):Le.type==="attributes"&&Ae(Pe.prev)),Ae(Pe))}),this.children.forEach(Te),Se=[].slice.call(this.observer.takeRecords()),Oe=Se.slice();Oe.length>0;)be.push(Oe.pop())}},ve.prototype.update=function(be,Ce){var Ee=this;Ce===void 0&&(Ce={}),be=be||this.observer.takeRecords(),be.map(function(Oe){var Ae=le.find(Oe.target,!0);return Ae==null?null:Ae.domNode[le.DATA_KEY].mutations==null?(Ae.domNode[le.DATA_KEY].mutations=[Oe],Ae):(Ae.domNode[le.DATA_KEY].mutations.push(Oe),null)}).forEach(function(Oe){Oe==null||Oe===Ee||Oe.domNode[le.DATA_KEY]==null||Oe.update(Oe.domNode[le.DATA_KEY].mutations||[],Ce)}),this.domNode[le.DATA_KEY].mutations!=null&&ye.prototype.update.call(this,this.domNode[le.DATA_KEY].mutations,Ce),this.optimize(be,Ce)},ve.blotName="scroll",ve.defaultChild="block",ve.scope=le.Scope.BLOCK_BLOT,ve.tagName="DIV",ve}(oe.default);te.default=ke},function(X,te,ne){var re=this&&this.__extends||function(){var ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,ve){ye.__proto__=ve}||function(ye,ve){for(var be in ve)ve.hasOwnProperty(be)&&(ye[be]=ve[be])};return function(ye,ve){ke(ye,ve);function be(){this.constructor=ye}ye.prototype=ve===null?Object.create(ve):(be.prototype=ve.prototype,new be)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(18),le=ne(1);function fe(ke,ye){if(Object.keys(ke).length!==Object.keys(ye).length)return!1;for(var ve in ke)if(ke[ve]!==ye[ve])return!1;return!0}var we=function(ke){re(ye,ke);function ye(){return ke!==null&&ke.apply(this,arguments)||this}return ye.formats=function(ve){if(ve.tagName!==ye.tagName)return ke.formats.call(this,ve)},ye.prototype.format=function(ve,be){var Ce=this;ve===this.statics.blotName&&!be?(this.children.forEach(function(Ee){Ee instanceof oe.default||(Ee=Ee.wrap(ye.blotName,!0)),Ce.attributes.copy(Ee)}),this.unwrap()):ke.prototype.format.call(this,ve,be)},ye.prototype.formatAt=function(ve,be,Ce,Ee){if(this.formats()[Ce]!=null||le.query(Ce,le.Scope.ATTRIBUTE)){var Oe=this.isolate(ve,be);Oe.format(Ce,Ee)}else ke.prototype.formatAt.call(this,ve,be,Ce,Ee)},ye.prototype.optimize=function(ve){ke.prototype.optimize.call(this,ve);var be=this.formats();if(Object.keys(be).length===0)return this.unwrap();var Ce=this.next;Ce instanceof ye&&Ce.prev===this&&fe(be,Ce.formats())&&(Ce.moveChildren(this),Ce.remove())},ye.blotName="inline",ye.scope=le.Scope.INLINE_BLOT,ye.tagName="SPAN",ye}(oe.default);te.default=we},function(X,te,ne){var re=this&&this.__extends||function(){var we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,ye){ke.__proto__=ye}||function(ke,ye){for(var ve in ye)ye.hasOwnProperty(ve)&&(ke[ve]=ye[ve])};return function(ke,ye){we(ke,ye);function ve(){this.constructor=ke}ke.prototype=ye===null?Object.create(ye):(ve.prototype=ye.prototype,new ve)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(18),le=ne(1),fe=function(we){re(ke,we);function ke(){return we!==null&&we.apply(this,arguments)||this}return ke.formats=function(ye){var ve=le.query(ke.blotName).tagName;if(ye.tagName!==ve)return we.formats.call(this,ye)},ke.prototype.format=function(ye,ve){le.query(ye,le.Scope.BLOCK)!=null&&(ye===this.statics.blotName&&!ve?this.replaceWith(ke.blotName):we.prototype.format.call(this,ye,ve))},ke.prototype.formatAt=function(ye,ve,be,Ce){le.query(be,le.Scope.BLOCK)!=null?this.format(be,Ce):we.prototype.formatAt.call(this,ye,ve,be,Ce)},ke.prototype.insertAt=function(ye,ve,be){if(be==null||le.query(ve,le.Scope.INLINE)!=null)we.prototype.insertAt.call(this,ye,ve,be);else{var Ce=this.split(ye),Ee=le.create(ve,be);Ce.parent.insertBefore(Ee,Ce)}},ke.prototype.update=function(ye,ve){navigator.userAgent.match(/Trident/)?this.build():we.prototype.update.call(this,ye,ve)},ke.blotName="block",ke.scope=le.Scope.BLOCK_BLOT,ke.tagName="P",ke}(oe.default);te.default=fe},function(X,te,ne){var re=this&&this.__extends||function(){var fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(we,ke){we.__proto__=ke}||function(we,ke){for(var ye in ke)ke.hasOwnProperty(ye)&&(we[ye]=ke[ye])};return function(we,ke){fe(we,ke);function ye(){this.constructor=we}we.prototype=ke===null?Object.create(ke):(ye.prototype=ke.prototype,new ye)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(19),le=function(fe){re(we,fe);function we(){return fe!==null&&fe.apply(this,arguments)||this}return we.formats=function(ke){},we.prototype.format=function(ke,ye){fe.prototype.formatAt.call(this,0,this.length(),ke,ye)},we.prototype.formatAt=function(ke,ye,ve,be){ke===0&&ye===this.length()?this.format(ve,be):fe.prototype.formatAt.call(this,ke,ye,ve,be)},we.prototype.formats=function(){return this.statics.formats(this.domNode)},we}(oe.default);te.default=le},function(X,te,ne){var re=this&&this.__extends||function(){var we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,ye){ke.__proto__=ye}||function(ke,ye){for(var ve in ye)ye.hasOwnProperty(ve)&&(ke[ve]=ye[ve])};return function(ke,ye){we(ke,ye);function ve(){this.constructor=ke}ke.prototype=ye===null?Object.create(ye):(ve.prototype=ye.prototype,new ve)}}();Object.defineProperty(te,"__esModule",{value:!0});var oe=ne(19),le=ne(1),fe=function(we){re(ke,we);function ke(ye){var ve=we.call(this,ye)||this;return ve.text=ve.statics.value(ve.domNode),ve}return ke.create=function(ye){return document.createTextNode(ye)},ke.value=function(ye){var ve=ye.data;return ve.normalize&&(ve=ve.normalize()),ve},ke.prototype.deleteAt=function(ye,ve){this.domNode.data=this.text=this.text.slice(0,ye)+this.text.slice(ye+ve)},ke.prototype.index=function(ye,ve){return this.domNode===ye?ve:-1},ke.prototype.insertAt=function(ye,ve,be){be==null?(this.text=this.text.slice(0,ye)+ve+this.text.slice(ye),this.domNode.data=this.text):we.prototype.insertAt.call(this,ye,ve,be)},ke.prototype.length=function(){return this.text.length},ke.prototype.optimize=function(ye){we.prototype.optimize.call(this,ye),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof ke&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},ke.prototype.position=function(ye,ve){return[this.domNode,ye]},ke.prototype.split=function(ye,ve){if(ve===void 0&&(ve=!1),!ve){if(ye===0)return this;if(ye===this.length())return this.next}var be=le.create(this.domNode.splitText(ye));return this.parent.insertBefore(be,this.next),this.text=this.statics.value(this.domNode),be},ke.prototype.update=function(ye,ve){var be=this;ye.some(function(Ce){return Ce.type==="characterData"&&Ce.target===be.domNode})&&(this.text=this.statics.value(this.domNode))},ke.prototype.value=function(){return this.text},ke.blotName="text",ke.scope=le.Scope.INLINE_BLOT,ke}(oe.default);te.default=fe},function(X,te,ne){var re=document.createElement("div");if(re.classList.toggle("test-class",!1),re.classList.contains("test-class")){var oe=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(le,fe){return arguments.length>1&&!this.contains(le)==!fe?fe:oe.call(this,le)}}String.prototype.startsWith||(String.prototype.startsWith=function(le,fe){return fe=fe||0,this.substr(fe,le.length)===le}),String.prototype.endsWith||(String.prototype.endsWith=function(le,fe){var we=this.toString();(typeof fe!="number"||!isFinite(fe)||Math.floor(fe)!==fe||fe>we.length)&&(fe=we.length),fe-=le.length;var ke=we.indexOf(le,fe);return ke!==-1&&ke===fe}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(fe){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof fe!="function")throw new TypeError("predicate must be a function");for(var we=Object(this),ke=we.length>>>0,ye=arguments[1],ve,be=0;be<ke;be++)if(ve=we[be],fe.call(ye,ve,be,we))return ve}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(X,te){var ne=-1,re=1,oe=0;function le($e,Le,Pe){if($e==Le)return $e?[[oe,$e]]:[];(Pe<0||$e.length<Pe)&&(Pe=null);var Re=ye($e,Le),Ne=$e.substring(0,Re);$e=$e.substring(Re),Le=Le.substring(Re),Re=ve($e,Le);var je=$e.substring($e.length-Re);$e=$e.substring(0,$e.length-Re),Le=Le.substring(0,Le.length-Re);var Ie=fe($e,Le);return Ne&&Ie.unshift([oe,Ne]),je&&Ie.push([oe,je]),Ce(Ie),Pe!=null&&(Ie=Ae(Ie,Pe)),Ie=Te(Ie),Ie}function fe($e,Le){var Pe;if(!$e)return[[re,Le]];if(!Le)return[[ne,$e]];var Re=$e.length>Le.length?$e:Le,Ne=$e.length>Le.length?Le:$e,je=Re.indexOf(Ne);if(je!=-1)return Pe=[[re,Re.substring(0,je)],[oe,Ne],[re,Re.substring(je+Ne.length)]],$e.length>Le.length&&(Pe[0][0]=Pe[2][0]=ne),Pe;if(Ne.length==1)return[[ne,$e],[re,Le]];var Ie=be($e,Le);if(Ie){var De=Ie[0],Ve=Ie[1],ze=Ie[2],qe=Ie[3],Xe=Ie[4],tt=le(De,ze),at=le(Ve,qe);return tt.concat([[oe,Xe]],at)}return we($e,Le)}function we($e,Le){for(var Pe=$e.length,Re=Le.length,Ne=Math.ceil((Pe+Re)/2),je=Ne,Ie=2*Ne,De=new Array(Ie),Ve=new Array(Ie),ze=0;ze<Ie;ze++)De[ze]=-1,Ve[ze]=-1;De[je+1]=0,Ve[je+1]=0;for(var qe=Pe-Re,Xe=qe%2!=0,tt=0,at=0,pt=0,st=0,it=0;it<Ne;it++){for(var Ge=-it+tt;Ge<=it-at;Ge+=2){var et=je+Ge,Je;Ge==-it||Ge!=it&&De[et-1]<De[et+1]?Je=De[et+1]:Je=De[et-1]+1;for(var ft=Je-Ge;Je<Pe&&ft<Re&&$e.charAt(Je)==Le.charAt(ft);)Je++,ft++;if(De[et]=Je,Je>Pe)at+=2;else if(ft>Re)tt+=2;else if(Xe){var dt=je+qe-Ge;if(dt>=0&&dt<Ie&&Ve[dt]!=-1){var Qe=Pe-Ve[dt];if(Je>=Qe)return ke($e,Le,Je,ft)}}}for(var ht=-it+pt;ht<=it-st;ht+=2){var dt=je+ht,Qe;ht==-it||ht!=it&&Ve[dt-1]<Ve[dt+1]?Qe=Ve[dt+1]:Qe=Ve[dt-1]+1;for(var mt=Qe-ht;Qe<Pe&&mt<Re&&$e.charAt(Pe-Qe-1)==Le.charAt(Re-mt-1);)Qe++,mt++;if(Ve[dt]=Qe,Qe>Pe)st+=2;else if(mt>Re)pt+=2;else if(!Xe){var et=je+qe-ht;if(et>=0&&et<Ie&&De[et]!=-1){var Je=De[et],ft=je+Je-et;if(Qe=Pe-Qe,Je>=Qe)return ke($e,Le,Je,ft)}}}}return[[ne,$e],[re,Le]]}function ke($e,Le,Pe,Re){var Ne=$e.substring(0,Pe),je=Le.substring(0,Re),Ie=$e.substring(Pe),De=Le.substring(Re),Ve=le(Ne,je),ze=le(Ie,De);return Ve.concat(ze)}function ye($e,Le){if(!$e||!Le||$e.charAt(0)!=Le.charAt(0))return 0;for(var Pe=0,Re=Math.min($e.length,Le.length),Ne=Re,je=0;Pe<Ne;)$e.substring(je,Ne)==Le.substring(je,Ne)?(Pe=Ne,je=Pe):Re=Ne,Ne=Math.floor((Re-Pe)/2+Pe);return Ne}function ve($e,Le){if(!$e||!Le||$e.charAt($e.length-1)!=Le.charAt(Le.length-1))return 0;for(var Pe=0,Re=Math.min($e.length,Le.length),Ne=Re,je=0;Pe<Ne;)$e.substring($e.length-Ne,$e.length-je)==Le.substring(Le.length-Ne,Le.length-je)?(Pe=Ne,je=Pe):Re=Ne,Ne=Math.floor((Re-Pe)/2+Pe);return Ne}function be($e,Le){var Pe=$e.length>Le.length?$e:Le,Re=$e.length>Le.length?Le:$e;if(Pe.length<4||Re.length*2<Pe.length)return null;function Ne(at,pt,st){for(var it=at.substring(st,st+Math.floor(at.length/4)),Ge=-1,et="",Je,ft,dt,Qe;(Ge=pt.indexOf(it,Ge+1))!=-1;){var ht=ye(at.substring(st),pt.substring(Ge)),mt=ve(at.substring(0,st),pt.substring(0,Ge));et.length<mt+ht&&(et=pt.substring(Ge-mt,Ge)+pt.substring(Ge,Ge+ht),Je=at.substring(0,st-mt),ft=at.substring(st+ht),dt=pt.substring(0,Ge-mt),Qe=pt.substring(Ge+ht))}return et.length*2>=at.length?[Je,ft,dt,Qe,et]:null}var je=Ne(Pe,Re,Math.ceil(Pe.length/4)),Ie=Ne(Pe,Re,Math.ceil(Pe.length/2)),De;if(!je&&!Ie)return null;Ie?je?De=je[4].length>Ie[4].length?je:Ie:De=Ie:De=je;var Ve,ze,qe,Xe;$e.length>Le.length?(Ve=De[0],ze=De[1],qe=De[2],Xe=De[3]):(qe=De[0],Xe=De[1],Ve=De[2],ze=De[3]);var tt=De[4];return[Ve,ze,qe,Xe,tt]}function Ce($e){$e.push([oe,""]);for(var Le=0,Pe=0,Re=0,Ne="",je="",Ie;Le<$e.length;)switch($e[Le][0]){case re:Re++,je+=$e[Le][1],Le++;break;case ne:Pe++,Ne+=$e[Le][1],Le++;break;case oe:Pe+Re>1?(Pe!==0&&Re!==0&&(Ie=ye(je,Ne),Ie!==0&&(Le-Pe-Re>0&&$e[Le-Pe-Re-1][0]==oe?$e[Le-Pe-Re-1][1]+=je.substring(0,Ie):($e.splice(0,0,[oe,je.substring(0,Ie)]),Le++),je=je.substring(Ie),Ne=Ne.substring(Ie)),Ie=ve(je,Ne),Ie!==0&&($e[Le][1]=je.substring(je.length-Ie)+$e[Le][1],je=je.substring(0,je.length-Ie),Ne=Ne.substring(0,Ne.length-Ie))),Pe===0?$e.splice(Le-Re,Pe+Re,[re,je]):Re===0?$e.splice(Le-Pe,Pe+Re,[ne,Ne]):$e.splice(Le-Pe-Re,Pe+Re,[ne,Ne],[re,je]),Le=Le-Pe-Re+(Pe?1:0)+(Re?1:0)+1):Le!==0&&$e[Le-1][0]==oe?($e[Le-1][1]+=$e[Le][1],$e.splice(Le,1)):Le++,Re=0,Pe=0,Ne="",je="";break}$e[$e.length-1][1]===""&&$e.pop();var De=!1;for(Le=1;Le<$e.length-1;)$e[Le-1][0]==oe&&$e[Le+1][0]==oe&&($e[Le][1].substring($e[Le][1].length-$e[Le-1][1].length)==$e[Le-1][1]?($e[Le][1]=$e[Le-1][1]+$e[Le][1].substring(0,$e[Le][1].length-$e[Le-1][1].length),$e[Le+1][1]=$e[Le-1][1]+$e[Le+1][1],$e.splice(Le-1,1),De=!0):$e[Le][1].substring(0,$e[Le+1][1].length)==$e[Le+1][1]&&($e[Le-1][1]+=$e[Le+1][1],$e[Le][1]=$e[Le][1].substring($e[Le+1][1].length)+$e[Le+1][1],$e.splice(Le+1,1),De=!0)),Le++;De&&Ce($e)}var Ee=le;Ee.INSERT=re,Ee.DELETE=ne,Ee.EQUAL=oe,X.exports=Ee;function Oe($e,Le){if(Le===0)return[oe,$e];for(var Pe=0,Re=0;Re<$e.length;Re++){var Ne=$e[Re];if(Ne[0]===ne||Ne[0]===oe){var je=Pe+Ne[1].length;if(Le===je)return[Re+1,$e];if(Le<je){$e=$e.slice();var Ie=Le-Pe,De=[Ne[0],Ne[1].slice(0,Ie)],Ve=[Ne[0],Ne[1].slice(Ie)];return $e.splice(Re,1,De,Ve),[Re+1,$e]}else Pe=je}}throw new Error("cursor_pos is out of bounds!")}function Ae($e,Le){var Pe=Oe($e,Le),Re=Pe[1],Ne=Pe[0],je=Re[Ne],Ie=Re[Ne+1];if(je==null)return $e;if(je[0]!==oe)return $e;if(Ie!=null&&je[1]+Ie[1]===Ie[1]+je[1])return Re.splice(Ne,2,Ie,je),Se(Re,Ne,2);if(Ie!=null&&Ie[1].indexOf(je[1])===0){Re.splice(Ne,2,[Ie[0],je[1]],[0,je[1]]);var De=Ie[1].slice(je[1].length);return De.length>0&&Re.splice(Ne+2,0,[Ie[0],De]),Se(Re,Ne,3)}else return $e}function Te($e){for(var Le=!1,Pe=function(Ie){return Ie.charCodeAt(0)>=56320&&Ie.charCodeAt(0)<=57343},Re=function(Ie){return Ie.charCodeAt(Ie.length-1)>=55296&&Ie.charCodeAt(Ie.length-1)<=56319},Ne=2;Ne<$e.length;Ne+=1)$e[Ne-2][0]===oe&&Re($e[Ne-2][1])&&$e[Ne-1][0]===ne&&Pe($e[Ne-1][1])&&$e[Ne][0]===re&&Pe($e[Ne][1])&&(Le=!0,$e[Ne-1][1]=$e[Ne-2][1].slice(-1)+$e[Ne-1][1],$e[Ne][1]=$e[Ne-2][1].slice(-1)+$e[Ne][1],$e[Ne-2][1]=$e[Ne-2][1].slice(0,-1));if(!Le)return $e;for(var je=[],Ne=0;Ne<$e.length;Ne+=1)$e[Ne][1].length>0&&je.push($e[Ne]);return je}function Se($e,Le,Pe){for(var Re=Le+Pe-1;Re>=0&&Re>=Le-1;Re--)if(Re+1<$e.length){var Ne=$e[Re],je=$e[Re+1];Ne[0]===je[1]&&$e.splice(Re,2,[Ne[0],Ne[1]+je[1]])}return $e}},function(X,te){te=X.exports=typeof Object.keys=="function"?Object.keys:ne,te.shim=ne;function ne(re){var oe=[];for(var le in re)oe.push(le);return oe}},function(X,te){var ne=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";te=X.exports=ne?re:oe,te.supported=re;function re(le){return Object.prototype.toString.call(le)=="[object Arguments]"}te.unsupported=oe;function oe(le){return le&&typeof le=="object"&&typeof le.length=="number"&&Object.prototype.hasOwnProperty.call(le,"callee")&&!Object.prototype.propertyIsEnumerable.call(le,"callee")||!1}},function(X,te){var ne=Object.prototype.hasOwnProperty,re="~";function oe(){}Object.create&&(oe.prototype=Object.create(null),new oe().__proto__||(re=!1));function le(we,ke,ye){this.fn=we,this.context=ke,this.once=ye||!1}function fe(){this._events=new oe,this._eventsCount=0}fe.prototype.eventNames=function(){var ke=[],ye,ve;if(this._eventsCount===0)return ke;for(ve in ye=this._events)ne.call(ye,ve)&&ke.push(re?ve.slice(1):ve);return Object.getOwnPropertySymbols?ke.concat(Object.getOwnPropertySymbols(ye)):ke},fe.prototype.listeners=function(ke,ye){var ve=re?re+ke:ke,be=this._events[ve];if(ye)return!!be;if(!be)return[];if(be.fn)return[be.fn];for(var Ce=0,Ee=be.length,Oe=new Array(Ee);Ce<Ee;Ce++)Oe[Ce]=be[Ce].fn;return Oe},fe.prototype.emit=function(ke,ye,ve,be,Ce,Ee){var Oe=re?re+ke:ke;if(!this._events[Oe])return!1;var Ae=this._events[Oe],Te=arguments.length,Se,$e;if(Ae.fn){switch(Ae.once&&this.removeListener(ke,Ae.fn,void 0,!0),Te){case 1:return Ae.fn.call(Ae.context),!0;case 2:return Ae.fn.call(Ae.context,ye),!0;case 3:return Ae.fn.call(Ae.context,ye,ve),!0;case 4:return Ae.fn.call(Ae.context,ye,ve,be),!0;case 5:return Ae.fn.call(Ae.context,ye,ve,be,Ce),!0;case 6:return Ae.fn.call(Ae.context,ye,ve,be,Ce,Ee),!0}for($e=1,Se=new Array(Te-1);$e<Te;$e++)Se[$e-1]=arguments[$e];Ae.fn.apply(Ae.context,Se)}else{var Le=Ae.length,Pe;for($e=0;$e<Le;$e++)switch(Ae[$e].once&&this.removeListener(ke,Ae[$e].fn,void 0,!0),Te){case 1:Ae[$e].fn.call(Ae[$e].context);break;case 2:Ae[$e].fn.call(Ae[$e].context,ye);break;case 3:Ae[$e].fn.call(Ae[$e].context,ye,ve);break;case 4:Ae[$e].fn.call(Ae[$e].context,ye,ve,be);break;default:if(!Se)for(Pe=1,Se=new Array(Te-1);Pe<Te;Pe++)Se[Pe-1]=arguments[Pe];Ae[$e].fn.apply(Ae[$e].context,Se)}}return!0},fe.prototype.on=function(ke,ye,ve){var be=new le(ye,ve||this),Ce=re?re+ke:ke;return this._events[Ce]?this._events[Ce].fn?this._events[Ce]=[this._events[Ce],be]:this._events[Ce].push(be):(this._events[Ce]=be,this._eventsCount++),this},fe.prototype.once=function(ke,ye,ve){var be=new le(ye,ve||this,!0),Ce=re?re+ke:ke;return this._events[Ce]?this._events[Ce].fn?this._events[Ce]=[this._events[Ce],be]:this._events[Ce].push(be):(this._events[Ce]=be,this._eventsCount++),this},fe.prototype.removeListener=function(ke,ye,ve,be){var Ce=re?re+ke:ke;if(!this._events[Ce])return this;if(!ye)return--this._eventsCount===0?this._events=new oe:delete this._events[Ce],this;var Ee=this._events[Ce];if(Ee.fn)Ee.fn===ye&&(!be||Ee.once)&&(!ve||Ee.context===ve)&&(--this._eventsCount===0?this._events=new oe:delete this._events[Ce]);else{for(var Oe=0,Ae=[],Te=Ee.length;Oe<Te;Oe++)(Ee[Oe].fn!==ye||be&&!Ee[Oe].once||ve&&Ee[Oe].context!==ve)&&Ae.push(Ee[Oe]);Ae.length?this._events[Ce]=Ae.length===1?Ae[0]:Ae:--this._eventsCount===0?this._events=new oe:delete this._events[Ce]}return this},fe.prototype.removeAllListeners=function(ke){var ye;return ke?(ye=re?re+ke:ke,this._events[ye]&&(--this._eventsCount===0?this._events=new oe:delete this._events[ye])):(this._events=new oe,this._eventsCount=0),this},fe.prototype.off=fe.prototype.removeListener,fe.prototype.addListener=fe.prototype.on,fe.prototype.setMaxListeners=function(){return this},fe.prefixed=re,fe.EventEmitter=fe,typeof X<"u"&&(X.exports=fe)},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.matchText=te.matchSpacing=te.matchNewline=te.matchBlot=te.matchAttributor=te.default=void 0;var re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},oe=function(){function nt(Ye,Be){var Ue=[],He=!0,ot=!1,ut=void 0;try{for(var gt=Ye[Symbol.iterator](),$t;!(He=($t=gt.next()).done)&&(Ue.push($t.value),!(Be&&Ue.length===Be));He=!0);}catch(Ke){ot=!0,ut=Ke}finally{try{!He&&gt.return&&gt.return()}finally{if(ot)throw ut}}return Ue}return function(Ye,Be){if(Array.isArray(Ye))return Ye;if(Symbol.iterator in Object(Ye))return nt(Ye,Be);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),le=function(){function nt(Ye,Be){for(var Ue=0;Ue<Be.length;Ue++){var He=Be[Ue];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(Ye,He.key,He)}}return function(Ye,Be,Ue){return Be&&nt(Ye.prototype,Be),Ue&&nt(Ye,Ue),Ye}}(),fe=ne(3),we=Ve(fe),ke=ne(2),ye=Ve(ke),ve=ne(0),be=Ve(ve),Ce=ne(5),Ee=Ve(Ce),Oe=ne(10),Ae=Ve(Oe),Te=ne(9),Se=Ve(Te),$e=ne(36),Le=ne(37),Pe=ne(13),Re=Ve(Pe),Ne=ne(26),je=ne(38),Ie=ne(39),De=ne(40);function Ve(nt){return nt&&nt.__esModule?nt:{default:nt}}function ze(nt,Ye,Be){return Ye in nt?Object.defineProperty(nt,Ye,{value:Be,enumerable:!0,configurable:!0,writable:!0}):nt[Ye]=Be,nt}function qe(nt,Ye){if(!(nt instanceof Ye))throw new TypeError("Cannot call a class as a function")}function Xe(nt,Ye){if(!nt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ye&&(typeof Ye=="object"||typeof Ye=="function")?Ye:nt}function tt(nt,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ye);nt.prototype=Object.create(Ye&&Ye.prototype,{constructor:{value:nt,enumerable:!1,writable:!0,configurable:!0}}),Ye&&(Object.setPrototypeOf?Object.setPrototypeOf(nt,Ye):nt.__proto__=Ye)}var at=(0,Ae.default)("quill:clipboard"),pt="__ql-matcher",st=[[Node.TEXT_NODE,lt],[Node.TEXT_NODE,Tt],["br",St],[Node.ELEMENT_NODE,Tt],[Node.ELEMENT_NODE,wt],[Node.ELEMENT_NODE,Ze],[Node.ELEMENT_NODE,vt],[Node.ELEMENT_NODE,rt],["li",Et],["b",mt.bind(mt,"bold")],["i",mt.bind(mt,"italic")],["style",At]],it=[$e.AlignAttribute,je.DirectionAttribute].reduce(function(nt,Ye){return nt[Ye.keyName]=Ye,nt},{}),Ge=[$e.AlignStyle,Le.BackgroundStyle,Ne.ColorStyle,je.DirectionStyle,Ie.FontStyle,De.SizeStyle].reduce(function(nt,Ye){return nt[Ye.keyName]=Ye,nt},{}),et=function(nt){tt(Ye,nt);function Ye(Be,Ue){qe(this,Ye);var He=Xe(this,(Ye.__proto__||Object.getPrototypeOf(Ye)).call(this,Be,Ue));return He.quill.root.addEventListener("paste",He.onPaste.bind(He)),He.container=He.quill.addContainer("ql-clipboard"),He.container.setAttribute("contenteditable",!0),He.container.setAttribute("tabindex",-1),He.matchers=[],st.concat(He.options.matchers).forEach(function(ot){var ut=oe(ot,2),gt=ut[0],$t=ut[1];!Ue.matchVisual&&$t===Ze||He.addMatcher(gt,$t)}),He}return le(Ye,[{key:"addMatcher",value:function(Ue,He){this.matchers.push([Ue,He])}},{key:"convert",value:function(Ue){if(typeof Ue=="string")return this.container.innerHTML=Ue.replace(/\>\r?\n +\</g,"><"),this.convert();var He=this.quill.getFormat(this.quill.selection.savedRange.index);if(He[Re.default.blotName]){var ot=this.container.innerText;return this.container.innerHTML="",new ye.default().insert(ot,ze({},Re.default.blotName,He[Re.default.blotName]))}var ut=this.prepareMatching(),gt=oe(ut,2),$t=gt[0],Ke=gt[1],Me=ht(this.container,$t,Ke);return dt(Me,`
`)&&Me.ops[Me.ops.length-1].attributes==null&&(Me=Me.compose(new ye.default().retain(Me.length()-1).delete(1))),at.log("convert",this.container.innerHTML,Me),this.container.innerHTML="",Me}},{key:"dangerouslyPasteHTML",value:function(Ue,He){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ee.default.sources.API;if(typeof Ue=="string")this.quill.setContents(this.convert(Ue),He),this.quill.setSelection(0,Ee.default.sources.SILENT);else{var ut=this.convert(He);this.quill.updateContents(new ye.default().retain(Ue).concat(ut),ot),this.quill.setSelection(Ue+ut.length(),Ee.default.sources.SILENT)}}},{key:"onPaste",value:function(Ue){var He=this;if(!(Ue.defaultPrevented||!this.quill.isEnabled())){var ot=this.quill.getSelection(),ut=new ye.default().retain(ot.index),gt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(Ee.default.sources.SILENT),setTimeout(function(){ut=ut.concat(He.convert()).delete(ot.length),He.quill.updateContents(ut,Ee.default.sources.USER),He.quill.setSelection(ut.length()-ot.length,Ee.default.sources.SILENT),He.quill.scrollingContainer.scrollTop=gt,He.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Ue=this,He=[],ot=[];return this.matchers.forEach(function(ut){var gt=oe(ut,2),$t=gt[0],Ke=gt[1];switch($t){case Node.TEXT_NODE:ot.push(Ke);break;case Node.ELEMENT_NODE:He.push(Ke);break;default:[].forEach.call(Ue.container.querySelectorAll($t),function(Me){Me[pt]=Me[pt]||[],Me[pt].push(Ke)});break}}),[He,ot]}}]),Ye}(Se.default);et.DEFAULTS={matchers:[],matchVisual:!0};function Je(nt,Ye,Be){return(typeof Ye>"u"?"undefined":re(Ye))==="object"?Object.keys(Ye).reduce(function(Ue,He){return Je(Ue,He,Ye[He])},nt):nt.reduce(function(Ue,He){return He.attributes&&He.attributes[Ye]?Ue.push(He):Ue.insert(He.insert,(0,we.default)({},ze({},Ye,Be),He.attributes))},new ye.default)}function ft(nt){if(nt.nodeType!==Node.ELEMENT_NODE)return{};var Ye="__ql-computed-style";return nt[Ye]||(nt[Ye]=window.getComputedStyle(nt))}function dt(nt,Ye){for(var Be="",Ue=nt.ops.length-1;Ue>=0&&Be.length<Ye.length;--Ue){var He=nt.ops[Ue];if(typeof He.insert!="string")break;Be=He.insert+Be}return Be.slice(-1*Ye.length)===Ye}function Qe(nt){if(nt.childNodes.length===0)return!1;var Ye=ft(nt);return["block","list-item"].indexOf(Ye.display)>-1}function ht(nt,Ye,Be){return nt.nodeType===nt.TEXT_NODE?Be.reduce(function(Ue,He){return He(nt,Ue)},new ye.default):nt.nodeType===nt.ELEMENT_NODE?[].reduce.call(nt.childNodes||[],function(Ue,He){var ot=ht(He,Ye,Be);return He.nodeType===nt.ELEMENT_NODE&&(ot=Ye.reduce(function(ut,gt){return gt(He,ut)},ot),ot=(He[pt]||[]).reduce(function(ut,gt){return gt(He,ut)},ot)),Ue.concat(ot)},new ye.default):new ye.default}function mt(nt,Ye,Be){return Je(Be,nt,!0)}function vt(nt,Ye){var Be=be.default.Attributor.Attribute.keys(nt),Ue=be.default.Attributor.Class.keys(nt),He=be.default.Attributor.Style.keys(nt),ot={};return Be.concat(Ue).concat(He).forEach(function(ut){var gt=be.default.query(ut,be.default.Scope.ATTRIBUTE);gt!=null&&(ot[gt.attrName]=gt.value(nt),ot[gt.attrName])||(gt=it[ut],gt!=null&&(gt.attrName===ut||gt.keyName===ut)&&(ot[gt.attrName]=gt.value(nt)||void 0),gt=Ge[ut],gt!=null&&(gt.attrName===ut||gt.keyName===ut)&&(gt=Ge[ut],ot[gt.attrName]=gt.value(nt)||void 0))}),Object.keys(ot).length>0&&(Ye=Je(Ye,ot)),Ye}function wt(nt,Ye){var Be=be.default.query(nt);if(Be==null)return Ye;if(Be.prototype instanceof be.default.Embed){var Ue={},He=Be.value(nt);He!=null&&(Ue[Be.blotName]=He,Ye=new ye.default().insert(Ue,Be.formats(nt)))}else typeof Be.formats=="function"&&(Ye=Je(Ye,Be.blotName,Be.formats(nt)));return Ye}function St(nt,Ye){return dt(Ye,`
`)||Ye.insert(`
`),Ye}function At(){return new ye.default}function Et(nt,Ye){var Be=be.default.query(nt);if(Be==null||Be.blotName!=="list-item"||!dt(Ye,`
`))return Ye;for(var Ue=-1,He=nt.parentNode;!He.classList.contains("ql-clipboard");)(be.default.query(He)||{}).blotName==="list"&&(Ue+=1),He=He.parentNode;return Ue<=0?Ye:Ye.compose(new ye.default().retain(Ye.length()-1).retain(1,{indent:Ue}))}function Tt(nt,Ye){return dt(Ye,`
`)||(Qe(nt)||Ye.length()>0&&nt.nextSibling&&Qe(nt.nextSibling))&&Ye.insert(`
`),Ye}function Ze(nt,Ye){if(Qe(nt)&&nt.nextElementSibling!=null&&!dt(Ye,`

`)){var Be=nt.offsetHeight+parseFloat(ft(nt).marginTop)+parseFloat(ft(nt).marginBottom);nt.nextElementSibling.offsetTop>nt.offsetTop+Be*1.5&&Ye.insert(`
`)}return Ye}function rt(nt,Ye){var Be={},Ue=nt.style||{};return Ue.fontStyle&&ft(nt).fontStyle==="italic"&&(Be.italic=!0),Ue.fontWeight&&(ft(nt).fontWeight.startsWith("bold")||parseInt(ft(nt).fontWeight)>=700)&&(Be.bold=!0),Object.keys(Be).length>0&&(Ye=Je(Ye,Be)),parseFloat(Ue.textIndent||0)>0&&(Ye=new ye.default().insert("	").concat(Ye)),Ye}function lt(nt,Ye){var Be=nt.data;if(nt.parentNode.tagName==="O:P")return Ye.insert(Be.trim());if(Be.trim().length===0&&nt.parentNode.classList.contains("ql-clipboard"))return Ye;if(!ft(nt.parentNode).whiteSpace.startsWith("pre")){var Ue=function(ot,ut){return ut=ut.replace(/[^\u00a0]/g,""),ut.length<1&&ot?" ":ut};Be=Be.replace(/\r\n/g," ").replace(/\n/g," "),Be=Be.replace(/\s\s+/g,Ue.bind(Ue,!0)),(nt.previousSibling==null&&Qe(nt.parentNode)||nt.previousSibling!=null&&Qe(nt.previousSibling))&&(Be=Be.replace(/^\s+/,Ue.bind(Ue,!1))),(nt.nextSibling==null&&Qe(nt.parentNode)||nt.nextSibling!=null&&Qe(nt.nextSibling))&&(Be=Be.replace(/\s+$/,Ue.bind(Ue,!1)))}return Ye.insert(Be)}te.default=et,te.matchAttributor=vt,te.matchBlot=wt,te.matchNewline=Tt,te.matchSpacing=Ze,te.matchText=lt},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ce(Ee,Oe){for(var Ae=0;Ae<Oe.length;Ae++){var Te=Oe[Ae];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(Ee,Te.key,Te)}}return function(Ee,Oe,Ae){return Oe&&Ce(Ee.prototype,Oe),Ae&&Ce(Ee,Ae),Ee}}(),oe=function Ce(Ee,Oe,Ae){Ee===null&&(Ee=Function.prototype);var Te=Object.getOwnPropertyDescriptor(Ee,Oe);if(Te===void 0){var Se=Object.getPrototypeOf(Ee);return Se===null?void 0:Ce(Se,Oe,Ae)}else{if("value"in Te)return Te.value;var $e=Te.get;return $e===void 0?void 0:$e.call(Ae)}},le=ne(6),fe=we(le);function we(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function ke(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")}function ye(Ce,Ee){if(!Ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:Ce}function ve(Ce,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);Ce.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ce,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Ce,Ee):Ce.__proto__=Ee)}var be=function(Ce){ve(Ee,Ce);function Ee(){return ke(this,Ee),ye(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).apply(this,arguments))}return re(Ee,[{key:"optimize",value:function(Ae){oe(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"optimize",this).call(this,Ae),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return oe(Ee.__proto__||Object.getPrototypeOf(Ee),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),Ee}(fe.default);be.blotName="bold",be.tagName=["STRONG","B"],te.default=be},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.addControls=te.default=void 0;var re=function(){function De(Ve,ze){var qe=[],Xe=!0,tt=!1,at=void 0;try{for(var pt=Ve[Symbol.iterator](),st;!(Xe=(st=pt.next()).done)&&(qe.push(st.value),!(ze&&qe.length===ze));Xe=!0);}catch(it){tt=!0,at=it}finally{try{!Xe&&pt.return&&pt.return()}finally{if(tt)throw at}}return qe}return function(Ve,ze){if(Array.isArray(Ve))return Ve;if(Symbol.iterator in Object(Ve))return De(Ve,ze);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),oe=function(){function De(Ve,ze){for(var qe=0;qe<ze.length;qe++){var Xe=ze[qe];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(Ve,Xe.key,Xe)}}return function(Ve,ze,qe){return ze&&De(Ve.prototype,ze),qe&&De(Ve,qe),Ve}}(),le=ne(2),fe=Ae(le),we=ne(0),ke=Ae(we),ye=ne(5),ve=Ae(ye),be=ne(10),Ce=Ae(be),Ee=ne(9),Oe=Ae(Ee);function Ae(De){return De&&De.__esModule?De:{default:De}}function Te(De,Ve,ze){return Ve in De?Object.defineProperty(De,Ve,{value:ze,enumerable:!0,configurable:!0,writable:!0}):De[Ve]=ze,De}function Se(De,Ve){if(!(De instanceof Ve))throw new TypeError("Cannot call a class as a function")}function $e(De,Ve){if(!De)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ve&&(typeof Ve=="object"||typeof Ve=="function")?Ve:De}function Le(De,Ve){if(typeof Ve!="function"&&Ve!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ve);De.prototype=Object.create(Ve&&Ve.prototype,{constructor:{value:De,enumerable:!1,writable:!0,configurable:!0}}),Ve&&(Object.setPrototypeOf?Object.setPrototypeOf(De,Ve):De.__proto__=Ve)}var Pe=(0,Ce.default)("quill:toolbar"),Re=function(De){Le(Ve,De);function Ve(ze,qe){Se(this,Ve);var Xe=$e(this,(Ve.__proto__||Object.getPrototypeOf(Ve)).call(this,ze,qe));if(Array.isArray(Xe.options.container)){var tt=document.createElement("div");je(tt,Xe.options.container),ze.container.parentNode.insertBefore(tt,ze.container),Xe.container=tt}else typeof Xe.options.container=="string"?Xe.container=document.querySelector(Xe.options.container):Xe.container=Xe.options.container;if(!(Xe.container instanceof HTMLElement)){var at;return at=Pe.error("Container required for toolbar",Xe.options),$e(Xe,at)}return Xe.container.classList.add("ql-toolbar"),Xe.controls=[],Xe.handlers={},Object.keys(Xe.options.handlers).forEach(function(pt){Xe.addHandler(pt,Xe.options.handlers[pt])}),[].forEach.call(Xe.container.querySelectorAll("button, select"),function(pt){Xe.attach(pt)}),Xe.quill.on(ve.default.events.EDITOR_CHANGE,function(pt,st){pt===ve.default.events.SELECTION_CHANGE&&Xe.update(st)}),Xe.quill.on(ve.default.events.SCROLL_OPTIMIZE,function(){var pt=Xe.quill.selection.getRange(),st=re(pt,1),it=st[0];Xe.update(it)}),Xe}return oe(Ve,[{key:"addHandler",value:function(qe,Xe){this.handlers[qe]=Xe}},{key:"attach",value:function(qe){var Xe=this,tt=[].find.call(qe.classList,function(pt){return pt.indexOf("ql-")===0});if(tt){if(tt=tt.slice(3),qe.tagName==="BUTTON"&&qe.setAttribute("type","button"),this.handlers[tt]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[tt]==null){Pe.warn("ignoring attaching to disabled format",tt,qe);return}if(ke.default.query(tt)==null){Pe.warn("ignoring attaching to nonexistent format",tt,qe);return}}var at=qe.tagName==="SELECT"?"change":"click";qe.addEventListener(at,function(pt){var st=void 0;if(qe.tagName==="SELECT"){if(qe.selectedIndex<0)return;var it=qe.options[qe.selectedIndex];it.hasAttribute("selected")?st=!1:st=it.value||!1}else qe.classList.contains("ql-active")?st=!1:st=qe.value||!qe.hasAttribute("value"),pt.preventDefault();Xe.quill.focus();var Ge=Xe.quill.selection.getRange(),et=re(Ge,1),Je=et[0];if(Xe.handlers[tt]!=null)Xe.handlers[tt].call(Xe,st);else if(ke.default.query(tt).prototype instanceof ke.default.Embed){if(st=prompt("Enter "+tt),!st)return;Xe.quill.updateContents(new fe.default().retain(Je.index).delete(Je.length).insert(Te({},tt,st)),ve.default.sources.USER)}else Xe.quill.format(tt,st,ve.default.sources.USER);Xe.update(Je)}),this.controls.push([tt,qe])}}},{key:"update",value:function(qe){var Xe=qe==null?{}:this.quill.getFormat(qe);this.controls.forEach(function(tt){var at=re(tt,2),pt=at[0],st=at[1];if(st.tagName==="SELECT"){var it=void 0;if(qe==null)it=null;else if(Xe[pt]==null)it=st.querySelector("option[selected]");else if(!Array.isArray(Xe[pt])){var Ge=Xe[pt];typeof Ge=="string"&&(Ge=Ge.replace(/\"/g,'\\"')),it=st.querySelector('option[value="'+Ge+'"]')}it==null?(st.value="",st.selectedIndex=-1):it.selected=!0}else if(qe==null)st.classList.remove("ql-active");else if(st.hasAttribute("value")){var et=Xe[pt]===st.getAttribute("value")||Xe[pt]!=null&&Xe[pt].toString()===st.getAttribute("value")||Xe[pt]==null&&!st.getAttribute("value");st.classList.toggle("ql-active",et)}else st.classList.toggle("ql-active",Xe[pt]!=null)})}}]),Ve}(Oe.default);Re.DEFAULTS={};function Ne(De,Ve,ze){var qe=document.createElement("button");qe.setAttribute("type","button"),qe.classList.add("ql-"+Ve),ze!=null&&(qe.value=ze),De.appendChild(qe)}function je(De,Ve){Array.isArray(Ve[0])||(Ve=[Ve]),Ve.forEach(function(ze){var qe=document.createElement("span");qe.classList.add("ql-formats"),ze.forEach(function(Xe){if(typeof Xe=="string")Ne(qe,Xe);else{var tt=Object.keys(Xe)[0],at=Xe[tt];Array.isArray(at)?Ie(qe,tt,at):Ne(qe,tt,at)}}),De.appendChild(qe)})}function Ie(De,Ve,ze){var qe=document.createElement("select");qe.classList.add("ql-"+Ve),ze.forEach(function(Xe){var tt=document.createElement("option");Xe!==!1?tt.setAttribute("value",Xe):tt.setAttribute("selected","selected"),qe.appendChild(tt)}),De.appendChild(qe)}Re.DEFAULTS={container:null,handlers:{clean:function(){var Ve=this,ze=this.quill.getSelection();if(ze!=null)if(ze.length==0){var qe=this.quill.getFormat();Object.keys(qe).forEach(function(Xe){ke.default.query(Xe,ke.default.Scope.INLINE)!=null&&Ve.quill.format(Xe,!1)})}else this.quill.removeFormat(ze,ve.default.sources.USER)},direction:function(Ve){var ze=this.quill.getFormat().align;Ve==="rtl"&&ze==null?this.quill.format("align","right",ve.default.sources.USER):!Ve&&ze==="right"&&this.quill.format("align",!1,ve.default.sources.USER),this.quill.format("direction",Ve,ve.default.sources.USER)},indent:function(Ve){var ze=this.quill.getSelection(),qe=this.quill.getFormat(ze),Xe=parseInt(qe.indent||0);if(Ve==="+1"||Ve==="-1"){var tt=Ve==="+1"?1:-1;qe.direction==="rtl"&&(tt*=-1),this.quill.format("indent",Xe+tt,ve.default.sources.USER)}},link:function(Ve){Ve===!0&&(Ve=prompt("Enter link URL:")),this.quill.format("link",Ve,ve.default.sources.USER)},list:function(Ve){var ze=this.quill.getSelection(),qe=this.quill.getFormat(ze);Ve==="check"?qe.list==="checked"||qe.list==="unchecked"?this.quill.format("list",!1,ve.default.sources.USER):this.quill.format("list","unchecked",ve.default.sources.USER):this.quill.format("list",Ve,ve.default.sources.USER)}}},te.default=Re,te.addControls=je},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ce(Ee,Oe){for(var Ae=0;Ae<Oe.length;Ae++){var Te=Oe[Ae];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(Ee,Te.key,Te)}}return function(Ee,Oe,Ae){return Oe&&Ce(Ee.prototype,Oe),Ae&&Ce(Ee,Ae),Ee}}(),oe=function Ce(Ee,Oe,Ae){Ee===null&&(Ee=Function.prototype);var Te=Object.getOwnPropertyDescriptor(Ee,Oe);if(Te===void 0){var Se=Object.getPrototypeOf(Ee);return Se===null?void 0:Ce(Se,Oe,Ae)}else{if("value"in Te)return Te.value;var $e=Te.get;return $e===void 0?void 0:$e.call(Ae)}},le=ne(28),fe=we(le);function we(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function ke(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")}function ye(Ce,Ee){if(!Ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:Ce}function ve(Ce,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);Ce.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ce,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Ce,Ee):Ce.__proto__=Ee)}var be=function(Ce){ve(Ee,Ce);function Ee(Oe,Ae){ke(this,Ee);var Te=ye(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,Oe));return Te.label.innerHTML=Ae,Te.container.classList.add("ql-color-picker"),[].slice.call(Te.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(Se){Se.classList.add("ql-primary")}),Te}return re(Ee,[{key:"buildItem",value:function(Ae){var Te=oe(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"buildItem",this).call(this,Ae);return Te.style.backgroundColor=Ae.getAttribute("value")||"",Te}},{key:"selectItem",value:function(Ae,Te){oe(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"selectItem",this).call(this,Ae,Te);var Se=this.label.querySelector(".ql-color-label"),$e=Ae&&Ae.getAttribute("data-value")||"";Se&&(Se.tagName==="line"?Se.style.stroke=$e:Se.style.fill=$e)}}]),Ee}(fe.default);te.default=be},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ce(Ee,Oe){for(var Ae=0;Ae<Oe.length;Ae++){var Te=Oe[Ae];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(Ee,Te.key,Te)}}return function(Ee,Oe,Ae){return Oe&&Ce(Ee.prototype,Oe),Ae&&Ce(Ee,Ae),Ee}}(),oe=function Ce(Ee,Oe,Ae){Ee===null&&(Ee=Function.prototype);var Te=Object.getOwnPropertyDescriptor(Ee,Oe);if(Te===void 0){var Se=Object.getPrototypeOf(Ee);return Se===null?void 0:Ce(Se,Oe,Ae)}else{if("value"in Te)return Te.value;var $e=Te.get;return $e===void 0?void 0:$e.call(Ae)}},le=ne(28),fe=we(le);function we(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function ke(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")}function ye(Ce,Ee){if(!Ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:Ce}function ve(Ce,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);Ce.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ce,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Ce,Ee):Ce.__proto__=Ee)}var be=function(Ce){ve(Ee,Ce);function Ee(Oe,Ae){ke(this,Ee);var Te=ye(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,Oe));return Te.container.classList.add("ql-icon-picker"),[].forEach.call(Te.container.querySelectorAll(".ql-picker-item"),function(Se){Se.innerHTML=Ae[Se.getAttribute("data-value")||""]}),Te.defaultItem=Te.container.querySelector(".ql-selected"),Te.selectItem(Te.defaultItem),Te}return re(Ee,[{key:"selectItem",value:function(Ae,Te){oe(Ee.prototype.__proto__||Object.getPrototypeOf(Ee.prototype),"selectItem",this).call(this,Ae,Te),Ae=Ae||this.defaultItem,this.label.innerHTML=Ae.innerHTML}}]),Ee}(fe.default);te.default=be},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function fe(we,ke){for(var ye=0;ye<ke.length;ye++){var ve=ke[ye];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(we,ve.key,ve)}}return function(we,ke,ye){return ke&&fe(we.prototype,ke),ye&&fe(we,ye),we}}();function oe(fe,we){if(!(fe instanceof we))throw new TypeError("Cannot call a class as a function")}var le=function(){function fe(we,ke){var ye=this;oe(this,fe),this.quill=we,this.boundsContainer=ke||document.body,this.root=we.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){ye.root.style.marginTop=-1*ye.quill.root.scrollTop+"px"}),this.hide()}return re(fe,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(ke){var ye=ke.left+ke.width/2-this.root.offsetWidth/2,ve=ke.bottom+this.quill.root.scrollTop;this.root.style.left=ye+"px",this.root.style.top=ve+"px",this.root.classList.remove("ql-flip");var be=this.boundsContainer.getBoundingClientRect(),Ce=this.root.getBoundingClientRect(),Ee=0;if(Ce.right>be.right&&(Ee=be.right-Ce.right,this.root.style.left=ye+Ee+"px"),Ce.left<be.left&&(Ee=be.left-Ce.left,this.root.style.left=ye+Ee+"px"),Ce.bottom>be.bottom){var Oe=Ce.bottom-Ce.top,Ae=ke.bottom-ke.top+Oe;this.root.style.top=ve-Ae+"px",this.root.classList.add("ql-flip")}return Ee}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),fe}();te.default=le},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ie(De,Ve){var ze=[],qe=!0,Xe=!1,tt=void 0;try{for(var at=De[Symbol.iterator](),pt;!(qe=(pt=at.next()).done)&&(ze.push(pt.value),!(Ve&&ze.length===Ve));qe=!0);}catch(st){Xe=!0,tt=st}finally{try{!qe&&at.return&&at.return()}finally{if(Xe)throw tt}}return ze}return function(De,Ve){if(Array.isArray(De))return De;if(Symbol.iterator in Object(De))return Ie(De,Ve);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),oe=function Ie(De,Ve,ze){De===null&&(De=Function.prototype);var qe=Object.getOwnPropertyDescriptor(De,Ve);if(qe===void 0){var Xe=Object.getPrototypeOf(De);return Xe===null?void 0:Ie(Xe,Ve,ze)}else{if("value"in qe)return qe.value;var tt=qe.get;return tt===void 0?void 0:tt.call(ze)}},le=function(){function Ie(De,Ve){for(var ze=0;ze<Ve.length;ze++){var qe=Ve[ze];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(De,qe.key,qe)}}return function(De,Ve,ze){return Ve&&Ie(De.prototype,Ve),ze&&Ie(De,ze),De}}(),fe=ne(3),we=Se(fe),ke=ne(8),ye=Se(ke),ve=ne(43),be=Se(ve),Ce=ne(27),Ee=Se(Ce),Oe=ne(15),Ae=ne(41),Te=Se(Ae);function Se(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}function $e(Ie,De){if(!(Ie instanceof De))throw new TypeError("Cannot call a class as a function")}function Le(Ie,De){if(!Ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return De&&(typeof De=="object"||typeof De=="function")?De:Ie}function Pe(Ie,De){if(typeof De!="function"&&De!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof De);Ie.prototype=Object.create(De&&De.prototype,{constructor:{value:Ie,enumerable:!1,writable:!0,configurable:!0}}),De&&(Object.setPrototypeOf?Object.setPrototypeOf(Ie,De):Ie.__proto__=De)}var Re=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Ne=function(Ie){Pe(De,Ie);function De(Ve,ze){$e(this,De),ze.modules.toolbar!=null&&ze.modules.toolbar.container==null&&(ze.modules.toolbar.container=Re);var qe=Le(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,Ve,ze));return qe.quill.container.classList.add("ql-snow"),qe}return le(De,[{key:"extendToolbar",value:function(ze){ze.container.classList.add("ql-snow"),this.buildButtons([].slice.call(ze.container.querySelectorAll("button")),Te.default),this.buildPickers([].slice.call(ze.container.querySelectorAll("select")),Te.default),this.tooltip=new je(this.quill,this.options.bounds),ze.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(qe,Xe){ze.handlers.link.call(ze,!Xe.format.link)})}}]),De}(be.default);Ne.DEFAULTS=(0,we.default)(!0,{},be.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(De){if(De){var Ve=this.quill.getSelection();if(Ve==null||Ve.length==0)return;var ze=this.quill.getText(Ve);/^\S+@\S+\.\S+$/.test(ze)&&ze.indexOf("mailto:")!==0&&(ze="mailto:"+ze);var qe=this.quill.theme.tooltip;qe.edit("link",ze)}else this.quill.format("link",!1)}}}}});var je=function(Ie){Pe(De,Ie);function De(Ve,ze){$e(this,De);var qe=Le(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,Ve,ze));return qe.preview=qe.root.querySelector("a.ql-preview"),qe}return le(De,[{key:"listen",value:function(){var ze=this;oe(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(qe){ze.root.classList.contains("ql-editing")?ze.save():ze.edit("link",ze.preview.textContent),qe.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(qe){if(ze.linkRange!=null){var Xe=ze.linkRange;ze.restoreFocus(),ze.quill.formatText(Xe,"link",!1,ye.default.sources.USER),delete ze.linkRange}qe.preventDefault(),ze.hide()}),this.quill.on(ye.default.events.SELECTION_CHANGE,function(qe,Xe,tt){if(qe!=null){if(qe.length===0&&tt===ye.default.sources.USER){var at=ze.quill.scroll.descendant(Ee.default,qe.index),pt=re(at,2),st=pt[0],it=pt[1];if(st!=null){ze.linkRange=new Oe.Range(qe.index-it,st.length());var Ge=Ee.default.formats(st.domNode);ze.preview.textContent=Ge,ze.preview.setAttribute("href",Ge),ze.show(),ze.position(ze.quill.getBounds(ze.linkRange));return}}else delete ze.linkRange;ze.hide()}})}},{key:"show",value:function(){oe(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),De}(ve.BaseTooltip);je.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),te.default=Ne},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(29),oe=He(re),le=ne(36),fe=ne(38),we=ne(64),ke=ne(65),ye=He(ke),ve=ne(66),be=He(ve),Ce=ne(67),Ee=He(Ce),Oe=ne(37),Ae=ne(26),Te=ne(39),Se=ne(40),$e=ne(56),Le=He($e),Pe=ne(68),Re=He(Pe),Ne=ne(27),je=He(Ne),Ie=ne(69),De=He(Ie),Ve=ne(70),ze=He(Ve),qe=ne(71),Xe=He(qe),tt=ne(72),at=He(tt),pt=ne(73),st=He(pt),it=ne(13),Ge=He(it),et=ne(74),Je=He(et),ft=ne(75),dt=He(ft),Qe=ne(57),ht=He(Qe),mt=ne(41),vt=He(mt),wt=ne(28),St=He(wt),At=ne(59),Et=He(At),Tt=ne(60),Ze=He(Tt),rt=ne(61),lt=He(rt),nt=ne(108),Ye=He(nt),Be=ne(62),Ue=He(Be);function He(ot){return ot&&ot.__esModule?ot:{default:ot}}oe.default.register({"attributors/attribute/direction":fe.DirectionAttribute,"attributors/class/align":le.AlignClass,"attributors/class/background":Oe.BackgroundClass,"attributors/class/color":Ae.ColorClass,"attributors/class/direction":fe.DirectionClass,"attributors/class/font":Te.FontClass,"attributors/class/size":Se.SizeClass,"attributors/style/align":le.AlignStyle,"attributors/style/background":Oe.BackgroundStyle,"attributors/style/color":Ae.ColorStyle,"attributors/style/direction":fe.DirectionStyle,"attributors/style/font":Te.FontStyle,"attributors/style/size":Se.SizeStyle},!0),oe.default.register({"formats/align":le.AlignClass,"formats/direction":fe.DirectionClass,"formats/indent":we.IndentClass,"formats/background":Oe.BackgroundStyle,"formats/color":Ae.ColorStyle,"formats/font":Te.FontClass,"formats/size":Se.SizeClass,"formats/blockquote":ye.default,"formats/code-block":Ge.default,"formats/header":be.default,"formats/list":Ee.default,"formats/bold":Le.default,"formats/code":it.Code,"formats/italic":Re.default,"formats/link":je.default,"formats/script":De.default,"formats/strike":ze.default,"formats/underline":Xe.default,"formats/image":at.default,"formats/video":st.default,"formats/list/item":Ce.ListItem,"modules/formula":Je.default,"modules/syntax":dt.default,"modules/toolbar":ht.default,"themes/bubble":Ye.default,"themes/snow":Ue.default,"ui/icons":vt.default,"ui/picker":St.default,"ui/icon-picker":Ze.default,"ui/color-picker":Et.default,"ui/tooltip":lt.default},!0),te.default=oe.default},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.IndentClass=void 0;var re=function(){function Ee(Oe,Ae){for(var Te=0;Te<Ae.length;Te++){var Se=Ae[Te];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(Oe,Se.key,Se)}}return function(Oe,Ae,Te){return Ae&&Ee(Oe.prototype,Ae),Te&&Ee(Oe,Te),Oe}}(),oe=function Ee(Oe,Ae,Te){Oe===null&&(Oe=Function.prototype);var Se=Object.getOwnPropertyDescriptor(Oe,Ae);if(Se===void 0){var $e=Object.getPrototypeOf(Oe);return $e===null?void 0:Ee($e,Ae,Te)}else{if("value"in Se)return Se.value;var Le=Se.get;return Le===void 0?void 0:Le.call(Te)}},le=ne(0),fe=we(le);function we(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}function ke(Ee,Oe){if(!(Ee instanceof Oe))throw new TypeError("Cannot call a class as a function")}function ye(Ee,Oe){if(!Ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Oe&&(typeof Oe=="object"||typeof Oe=="function")?Oe:Ee}function ve(Ee,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Oe);Ee.prototype=Object.create(Oe&&Oe.prototype,{constructor:{value:Ee,enumerable:!1,writable:!0,configurable:!0}}),Oe&&(Object.setPrototypeOf?Object.setPrototypeOf(Ee,Oe):Ee.__proto__=Oe)}var be=function(Ee){ve(Oe,Ee);function Oe(){return ke(this,Oe),ye(this,(Oe.__proto__||Object.getPrototypeOf(Oe)).apply(this,arguments))}return re(Oe,[{key:"add",value:function(Te,Se){if(Se==="+1"||Se==="-1"){var $e=this.value(Te)||0;Se=Se==="+1"?$e+1:$e-1}return Se===0?(this.remove(Te),!0):oe(Oe.prototype.__proto__||Object.getPrototypeOf(Oe.prototype),"add",this).call(this,Te,Se)}},{key:"canAdd",value:function(Te,Se){return oe(Oe.prototype.__proto__||Object.getPrototypeOf(Oe.prototype),"canAdd",this).call(this,Te,Se)||oe(Oe.prototype.__proto__||Object.getPrototypeOf(Oe.prototype),"canAdd",this).call(this,Te,parseInt(Se))}},{key:"value",value:function(Te){return parseInt(oe(Oe.prototype.__proto__||Object.getPrototypeOf(Oe.prototype),"value",this).call(this,Te))||void 0}}]),Oe}(fe.default.Attributor.Class),Ce=new be("indent","ql-indent",{scope:fe.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});te.IndentClass=Ce},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(4),oe=le(re);function le(ve){return ve&&ve.__esModule?ve:{default:ve}}function fe(ve,be){if(!(ve instanceof be))throw new TypeError("Cannot call a class as a function")}function we(ve,be){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be&&(typeof be=="object"||typeof be=="function")?be:ve}function ke(ve,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof be);ve.prototype=Object.create(be&&be.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),be&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,be):ve.__proto__=be)}var ye=function(ve){ke(be,ve);function be(){return fe(this,be),we(this,(be.__proto__||Object.getPrototypeOf(be)).apply(this,arguments))}return be}(oe.default);ye.blotName="blockquote",ye.tagName="blockquote",te.default=ye},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function be(Ce,Ee){for(var Oe=0;Oe<Ee.length;Oe++){var Ae=Ee[Oe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(Ce,Ae.key,Ae)}}return function(Ce,Ee,Oe){return Ee&&be(Ce.prototype,Ee),Oe&&be(Ce,Oe),Ce}}(),oe=ne(4),le=fe(oe);function fe(be){return be&&be.__esModule?be:{default:be}}function we(be,Ce){if(!(be instanceof Ce))throw new TypeError("Cannot call a class as a function")}function ke(be,Ce){if(!be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ce&&(typeof Ce=="object"||typeof Ce=="function")?Ce:be}function ye(be,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ce);be.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),Ce&&(Object.setPrototypeOf?Object.setPrototypeOf(be,Ce):be.__proto__=Ce)}var ve=function(be){ye(Ce,be);function Ce(){return we(this,Ce),ke(this,(Ce.__proto__||Object.getPrototypeOf(Ce)).apply(this,arguments))}return re(Ce,null,[{key:"formats",value:function(Oe){return this.tagName.indexOf(Oe.tagName)+1}}]),Ce}(le.default);ve.blotName="header",ve.tagName=["H1","H2","H3","H4","H5","H6"],te.default=ve},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.ListItem=void 0;var re=function(){function $e(Le,Pe){for(var Re=0;Re<Pe.length;Re++){var Ne=Pe[Re];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(Le,Ne.key,Ne)}}return function(Le,Pe,Re){return Pe&&$e(Le.prototype,Pe),Re&&$e(Le,Re),Le}}(),oe=function $e(Le,Pe,Re){Le===null&&(Le=Function.prototype);var Ne=Object.getOwnPropertyDescriptor(Le,Pe);if(Ne===void 0){var je=Object.getPrototypeOf(Le);return je===null?void 0:$e(je,Pe,Re)}else{if("value"in Ne)return Ne.value;var Ie=Ne.get;return Ie===void 0?void 0:Ie.call(Re)}},le=ne(0),fe=be(le),we=ne(4),ke=be(we),ye=ne(25),ve=be(ye);function be($e){return $e&&$e.__esModule?$e:{default:$e}}function Ce($e,Le,Pe){return Le in $e?Object.defineProperty($e,Le,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):$e[Le]=Pe,$e}function Ee($e,Le){if(!($e instanceof Le))throw new TypeError("Cannot call a class as a function")}function Oe($e,Le){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Le&&(typeof Le=="object"||typeof Le=="function")?Le:$e}function Ae($e,Le){if(typeof Le!="function"&&Le!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Le);$e.prototype=Object.create(Le&&Le.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Le&&(Object.setPrototypeOf?Object.setPrototypeOf($e,Le):$e.__proto__=Le)}var Te=function($e){Ae(Le,$e);function Le(){return Ee(this,Le),Oe(this,(Le.__proto__||Object.getPrototypeOf(Le)).apply(this,arguments))}return re(Le,[{key:"format",value:function(Re,Ne){Re===Se.blotName&&!Ne?this.replaceWith(fe.default.create(this.statics.scope)):oe(Le.prototype.__proto__||Object.getPrototypeOf(Le.prototype),"format",this).call(this,Re,Ne)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():oe(Le.prototype.__proto__||Object.getPrototypeOf(Le.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(Re,Ne){return this.parent.isolate(this.offset(this.parent),this.length()),Re===this.parent.statics.blotName?(this.parent.replaceWith(Re,Ne),this):(this.parent.unwrap(),oe(Le.prototype.__proto__||Object.getPrototypeOf(Le.prototype),"replaceWith",this).call(this,Re,Ne))}}],[{key:"formats",value:function(Re){return Re.tagName===this.tagName?void 0:oe(Le.__proto__||Object.getPrototypeOf(Le),"formats",this).call(this,Re)}}]),Le}(ke.default);Te.blotName="list-item",Te.tagName="LI";var Se=function($e){Ae(Le,$e),re(Le,null,[{key:"create",value:function(Re){var Ne=Re==="ordered"?"OL":"UL",je=oe(Le.__proto__||Object.getPrototypeOf(Le),"create",this).call(this,Ne);return(Re==="checked"||Re==="unchecked")&&je.setAttribute("data-checked",Re==="checked"),je}},{key:"formats",value:function(Re){if(Re.tagName==="OL")return"ordered";if(Re.tagName==="UL")return Re.hasAttribute("data-checked")?Re.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function Le(Pe){Ee(this,Le);var Re=Oe(this,(Le.__proto__||Object.getPrototypeOf(Le)).call(this,Pe)),Ne=function(Ie){if(Ie.target.parentNode===Pe){var De=Re.statics.formats(Pe),Ve=fe.default.find(Ie.target);De==="checked"?Ve.format("list","unchecked"):De==="unchecked"&&Ve.format("list","checked")}};return Pe.addEventListener("touchstart",Ne),Pe.addEventListener("mousedown",Ne),Re}return re(Le,[{key:"format",value:function(Re,Ne){this.children.length>0&&this.children.tail.format(Re,Ne)}},{key:"formats",value:function(){return Ce({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(Re,Ne){if(Re instanceof Te)oe(Le.prototype.__proto__||Object.getPrototypeOf(Le.prototype),"insertBefore",this).call(this,Re,Ne);else{var je=Ne==null?this.length():Ne.offset(this),Ie=this.split(je);Ie.parent.insertBefore(Re,Ie)}}},{key:"optimize",value:function(Re){oe(Le.prototype.__proto__||Object.getPrototypeOf(Le.prototype),"optimize",this).call(this,Re);var Ne=this.next;Ne!=null&&Ne.prev===this&&Ne.statics.blotName===this.statics.blotName&&Ne.domNode.tagName===this.domNode.tagName&&Ne.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(Ne.moveChildren(this),Ne.remove())}},{key:"replace",value:function(Re){if(Re.statics.blotName!==this.statics.blotName){var Ne=fe.default.create(this.statics.defaultChild);Re.moveChildren(Ne),this.appendChild(Ne)}oe(Le.prototype.__proto__||Object.getPrototypeOf(Le.prototype),"replace",this).call(this,Re)}}]),Le}(ve.default);Se.blotName="list",Se.scope=fe.default.Scope.BLOCK_BLOT,Se.tagName=["OL","UL"],Se.defaultChild="list-item",Se.allowedChildren=[Te],te.ListItem=Te,te.default=Se},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(56),oe=le(re);function le(ve){return ve&&ve.__esModule?ve:{default:ve}}function fe(ve,be){if(!(ve instanceof be))throw new TypeError("Cannot call a class as a function")}function we(ve,be){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be&&(typeof be=="object"||typeof be=="function")?be:ve}function ke(ve,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof be);ve.prototype=Object.create(be&&be.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),be&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,be):ve.__proto__=be)}var ye=function(ve){ke(be,ve);function be(){return fe(this,be),we(this,(be.__proto__||Object.getPrototypeOf(be)).apply(this,arguments))}return be}(oe.default);ye.blotName="italic",ye.tagName=["EM","I"],te.default=ye},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Ce(Ee,Oe){for(var Ae=0;Ae<Oe.length;Ae++){var Te=Oe[Ae];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(Ee,Te.key,Te)}}return function(Ee,Oe,Ae){return Oe&&Ce(Ee.prototype,Oe),Ae&&Ce(Ee,Ae),Ee}}(),oe=function Ce(Ee,Oe,Ae){Ee===null&&(Ee=Function.prototype);var Te=Object.getOwnPropertyDescriptor(Ee,Oe);if(Te===void 0){var Se=Object.getPrototypeOf(Ee);return Se===null?void 0:Ce(Se,Oe,Ae)}else{if("value"in Te)return Te.value;var $e=Te.get;return $e===void 0?void 0:$e.call(Ae)}},le=ne(6),fe=we(le);function we(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function ke(Ce,Ee){if(!(Ce instanceof Ee))throw new TypeError("Cannot call a class as a function")}function ye(Ce,Ee){if(!Ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:Ce}function ve(Ce,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);Ce.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ce,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Ce,Ee):Ce.__proto__=Ee)}var be=function(Ce){ve(Ee,Ce);function Ee(){return ke(this,Ee),ye(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).apply(this,arguments))}return re(Ee,null,[{key:"create",value:function(Ae){return Ae==="super"?document.createElement("sup"):Ae==="sub"?document.createElement("sub"):oe(Ee.__proto__||Object.getPrototypeOf(Ee),"create",this).call(this,Ae)}},{key:"formats",value:function(Ae){if(Ae.tagName==="SUB")return"sub";if(Ae.tagName==="SUP")return"super"}}]),Ee}(fe.default);be.blotName="script",be.tagName=["SUB","SUP"],te.default=be},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(6),oe=le(re);function le(ve){return ve&&ve.__esModule?ve:{default:ve}}function fe(ve,be){if(!(ve instanceof be))throw new TypeError("Cannot call a class as a function")}function we(ve,be){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be&&(typeof be=="object"||typeof be=="function")?be:ve}function ke(ve,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof be);ve.prototype=Object.create(be&&be.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),be&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,be):ve.__proto__=be)}var ye=function(ve){ke(be,ve);function be(){return fe(this,be),we(this,(be.__proto__||Object.getPrototypeOf(be)).apply(this,arguments))}return be}(oe.default);ye.blotName="strike",ye.tagName="S",te.default=ye},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=ne(6),oe=le(re);function le(ve){return ve&&ve.__esModule?ve:{default:ve}}function fe(ve,be){if(!(ve instanceof be))throw new TypeError("Cannot call a class as a function")}function we(ve,be){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be&&(typeof be=="object"||typeof be=="function")?be:ve}function ke(ve,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof be);ve.prototype=Object.create(be&&be.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),be&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,be):ve.__proto__=be)}var ye=function(ve){ke(be,ve);function be(){return fe(this,be),we(this,(be.__proto__||Object.getPrototypeOf(be)).apply(this,arguments))}return be}(oe.default);ye.blotName="underline",ye.tagName="U",te.default=ye},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Oe(Ae,Te){for(var Se=0;Se<Te.length;Se++){var $e=Te[Se];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(Ae,$e.key,$e)}}return function(Ae,Te,Se){return Te&&Oe(Ae.prototype,Te),Se&&Oe(Ae,Se),Ae}}(),oe=function Oe(Ae,Te,Se){Ae===null&&(Ae=Function.prototype);var $e=Object.getOwnPropertyDescriptor(Ae,Te);if($e===void 0){var Le=Object.getPrototypeOf(Ae);return Le===null?void 0:Oe(Le,Te,Se)}else{if("value"in $e)return $e.value;var Pe=$e.get;return Pe===void 0?void 0:Pe.call(Se)}},le=ne(0),fe=ke(le),we=ne(27);function ke(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function ye(Oe,Ae){if(!(Oe instanceof Ae))throw new TypeError("Cannot call a class as a function")}function ve(Oe,Ae){if(!Oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ae&&(typeof Ae=="object"||typeof Ae=="function")?Ae:Oe}function be(Oe,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ae);Oe.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),Ae&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,Ae):Oe.__proto__=Ae)}var Ce=["alt","height","width"],Ee=function(Oe){be(Ae,Oe);function Ae(){return ye(this,Ae),ve(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).apply(this,arguments))}return re(Ae,[{key:"format",value:function(Se,$e){Ce.indexOf(Se)>-1?$e?this.domNode.setAttribute(Se,$e):this.domNode.removeAttribute(Se):oe(Ae.prototype.__proto__||Object.getPrototypeOf(Ae.prototype),"format",this).call(this,Se,$e)}}],[{key:"create",value:function(Se){var $e=oe(Ae.__proto__||Object.getPrototypeOf(Ae),"create",this).call(this,Se);return typeof Se=="string"&&$e.setAttribute("src",this.sanitize(Se)),$e}},{key:"formats",value:function(Se){return Ce.reduce(function($e,Le){return Se.hasAttribute(Le)&&($e[Le]=Se.getAttribute(Le)),$e},{})}},{key:"match",value:function(Se){return/\.(jpe?g|gif|png)$/.test(Se)||/^data:image\/.+;base64/.test(Se)}},{key:"sanitize",value:function(Se){return(0,we.sanitize)(Se,["http","https","data"])?Se:"//:0"}},{key:"value",value:function(Se){return Se.getAttribute("src")}}]),Ae}(fe.default.Embed);Ee.blotName="image",Ee.tagName="IMG",te.default=Ee},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0});var re=function(){function Oe(Ae,Te){for(var Se=0;Se<Te.length;Se++){var $e=Te[Se];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(Ae,$e.key,$e)}}return function(Ae,Te,Se){return Te&&Oe(Ae.prototype,Te),Se&&Oe(Ae,Se),Ae}}(),oe=function Oe(Ae,Te,Se){Ae===null&&(Ae=Function.prototype);var $e=Object.getOwnPropertyDescriptor(Ae,Te);if($e===void 0){var Le=Object.getPrototypeOf(Ae);return Le===null?void 0:Oe(Le,Te,Se)}else{if("value"in $e)return $e.value;var Pe=$e.get;return Pe===void 0?void 0:Pe.call(Se)}},le=ne(4),fe=ne(27),we=ke(fe);function ke(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function ye(Oe,Ae){if(!(Oe instanceof Ae))throw new TypeError("Cannot call a class as a function")}function ve(Oe,Ae){if(!Oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ae&&(typeof Ae=="object"||typeof Ae=="function")?Ae:Oe}function be(Oe,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ae);Oe.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),Ae&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,Ae):Oe.__proto__=Ae)}var Ce=["height","width"],Ee=function(Oe){be(Ae,Oe);function Ae(){return ye(this,Ae),ve(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).apply(this,arguments))}return re(Ae,[{key:"format",value:function(Se,$e){Ce.indexOf(Se)>-1?$e?this.domNode.setAttribute(Se,$e):this.domNode.removeAttribute(Se):oe(Ae.prototype.__proto__||Object.getPrototypeOf(Ae.prototype),"format",this).call(this,Se,$e)}}],[{key:"create",value:function(Se){var $e=oe(Ae.__proto__||Object.getPrototypeOf(Ae),"create",this).call(this,Se);return $e.setAttribute("frameborder","0"),$e.setAttribute("allowfullscreen",!0),$e.setAttribute("src",this.sanitize(Se)),$e}},{key:"formats",value:function(Se){return Ce.reduce(function($e,Le){return Se.hasAttribute(Le)&&($e[Le]=Se.getAttribute(Le)),$e},{})}},{key:"sanitize",value:function(Se){return we.default.sanitize(Se)}},{key:"value",value:function(Se){return Se.getAttribute("src")}}]),Ae}(le.BlockEmbed);Ee.blotName="video",Ee.className="ql-video",Ee.tagName="IFRAME",te.default=Ee},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.FormulaBlot=void 0;var re=function(){function Se($e,Le){for(var Pe=0;Pe<Le.length;Pe++){var Re=Le[Pe];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty($e,Re.key,Re)}}return function($e,Le,Pe){return Le&&Se($e.prototype,Le),Pe&&Se($e,Pe),$e}}(),oe=function Se($e,Le,Pe){$e===null&&($e=Function.prototype);var Re=Object.getOwnPropertyDescriptor($e,Le);if(Re===void 0){var Ne=Object.getPrototypeOf($e);return Ne===null?void 0:Se(Ne,Le,Pe)}else{if("value"in Re)return Re.value;var je=Re.get;return je===void 0?void 0:je.call(Pe)}},le=ne(35),fe=be(le),we=ne(5),ke=be(we),ye=ne(9),ve=be(ye);function be(Se){return Se&&Se.__esModule?Se:{default:Se}}function Ce(Se,$e){if(!(Se instanceof $e))throw new TypeError("Cannot call a class as a function")}function Ee(Se,$e){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:Se}function Oe(Se,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);Se.prototype=Object.create($e&&$e.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,$e):Se.__proto__=$e)}var Ae=function(Se){Oe($e,Se);function $e(){return Ce(this,$e),Ee(this,($e.__proto__||Object.getPrototypeOf($e)).apply(this,arguments))}return re($e,null,[{key:"create",value:function(Pe){var Re=oe($e.__proto__||Object.getPrototypeOf($e),"create",this).call(this,Pe);return typeof Pe=="string"&&(window.katex.render(Pe,Re,{throwOnError:!1,errorColor:"#f00"}),Re.setAttribute("data-value",Pe)),Re}},{key:"value",value:function(Pe){return Pe.getAttribute("data-value")}}]),$e}(fe.default);Ae.blotName="formula",Ae.className="ql-formula",Ae.tagName="SPAN";var Te=function(Se){Oe($e,Se),re($e,null,[{key:"register",value:function(){ke.default.register(Ae,!0)}}]);function $e(){Ce(this,$e);var Le=Ee(this,($e.__proto__||Object.getPrototypeOf($e)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return Le}return $e}(ve.default);te.FormulaBlot=Ae,te.default=Te},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.CodeToken=te.CodeBlock=void 0;var re=function(){function Pe(Re,Ne){for(var je=0;je<Ne.length;je++){var Ie=Ne[je];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(Re,Ie.key,Ie)}}return function(Re,Ne,je){return Ne&&Pe(Re.prototype,Ne),je&&Pe(Re,je),Re}}(),oe=function Pe(Re,Ne,je){Re===null&&(Re=Function.prototype);var Ie=Object.getOwnPropertyDescriptor(Re,Ne);if(Ie===void 0){var De=Object.getPrototypeOf(Re);return De===null?void 0:Pe(De,Ne,je)}else{if("value"in Ie)return Ie.value;var Ve=Ie.get;return Ve===void 0?void 0:Ve.call(je)}},le=ne(0),fe=Ee(le),we=ne(5),ke=Ee(we),ye=ne(9),ve=Ee(ye),be=ne(13),Ce=Ee(be);function Ee(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}function Oe(Pe,Re){if(!(Pe instanceof Re))throw new TypeError("Cannot call a class as a function")}function Ae(Pe,Re){if(!Pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Re&&(typeof Re=="object"||typeof Re=="function")?Re:Pe}function Te(Pe,Re){if(typeof Re!="function"&&Re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Re);Pe.prototype=Object.create(Re&&Re.prototype,{constructor:{value:Pe,enumerable:!1,writable:!0,configurable:!0}}),Re&&(Object.setPrototypeOf?Object.setPrototypeOf(Pe,Re):Pe.__proto__=Re)}var Se=function(Pe){Te(Re,Pe);function Re(){return Oe(this,Re),Ae(this,(Re.__proto__||Object.getPrototypeOf(Re)).apply(this,arguments))}return re(Re,[{key:"replaceWith",value:function(je){this.domNode.textContent=this.domNode.textContent,this.attach(),oe(Re.prototype.__proto__||Object.getPrototypeOf(Re.prototype),"replaceWith",this).call(this,je)}},{key:"highlight",value:function(je){var Ie=this.domNode.textContent;this.cachedText!==Ie&&((Ie.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=je(Ie),this.domNode.normalize(),this.attach()),this.cachedText=Ie)}}]),Re}(Ce.default);Se.className="ql-syntax";var $e=new fe.default.Attributor.Class("token","hljs",{scope:fe.default.Scope.INLINE}),Le=function(Pe){Te(Re,Pe),re(Re,null,[{key:"register",value:function(){ke.default.register($e,!0),ke.default.register(Se,!0)}}]);function Re(Ne,je){Oe(this,Re);var Ie=Ae(this,(Re.__proto__||Object.getPrototypeOf(Re)).call(this,Ne,je));if(typeof Ie.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var De=null;return Ie.quill.on(ke.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(De),De=setTimeout(function(){Ie.highlight(),De=null},Ie.options.interval)}),Ie.highlight(),Ie}return re(Re,[{key:"highlight",value:function(){var je=this;if(!this.quill.selection.composing){this.quill.update(ke.default.sources.USER);var Ie=this.quill.getSelection();this.quill.scroll.descendants(Se).forEach(function(De){De.highlight(je.options.highlight)}),this.quill.update(ke.default.sources.SILENT),Ie!=null&&this.quill.setSelection(Ie,ke.default.sources.SILENT)}}}]),Re}(ve.default);Le.DEFAULTS={highlight:function(){return window.hljs==null?null:function(Pe){var Re=window.hljs.highlightAuto(Pe);return Re.value}}(),interval:1e3},te.CodeBlock=Se,te.CodeToken=$e,te.default=Le},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(X,te){X.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(X,te){X.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(X,te){X.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(X,te){X.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(X,te){X.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(X,te,ne){Object.defineProperty(te,"__esModule",{value:!0}),te.default=te.BubbleTooltip=void 0;var re=function Re(Ne,je,Ie){Ne===null&&(Ne=Function.prototype);var De=Object.getOwnPropertyDescriptor(Ne,je);if(De===void 0){var Ve=Object.getPrototypeOf(Ne);return Ve===null?void 0:Re(Ve,je,Ie)}else{if("value"in De)return De.value;var ze=De.get;return ze===void 0?void 0:ze.call(Ie)}},oe=function(){function Re(Ne,je){for(var Ie=0;Ie<je.length;Ie++){var De=je[Ie];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(Ne,De.key,De)}}return function(Ne,je,Ie){return je&&Re(Ne.prototype,je),Ie&&Re(Ne,Ie),Ne}}(),le=ne(3),fe=Oe(le),we=ne(8),ke=Oe(we),ye=ne(43),ve=Oe(ye),be=ne(15),Ce=ne(41),Ee=Oe(Ce);function Oe(Re){return Re&&Re.__esModule?Re:{default:Re}}function Ae(Re,Ne){if(!(Re instanceof Ne))throw new TypeError("Cannot call a class as a function")}function Te(Re,Ne){if(!Re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ne&&(typeof Ne=="object"||typeof Ne=="function")?Ne:Re}function Se(Re,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ne);Re.prototype=Object.create(Ne&&Ne.prototype,{constructor:{value:Re,enumerable:!1,writable:!0,configurable:!0}}),Ne&&(Object.setPrototypeOf?Object.setPrototypeOf(Re,Ne):Re.__proto__=Ne)}var $e=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Le=function(Re){Se(Ne,Re);function Ne(je,Ie){Ae(this,Ne),Ie.modules.toolbar!=null&&Ie.modules.toolbar.container==null&&(Ie.modules.toolbar.container=$e);var De=Te(this,(Ne.__proto__||Object.getPrototypeOf(Ne)).call(this,je,Ie));return De.quill.container.classList.add("ql-bubble"),De}return oe(Ne,[{key:"extendToolbar",value:function(Ie){this.tooltip=new Pe(this.quill,this.options.bounds),this.tooltip.root.appendChild(Ie.container),this.buildButtons([].slice.call(Ie.container.querySelectorAll("button")),Ee.default),this.buildPickers([].slice.call(Ie.container.querySelectorAll("select")),Ee.default)}}]),Ne}(ve.default);Le.DEFAULTS=(0,fe.default)(!0,{},ve.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(Ne){Ne?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var Pe=function(Re){Se(Ne,Re);function Ne(je,Ie){Ae(this,Ne);var De=Te(this,(Ne.__proto__||Object.getPrototypeOf(Ne)).call(this,je,Ie));return De.quill.on(ke.default.events.EDITOR_CHANGE,function(Ve,ze,qe,Xe){if(Ve===ke.default.events.SELECTION_CHANGE)if(ze!=null&&ze.length>0&&Xe===ke.default.sources.USER){De.show(),De.root.style.left="0px",De.root.style.width="",De.root.style.width=De.root.offsetWidth+"px";var tt=De.quill.getLines(ze.index,ze.length);if(tt.length===1)De.position(De.quill.getBounds(ze));else{var at=tt[tt.length-1],pt=De.quill.getIndex(at),st=Math.min(at.length()-1,ze.index+ze.length-pt),it=De.quill.getBounds(new be.Range(pt,st));De.position(it)}}else document.activeElement!==De.textbox&&De.quill.hasFocus()&&De.hide()}),De}return oe(Ne,[{key:"listen",value:function(){var Ie=this;re(Ne.prototype.__proto__||Object.getPrototypeOf(Ne.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){Ie.root.classList.remove("ql-editing")}),this.quill.on(ke.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!Ie.root.classList.contains("ql-hidden")){var De=Ie.quill.getSelection();De!=null&&Ie.position(Ie.quill.getBounds(De))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(Ie){var De=re(Ne.prototype.__proto__||Object.getPrototypeOf(Ne.prototype),"position",this).call(this,Ie),Ve=this.root.querySelector(".ql-tooltip-arrow");if(Ve.style.marginLeft="",De===0)return De;Ve.style.marginLeft=-1*De-Ve.offsetWidth/2+"px"}}]),Ne}(ye.BaseTooltip);Pe.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),te.BubbleTooltip=Pe,te.default=Le},function(X,te,ne){X.exports=ne(63)}]).default})})(quill);const Q=getDefaultExportFromCjs(quillExports);let ToastContainer=null;const htmlToElement=q=>{const j=document.createElement("template");if(typeof q=="string")q=q.trim(),j.innerHTML=q;else{const{strings:X,values:te}=q,ne=[...te,""],re=X.reduce((oe,le,fe)=>oe+le+ne[fe],"");j.innerHTML=re}return j.content.firstChild},createToastContainer=()=>{const q=i$c`
    position: fixed;
    z-index: 9999;
    top: 16px;
    left: 16px;
    right: 16px;
    bottom: 78px;
    pointer-events: none;
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
  `,j=y$1`<div style="${q}"></div>`,X=htmlToElement(j);return document.body.appendChild(X),X},toast=(q,j=2500)=>{ToastContainer||(ToastContainer=createToastContainer());const X=i$c`
    max-width: 480px;
    text-align: center;
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-sm);
    padding: 6px 12px;
    margin: 10px 0 0 0;
    color: var(--affine-tooltip-color);
    background: var(--affine-tooltip-background);
    box-shadow: var(--affine-tooltip-shadow);
    border-radius: 10px;
    transition: all 230ms cubic-bezier(0.21, 1.02, 0.73, 1);
    opacity: 0;
  `,te=y$1`<div style="${X}"></div>`,ne=htmlToElement(te);ne.textContent=q,ToastContainer.appendChild(ne);const re=[{opacity:0},{opacity:1}],oe={duration:230,easing:"cubic-bezier(0.21, 1.02, 0.73, 1)",fill:"forwards"};return ne.animate(re,oe),setTimeout(async()=>{const le=re.reverse();await ne.animate(le,oe).finished,ne.style.maxHeight="0",ne.style.margin="0",ne.style.padding="0",await sleep(230),ne.remove()},j),ne},ConfirmIcon=w`<svg
   width="20"
   height="20"
   viewBox="0 0 20 20"
   xmlns="http://www.w3.org/2000/svg"
 >
   <path
     fill-rule="evenodd"
     clip-rule="evenodd"
     d="M17.6726 6.0059L7.49998 16.1785L2.32739 11.0059L3.5059 9.82739L7.49998 13.8215L16.4941 4.82739L17.6726 6.0059Z"
   />
 </svg>`,EditIcon=w`<svg
   width="20"
   height="20"
   viewBox="0 0 20 20"
   xmlns="http://www.w3.org/2000/svg"
 >
   <path
     fill-rule="evenodd"
     clip-rule="evenodd"
     d="M5.332 13.2203L5.01238 14.1792L5.82087 14.9877L6.77971 14.668L13.6405 7.80725L12.1928 6.35954L5.332 13.2203ZM13.1356 5.41673L14.5833 6.86444L15.7238 5.72395C16.1236 5.32417 16.1236 4.67601 15.7238 4.27623C15.324 3.87646 14.6759 3.87646 14.2761 4.27623L13.1356 5.41673ZM13.3333 3.33342L4.27791 12.3888C4.20472 12.462 4.14958 12.5512 4.11686 12.6494L2.92159 16.2352C2.74787 16.7563 3.2437 17.2522 3.76487 17.0785L7.35065 15.8832C7.44884 15.8505 7.53806 15.7953 7.61124 15.7221L16.6666 6.66676C17.5871 5.74628 17.5871 4.2539 16.6666 3.33342C15.7461 2.41295 14.2538 2.41295 13.3333 3.33342Z"
   />
 </svg>`,UnlinkIcon=w`<svg
 width="20"
 height="20"
 viewBox="0 0 20 20"
 xmlns="http://www.w3.org/2000/svg"
>
 <path
   fill-rule="evenodd"
   clip-rule="evenodd"
   d="M14.3544 11.3678L16.5109 9.2113C17.9754 7.74683 17.9754 5.37246 16.5109 3.908L16.085 3.48214C14.6206 2.01767 12.2462 2.01767 10.7817 3.48214L8.06422 6.19966C6.59975 7.66413 6.59975 10.0385 8.06422 11.503L8.49008 11.9288C8.75643 12.1952 9.05289 12.4131 9.3685 12.5826L10.042 11.909C10.1513 11.7997 10.2324 11.6729 10.2852 11.5376C9.97446 11.4201 9.68307 11.2362 9.43289 10.986L9.00703 10.5602C8.06326 9.61639 8.06326 8.08624 9.00703 7.14247L11.7246 4.42495C12.6683 3.48118 14.1985 3.48118 15.1422 4.42495L15.5681 4.85081C16.5119 5.79457 16.5119 7.32472 15.5681 8.26849L14.1479 9.6887C14.3104 10.2349 14.3792 10.803 14.3544 11.3678ZM5.63767 8.62376L3.48116 10.7803C2.0167 12.2447 2.0167 14.6191 3.48116 16.0836L3.90702 16.5094C5.37149 17.9739 7.74586 17.9739 9.21032 16.5094L11.9278 13.7919C13.3923 12.3274 13.3923 9.95307 11.9278 8.48861L11.502 8.06275C11.2356 7.79639 10.9392 7.57848 10.6236 7.40901L9.95003 8.08255C9.84074 8.19184 9.75969 8.31867 9.70686 8.45398C10.0176 8.57152 10.309 8.75538 10.5592 9.00556L10.985 9.43142C11.9288 10.3752 11.9288 11.9053 10.985 12.8491L8.26752 15.5666C7.32375 16.5104 5.7936 16.5104 4.84983 15.5666L4.42397 15.1408C3.4802 14.197 3.4802 12.6668 4.42397 11.7231L5.84418 10.3029C5.68166 9.75667 5.61282 9.18854 5.63767 8.62376ZM12.78 14.3772C12.9325 14.2416 13.1295 14.1666 13.3336 14.1666C13.5547 14.1666 13.7666 14.2544 13.9229 14.4107C14.0792 14.567 14.167 14.7789 14.167 15V16.6666L14.1611 16.7641C14.1361 16.975 14.0314 17.1684 13.8685 17.3047C13.7056 17.4411 13.4968 17.51 13.2848 17.4976C13.0728 17.4852 12.8735 17.3922 12.7277 17.2378C12.5819 17.0833 12.5005 16.879 12.5003 16.6666V15L12.5061 14.9025C12.53 14.6997 12.6275 14.5129 12.78 14.3772ZM15.2625 12.7273C15.417 12.5815 15.6212 12.5002 15.8336 12.5H16.667L16.7645 12.5058C16.9754 12.5309 17.1688 12.6356 17.3051 12.7984C17.4414 12.9613 17.5104 13.1701 17.498 13.3821C17.4855 13.5942 17.3926 13.7934 17.2381 13.9392C17.0837 14.0851 16.8794 14.1664 16.667 14.1666H15.8336L15.7361 14.1608C15.5252 14.1357 15.3319 14.031 15.1955 13.8681C15.0592 13.7053 14.9902 13.4965 15.0027 13.2845C15.0151 13.0724 15.1081 12.8731 15.2625 12.7273ZM2.74439 6.07737C2.90067 5.92109 3.11263 5.83329 3.33365 5.83329H4.16698C4.38799 5.83329 4.59995 5.92109 4.75623 6.07737C4.91252 6.23365 5.00031 6.44561 5.00031 6.66662C5.00031 6.88764 4.91252 7.0996 4.75623 7.25588C4.59995 7.41216 4.38799 7.49996 4.16698 7.49996H3.33365C3.11263 7.49996 2.90067 7.41216 2.74439 7.25588C2.58811 7.0996 2.50031 6.88764 2.50031 6.66662C2.50031 6.44561 2.58811 6.23365 2.74439 6.07737ZM6.11334 2.71055C6.26587 2.57492 6.46287 2.49998 6.66698 2.49996C6.88799 2.49996 7.09995 2.58775 7.25623 2.74403C7.41251 2.90031 7.50031 3.11228 7.50031 3.33329V4.99996L7.49448 5.09746C7.46939 5.30837 7.36472 5.50174 7.20184 5.63807C7.03896 5.77439 6.83018 5.84338 6.61814 5.83093C6.40611 5.81849 6.20683 5.72554 6.06102 5.5711C5.91521 5.41665 5.83388 5.21236 5.83365 4.99996V3.33329L5.83948 3.23579C5.86336 3.03308 5.96081 2.84619 6.11334 2.71055Z"
 />
</svg>`,toolTipStyle=i$c`
  tool-tip {
    font-family: var(--affine-font-family);
    position: absolute;
    left: 0;
    top: 0;
    inline-size: max-content;
    text-align: center;
    font-size: var(--affine-font-xs);
    padding: 4px 12px;
    border-radius: 10px 10px 10px 0px;
    color: var(--affine-tooltip-color);
    background: var(--affine-tooltip-background);
    box-shadow: var(--affine-tooltip-shadow);
    opacity: 0;
    transform: translateX(0) translateY(calc(-100% - 8px));
    transition: opacity 0.2s ease, transform 0.2s ease;
    pointer-events: none;
    user-select: none;
  }
  tool-tip:is([tip-position='right']) {
    left: unset;
    right: 0;
    transform: translateX(calc(100% + 8px));
    border-radius: 0px 10px 10px 10px;
  }
  .has-tool-tip {
    position: relative;
  }
  .has-tool-tip:is(:hover, :focus-visible, :active) > tool-tip {
    opacity: 1;
    transition-delay: 200ms;
  }
`,editLinkStyle=i$c`
  .affine-link-edit-popover {
    box-sizing: border-box;
    width: 404px;
    height: 112px;
    padding: 12px;
    box-shadow: var(--affine-popover-shadow);
    background: var(--affine-popover-background);
    border-radius: 10px;
    display: grid;
    grid-template-columns: auto auto auto;
    grid-template-rows: repeat(2, 1fr);
    gap: 12px;
    grid-template-areas:
      'text-area .'
      'link-area btn';
    justify-items: center;
    align-items: center;
  }

  .affine-edit-text-area {
    grid-area: text-area;
    width: 338px;
    display: grid;
    gap: 6px;
    grid-template-columns: auto auto auto;
    grid-template-rows: repeat(1, 1fr);
    grid-template-areas: 'text span text-input';
    justify-items: center;
    align-items: center;
  }

  .affine-edit-link-area {
    grid-area: link-area;
    width: 338px;
    display: grid;
    gap: 6px;
    grid-template-columns: auto auto auto;
    grid-template-rows: repeat(1, 1fr);
    grid-template-areas: 'link span link-input';
    justify-items: center;
    align-items: center;
  }

  .affine-link-popover-dividing-line {
    grid-area: span;
  }
  .affine-edit-text-text {
    grid-area: text;
  }

  .affine-edit-text-input {
    grid-area: text-input;
  }

  .affine-edit-link-text {
    grid-area: link;
  }

  .affine-edit-link-input {
    grid-area: link-input;
  }

  .affine-confirm-button {
    grid-area: btn;
    fill: var(--affine-primary-color);
  }
  .affine-confirm-button[disabled],
  .affine-confirm-button:disabled {
    fill: var(--affine-icon-color);
  }
`,linkPopoverStyle=i$c`
  .overlay-container {
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-base);
    font-style: normal;
    line-height: 24px;
    color: var(--affine-popover-color);
    z-index: var(--affine-z-index-popover);
    animation: affine-popover-fade-in 0.2s ease;
  }

  @keyframes affine-popover-fade-in {
    from {
      opacity: 0;
      transform: translateY(-3px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .overlay-mask {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
  }
  .affine-edit-text-area {
    border: 1px solid var(--affine-border-color);
    outline: none;
    border-radius: 10px;
    background: transparent;
  }
  .affine-edit-text-area:focus-within {
    border: 1px solid var(--affine-primary-color);
  }
  .affine-edit-link-area {
    border: 1px solid var(--affine-border-color);
    outline: none;
    border-radius: 10px;
    background: transparent;
  }
  .affine-edit-link-area:focus-within {
    border: 1px solid var(--affine-primary-color);
  }

  label {
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-sm);
    box-sizing: border-box;
    padding: 6px 0px 6px 12px;
    color: var(--affine-icon-color);
  }

  input {
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-base);
    box-sizing: border-box;
    padding: 6px 12px 6px 0px;
    width: 260px;
    height: 34px;
    color: inherit;
    border: none;
    background: transparent;
  }
  input::placeholder {
    color: var(--affine-placeholder-color);
  }
  input:focus {
    outline: none;
  }
  input:focus ~ label,
  input:active ~ label {
    color: var(--affine-primary-color);
  }

  .affine-link-popover {
    display: flex;
    align-items: center;
    height: 34px;
    padding: 0 12px;

    background: var(--affine-popover-background);
    box-shadow: var(--affine-popover-shadow);
    border-radius: 0px 10px 10px 10px;
  }

  .affine-link-popover-input {
    border: none;
  }
  .affine-link-popover-input::placeholder {
    color: var(--affine-placeholder-color);
  }
  .affine-link-popover-input:focus {
    border: none;
  }

  .affine-link-preview {
    width: 260px;
    height: 28px;
    display: flex;
    align-items: center;
    user-select: none;
    cursor: pointer;
    overflow: hidden;
  }

  .affine-link-popover-dividing-line {
    margin: 0 6px;
    width: 1px;
    height: 20px;
    background-color: var(--affine-border-color);
  }

  ${editLinkStyle}
  ${toolTipStyle}
`;var __defProp$k=Object.defineProperty,__getOwnPropDesc$k=Object.getOwnPropertyDescriptor,__decorateClass$k=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$k(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$k(j,X,ne),ne};const ALLOWED_SCHEMES=["http","https","ftp","sftp","mailto","tel"],MAIL_REGEX=/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,URL_REGEX=new RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function normalizeUrl(q){return ALLOWED_SCHEMES.some(te=>q.startsWith(te+":"))?q:MAIL_REGEX.test(q)?"mailto:"+q:"http://"+q}const isValidLink=q=>{if(!q)return!1;const j=normalizeUrl(q);return j===q?!0:URL_REGEX.test(j)};let LinkPopover=class extends s$6{constructor(){super(...arguments),this.left="0px",this.top="0px",this.type="create",this.showMask=!0,this.text="",this.previewLink="",this.link="",this.bodyOverflowStyle="",this.disableConfirm=!0}connectedCallback(){super.connectedCallback(),this.showMask&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden")}firstUpdated(q){super.firstUpdated(q),this.linkInput&&this.linkInput.focus()}disconnectedCallback(){super.disconnectedCallback(),this.showMask&&(document.body.style.overflow=this.bodyOverflowStyle)}_hide(){this.dispatchEvent(new CustomEvent("updateLink",{detail:{type:"cancel"}}))}_onConfirm(){var X;if(this.disableConfirm)return;if(!this.linkInput)throw new Error("Failed to update link! Link input not found!");const q=normalizeUrl(this.linkInput.value),j=((X=this.textInput)==null?void 0:X.value)??void 0;q&&this.dispatchEvent(createEvent("updateLink",{type:"confirm",link:q,text:j}))}_onCopy(q){navigator.clipboard.writeText(this.previewLink),toast("Copied link to clipboard")}_onUnlink(q){this.dispatchEvent(createEvent("updateLink",{type:"remove"}))}_onEdit(q){this.dispatchEvent(createEvent("editLink",null)),this.disableConfirm=!1}_onKeyup(q){if(q.key==="Enter"&&this._onConfirm(),!this.linkInput)throw new Error("Failed to update link! Link input not found!");const j=isValidLink(this.linkInput.value);this.disableConfirm=!j}confirmBtnTemplate(){return y$1`<icon-button
      class="affine-confirm-button"
      ?disabled=${this.disableConfirm}
      @click=${this._onConfirm}
      >${ConfirmIcon}</icon-button
    >`}createLinkTemplate(){return y$1`<div class="affine-link-popover">
      <input
        id="link-input"
        class="affine-link-popover-input"
        type="text"
        spellcheck="false"
        placeholder="Paste or type a link"
        value=${this.previewLink}
        @keyup=${this._onKeyup}
      />
      <span class="affine-link-popover-dividing-line"></span>
      ${this.confirmBtnTemplate()}
    </div>`}previewTemplate(){return y$1`<div class="affine-link-popover">
      <div class="affine-link-preview has-tool-tip" @click=${this._onCopy}>
        <tool-tip inert role="tooltip">Click to copy link</tool-tip>
        ${this.previewLink}
      </div>
      <span class="affine-link-popover-dividing-line"></span>
      <icon-button class="has-tool-tip" @click=${this._onUnlink}>
        ${UnlinkIcon}
        <tool-tip inert role="tooltip">Remove</tool-tip>
      </icon-button>
      <icon-button class="has-tool-tip" @click=${this._onEdit}>
        ${EditIcon}
        <tool-tip inert role="tooltip">Edit link</tool-tip>
      </icon-button>
    </div>`}simpleTemplate(){return!this.previewLink?this.createLinkTemplate():this.previewTemplate()}editTemplate(){return y$1`<div class="affine-link-edit-popover">
      <div class="affine-edit-text-area">
        <input
          class="affine-edit-text-input"
          id="text-input"
          type="text"
          placeholder="Enter text"
          value=${this.text}
          @keyup=${this._onKeyup}
        />
        <span class="affine-link-popover-dividing-line"></span>
        <label class="affine-edit-text-text" for="text-input">Text</label>
      </div>
      <div class="affine-edit-link-area">
        <input
          id="link-input"
          class="affine-edit-link-input"
          type="text"
          spellcheck="false"
          placeholder="Paste or type a link"
          value=${this.previewLink}
          @keyup=${this._onKeyup}
        />
        <span class="affine-link-popover-dividing-line"></span>
        <label class="affine-edit-link-text" for="link-input">Link</label>
      </div>
      ${this.confirmBtnTemplate()}
    </div>`}render(){const q=this.showMask?y$1`<div class="overlay-mask" @click="${this._hide}"></div>`:y$1``,j=this.type==="create"?this.simpleTemplate():this.editTemplate();return y$1`
      <div class="overlay-root">
        ${q}
        <div
          class="overlay-container"
          style="position: absolute; left: ${this.left}; top: ${this.top};${this.style.cssText}"
        >
          ${j}
        </div>
      </div>
    `}};LinkPopover.styles=linkPopoverStyle;__decorateClass$k([e$8()],LinkPopover.prototype,"left",2);__decorateClass$k([e$8()],LinkPopover.prototype,"top",2);__decorateClass$k([e$8()],LinkPopover.prototype,"type",2);__decorateClass$k([e$8()],LinkPopover.prototype,"showMask",2);__decorateClass$k([e$8()],LinkPopover.prototype,"text",2);__decorateClass$k([e$8()],LinkPopover.prototype,"previewLink",2);__decorateClass$k([t$7()],LinkPopover.prototype,"link",2);__decorateClass$k([t$7()],LinkPopover.prototype,"bodyOverflowStyle",2);__decorateClass$k([t$7()],LinkPopover.prototype,"disableConfirm",2);__decorateClass$k([i$9("#text-input")],LinkPopover.prototype,"textInput",2);__decorateClass$k([i$9("#link-input")],LinkPopover.prototype,"linkInput",2);LinkPopover=__decorateClass$k([e$9("edit-link-panel")],LinkPopover);const createEditLinkElement=(q,j,{showMask:X,previewLink:te})=>{const ne=q.getBoundingClientRect(),re=document.body.getBoundingClientRect(),oe=ne.top-re.top+ne.height,le=5,fe=document.createElement("edit-link-panel");return fe.left=`${ne.left}px`,fe.top=`${oe+le}px`,fe.showMask=X,fe.previewLink=te,j.appendChild(fe),fe},bindHoverState=(q,j,X)=>{let ne;const re=le=>{clearTimeout(ne)},oe=le=>{ne=window.setTimeout(()=>{X.abort()},300)};return q.addEventListener("mouseover",re),q.addEventListener("mouseout",oe),j.addEventListener("mouseover",re),j.addEventListener("mouseout",oe),()=>{q.removeEventListener("mouseover",re),q.removeEventListener("mouseout",oe),j.removeEventListener("mouseover",re),j.removeEventListener("mouseout",oe)}},showLinkPopover=async({anchorEl:q,container:j=document.body,text:X="",link:te="",showMask:ne=!0,interactionKind:re="always",signal:oe=new AbortController})=>{if(!q)throw new Error("Can't show tooltip without anchor element!");if(oe.signal.aborted)return Promise.resolve({type:"cancel"});const le=createEditLinkElement(q,j,{showMask:ne,previewLink:te}),fe=re==="hover"?bindHoverState(q,le,oe):noop;return new Promise(we=>{oe.signal.addEventListener("abort",()=>{le.remove(),we({type:"cancel"})}),le.addEventListener("editLink",ke=>{oe.signal.aborted||(le.type="edit",le.showMask=!0,le.text=X,fe())}),le.addEventListener("updateLink",ke=>{oe.signal.aborted||(le.remove(),we(ke.detail))})})},iconStyle=i$c`
  width: 0.9em;
  height: 0.9em;
  vertical-align: middle;
  font-size: inherit;
  margin-bottom: 0.1em;
`,LinkIcon$1=w`<svg
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
  style="${iconStyle}"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M11.4835 9.0944L13.2087 7.36919C14.3803 6.19761 14.3803 4.29812 13.2087 3.12655L12.868 2.78586C11.6965 1.61429 9.79697 1.61429 8.62539 2.78586L6.45138 4.95988C5.2798 6.13145 5.2798 8.03094 6.45138 9.20252L6.79206 9.5432C7.00515 9.75629 7.24231 9.93062 7.4948 10.0662L8.03363 9.52736C8.12106 9.43993 8.1859 9.33847 8.22816 9.23022C7.97957 9.13619 7.74646 8.9891 7.54631 8.78896L7.20562 8.44827C6.45061 7.69326 6.45061 6.46914 7.20562 5.71412L9.37964 3.54011C10.1347 2.78509 11.3588 2.78509 12.1138 3.5401L12.4545 3.88079C13.2095 4.63581 13.2095 5.85992 12.4545 6.61494L11.3183 7.75111C11.4483 8.18806 11.5034 8.64257 11.4835 9.0944Z"
    fill="#6880FF"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.5099 6.89898L2.78469 8.62419C1.61311 9.79576 1.61311 11.6953 2.78469 12.8668L3.12537 13.2075C4.29695 14.3791 6.19644 14.3791 7.36802 13.2075L9.54203 11.0335C10.7136 9.86193 10.7136 7.96243 9.54203 6.79086L9.20135 6.45017C8.98826 6.23709 8.75109 6.06276 8.49861 5.92718L7.95978 6.46601C7.87235 6.55344 7.80751 6.65491 7.76525 6.76315C8.01384 6.85719 8.24695 7.00427 8.4471 7.20442L8.78779 7.54511C9.5428 8.30012 9.5428 9.52424 8.78779 10.2793L6.61377 12.4533C5.85875 13.2083 4.63463 13.2083 3.87962 12.4533L3.53893 12.1126C2.78392 11.3576 2.78392 10.1335 3.53893 9.37844L4.6751 8.24227C4.54508 7.80531 4.49002 7.35081 4.5099 6.89898Z"
    fill="#6880FF"
  />
</svg>`;var __defProp$j=Object.defineProperty,__getOwnPropDesc$j=Object.getOwnPropertyDescriptor,__decorateClass$j=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$j(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$j(j,X,ne),ne};const Quill$3=Q;let LinkNodeComponent=class extends s$6{constructor(){super(),this.popoverHoverOpenDelay=150,this.popoverTimer=0,this.addEventListener("mouseover",this.onHover),this.addEventListener("mouseout",this._onHoverEnd)}onHover(q){const j=getModelByElement(this);getDefaultPageBlock(j).readonly||(this.popoverTimer=window.setTimeout(async()=>{this.onDelayHover(q)},this.popoverHoverOpenDelay))}async onDelayHover(q){const j=Quill$3.find(this);assertExists(j);const X=j.domNode.textContent??void 0;hotkey.withDisabledHotkey(async()=>{const te=await showLinkPopover({anchorEl:q.target,text:X,link:this.href,showMask:!1,interactionKind:"hover"});if(te.type==="confirm"){const ne=te.link,re=te.text,oe=re!==X;assertExists(j),this._updateLink(j,ne,oe?re:void 0);return}if(te.type==="remove"){assertExists(j),this._updateLink(j,!1);return}})}async _updateLink(q,j,X){var re,oe,le,fe;const te=getModelByElement(this),{page:ne}=te;if(X){const we=q.offset();ne.captureSync(),(re=te.text)==null||re.delete(we,q.length()),(oe=te.text)==null||oe.insert(X,we),(le=te.text)==null||le.format(we,X.length,{link:j})}else ne.captureSync(),(fe=te.text)==null||fe.format(q.offset(),q.length(),{link:j})}async _onHoverEnd(q){clearTimeout(this.popoverTimer)}render(){return y$1`<a href=${this.href} rel="noopener noreferrer" target="_blank"
      >${LinkIcon$1}<slot></slot
    ></a>`}};LinkNodeComponent.styles=i$c`
    a {
      color: var(--affine-link-color);
      text-decoration: none;
    }

    /*
    a:visited {
      color: var(--affine-link-visited-color);
    }
    */

    a:hover {
      text-decoration: underline;
    }
  `;__decorateClass$j([e$8()],LinkNodeComponent.prototype,"href",2);__decorateClass$j([e$8()],LinkNodeComponent.prototype,"popoverHoverOpenDelay",2);__decorateClass$j([t$7()],LinkNodeComponent.prototype,"popoverTimer",2);LinkNodeComponent=__decorateClass$j([e$9("link-node")],LinkNodeComponent);const Link=Quill$3.import("formats/link");Link.tagName="link-node";Link.PROTOCOL_WHITELIST=ALLOWED_SCHEMES;Quill$3.register(Link,!0);const Quill$2=Q,Inline=Quill$2.import("blots/inline");class MockSelectNode extends Inline{static create(j){const X=super.create();return X.style.backgroundColor="rgba(35, 131, 226, 0.28)",X}static formats(j){return!0}format(j,X){const te=this.domNode;X||(te.style.backgroundColor="",te.getAttribute("style")||te.removeAttribute("style")),(j!==this.statics.blotName||!X)&&super.format(j,X)}}MockSelectNode.blotName="mock-select";MockSelectNode.tagName="span";MockSelectNode.className="affine-mock-select";Quill$2.register({"formats/mock-select":MockSelectNode},!0);const createLink=hotkey.withDisabledHotkeyFn(async q=>{var ve,be;if(!isRangeSelection())return;const j=getStartModelBySelection(),X=getRichTextByModel(j);if(!X)return;const{quill:te}=X,ne=te.getSelection();assertExists(ne);const re=te.getFormat(ne);if(re!=null&&re.link){q.captureSync();const{index:Ce,length:Ee}=ne;(ve=j.text)==null||ve.format(Ce,Ee,{link:!1});return}te.format("mock-select",!0);const[oe,le]=te.scroll.descendant(MockSelectNode,ne.index);if(!oe)throw console.error("Error on getBlotNode",MockSelectNode,te,ne),new Error("Failed to getBlotNode, node not found!");const fe=oe,we=fe==null?void 0:fe.domNode;if(!we)throw console.error("Error on createLink",fe,te,ne),new Error("Failed to create link, mockSelectDom not found!");const ke=await showLinkPopover({anchorEl:we});if(te.formatText(ne,{"mock-select":!1}),ke.type!=="confirm")return;const ye=ke.link;q.captureSync(),(be=j.text)==null||be.format(ne.index,ne.length,{link:ye})}),_Vec=class{static clamp(q,j,X){return Math.max(j,typeof X<"u"?Math.min(q,X):q)}static clampV(q,j,X){return q.map(te=>X?_Vec.clamp(te,j,X):_Vec.clamp(te,j))}static cross(q,j,X){return(j[0]-q[0])*(X[1]-q[1])-(X[0]-q[0])*(j[1]-q[1])}static snap(q,j=1){return[Math.round(q[0]/j)*j,Math.round(q[1]/j)*j]}};let Vec=_Vec;Vec.neg=q=>[-q[0],-q[1]];Vec.add=(q,j)=>[q[0]+j[0],q[1]+j[1]];Vec.addScalar=(q,j)=>[q[0]+j,q[1]+j];Vec.sub=(q,j)=>[q[0]-j[0],q[1]-j[1]];Vec.subScalar=(q,j)=>[q[0]-j,q[1]-j];Vec.vec=(q,j)=>[j[0]-q[0],j[1]-q[1]];Vec.mul=(q,j)=>[q[0]*j,q[1]*j];Vec.mulV=(q,j)=>[q[0]*j[0],q[1]*j[1]];Vec.div=(q,j)=>[q[0]/j,q[1]/j];Vec.divV=(q,j)=>[q[0]/j[0],q[1]/j[1]];Vec.per=q=>[q[1],-q[0]];Vec.dpr=(q,j)=>q[0]*j[0]+q[1]*j[1];Vec.cpr=(q,j)=>q[0]*j[1]-j[0]*q[1];Vec.len2=q=>q[0]*q[0]+q[1]*q[1];Vec.len=q=>Math.hypot(q[0],q[1]);Vec.pry=(q,j)=>_Vec.dpr(q,j)/_Vec.len(j);Vec.uni=q=>_Vec.div(q,_Vec.len(q));Vec.normalize=q=>_Vec.uni(q);Vec.tangent=(q,j)=>_Vec.uni(_Vec.sub(q,j));Vec.dist2=(q,j)=>_Vec.len2(_Vec.sub(q,j));Vec.dist=(q,j)=>Math.hypot(q[1]-j[1],q[0]-j[0]);Vec.fastDist=(q,j)=>{const X=[j[0]-q[0],j[1]-q[1]],te=[Math.abs(X[0]),Math.abs(X[1])];let ne=1/Math.max(te[0],te[1]);return ne=ne*(1.29289-(te[0]+te[1])*ne*.29289),[X[0]*ne,X[1]*ne]};Vec.ang=(q,j)=>Math.atan2(_Vec.cpr(q,j),_Vec.dpr(q,j));Vec.angle=(q,j)=>Math.atan2(j[1]-q[1],j[0]-q[0]);Vec.med=(q,j)=>_Vec.mul(_Vec.add(q,j),.5);Vec.rot=(q,j=0)=>[q[0]*Math.cos(j)-q[1]*Math.sin(j),q[0]*Math.sin(j)+q[1]*Math.cos(j)];Vec.rotWith=(q,j,X=0)=>{if(X===0)return q;const te=Math.sin(X),ne=Math.cos(X),re=q[0]-j[0],oe=q[1]-j[1],le=re*ne-oe*te,fe=re*te+oe*ne;return[le+j[0],fe+j[1]]};Vec.isEqual=(q,j)=>q[0]===j[0]&&q[1]===j[1];Vec.lrp=(q,j,X)=>_Vec.add(q,_Vec.mul(_Vec.sub(j,q),X));Vec.int=(q,j,X,te,ne=1)=>{const re=(_Vec.clamp(X,te)-X)/(te-X);return _Vec.add(_Vec.mul(q,1-re),_Vec.mul(j,ne))};Vec.ang3=(q,j,X)=>{const te=_Vec.vec(j,q),ne=_Vec.vec(j,X);return _Vec.ang(te,ne)};Vec.abs=q=>[Math.abs(q[0]),Math.abs(q[1])];Vec.rescale=(q,j)=>{const X=_Vec.len(q);return[j*q[0]/X,j*q[1]/X]};Vec.isLeft=(q,j,X)=>(j[0]-q[0])*(X[1]-q[1])-(X[0]-q[0])*(j[1]-q[1]);Vec.clockwise=(q,j,X)=>_Vec.isLeft(q,j,X)>0;Vec.toFixed=q=>q.map(j=>Math.round(j*100)/100);Vec.nearestPointOnLineThroughPoint=(q,j,X)=>_Vec.add(q,_Vec.mul(j,_Vec.pry(_Vec.sub(X,q),j)));Vec.distanceToLineThroughPoint=(q,j,X)=>_Vec.dist(X,_Vec.nearestPointOnLineThroughPoint(q,j,X));Vec.nearestPointOnLineSegment=(q,j,X,te=!0)=>{const ne=_Vec.uni(_Vec.sub(j,q)),re=_Vec.add(q,_Vec.mul(ne,_Vec.pry(_Vec.sub(X,q),ne)));if(te){if(re[0]<Math.min(q[0],j[0]))return q[0]<j[0]?q:j;if(re[0]>Math.max(q[0],j[0]))return q[0]>j[0]?q:j;if(re[1]<Math.min(q[1],j[1]))return q[1]<j[1]?q:j;if(re[1]>Math.max(q[1],j[1]))return q[1]>j[1]?q:j}return re};Vec.distanceToLineSegment=(q,j,X,te=!0)=>_Vec.dist(X,_Vec.nearestPointOnLineSegment(q,j,X,te));Vec.nearestPointOnBounds=(q,j)=>[_Vec.clamp(j[0],q.minX,q.maxX),_Vec.clamp(j[1],q.minY,q.maxY)];Vec.distanceToBounds=(q,j)=>_Vec.dist(j,_Vec.nearestPointOnBounds(q,j));Vec.nudge=(q,j,X)=>_Vec.isEqual(q,j)?q:_Vec.add(q,_Vec.mul(_Vec.uni(_Vec.sub(j,q)),X));Vec.nudgeAtAngle=(q,j,X)=>[Math.cos(j)*X+q[0],Math.sin(j)*X+q[1]];Vec.toPrecision=(q,j=4)=>[+q[0].toPrecision(j),+q[1].toPrecision(j)];Vec.pointsBetween=(q,j,X=6)=>Array.from(Array(X)).map((te,ne)=>{const re=ne/(X-1),oe=Math.min(1,.5+Math.abs(.5-re));return[..._Vec.lrp(q,j,re),oe]});Vec.slope=(q,j)=>q[0]===j[0]?NaN:(q[1]-j[1])/(q[0]-j[0]);Vec.max=(...q)=>[Math.max(...q.map(j=>j[0])),Math.max(...q.map(j=>j[1]))];Vec.min=(...q)=>[Math.min(...q.map(j=>j[0])),Math.min(...q.map(j=>j[1]))];const TAU=Math.PI*2,_Utils=class{static lerp(q,j,X){return X=_Utils.clamp(X,0,1),q*(1-X)+j*X}static lerpColor(q,j,X=.5){function te(fe){const we=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(fe);return[parseInt(we[1],16),parseInt(we[2],16),parseInt(we[3],16)]}function ne(fe){return"#"+((1<<24)+(fe[0]<<16)+(fe[1]<<8)+fe[2]).toString(16).slice(1)}const re=te(q)||[0,0,0],oe=te(j)||[0,0,0],le=re.slice();for(let fe=0;fe<3;fe++)le[fe]=Math.round(le[fe]+X*(oe[fe]-re[fe]));return ne(le)}static modulate(q,j,X,te=!1){const[ne,re]=j,[oe,le]=X,fe=oe+(q-ne)/(re-ne)*(le-oe);return te?oe<le?Math.max(Math.min(fe,le),oe):Math.max(Math.min(fe,oe),le):fe}static clamp(q,j,X){return Math.max(j,typeof X<"u"?Math.min(q,X):q)}static deepClone(q){if(q===null)return q;if(Array.isArray(q))return[...q];if(typeof q=="object"){const j={...q};return Object.keys(j).forEach(X=>j[X]=typeof q[X]=="object"?_Utils.deepClone(q[X]):q[X]),j}return q}static rng(q=""){let j=0,X=0,te=0,ne=0;function re(){const oe=j^j<<11;return j=X,X=te,te=ne,ne^=(ne>>>19^oe^oe>>>8)>>>0,ne/4294967296}for(let oe=0;oe<q.length+64;oe++)j^=q.charCodeAt(oe)|0,re();return re}static pointsToLineSegments(q,j=!1){const X=[];for(let te=1;te<q.length;te++)X.push([q[te-1],q[te]]);return j&&X.push([q[q.length-1],q[0]]),X}static getRectangleSides(q,j,X=0){const te=[q[0]+j[0]/2,q[1]+j[1]/2],ne=Vec.rotWith(q,te,X),re=Vec.rotWith(Vec.add(q,[j[0],0]),te,X),oe=Vec.rotWith(Vec.add(q,j),te,X),le=Vec.rotWith(Vec.add(q,[0,j[1]]),te,X);return[["top",[ne,re]],["right",[re,oe]],["bottom",[oe,le]],["left",[le,ne]]]}static circleFromThreePoints(q,j,X){const[te,ne]=q,[re,oe]=j,[le,fe]=X,we=te*(oe-fe)-ne*(re-le)+re*fe-le*oe,ke=(te*te+ne*ne)*(fe-oe)+(re*re+oe*oe)*(ne-fe)+(le*le+fe*fe)*(oe-ne),ye=(te*te+ne*ne)*(re-le)+(re*re+oe*oe)*(le-te)+(le*le+fe*fe)*(te-re),ve=-ke/(2*we),be=-ye/(2*we);return[ve,be,Math.hypot(ve-te,be-ne)]}static perimeterOfEllipse(q,j){const X=Math.pow(q-j,2)/Math.pow(q+j,2);return Math.PI*(q+j)*(1+3*X/(10+Math.sqrt(4-3*X)))}static shortAngleDist(q,j){const X=Math.PI*2,te=(j-q)%X;return 2*te%X-te}static longAngleDist(q,j){return Math.PI*2-_Utils.shortAngleDist(q,j)}static lerpAngles(q,j,X){return q+_Utils.shortAngleDist(q,j)*X}static angleDelta(q,j){return _Utils.shortAngleDist(q,j)}static getSweep(q,j,X){return _Utils.angleDelta(Vec.angle(q,j),Vec.angle(q,X))}static clampRadians(q){return(Math.PI*2+q)%(Math.PI*2)}static snapAngleToSegments(q,j){const X=Math.PI*2/j;return Math.floor((_Utils.clampRadians(q)+X/2)/X)*X}static isAngleBetween(q,j,X){if(X===q||X===j)return!0;const te=(j-q+TAU)%TAU,ne=(X-q+TAU)%TAU;return te<=Math.PI!=ne>te}static degreesToRadians(q){return q*Math.PI/180}static radiansToDegrees(q){return q*180/Math.PI}static getArcLength(q,j,X,te){const ne=_Utils.getSweep(q,X,te);return j*(2*Math.PI)*(ne/(2*Math.PI))}static getSweepFlag(q,j,X){const te=Vec.angle(q,X);return(Vec.angle(q,j)-te+3*Math.PI)%(2*Math.PI)-Math.PI>0?0:1}static getLargeArcFlag(q,j,X){const te=Vec.angle(X,q),re=(Vec.angle(X,j)-te+3*Math.PI)%(2*Math.PI)-Math.PI;return Math.abs(re)>Math.PI/2?0:1}static getArcDashOffset(q,j,X,te,ne){const re=_Utils.getSweepFlag(q,X,te),oe=_Utils.getArcLength(q,j,X,te);return-(re<0?oe:2*Math.PI*q[2]-oe)/2+ne}static getEllipseDashOffset(q,j){return-(2*Math.PI*q[2])/2+-j}static pointInCircle(q,j,X){return Vec.dist(q,j)<=X}static pointInEllipse(q,j,X,te,ne=0){ne=ne||0;const re=Math.cos(ne),oe=Math.sin(ne),le=Vec.sub(q,j),fe=re*le[0]+oe*le[1],we=oe*le[0]-re*le[1];return fe*fe/(X*X)+we*we/(te*te)<=1}static pointInRect(q,j){return!(q[0]<j[0]||q[0]>q[0]+j[0]||q[1]<j[1]||q[1]>q[1]+j[1])}static pointInPolygon(q,j){let X=0;return j.forEach((te,ne)=>{const re=j[(ne+1)%j.length];te[1]<=q[1]?re[1]>q[1]&&Vec.cross(te,re,q)>0&&(X+=1):re[1]<=q[1]&&Vec.cross(te,re,q)<0&&(X-=1)}),X!==0}static pointInBounds(q,j){return!(q[0]<j.minX||q[0]>j.maxX||q[1]<j.minY||q[1]>j.maxY)}static pointInPolyline(q,j,X=3){for(let te=1;te<j.length;te++)if(Vec.distanceToLineSegment(j[te-1],j[te],q)<X)return!0;return!1}static getBoundsSides(q){return this.getRectangleSides([q.minX,q.minY],[q.width,q.height])}static expandBounds(q,j){return{minX:q.minX-j,minY:q.minY-j,maxX:q.maxX+j,maxY:q.maxY+j,width:q.width+j*2,height:q.height+j*2}}static boundsCollide(q,j){return!(q.maxX<j.minX||q.minX>j.maxX||q.maxY<j.minY||q.minY>j.maxY)}static boundsContain(q,j){return q.minX<j.minX&&q.minY<j.minY&&q.maxY>j.maxY&&q.maxX>j.maxX}static boundsContained(q,j){return _Utils.boundsContain(j,q)}static boundsAreEqual(q,j){return!(j.maxX!==q.maxX||j.minX!==q.minX||j.maxY!==q.maxY||j.minY!==q.minY)}static getBoundsFromPoints(q,j=0){let X=1/0,te=1/0,ne=-1/0,re=-1/0;if(q.length<2)X=0,te=0,ne=1,re=1;else for(const[oe,le]of q)X=Math.min(oe,X),te=Math.min(le,te),ne=Math.max(oe,ne),re=Math.max(le,re);return j!==0?_Utils.getBoundsFromPoints(q.map(oe=>Vec.rotWith(oe,[(X+ne)/2,(te+re)/2],j))):{minX:X,minY:te,maxX:ne,maxY:re,width:Math.max(1,ne-X),height:Math.max(1,re-te)}}static centerBounds(q,j){const X=this.getBoundsCenter(q),te=j[0]-X[0],ne=j[1]-X[1];return this.translateBounds(q,[te,ne])}static snapBoundsToGrid(q,j){const X=Math.round(q.minX/j)*j,te=Math.round(q.minY/j)*j,ne=Math.round(q.maxX/j)*j,re=Math.round(q.maxY/j)*j;return{minX:X,minY:te,maxX:ne,maxY:re,width:Math.max(1,ne-X),height:Math.max(1,re-te)}}static translateBounds(q,j){return{minX:q.minX+j[0],minY:q.minY+j[1],maxX:q.maxX+j[0],maxY:q.maxY+j[1],width:q.width,height:q.height}}static rotateBounds(q,j,X){const[te,ne]=Vec.rotWith([q.minX,q.minY],j,X),[re,oe]=Vec.rotWith([q.maxX,q.maxY],j,X);return{minX:te,minY:ne,maxX:re,maxY:oe,width:q.width,height:q.height}}static getRotatedEllipseBounds(q,j,X,te,ne=0){const re=Math.cos(ne),oe=Math.sin(ne),le=Math.hypot(X*re,te*oe),fe=Math.hypot(X*oe,te*re);return{minX:q+X-le,minY:j+te-fe,maxX:q+X+le,maxY:j+te+fe,width:le*2,height:fe*2}}static getExpandedBounds(q,j){const X=Math.min(q.minX,j.minX),te=Math.min(q.minY,j.minY),ne=Math.max(q.maxX,j.maxX),re=Math.max(q.maxY,j.maxY),oe=Math.abs(ne-X),le=Math.abs(re-te);return{minX:X,minY:te,maxX:ne,maxY:re,width:oe,height:le}}static getCommonBounds(q){if(q.length<2)return q[0];let j=q[0];for(let X=1;X<q.length;X++)j=_Utils.getExpandedBounds(j,q[X]);return j}static getRotatedCorners(q,j=0){const X=[q.minX+q.width/2,q.minY+q.height/2];return[[q.minX,q.minY],[q.maxX,q.minY],[q.maxX,q.maxY],[q.minX,q.maxY]].map(te=>Vec.rotWith(te,X,j))}static getTransformedBoundingBox(q,j,X,te=0,ne=!1){const[re,oe]=[q.minX,q.minY],[le,fe]=[q.maxX,q.maxY];let[we,ke]=[q.minX,q.minY],[ye,ve]=[q.maxX,q.maxY];if(j==="center")return{minX:we+X[0],minY:ke+X[1],maxX:ye+X[0],maxY:ve+X[1],width:ye-we,height:ve-ke,scaleX:1,scaleY:1};const[be,Ce]=Vec.rot(X,-te);switch(j){case TLBoundsEdge.Top:case TLBoundsCorner.TopLeft:case TLBoundsCorner.TopRight:{ke+=Ce;break}case TLBoundsEdge.Bottom:case TLBoundsCorner.BottomLeft:case TLBoundsCorner.BottomRight:{ve+=Ce;break}}switch(j){case TLBoundsEdge.Left:case TLBoundsCorner.TopLeft:case TLBoundsCorner.BottomLeft:{we+=be;break}case TLBoundsEdge.Right:case TLBoundsCorner.TopRight:case TLBoundsCorner.BottomRight:{ye+=be;break}}const Ee=le-re,Oe=fe-oe,Ae=(ye-we)/Ee,Te=(ve-ke)/Oe,Se=Ae<0,$e=Te<0,Le=Math.abs(ye-we),Pe=Math.abs(ve-ke);if(ne){const Re=Ee/Oe,Ne=Re<Le/Pe,je=Le*(Te<0?1:-1)*(1/Re),Ie=Pe*(Ae<0?1:-1)*Re;switch(j){case TLBoundsCorner.TopLeft:{Ne?ke=ve+je:we=ye+Ie;break}case TLBoundsCorner.TopRight:{Ne?ke=ve+je:ye=we-Ie;break}case TLBoundsCorner.BottomRight:{Ne?ve=ke-je:ye=we-Ie;break}case TLBoundsCorner.BottomLeft:{Ne?ve=ke-je:we=ye+Ie;break}case TLBoundsEdge.Bottom:case TLBoundsEdge.Top:{const De=(we+ye)/2,Ve=Pe*Re;we=De-Ve/2,ye=De+Ve/2;break}case TLBoundsEdge.Left:case TLBoundsEdge.Right:{const De=(ke+ve)/2,Ve=Le/Re;ke=De-Ve/2,ve=De+Ve/2;break}}}if(te%(Math.PI*2)!==0){let Re=[0,0];const Ne=Vec.med([re,oe],[le,fe]),je=Vec.med([we,ke],[ye,ve]);switch(j){case TLBoundsCorner.TopLeft:{Re=Vec.sub(Vec.rotWith([ye,ve],je,te),Vec.rotWith([le,fe],Ne,te));break}case TLBoundsCorner.TopRight:{Re=Vec.sub(Vec.rotWith([we,ve],je,te),Vec.rotWith([re,fe],Ne,te));break}case TLBoundsCorner.BottomRight:{Re=Vec.sub(Vec.rotWith([we,ke],je,te),Vec.rotWith([re,oe],Ne,te));break}case TLBoundsCorner.BottomLeft:{Re=Vec.sub(Vec.rotWith([ye,ke],je,te),Vec.rotWith([le,oe],Ne,te));break}case TLBoundsEdge.Top:{Re=Vec.sub(Vec.rotWith(Vec.med([we,ve],[ye,ve]),je,te),Vec.rotWith(Vec.med([re,fe],[le,fe]),Ne,te));break}case TLBoundsEdge.Left:{Re=Vec.sub(Vec.rotWith(Vec.med([ye,ke],[ye,ve]),je,te),Vec.rotWith(Vec.med([le,oe],[le,fe]),Ne,te));break}case TLBoundsEdge.Bottom:{Re=Vec.sub(Vec.rotWith(Vec.med([we,ke],[ye,ke]),je,te),Vec.rotWith(Vec.med([re,oe],[le,oe]),Ne,te));break}case TLBoundsEdge.Right:{Re=Vec.sub(Vec.rotWith(Vec.med([we,ke],[we,ve]),je,te),Vec.rotWith(Vec.med([re,oe],[re,fe]),Ne,te));break}}[we,ke]=Vec.sub([we,ke],Re),[ye,ve]=Vec.sub([ye,ve],Re)}return ye<we&&([ye,we]=[we,ye]),ve<ke&&([ve,ke]=[ke,ve]),{minX:we,minY:ke,maxX:ye,maxY:ve,width:ye-we,height:ve-ke,scaleX:(ye-we)/(le-re||1)*(Se?-1:1),scaleY:(ve-ke)/(fe-oe||1)*($e?-1:1)}}static getTransformAnchor(q,j,X){let te=q;switch(q){case TLBoundsCorner.TopLeft:{j&&X?te=TLBoundsCorner.BottomRight:j?te=TLBoundsCorner.TopRight:X?te=TLBoundsCorner.BottomLeft:te=TLBoundsCorner.BottomRight;break}case TLBoundsCorner.TopRight:{j&&X?te=TLBoundsCorner.BottomLeft:j?te=TLBoundsCorner.TopLeft:X?te=TLBoundsCorner.BottomRight:te=TLBoundsCorner.BottomLeft;break}case TLBoundsCorner.BottomRight:{j&&X?te=TLBoundsCorner.TopLeft:j?te=TLBoundsCorner.BottomLeft:X?te=TLBoundsCorner.TopRight:te=TLBoundsCorner.TopLeft;break}case TLBoundsCorner.BottomLeft:{j&&X?te=TLBoundsCorner.TopRight:j?te=TLBoundsCorner.BottomRight:X?te=TLBoundsCorner.TopLeft:te=TLBoundsCorner.TopRight;break}}return te}static getRelativeTransformedBoundingBox(q,j,X,te,ne){const re=(te?j.maxX-X.maxX:X.minX-j.minX)/j.width,oe=(ne?j.maxY-X.maxY:X.minY-j.minY)/j.height,le=X.width/j.width,fe=X.height/j.height,we=q.minX+q.width*re,ke=q.minY+q.height*oe,ye=q.width*le,ve=q.height*fe;return{minX:we,minY:ke,maxX:we+ye,maxY:ke+ve,width:ye,height:ve}}static getRotatedSize(q,j){const X=Vec.div(q,2),te=[[0,0],[q[0],0],q,[0,q[1]]].map(re=>Vec.rotWith(re,X,j)),ne=_Utils.getBoundsFromPoints(te);return[ne.width,ne.height]}static getBoundsCenter(q){return[q.minX+q.width/2,q.minY+q.height/2]}static getBoundsWithCenter(q){const j=_Utils.getBoundsCenter(q);return{...q,midX:j[0],midY:j[1]}}static getCommonTopLeft(q){const j=[1/0,1/0];return q.forEach(X=>{j[0]=Math.min(j[0],X[0]),j[1]=Math.min(j[1],X[1])}),j}static getFromCache(q,j,X){let te=q.get(j);if(te===void 0&&(q.set(j,X()),te=q.get(j),te===void 0))throw Error("Cache did not include item!");return te}static uniqueId(q=""){return q?((Number(q)^Math.random()*16)>>Number(q)/4).toString(16):`${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g,_Utils.uniqueId)}static rotateArray(q,j){return q.map((X,te)=>q[(te+j)%q.length])}static debounce(q,j=0){let X;return function(...te){clearTimeout(X),X=setTimeout(()=>q.apply(te),j)}}static getSvgPathFromStroke(q,j=!0){const X=q.length;if(X<4)return"";let te=q[0],ne=q[1];const re=q[2];let oe=`M${te[0].toFixed(2)},${te[1].toFixed(2)} Q${ne[0].toFixed(2)},${ne[1].toFixed(2)} ${average(ne[0],re[0]).toFixed(2)},${average(ne[1],re[1]).toFixed(2)} T`;for(let le=2,fe=X-1;le<fe;le++)te=q[le],ne=q[le+1],oe+=`${average(te[0],ne[0]).toFixed(2)},${average(te[1],ne[1]).toFixed(2)} `;return j&&(oe+="Z"),oe}static getSvgPathFromStrokePoints(q,j=!1){const X=q.length;if(X<4)return"";let te=q[0].point,ne=q[1].point;const re=q[2].point;let oe=`M${te[0].toFixed(2)},${te[1].toFixed(2)} Q${ne[0].toFixed(2)},${ne[1].toFixed(2)} ${average(ne[0],re[0]).toFixed(2)},${average(ne[1],re[1]).toFixed(2)} T`;for(let le=2,fe=X-1;le<fe;le++)te=q[le].point,ne=q[le+1].point,oe+=`${average(te[0],ne[0]).toFixed(2)},${average(te[1],ne[1]).toFixed(2)} `;return j&&(oe+="Z"),oe}static getPerfectDashProps(q,j,X,te=1,ne=!0,re=2){let oe,le,fe;if(X.toLowerCase()==="dashed")oe=j*re,fe=1,le=ne?(oe/2).toString():"0";else if(X.toLowerCase()==="dotted")oe=j/100,fe=100,le="0";else return{strokeDasharray:"none",strokeDashoffset:"none"};let we=Math.floor(q/oe/(2*fe));we-=we%te,we=Math.max(we,4);const ke=Math.max(oe,(q-we*oe)/(ne?we:we-1));return{strokeDasharray:[oe,ke].join(" "),strokeDashoffset:le}}static isMobileSafari(){if(typeof window>"u")return!1;const q=window.navigator.userAgent,j=!!q.match(/iPad/i)||!!q.match(/iPhone/i),X=!!q.match(/WebKit/i);return j&&X&&!q.match(/CriOS/i)}static throttle(q,j){let X,te;return function(...ne){return X||(X=!0,setTimeout(()=>X=!1,j),te=q(...ne)),te}}static isDarwin(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}static metaKey(q){return _Utils.isDarwin()?q.metaKey:q.ctrlKey}static lns(q){const j=q.split("");return j.push(...j.splice(0,Math.round(j.length/5))),j.push(...j.splice(0,Math.round(j.length/4))),j.push(...j.splice(0,Math.round(j.length/3))),j.push(...j.splice(0,Math.round(j.length/2))),j.reverse().map(X=>+X?+X<5?5+ +X:+X>5?+X-5:X:X).join("")}};let Utils=_Utils;Utils.getSnapPoints=(q,j,X)=>{const te={...q},ne=[0,0],re=[],oe={[SnapPoints.minX]:{id:SnapPoints.minX,isSnapped:!1},[SnapPoints.midX]:{id:SnapPoints.midX,isSnapped:!1},[SnapPoints.maxX]:{id:SnapPoints.maxX,isSnapped:!1},[SnapPoints.minY]:{id:SnapPoints.minY,isSnapped:!1},[SnapPoints.midY]:{id:SnapPoints.midY,isSnapped:!1},[SnapPoints.maxY]:{id:SnapPoints.maxY,isSnapped:!1}},le=[SnapPoints.midX,SnapPoints.minX,SnapPoints.maxX],fe=[SnapPoints.midY,SnapPoints.minY,SnapPoints.maxY],we=j.map(Ce=>{const Ee=le.flatMap((Ae,Te)=>le.map((Se,$e)=>{const Le=te[Ae]-Ce[Se],Pe=Math.abs(Le);return{f:Ae,t:Se,gap:Le,distance:Pe,isCareful:Te===0||Te+$e===3}})),Oe=fe.flatMap((Ae,Te)=>fe.map((Se,$e)=>{const Le=te[Ae]-Ce[Se],Pe=Math.abs(Le);return{f:Ae,t:Se,gap:Le,distance:Pe,isCareful:Te===0||Te+$e===3}}));return[Ce,Ee,Oe]});let ke=1/0,ye=1/0,ve=1/0,be=1/0;return we.forEach(([Ce,Ee,Oe])=>{Ee.forEach(Ae=>{Ae.distance<X&&Ae.distance<ve&&(ve=Ae.distance,ke=Ae.gap)}),Oe.forEach(Ae=>{Ae.distance<X&&Ae.distance<be&&(be=Ae.distance,ye=Ae.gap)})}),we.forEach(([Ce,Ee,Oe])=>{ke!==1/0&&Ee.forEach(Ae=>{Math.abs(Ae.gap-ke)<2&&(oe[Ae.f]={...oe[Ae.f],isSnapped:!0,to:Ce[Ae.t],B:Ce,distance:Ae.distance})}),ye!==1/0&&Oe.forEach(Ae=>{Math.abs(Ae.gap-ye)<2&&(oe[Ae.f]={...oe[Ae.f],isSnapped:!0,to:Ce[Ae.t],B:Ce,distance:Ae.distance})})}),ne[0]=ke===1/0?0:ke,ne[1]=ye===1/0?0:ye,te.minX-=ne[0],te.midX-=ne[0],te.maxX-=ne[0],te.minY-=ne[1],te.midY-=ne[1],te.maxY-=ne[1],le.forEach(Ce=>{const Ee=oe[Ce];if(!Ee.isSnapped)return;const{id:Oe,B:Ae}=Ee,Te=te[Oe];re.push(Oe===SnapPoints.minX?[[Te,te.midY],[Te,Ae.minY],[Te,Ae.maxY]]:[[Te,te.minY],[Te,te.maxY],[Te,Ae.minY],[Te,Ae.maxY]])}),fe.forEach(Ce=>{const Ee=oe[Ce];if(!Ee.isSnapped)return;const{id:Oe,B:Ae}=Ee,Te=te[Oe];re.push(Oe===SnapPoints.midY?[[te.midX,Te],[Ae.minX,Te],[Ae.maxX,Te]]:[[te.minX,Te],[te.maxX,Te],[Ae.minX,Te],[Ae.maxX,Te]])}),{offset:ne,snapLines:re}};Utils.deepMerge=(q,j)=>{const X={...q},te=Object.entries(j);for(const[ne,re]of te)X[ne]=re===Object(re)&&!Array.isArray(re)?_Utils.deepMerge(X[ne],re):re;return X};function average(q,j){return(q+j)/2}const canvasLight="#fafafa",canvasDark="#343d45",colors={[ColorStyle.White]:"#f0f1f3",[ColorStyle.LightGray]:"#c6cbd1",[ColorStyle.Gray]:"#788492",[ColorStyle.Black]:"#1d1d1d",[ColorStyle.Green]:"#36b24d",[ColorStyle.Cyan]:"#0e98ad",[ColorStyle.Blue]:"#1c7ed6",[ColorStyle.Indigo]:"#4263eb",[ColorStyle.Violet]:"#7746f1",[ColorStyle.Red]:"#ff2133",[ColorStyle.Orange]:"#ff9433",[ColorStyle.Yellow]:"#ffc936"};({...Object.fromEntries(Object.entries(colors).map(([q,j])=>[q,Utils.lerpColor(j,canvasLight,.45)])),[ColorStyle.White]:0,[ColorStyle.Black]:0},{...Object.fromEntries(Object.entries(colors).map(([q,j])=>[q,Utils.lerpColor(Utils.lerpColor(j,"#999999",.3),canvasDark,.4)])),[ColorStyle.White]:0,[ColorStyle.Black]:0});const strokes={light:{...colors,[ColorStyle.White]:"#1d1d1d"},dark:{...Object.fromEntries(Object.entries(colors).map(([q,j])=>[q,Utils.lerpColor(j,canvasDark,.1)])),[ColorStyle.White]:"#cecece",[ColorStyle.Black]:"#cecece"}},fills={light:{...Object.fromEntries(Object.entries(colors).map(([q,j])=>[q,Utils.lerpColor(j,canvasLight,.82)])),[ColorStyle.White]:"#fefefe"},dark:{...Object.fromEntries(Object.entries(colors).map(([q,j])=>[q,Utils.lerpColor(j,canvasDark,.82)])),[ColorStyle.White]:"rgb(30,33,37)",[ColorStyle.Black]:"#1e1e1f"}},strokeWidths={[SizeStyle.Small]:2,[SizeStyle.Medium]:3.5,[SizeStyle.Large]:5};SizeStyle.Small+"",SizeStyle.Medium+"",SizeStyle.Large+"";FontStyle.Script+"",FontStyle.Sans+"",FontStyle.Serif+"",FontStyle.Mono+"";FontStyle.Script+"",FontStyle.Sans+"",FontStyle.Serif+"",FontStyle.Mono+"";SizeStyle.Small+"",SizeStyle.Medium+"",SizeStyle.Large+"";function getStrokeWidth(q){return strokeWidths[q]}function getShapeStyle(q,j){const{color:X,size:te,isFilled:ne}=q,re=getStrokeWidth(te);if(X.startsWith("#")){const oe=q.color,le=Utils.lerpColor(X,canvasLight,.45);return{stroke:oe,fill:le,strokeWidth:re}}else{const oe=q.color,le=j?"dark":"light";return{stroke:strokes[le][oe],fill:ne?fills[le][oe]:"none",strokeWidth:re}}}const defaultStyle={color:ColorStyle.Black,size:SizeStyle.Small,isFilled:!1,dash:DashStyle.Draw,scale:1};({...defaultStyle,font:FontStyle.Script,textAlign:AlignStyle.Middle});function $$1(q,j,X,te=ne=>ne){return q*te(.5-j*(.5-X))}function se(q){return[-q[0],-q[1]]}function l$5(q,j){return[q[0]+j[0],q[1]+j[1]]}function a$4(q,j){return[q[0]-j[0],q[1]-j[1]]}function b$2(q,j){return[q[0]*j,q[1]*j]}function he(q,j){return[q[0]/j,q[1]/j]}function R$2(q){return[q[1],-q[0]]}function B(q,j){return q[0]*j[0]+q[1]*j[1]}function ue(q,j){return q[0]===j[0]&&q[1]===j[1]}function ge(q){return Math.hypot(q[0],q[1])}function de(q){return q[0]*q[0]+q[1]*q[1]}function A$2(q,j){return de(a$4(q,j))}function G(q){return he(q,ge(q))}function ie(q,j){return Math.hypot(q[1]-j[1],q[0]-j[0])}function L$1(q,j,X){let te=Math.sin(X),ne=Math.cos(X),re=q[0]-j[0],oe=q[1]-j[1],le=re*ne-oe*te,fe=re*te+oe*ne;return[le+j[0],fe+j[1]]}function K(q,j,X){return l$5(q,b$2(a$4(j,q),X))}function ee(q,j,X){return l$5(q,b$2(j,X))}var{min:C$2,PI:xe}=Math,pe=.275,V$1=xe+1e-4;function ce(q,j={}){let{size:X=16,smoothing:te=.5,thinning:ne=.5,simulatePressure:re=!0,easing:oe=at=>at,start:le={},end:fe={},last:we=!1}=j,{cap:ke=!0,easing:ye=at=>at*(2-at)}=le,{cap:ve=!0,easing:be=at=>--at*at*at+1}=fe;if(q.length===0||X<=0)return[];let Ce=q[q.length-1].runningLength,Ee=le.taper===!1?0:le.taper===!0?Math.max(X,Ce):le.taper,Oe=fe.taper===!1?0:fe.taper===!0?Math.max(X,Ce):fe.taper,Ae=Math.pow(X*te,2),Te=[],Se=[],$e=q.slice(0,10).reduce((at,pt)=>{let st=pt.pressure;if(re){let it=C$2(1,pt.distance/X),Ge=C$2(1,1-it);st=C$2(1,at+(Ge-at)*(it*pe))}return(at+st)/2},q[0].pressure),Le=$$1(X,ne,q[q.length-1].pressure,oe),Pe,Re=q[0].vector,Ne=q[0].point,je=Ne,Ie=Ne,De=je,Ve=!1;for(let at=0;at<q.length;at++){let{pressure:pt}=q[at],{point:st,vector:it,distance:Ge,runningLength:et}=q[at];if(at<q.length-1&&Ce-et<3)continue;if(ne){if(re){let wt=C$2(1,Ge/X),St=C$2(1,1-wt);pt=C$2(1,$e+(St-$e)*(wt*pe))}Le=$$1(X,ne,pt,oe)}else Le=X/2;Pe===void 0&&(Pe=Le);let Je=et<Ee?ye(et/Ee):1,ft=Ce-et<Oe?be((Ce-et)/Oe):1;Le=Math.max(.01,Le*Math.min(Je,ft));let dt=(at<q.length-1?q[at+1]:q[at]).vector,Qe=at<q.length-1?B(it,dt):1,ht=B(it,Re)<0&&!Ve,mt=Qe!==null&&Qe<0;if(ht||mt){let wt=b$2(R$2(Re),Le);for(let St=1/13,At=0;At<=1;At+=St)Ie=L$1(a$4(st,wt),st,V$1*At),Te.push(Ie),De=L$1(l$5(st,wt),st,V$1*-At),Se.push(De);Ne=Ie,je=De,mt&&(Ve=!0);continue}if(Ve=!1,at===q.length-1){let wt=b$2(R$2(it),Le);Te.push(a$4(st,wt)),Se.push(l$5(st,wt));continue}let vt=b$2(R$2(K(dt,it,Qe)),Le);Ie=a$4(st,vt),(at<=1||A$2(Ne,Ie)>Ae)&&(Te.push(Ie),Ne=Ie),De=l$5(st,vt),(at<=1||A$2(je,De)>Ae)&&(Se.push(De),je=De),$e=pt,Re=it}let ze=q[0].point.slice(0,2),qe=q.length>1?q[q.length-1].point.slice(0,2):l$5(q[0].point,[1,1]),Xe=[],tt=[];if(q.length===1){if(!(Ee||Oe)||we){let at=ee(ze,G(R$2(a$4(ze,qe))),-(Pe||Le)),pt=[];for(let st=1/13,it=st;it<=1;it+=st)pt.push(L$1(at,ze,V$1*2*it));return pt}}else{if(!(Ee||Oe&&q.length===1))if(ke)for(let pt=1/13,st=pt;st<=1;st+=pt){let it=L$1(Se[0],ze,V$1*st);Xe.push(it)}else{let pt=a$4(Te[0],Se[0]),st=b$2(pt,.5),it=b$2(pt,.51);Xe.push(a$4(ze,st),a$4(ze,it),l$5(ze,it),l$5(ze,st))}let at=R$2(se(q[q.length-1].vector));if(Oe||Ee&&q.length===1)tt.push(qe);else if(ve){let pt=ee(qe,at,Le);for(let st=1/29,it=st;it<1;it+=st)tt.push(L$1(pt,qe,V$1*3*it))}else tt.push(l$5(qe,b$2(at,Le)),l$5(qe,b$2(at,Le*.99)),a$4(qe,b$2(at,Le*.99)),a$4(qe,b$2(at,Le)))}return Te.concat(tt,Se.reverse(),Xe)}function me(q,j={}){var X;let{streamline:te=.5,size:ne=16,last:re=!1}=j;if(q.length===0)return[];let oe=.15+(1-te)*.85,le=Array.isArray(q[0])?q:q.map(({x:be,y:Ce,pressure:Ee=.5})=>[be,Ce,Ee]);if(le.length===2){let be=le[1];le=le.slice(0,-1);for(let Ce=1;Ce<5;Ce++)le.push(K(le[0],be,Ce/4))}le.length===1&&(le=[...le,[...l$5(le[0],[1,1]),...le[0].slice(2)]]);let fe=[{point:[le[0][0],le[0][1]],pressure:le[0][2]>=0?le[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],we=!1,ke=0,ye=fe[0],ve=le.length-1;for(let be=1;be<le.length;be++){let Ce=re&&be===ve?le[be].slice(0,2):K(ye.point,le[be],oe);if(ue(ye.point,Ce))continue;let Ee=ie(Ce,ye.point);if(ke+=Ee,be<ve&&!we){if(ke<ne)continue;we=!0}ye={point:Ce,pressure:le[be][2]>=0?le[be][2]:.5,vector:G(a$4(ye.point,Ce)),distance:Ee,runningLength:ke},fe.push(ye)}return fe[0].vector=((X=fe[1])==null?void 0:X.vector)||[0,0],fe}function ae(q,j={}){return ce(me(q,j),j)}var _e=ae;const getStrokePoints$1=me,getStroke$1=_e;function getRectangleDrawPoints(q,j,X){const te=getShapeStyle(j),ne=Utils.rng(q),re=te.strokeWidth,oe=Math.max(0,X[0]),le=Math.max(0,X[1]),fe=Array.from(Array(4)).map(()=>[ne()*re*.75,ne()*re*.75]),we=Vec.add([re/2,re/2],fe[0]),ke=Vec.add([oe-re/2,re/2],fe[1]),ye=Vec.add([oe-re/2,le-re/2],fe[2]),ve=Vec.add([re/2,le-re/2],fe[3]),be=Math.round(Math.abs(ne()*2*4)),Ce=Math.min(oe/4,re*2),Ee=Math.min(le/4,re*2),Oe=Math.max(8,Math.floor(oe/16)),Ae=Math.max(8,Math.floor(le/16)),Te=Utils.rotateArray([Vec.pointsBetween(Vec.add(we,[Ce,0]),Vec.sub(ke,[Ce,0]),Oe),Vec.pointsBetween(Vec.add(ke,[0,Ee]),Vec.sub(ye,[0,Ee]),Ae),Vec.pointsBetween(Vec.sub(ye,[Ce,0]),Vec.add(ve,[Ce,0]),Oe),Vec.pointsBetween(Vec.sub(ve,[0,Ee]),Vec.add(we,[0,Ee]),Ae)],be);return{points:[...Te.flat(),...Te[0]].slice(5,Math.floor((be%2===0?Oe:Ae)/-2)+3)}}function getDrawStrokeInfo$1(q,j,X){const{points:te}=getRectangleDrawPoints(q,j,X),{strokeWidth:ne}=getShapeStyle(j);return{points:te,options:{size:ne,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function getRectanglePath(q,j,X){const{points:te,options:ne}=getDrawStrokeInfo$1(q,j,X),re=getStroke$1(te,ne);return Utils.getSvgPathFromStroke(re)}function getRectangleIndicatorPathTDSnapshot(q,j,X){const{points:te,options:ne}=getDrawStrokeInfo$1(q,j,X);return Utils.getSvgPathFromStrokePoints(getStrokePoints$1(te,ne))}var h$2=Object.defineProperty,d$2=(q,j,X)=>j in q?h$2(q,j,{enumerable:!0,configurable:!0,writable:!0,value:X}):q[j]=X,m$2=(q,j,X)=>(d$2(q,typeof j!="symbol"?j+"":j,X),X),t$5=class{static clamp(j,X,te){return Math.max(X,typeof te<"u"?Math.min(j,te):j)}static clampV(j,X,te){return j.map(ne=>te?t$5.clamp(ne,X,te):t$5.clamp(ne,X))}static cross(j,X,te){return(X[0]-j[0])*(te[1]-j[1])-(te[0]-j[0])*(X[1]-j[1])}static snap(j,X=1){return[Math.round(j[0]/X)*X,Math.round(j[1]/X)*X]}},e$5=t$5;m$2(e$5,"neg",q=>[-q[0],-q[1]]),m$2(e$5,"add",(q,j)=>[q[0]+j[0],q[1]+j[1]]),m$2(e$5,"addScalar",(q,j)=>[q[0]+j,q[1]+j]),m$2(e$5,"sub",(q,j)=>[q[0]-j[0],q[1]-j[1]]),m$2(e$5,"subScalar",(q,j)=>[q[0]-j,q[1]-j]),m$2(e$5,"vec",(q,j)=>[j[0]-q[0],j[1]-q[1]]),m$2(e$5,"mul",(q,j)=>[q[0]*j,q[1]*j]),m$2(e$5,"mulV",(q,j)=>[q[0]*j[0],q[1]*j[1]]),m$2(e$5,"div",(q,j)=>[q[0]/j,q[1]/j]),m$2(e$5,"divV",(q,j)=>[q[0]/j[0],q[1]/j[1]]),m$2(e$5,"per",q=>[q[1],-q[0]]),m$2(e$5,"dpr",(q,j)=>q[0]*j[0]+q[1]*j[1]),m$2(e$5,"cpr",(q,j)=>q[0]*j[1]-j[0]*q[1]),m$2(e$5,"len2",q=>q[0]*q[0]+q[1]*q[1]),m$2(e$5,"len",q=>Math.hypot(q[0],q[1])),m$2(e$5,"pry",(q,j)=>t$5.dpr(q,j)/t$5.len(j)),m$2(e$5,"uni",q=>t$5.div(q,t$5.len(q))),m$2(e$5,"normalize",q=>t$5.uni(q)),m$2(e$5,"tangent",(q,j)=>t$5.uni(t$5.sub(q,j))),m$2(e$5,"dist2",(q,j)=>t$5.len2(t$5.sub(q,j))),m$2(e$5,"dist",(q,j)=>Math.hypot(q[1]-j[1],q[0]-j[0])),m$2(e$5,"fastDist",(q,j)=>{let X=[j[0]-q[0],j[1]-q[1]],te=[Math.abs(X[0]),Math.abs(X[1])],ne=1/Math.max(te[0],te[1]);return ne=ne*(1.29289-(te[0]+te[1])*ne*.29289),[X[0]*ne,X[1]*ne]}),m$2(e$5,"ang",(q,j)=>Math.atan2(t$5.cpr(q,j),t$5.dpr(q,j))),m$2(e$5,"angle",(q,j)=>Math.atan2(j[1]-q[1],j[0]-q[0])),m$2(e$5,"med",(q,j)=>t$5.mul(t$5.add(q,j),.5)),m$2(e$5,"rot",(q,j=0)=>[q[0]*Math.cos(j)-q[1]*Math.sin(j),q[0]*Math.sin(j)+q[1]*Math.cos(j)]),m$2(e$5,"rotWith",(q,j,X=0)=>{if(X===0)return q;let te=Math.sin(X),ne=Math.cos(X),re=q[0]-j[0],oe=q[1]-j[1],le=re*ne-oe*te,fe=re*te+oe*ne;return[le+j[0],fe+j[1]]}),m$2(e$5,"isEqual",(q,j)=>q[0]===j[0]&&q[1]===j[1]),m$2(e$5,"lrp",(q,j,X)=>t$5.add(q,t$5.mul(t$5.sub(j,q),X))),m$2(e$5,"int",(q,j,X,te,ne=1)=>{let re=(t$5.clamp(X,te)-X)/(te-X);return t$5.add(t$5.mul(q,1-re),t$5.mul(j,ne))}),m$2(e$5,"ang3",(q,j,X)=>{let te=t$5.vec(j,q),ne=t$5.vec(j,X);return t$5.ang(te,ne)}),m$2(e$5,"abs",q=>[Math.abs(q[0]),Math.abs(q[1])]),m$2(e$5,"rescale",(q,j)=>{let X=t$5.len(q);return[j*q[0]/X,j*q[1]/X]}),m$2(e$5,"isLeft",(q,j,X)=>(j[0]-q[0])*(X[1]-q[1])-(X[0]-q[0])*(j[1]-q[1])),m$2(e$5,"clockwise",(q,j,X)=>t$5.isLeft(q,j,X)>0),m$2(e$5,"toFixed",q=>q.map(j=>Math.round(j*100)/100)),m$2(e$5,"nearestPointOnLineThroughPoint",(q,j,X)=>t$5.add(q,t$5.mul(j,t$5.pry(t$5.sub(X,q),j)))),m$2(e$5,"distanceToLineThroughPoint",(q,j,X)=>t$5.dist(X,t$5.nearestPointOnLineThroughPoint(q,j,X))),m$2(e$5,"nearestPointOnLineSegment",(q,j,X,te=!0)=>{let ne=t$5.uni(t$5.sub(j,q)),re=t$5.add(q,t$5.mul(ne,t$5.pry(t$5.sub(X,q),ne)));if(te){if(re[0]<Math.min(q[0],j[0]))return q[0]<j[0]?q:j;if(re[0]>Math.max(q[0],j[0]))return q[0]>j[0]?q:j;if(re[1]<Math.min(q[1],j[1]))return q[1]<j[1]?q:j;if(re[1]>Math.max(q[1],j[1]))return q[1]>j[1]?q:j}return re}),m$2(e$5,"distanceToLineSegment",(q,j,X,te=!0)=>t$5.dist(X,t$5.nearestPointOnLineSegment(q,j,X,te))),m$2(e$5,"nearestPointOnBounds",(q,j)=>[t$5.clamp(j[0],q.minX,q.maxX),t$5.clamp(j[1],q.minY,q.maxY)]),m$2(e$5,"distanceToBounds",(q,j)=>t$5.dist(j,t$5.nearestPointOnBounds(q,j))),m$2(e$5,"nudge",(q,j,X)=>t$5.isEqual(q,j)?q:t$5.add(q,t$5.mul(t$5.uni(t$5.sub(j,q)),X))),m$2(e$5,"nudgeAtAngle",(q,j,X)=>[Math.cos(j)*X+q[0],Math.sin(j)*X+q[1]]),m$2(e$5,"toPrecision",(q,j=4)=>[+q[0].toPrecision(j),+q[1].toPrecision(j)]),m$2(e$5,"pointsBetween",(q,j,X=6)=>Array.from(Array(X)).map((te,ne)=>{let re=ne/(X-1),oe=Math.min(1,.5+Math.abs(.5-re));return[...t$5.lrp(q,j,re),oe]})),m$2(e$5,"slope",(q,j)=>q[0]===j[0]?NaN:(q[1]-j[1])/(q[0]-j[0])),m$2(e$5,"max",(...q)=>[Math.max(...q.map(j=>j[0])),Math.max(...q.map(j=>j[1]))]),m$2(e$5,"min",(...q)=>[Math.min(...q.map(j=>j[0])),Math.min(...q.map(j=>j[1]))]);Vec.isLeft;const getStrokePoints=me,getStroke=_e;function getTriangleDrawPoints(q,j,X){const[te,ne]=j,re=Utils.rng(q),oe=Array.from(Array(3)).map(()=>[re()*X*.75,re()*X*.75]),le=[Vec.add([te/2,0],oe[0]),Vec.add([te,ne],oe[1]),Vec.add([0,ne],oe[2])],fe=Math.round(Math.abs(re()*2*3)),we=Utils.rotateArray([Vec.pointsBetween(le[0],le[1],32),Vec.pointsBetween(le[1],le[2],32),Vec.pointsBetween(le[2],le[0],32)],fe);return{points:[...we.flat(),...we[0]]}}function getDrawStrokeInfo(q,j,X){const{strokeWidth:te}=getShapeStyle(X),{points:ne}=getTriangleDrawPoints(q,j,te);return{points:ne,options:{size:te,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function getTrianglePath(q,j,X){const{points:te,options:ne}=getDrawStrokeInfo(q,j,X),re=getStroke(te,ne);return Utils.getSvgPathFromStroke(re)}function getTriangleIndicatorPathTDSnapshot(q,j,X){const{points:te,options:ne}=getDrawStrokeInfo(q,j,X);return Utils.getSvgPathFromStrokePoints(getStrokePoints(te,ne))}const style$b=`.affine-shape-block{width:100%;height:100%;pointer-events:none}.affine-shape-block-hit-box{fill:none;stroke:transparent;stroke-width:calc(24px * var(--affine-scale));pointer-events:stroke;stroke-linecap:round;stroke-linejoin:round}.affine-shape-block-hit-box-fill{fill:transparent;stroke:transparent;stroke-width:calc(24px * var(--affine-scale));pointer-events:all;stroke-linecap:round;stroke-linejoin:round}
`,easeInOutSine=q=>-(Math.cos(Math.PI*q)-1)/2;function getEllipseStrokePoints(q,j,X){const{strokeWidth:te}=getShapeStyle(X),ne=Utils.rng(q),re=j[0]+ne()*te*2,oe=j[1]+ne()*te*2,le=Utils.perimeterOfEllipse(re,oe),fe=[],we=Math.PI+Math.PI*ne(),ke=Math.abs(ne()),ye=Math.max(16,le/10);for(let ve=0;ve<ye;ve++){const be=easeInOutSine(ve/(ye+1)),Ce=we*2+Math.PI*(2+ke)*be,Ee=Math.cos(Ce),Oe=Math.sin(Ce);fe.push([re*Ee+j[0],oe*Oe+j[1],be+.5+ne()/2])}return me(fe,{size:1+te*2,thinning:.618,end:{taper:le/8},start:{taper:le/12},streamline:0,simulatePressure:!0})}function getEllipsePath(q,j,X){const{strokeWidth:te}=getShapeStyle(X),ne=Utils.rng(q),re=j[0]+ne()*te*2,oe=j[1]+ne()*te*2,le=Utils.perimeterOfEllipse(re,oe);return Utils.getSvgPathFromStroke(ce(getEllipseStrokePoints(q,j,X),{size:2+te*2,thinning:.618,end:{taper:le/8},start:{taper:le/12},streamline:0,simulatePressure:!0}))}function getEllipseIndicatorPath(q,j,X){return Utils.getSvgPathFromStrokePoints(getEllipseStrokePoints(q,j,X))}var __defProp$i=Object.defineProperty,__getOwnPropDesc$i=Object.getOwnPropertyDescriptor,__decorateClass$i=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$i(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$i(j,X,ne),ne};const SHAPE_PADDING=48,ShapeBlockTag="affine-shape";let ShapeBlockComponent=class extends s$6{constructor(){super(...arguments),this.selected=!1}render(){const q=this.model.id;this.setAttribute(BLOCK_ID_ATTR,q);const[,,j,X]=JSON.parse(this.model.xywh),te={color:this.model.color,dash:DashStyle.Draw,size:SizeStyle.Small},ne=[j,X],{stroke:re,strokeWidth:oe}=getShapeStyle(te,!1);switch(this.model.type){case TDShapeType.Rectangle:return y$1`
          <svg class="affine-shape-block">
            <g class="affine-shape-block-g">
              <path
                class=${this.selected?"affine-shape-block-hit-box-fill":"affine-shape-block-hit-box"}
                d=${getRectangleIndicatorPathTDSnapshot(q,te,ne)}
              />
              <path
                d=${getRectanglePath(q,te,ne)}
                fill=${re}
                stroke=${re}
                stroke-width=${oe}
              />
            </g>
          </svg>
        `;case TDShapeType.Triangle:return y$1`
          <svg class="affine-shape-block">
            <g class="affine-shape-block-g">
              <path
                class=${this.selected?"affine-shape-block-hit-box-fill":"affine-shape-block-hit-box"}
                d=${getTriangleIndicatorPathTDSnapshot(q,ne,te)}
              />
              <path
                d=${getTrianglePath(q,ne,te)}
                fill=${re}
                stroke=${re}
                stroke-width=${oe}
              />
            </g>
          </svg>
        `;case TDShapeType.Ellipse:{const le=[ne[0]/2,ne[1]/2];return y$1`
          <svg class="affine-shape-block">
            <g class="affine-shape-block-g">
              <path
                class="affine-shape-block-hit-box"
                d=${getEllipseIndicatorPath(q,le,te)}
              />
              <path
                d=${getEllipsePath(q,le,te)}
                fill=${re}
                stroke=${re}
                stroke-width=${oe}
              />
            </g>
          </svg>
        `}default:return console.error("not supported shape type: ",this.model.type),y$1``}}};ShapeBlockComponent.styles=i$c`
    ${r$6(style$b)}

    /* to make it at the center of the container */
    .affine-shape-block-g {
      transform: translate(${SHAPE_PADDING/2}px, ${SHAPE_PADDING/2}px);
    }
  `;__decorateClass$i([e$8({hasChanged(){return!0}})],ShapeBlockComponent.prototype,"model",2);__decorateClass$i([t$7()],ShapeBlockComponent.prototype,"selected",2);ShapeBlockComponent=__decorateClass$i([e$9(ShapeBlockTag)],ShapeBlockComponent);const DEFAULT_SPACING=64,PADDING_X=48,PADDING_Y=48,GROUP_MIN_LENGTH=20;function isPointIn$1(q,j,X){const te=JSON.parse(q.xywh),[ne,re,oe,le]=te,fe=oe+PADDING_X,we=le+PADDING_Y;return ne<j&&j<=ne+fe&&re<X&&X<=re+we}function pick(q,j,X,te,ne){const re=ne.raw.target,oe=re instanceof ShapeBlockComponent;for(let le=q.length-1;le>=0;le--){const fe=q[le];if(isPointIn$1(fe,j,X)){if(oe&&fe.flavour==="affine:shape"&&re.model===fe)return fe;if(!oe&&fe.flavour!=="affine:shape")return fe;continue}}return null}function getSelectionBoxBound(q,j){const[X,te,ne,re]=JSON.parse(j),[oe,le]=q.toViewCoord(X,te);return new DOMRect(oe,le,ne*q.zoom,re*q.zoom)}function initWheelEventHandlers(q){const j=te=>{te.preventDefault();const{viewport:ne}=q;if(te.ctrlKey){const re=te.deltaX!==0?-te.deltaX:-te.deltaY;ne.applyDeltaZoom(re),q.signals.viewportUpdated.emit()}else{const re=te.deltaX/ne.zoom,oe=te.deltaY/ne.zoom;ne.applyDeltaCenter(re,oe),q.signals.viewportUpdated.emit()}};return q.addEventListener("wheel",j),()=>q.removeEventListener("wheel",j)}function deleteModels(q,j){var ye,ve,be,Ce;const X=window.getSelection(),te=j[0],ne=j[j.length-1],re=getRichTextByModel(te),oe=getRichTextByModel(ne);assertExists(re),assertExists(oe),assertExists(X);const le=getQuillIndexByNativeSelection(X.anchorNode,X.anchorOffset,!0),fe=getQuillIndexByNativeSelection(X.focusNode,X.focusOffset,!1);re.model.text&&re.model.text.length!==le&&((ye=re.model.text)==null||ye.delete(le,re.model.text.length-le)),((ve=oe.model.text)==null?void 0:ve.length)===fe||((be=oe.model.text)==null||be.delete(0,fe),(Ce=re.model.text)==null||Ce.join(oe.model.text));for(let Ee=1;Ee<=j.length-1;Ee++)q.deleteBlock(j[Ee]);re.quill.setSelection(le,0)}function mergeTextOfBlocks(q,j,X){const te=q.getParent(j[0]);assertExists(te);const ne=te.children.indexOf(j[0]),re=q.addBlock(X,te,ne),oe=q.getBlockById(re);j.forEach(le=>{if(le.text instanceof Text$1){const fe=oe.text;assertExists(fe),fe.join(le.text),fe.insert(`
`,fe.length)}q.deleteBlock(le)})}async function updateSelectedTextType(q,j,X){const te=getCurrentRange(),ne=getModelsByRange(te);if(X.captureSync(),q==="affine:code"){mergeTextOfBlocks(X,ne,{flavour:"affine:code"});return}const re=saveBlockSelection();let oe=null;ne.forEach(le=>{if(assertFlavours(le,["affine:paragraph","affine:list","affine:code"]),le.flavour===q)X.updateBlock(le,{type:j});else{const fe=le.id,we=transformBlock(X,le,q,j);re.filter(ye=>ye.id===fe).forEach(ye=>{ye.id=we}),oe=we}}),oe&&await asyncFocusRichText(X,oe),restoreSelection(re)}function transformBlock(q,j,X,te){var fe;const ne=q.getParent(j);assertExists(ne);const re={flavour:X,type:te,text:(fe=j==null?void 0:j.text)==null?void 0:fe.clone(),children:j.children},oe=ne.children.indexOf(j);return q.deleteBlock(j),q.addBlock(re,ne,oe)}function handleBackspace(q,j){if(!(j.target instanceof HTMLTextAreaElement&&j.target.classList.contains("affine-default-page-block-title"))&&!isNoneSelection()&&!isCollapsedSelection()&&isRangeSelection()){const X=getCurrentRange();if(isMultiBlockRange(X)){j.preventDefault();const te=getModelsByRange(X);deleteModels(q,te)}}}const getFormat=()=>{const q=getModelsByRange(getCurrentRange());if(q.length===1){const ve=getRichTextByModel(q[0]);assertExists(ve);const{quill:be}=ve,Ce=be.getSelection();return assertExists(Ce),be.getFormat(Ce)}const j=window.getSelection(),X=q[0],te=q[q.length-1],ne=getRichTextByModel(X),re=getRichTextByModel(te);assertExists(ne),assertExists(re),assertExists(j);const oe=getQuillIndexByNativeSelection(j.anchorNode,j.anchorOffset,!0),le=getQuillIndexByNativeSelection(j.focusNode,j.focusOffset,!1),fe=ne.quill.getFormat(oe,ne.quill.getLength()-oe-1),we=re.quill.getFormat(0,le),ke=[];q[0].flavour!=="affine:code"&&ke.push(fe),q[q.length-1].flavour!=="affine:code"&&ke.push(we);for(let ve=1;ve<q.length-1;ve++){const be=getRichTextByModel(q[ve]);assertExists(be);const Ce=be.quill.getText();if(!Ce||Ce===`
`||q[ve].flavour==="affine:code")continue;const Ee=be.quill.getFormat(0,be.quill.getLength()-1);ke.push(Ee)}return ke.reduce((ve,be)=>{const Ce={};for(const Ee in ve)ve[Ee]===be[Ee]&&(Ce[Ee]=ve[Ee]);return Ce})};function formatModelsByRange(q,j,X){var ve,be,Ce;const te=window.getSelection(),ne=saveBlockSelection(te),re=q[0],oe=q[q.length-1],le=getRichTextByModel(re),fe=getRichTextByModel(oe);assertExists(le),assertExists(fe),assertExists(te);const we=getQuillIndexByNativeSelection(te.anchorNode,te.anchorOffset,!0),ke=getQuillIndexByNativeSelection(te.focusNode,te.focusOffset,!1),ye=getFormat()[X];j.captureSync(),(ve=le.model.text)==null||ve.format(we,le.quill.getLength()-we-1,{[X]:!ye}),(be=fe.model.text)==null||be.format(0,ke,{[X]:!ye});for(let Ee=1;Ee<q.length-1;Ee++){const Oe=getRichTextByModel(q[Ee]);assertExists(Oe),(Ce=Oe.model.text)==null||Ce.format(0,Oe.quill.getLength()-1,{[X]:!ye})}restoreSelection(ne)}function handleFormat(q,j){var X;if(!isNoneSelection()&&isRangeSelection()){const te=getModelsByRange(getCurrentRange()).filter(ne=>ne.flavour!=="affine:code");if(te.length===1){const ne=getRichTextByModel(te[0]);assertExists(ne);const{quill:re}=ne,oe=re.getSelection();assertExists(oe),q.captureSync();const{index:le,length:fe}=oe,we=re.getFormat(oe);(X=te[0].text)==null||X.format(le,fe,{[j]:!we[j]})}else formatModelsByRange(te,q,j)}}function handleSelectAll(q){var X;const j=window.getSelection();if(q.state.selectedBlocks.length===0&&((X=j==null?void 0:j.focusNode)==null?void 0:X.nodeName)==="#text"){const ne=getCurrentRange().getBoundingClientRect();q.selectBlocksByRect(ne)}else{const ne=new DOMRect(0,0,999999,999999);q.selectBlocksByRect(ne)}resetNativeSelection(null)}function handleBlockSelectionBatchDelete(q,j){q.captureSync();const X=getParentBlockById(j[0].id);assertExists(X);const te=getModelByElement(X),ne=te==null?void 0:te.children.indexOf(j[0]);for(let oe=0;oe<j.length;oe++)q.deleteBlock(j[oe]);const re=q.addBlock({flavour:"affine:paragraph",page:q,type:"text"},te,ne);re&&asyncFocusRichText(q,re)}function tryUpdateGroupSize(q,j){requestAnimationFrame(()=>{if(!q.root)return;const X=q.root.children;let te=0;X.forEach(ne=>{if(matchFlavours(ne,["affine:shape"]))return;const re=getBlockElementByModel(ne);if(!re)return;const oe=re.getBoundingClientRect();if(!oe)return;const[le,fe,we,ke]=JSON.parse(ne.xywh),ye=oe.height/j;if(!almostEqual(ye,ke)){const ve=le+(te===0?0:te+DEFAULT_SPACING);q.updateBlock(ne,{xywh:JSON.stringify([ve,fe,we,ye])}),te=ve+we}})})}const{UNDO,REDO,INLINE_CODE,STRIKE,LINK}=HOTKEYS;function bindCommonHotkey(q){hotkey.addListener(INLINE_CODE,j=>{j.preventDefault(),!(j.target instanceof HTMLTextAreaElement)&&handleFormat(q,"code")}),hotkey.addListener(STRIKE,j=>{j.preventDefault(),!(j.target instanceof HTMLTextAreaElement)&&handleFormat(q,"strike")}),hotkey.addListener(LINK,j=>{j.preventDefault(),!(j.target instanceof HTMLTextAreaElement)&&createLink(q)}),hotkey.addListener(UNDO,()=>q.undo()),hotkey.addListener(REDO,()=>q.redo())}function removeCommonHotKey(){hotkey.removeListener([UNDO,REDO,INLINE_CODE,STRIKE,LINK])}const TextIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.36664 2.49995C3.36664 2.05812 3.72481 1.69995 4.16664 1.69995H15.8333C16.2751 1.69995 16.6333 2.05812 16.6333 2.49995V4.99995C16.6333 5.44178 16.2751 5.79995 15.8333 5.79995C15.3915 5.79995 15.0333 5.44178 15.0333 4.99995V3.29995H10.8V16.7H12.5C12.9418 16.7 13.3 17.0581 13.3 17.5C13.3 17.9418 12.9418 18.2999 12.5 18.2999H7.49997C7.05814 18.2999 6.69997 17.9418 6.69997 17.5C6.69997 17.0581 7.05814 16.7 7.49997 16.7H9.19997V3.29995H4.96664V4.99995C4.96664 5.44178 4.60847 5.79995 4.16664 5.79995C3.72481 5.79995 3.36664 5.44178 3.36664 4.99995V2.49995Z"
  />
</svg>`,H1Icon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.33334 4.16666C3.33334 3.70642 2.96024 3.33333 2.50001 3.33333C2.03977 3.33333 1.66667 3.70642 1.66667 4.16666V15.8333C1.66667 16.2936 2.03977 16.6667 2.50001 16.6667C2.96024 16.6667 3.33334 16.2936 3.33334 15.8333V10.8333H7.5V15.8333C7.5 16.2936 7.8731 16.6667 8.33334 16.6667C8.79358 16.6667 9.16667 16.2936 9.16667 15.8333V4.16666C9.16667 3.70642 8.79358 3.33333 8.33334 3.33333C7.8731 3.33333 7.5 3.70642 7.5 4.16666V9.16666H3.33334V4.16666ZM13.1327 7.62569L14.1667 6.41941V15H12.5C12.0398 15 11.6667 15.3731 11.6667 15.8334C11.6667 16.2936 12.0398 16.6667 12.5 16.6667H17.5C17.9602 16.6667 18.3333 16.2936 18.3333 15.8334C18.3333 15.3731 17.9602 15 17.5 15H15.8333V5.96886L15.8333 5.93697C15.8334 5.68637 15.8334 5.44664 15.817 5.25625C15.8032 5.09635 15.7677 4.74213 15.5149 4.45957C15.239 4.15126 14.8285 3.99941 14.4185 4.05397C14.0426 4.10398 13.7851 4.34982 13.6706 4.46225C13.5343 4.59613 13.3783 4.77816 13.2152 4.96844L13.2152 4.96847L13.1944 4.99268L11.8673 6.54103C11.5678 6.89047 11.6082 7.41655 11.9577 7.71607C12.3071 8.01559 12.8332 7.97512 13.1327 7.62569Z"
  />
</svg>`,H2Icon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.33334 4.16666C3.33334 3.70642 2.96024 3.33333 2.50001 3.33333C2.03977 3.33333 1.66667 3.70642 1.66667 4.16666V15.8333C1.66667 16.2936 2.03977 16.6667 2.50001 16.6667C2.96024 16.6667 3.33334 16.2936 3.33334 15.8333V10.8333H7.5V15.8333C7.5 16.2936 7.8731 16.6667 8.33334 16.6667C8.79358 16.6667 9.16667 16.2936 9.16667 15.8333V4.16666C9.16667 3.70642 8.79358 3.33333 8.33334 3.33333C7.8731 3.33333 7.5 3.70642 7.5 4.16666V9.16666H3.33334V4.16666ZM12.5 7.91668C12.5 6.75657 13.5864 5.83335 14.5833 5.83335C15.136 5.83335 15.6602 5.99814 16.0314 6.31278C16.38 6.60828 16.6667 7.09585 16.6667 7.91668C16.6667 8.52546 16.3923 9.27964 15.8767 10.1266C15.3704 10.9584 14.6825 11.7975 13.9741 12.5564C13.2688 13.3122 12.5606 13.97 12.0273 14.4398C11.7612 14.6742 11.5401 14.8606 11.3864 14.9876C11.3096 15.051 11.2498 15.0996 11.2097 15.1318L11.1649 15.1678L11.1542 15.1762L11.152 15.178L11.1518 15.1781L11.1517 15.1782C10.8724 15.3977 10.763 15.7701 10.8791 16.1057C10.9952 16.4415 11.3114 16.6667 11.6667 16.6667H17.5C17.9603 16.6667 18.3333 16.2936 18.3333 15.8333C18.3333 15.3731 17.9603 15 17.5 15H13.8876C14.2952 14.6169 14.7434 14.1749 15.1926 13.6936C15.9426 12.89 16.7129 11.9583 17.3004 10.9932C17.8786 10.0433 18.3333 8.97457 18.3333 7.91668C18.3333 6.65418 17.8664 5.68341 17.1091 5.04142C16.3743 4.41856 15.4402 4.16668 14.5833 4.16668C12.7614 4.16668 10.8333 5.74346 10.8333 7.91668C10.8333 8.37692 11.2064 8.75002 11.6667 8.75002C12.1269 8.75002 12.5 8.37692 12.5 7.91668Z"
  />
</svg>`,H3Icon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.33334 4.16666C3.33334 3.70642 2.96024 3.33333 2.50001 3.33333C2.03977 3.33333 1.66667 3.70642 1.66667 4.16666V15.8333C1.66667 16.2936 2.03977 16.6667 2.50001 16.6667C2.96024 16.6667 3.33334 16.2936 3.33334 15.8333V10.8333H7.5V15.8333C7.5 16.2936 7.8731 16.6667 8.33334 16.6667C8.79358 16.6667 9.16667 16.2936 9.16667 15.8333V4.16666C9.16667 3.70642 8.79358 3.33333 8.33334 3.33333C7.8731 3.33333 7.5 3.70642 7.5 4.16666V9.16666H3.33334V4.16666ZM14.8665 9.34782H14.7684L14.5276 9.38795C14.365 9.41321 14.1837 9.48114 14.045 9.63663C13.903 9.79584 13.8576 9.98844 13.8576 10.1591C13.8576 10.3717 13.9411 10.5615 14.0866 10.7071L14.0943 10.7148L14.1024 10.7221C14.2357 10.8434 14.4016 10.9202 14.5891 10.9345L14.7838 10.9516L14.7934 10.9522C15.2796 10.9843 15.703 11.069 16.0681 11.2009L16.0735 11.2027C16.4091 11.3193 16.6529 11.4975 16.8268 11.7308L16.8301 11.735C16.9904 11.945 17.0967 12.2648 17.0967 12.7452C17.0967 13.1855 16.981 13.5761 16.7505 13.929L16.7497 13.9302C16.5169 14.289 16.21 14.5754 15.8222 14.7918C15.4406 14.999 15.0218 15.1043 14.5572 15.1043C14.0926 15.1043 13.6588 14.9989 13.2495 14.7873C12.8359 14.5676 12.506 14.2802 12.2522 13.9247C12.1057 13.7141 11.8812 13.5921 11.6189 13.5921C11.4129 13.5921 11.2206 13.6667 11.0699 13.8135C10.909 13.9641 10.8333 14.1626 10.8333 14.3691C10.8333 14.5273 10.877 14.6899 10.9835 14.8311C11.3861 15.3916 11.9004 15.8373 12.5206 16.1664C13.1501 16.5004 13.8314 16.6667 14.5572 16.6667C15.2846 16.6667 15.9628 16.4968 16.5834 16.1542L16.5848 16.1534C17.2047 15.8082 17.7056 15.3409 18.0799 14.7538C18.4668 14.1504 18.6592 13.477 18.6592 12.7452C18.6592 11.9692 18.4524 11.2907 18.0071 10.7468C17.7726 10.4532 17.5051 10.207 17.2056 10.0101C17.4392 9.79677 17.6469 9.54803 17.8292 9.26611C18.1887 8.71327 18.367 8.09316 18.367 7.41834C18.367 6.7752 18.2019 6.17733 17.8714 5.6346C17.5511 5.09926 17.1179 4.66998 16.5777 4.35103C16.0289 4.02702 15.4237 3.86629 14.772 3.86629C13.9404 3.86629 13.2047 4.10357 12.5884 4.59253C12.0085 5.0514 11.5898 5.60545 11.3512 6.25482L11.3427 6.27791L11.3368 6.30177C11.3213 6.36376 11.3059 6.44231 11.3059 6.5248C11.3059 6.72114 11.3709 6.91128 11.5112 7.06554L11.5185 7.07363L11.5263 7.08135C11.6781 7.23315 11.8733 7.3103 12.0828 7.3103C12.2318 7.3103 12.3933 7.27508 12.5379 7.17461C12.6823 7.07437 12.7718 6.93566 12.823 6.7947C12.9573 6.43445 13.193 6.11131 13.5478 5.82548C13.8693 5.56652 14.2656 5.42871 14.7634 5.42871C15.1432 5.42871 15.4801 5.52025 15.7843 5.69998L15.7888 5.70257C16.0994 5.88143 16.3433 6.12093 16.5263 6.4259L16.529 6.43029C16.7126 6.72859 16.8046 7.05454 16.8046 7.41834C16.8046 7.77298 16.7171 8.08864 16.5441 8.3755C16.366 8.67075 16.1287 8.90617 15.8264 9.08565L15.8237 9.0873C15.5368 9.26033 15.2212 9.34782 14.8665 9.34782Z"
  />
</svg>`,H4Icon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.33334 4.16666C3.33334 3.70642 2.96024 3.33333 2.50001 3.33333C2.03977 3.33333 1.66667 3.70642 1.66667 4.16666V15.8333C1.66667 16.2936 2.03977 16.6667 2.50001 16.6667C2.96024 16.6667 3.33334 16.2936 3.33334 15.8333V10.8333H7.5V15.8333C7.5 16.2936 7.8731 16.6667 8.33334 16.6667C8.79358 16.6667 9.16667 16.2936 9.16667 15.8333V4.16666C9.16667 3.70642 8.79358 3.33333 8.33334 3.33333C7.8731 3.33333 7.5 3.70642 7.5 4.16666V9.16666H3.33334V4.16666ZM16.6667 4.44193C16.6667 3.53496 15.4904 3.17883 14.9873 3.93345L10.2263 11.0749C9.82022 11.6841 10.2569 12.5 10.989 12.5H15V15.8334C15 16.2936 15.3731 16.6667 15.8333 16.6667C16.2936 16.6667 16.6667 16.2936 16.6667 15.8334V12.5H17.9167C18.3769 12.5 18.75 12.1269 18.75 11.6667C18.75 11.2065 18.3769 10.8334 17.9167 10.8334H16.6667V4.44193ZM15 6.91901V10.8334H12.3904L15 6.91901Z"
  />
</svg>`,H5Icon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.33334 4.16668C3.33334 3.70644 2.96024 3.33334 2.50001 3.33334C2.03977 3.33334 1.66667 3.70644 1.66667 4.16668V15.8333C1.66667 16.2936 2.03977 16.6667 2.50001 16.6667C2.96024 16.6667 3.33334 16.2936 3.33334 15.8333V10.8333H7.5V15.8333C7.5 16.2936 7.8731 16.6667 8.33334 16.6667C8.79358 16.6667 9.16667 16.2936 9.16667 15.8333V4.16668C9.16667 3.70644 8.79358 3.33334 8.33334 3.33334C7.8731 3.33334 7.5 3.70644 7.5 4.16668V9.16668H3.33334V4.16668ZM11.2744 7.38106C11.3938 6.67097 11.5459 5.75795 11.7309 4.64198L11.7311 4.64096C11.764 4.45693 11.8472 4.30502 11.9821 4.19005C12.1166 4.06933 12.2764 4.00831 12.4577 4.00831H17.9541C18.1439 4.00831 18.3177 4.08004 18.4737 4.21626C18.6312 4.34781 18.7178 4.50681 18.7178 4.69142C18.7178 4.92367 18.6495 5.12302 18.5092 5.2834L18.508 5.28473C18.3653 5.44098 18.178 5.51775 17.9541 5.51775H13.1016L12.6374 8.41108C13.242 8.12 13.8687 7.97397 14.5166 7.97397C15.3299 7.97397 16.0666 8.16532 16.7248 8.5492C17.3876 8.93232 17.9112 9.45282 18.2945 10.1098C18.6846 10.7683 18.8789 11.5142 18.8789 12.3452C18.8789 13.1825 18.6815 13.9345 18.2853 14.599C17.8901 15.2617 17.3577 15.788 16.689 16.177C16.019 16.5607 15.27 16.7523 14.445 16.7523C13.499 16.7523 12.6704 16.5095 11.9628 16.0214C11.2604 15.537 10.7427 14.9566 10.4133 14.2795L10.4121 14.2769C10.3589 14.1572 10.3333 14.023 10.3333 13.876C10.3333 13.7047 10.4126 13.5474 10.5547 13.4053L10.556 13.404C10.7043 13.2621 10.8672 13.1839 11.0433 13.1839C11.2127 13.1839 11.3622 13.2183 11.488 13.2914C11.6143 13.3649 11.7116 13.4743 11.7806 13.6156C12.0005 14.0671 12.3367 14.4534 12.7917 14.7743C13.247 15.0855 13.7968 15.2429 14.445 15.2429C14.9926 15.2429 15.4854 15.1178 15.9254 14.8689C16.3665 14.6135 16.7172 14.2685 16.9784 13.8333C17.2387 13.3935 17.3695 12.9011 17.3695 12.3542C17.3695 11.8006 17.2414 11.3113 16.9873 10.8839L16.9866 10.8828C16.7377 10.4486 16.3907 10.1072 15.9441 9.85776C15.4984 9.6089 14.9875 9.48341 14.4092 9.48341C13.9549 9.48341 13.5197 9.6154 13.1023 9.88209C12.6791 10.1466 12.3691 10.426 12.1686 10.718C12.0237 10.935 11.8261 11.05 11.5804 11.05C11.3929 11.05 11.2174 10.9859 11.0555 10.8629C10.8915 10.7382 10.7988 10.5845 10.7988 10.4027C10.7988 10.3738 10.8023 10.331 10.8083 10.2771C10.8145 10.2207 10.8329 10.1021 10.8626 9.9237C10.8924 9.73858 10.9402 9.44616 11.0058 9.04651C11.0714 8.64073 11.161 8.08521 11.2744 7.38106Z"
  />
</svg>`,H6Icon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.33334 4.16668C3.33334 3.70644 2.96024 3.33334 2.50001 3.33334C2.03977 3.33334 1.66667 3.70644 1.66667 4.16668V15.8333C1.66667 16.2936 2.03977 16.6667 2.50001 16.6667C2.96024 16.6667 3.33334 16.2936 3.33334 15.8333V10.8333H7.5V15.8333C7.5 16.2936 7.8731 16.6667 8.33334 16.6667C8.79358 16.6667 9.16667 16.2936 9.16667 15.8333V4.16668C9.16667 3.70644 8.79358 3.33334 8.33334 3.33334C7.8731 3.33334 7.5 3.70644 7.5 4.16668V9.16668H3.33334V4.16668ZM14.9347 16.7501C14.1626 16.7501 13.4857 16.5686 12.9073 16.203C12.3329 15.8338 11.8526 15.3407 11.4672 14.7256L11.4667 14.7248C11.0882 14.1056 10.8032 13.4114 10.6117 12.6442C10.4261 11.872 10.3333 11.079 10.3333 10.2654C10.3333 9.46904 10.4318 8.70499 10.629 7.97346C10.8264 7.23542 11.12 6.57403 11.5104 5.99006C11.9017 5.40459 12.3848 4.9416 12.9595 4.6025C13.5428 4.25567 14.2133 4.08338 14.9682 4.08338C15.7418 4.08338 16.4145 4.2834 16.9825 4.68624C17.5495 5.0845 17.9856 5.56026 18.2879 6.11269C18.3608 6.24842 18.3983 6.38948 18.3983 6.53495C18.3983 6.70308 18.3254 6.86132 18.1935 7.00839C18.0673 7.1552 17.9236 7.2415 17.7627 7.2415C17.4421 7.2415 17.1998 7.11674 17.0544 6.86105L17.0538 6.85991C16.8654 6.51634 16.5902 6.21696 16.2257 5.96223L16.225 5.96172C15.8665 5.70556 15.4487 5.57662 14.9682 5.57662C14.4131 5.57662 13.9355 5.70979 13.5325 5.97279C13.1315 6.23227 12.8001 6.58445 12.5384 7.03113C12.2755 7.48004 12.0776 7.98831 11.9454 8.55666C11.8395 9.03172 11.7778 9.5171 11.7603 10.0129C11.881 9.84739 12.039 9.67114 12.233 9.48421C12.5411 9.18669 12.911 8.93267 13.3416 8.72163C13.7832 8.50196 14.2645 8.3925 14.7841 8.3925C15.5567 8.3925 16.2498 8.58008 16.8607 8.95674C17.4705 9.32668 17.9518 9.8362 18.3044 10.4836C18.6576 11.1263 18.8333 11.8525 18.8333 12.6603C18.8333 13.3799 18.6684 14.0522 18.3384 14.6758C18.0083 15.2995 17.5494 15.803 16.9629 16.1847C16.379 16.5624 15.702 16.7501 14.9347 16.7501ZM16.2368 14.905C16.6032 14.6699 16.8889 14.3518 17.0944 13.949C17.3053 13.5406 17.4116 13.0817 17.4116 12.5713C17.4116 12.0867 17.2953 11.641 17.0628 11.2325L17.0624 11.2318C16.8346 10.8221 16.5284 10.4937 16.1442 10.2461C15.7677 9.99999 15.3485 9.87683 14.8845 9.87683C14.4152 9.87683 13.9903 10.003 13.6082 10.255C13.2297 10.5024 12.9263 10.8337 12.6983 11.2496C12.4713 11.658 12.3574 12.107 12.3574 12.598C12.3574 13.0936 12.4817 13.5411 12.7297 13.9427C12.9849 14.3471 13.3127 14.667 13.7137 14.9033C14.1144 15.1396 14.5322 15.2568 14.9682 15.2568C15.4504 15.2568 15.8723 15.1389 16.2368 14.905Z"
  />
</svg>`,BulletedListIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M1.66667 5C1.66667 4.30964 2.22632 3.75 2.91667 3.75C3.60703 3.75 4.16667 4.30964 4.16667 5C4.16667 5.69036 3.60703 6.25 2.91667 6.25C2.22631 6.25 1.66667 5.69035 1.66667 5ZM5.83334 5.00051C5.83336 4.54027 6.20648 4.1672 6.66672 4.16722L17.5 4.16782C17.9603 4.16785 18.3333 4.54097 18.3333 5.0012C18.3333 5.46144 17.9602 5.83452 17.4999 5.83449L6.66663 5.83389C6.20639 5.83386 5.83331 5.46075 5.83334 5.00051ZM1.66667 10C1.66667 9.30964 2.22632 8.75 2.91667 8.75C3.60703 8.75 4.16667 9.30964 4.16667 10C4.16667 10.6904 3.60703 11.25 2.91667 11.25C2.22631 11.25 1.66667 10.6904 1.66667 10ZM5.83334 10.0006C5.83337 9.54031 6.20648 9.16724 6.66672 9.16727L17.5001 9.16792C17.9603 9.16795 18.3334 9.54107 18.3334 10.0013C18.3333 10.4615 17.9602 10.8346 17.5 10.8346L6.66662 10.8339C6.20638 10.8339 5.83331 10.4608 5.83334 10.0006ZM1.66667 15C1.66667 14.3096 2.22632 13.75 2.91667 13.75C3.60703 13.75 4.16667 14.3096 4.16667 15C4.16667 15.6904 3.60703 16.25 2.91667 16.25C2.22632 16.25 1.66667 15.6904 1.66667 15ZM5.83334 15.0006C5.83337 14.5403 6.20649 14.1672 6.66672 14.1673L17.5001 14.1679C17.9603 14.168 18.3334 14.5411 18.3334 15.0013C18.3333 15.4615 17.9602 15.8346 17.5 15.8346L6.66662 15.8339C6.20638 15.8339 5.83331 15.4608 5.83334 15.0006Z"
  />
</svg>`,NumberedIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.60478 2.62446C4.85046 2.7763 5 3.04452 5 3.33333V7.5H5.83334C6.29357 7.5 6.66667 7.8731 6.66667 8.33333C6.66667 8.79357 6.29357 9.16667 5.83334 9.16667H2.5C2.03977 9.16667 1.66667 8.79357 1.66667 8.33333C1.66667 7.8731 2.03977 7.5 2.5 7.5H3.33334V4.6817L2.87268 4.91202C2.46103 5.11785 1.96047 4.95099 1.75465 4.53935C1.54882 4.1277 1.71568 3.62714 2.12733 3.42131L3.79399 2.58798C4.05232 2.45882 4.3591 2.47262 4.60478 2.62446ZM7.5 4.99995C7.50003 4.53971 7.87315 4.16664 8.33339 4.16667L17.5001 4.16722C17.9603 4.16725 18.3334 4.54037 18.3333 5.0006C18.3333 5.46084 17.9602 5.83391 17.5 5.83389L8.33329 5.83333C7.87305 5.83331 7.49998 5.46019 7.5 4.99995ZM7.5 9.99995C7.50003 9.53971 7.87315 9.16664 8.33339 9.16667L17.5001 9.16722C17.9603 9.16725 18.3334 9.54037 18.3333 10.0006C18.3333 10.4608 17.9602 10.8339 17.5 10.8339L8.33329 10.8333C7.87305 10.8333 7.49998 10.4602 7.5 9.99995ZM4.16667 12.5C3.77951 12.5 3.4521 12.7648 3.35954 13.1244C3.24482 13.5701 2.79051 13.8384 2.3448 13.7237C1.89909 13.609 1.63076 13.1547 1.74548 12.709C2.02296 11.6309 3.00063 10.8333 4.16667 10.8333H4.40028C5.65197 10.8333 6.66667 11.848 6.66667 13.0997C6.66667 13.7533 6.38455 14.375 5.89271 14.8054L4.71788 15.8333H5.83334C6.29357 15.8333 6.66667 16.2064 6.66667 16.6667C6.66667 17.1269 6.29357 17.5 5.83334 17.5H2.5C2.15283 17.5 1.84203 17.2848 1.71992 16.9598C1.59781 16.6348 1.68998 16.2681 1.95125 16.0395L4.7952 13.5511C4.92535 13.4372 5 13.2727 5 13.0997C5 12.7685 4.7315 12.5 4.40028 12.5H4.16667ZM7.5 15C7.50003 14.5397 7.87315 14.1666 8.33339 14.1667L17.5001 14.1672C17.9603 14.1672 18.3334 14.5404 18.3333 15.0006C18.3333 15.4608 17.9602 15.8339 17.5 15.8339L8.33329 15.8333C7.87305 15.8333 7.49998 15.4602 7.5 15Z"
  />
</svg>`,TodoIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.96788 2.5H14.0321C14.4714 2.49999 14.8504 2.49997 15.1625 2.52548C15.492 2.55239 15.8197 2.61182 16.135 2.77249C16.6054 3.01217 16.9878 3.39462 17.2275 3.86503C17.3882 4.18034 17.4476 4.50802 17.4745 4.83748C17.5 5.14962 17.5 5.52858 17.5 5.96786V14.0321C17.5 14.4714 17.5 14.8504 17.4745 15.1625C17.4476 15.492 17.3882 15.8197 17.2275 16.135C16.9878 16.6054 16.6054 16.9878 16.135 17.2275C15.8197 17.3882 15.492 17.4476 15.1625 17.4745C14.8504 17.5 14.4714 17.5 14.0321 17.5H5.96786C5.52858 17.5 5.14962 17.5 4.83748 17.4745C4.50802 17.4476 4.18034 17.3882 3.86503 17.2275C3.39462 16.9878 3.01217 16.6054 2.77249 16.135C2.61182 15.8197 2.55239 15.492 2.52548 15.1625C2.49997 14.8504 2.49999 14.4714 2.5 14.0321V5.96788C2.49999 5.52859 2.49997 5.14962 2.52548 4.83748C2.55239 4.50802 2.61182 4.18034 2.77249 3.86503C3.01217 3.39462 3.39462 3.01217 3.86503 2.77249C4.18034 2.61182 4.50802 2.55239 4.83748 2.52548C5.14962 2.49997 5.52859 2.49999 5.96788 2.5ZM4.9732 4.18661C4.74681 4.2051 4.66288 4.2365 4.62168 4.2575C4.46487 4.33739 4.33739 4.46487 4.2575 4.62168C4.2365 4.66288 4.2051 4.74681 4.18661 4.9732C4.16732 5.20931 4.16667 5.51954 4.16667 6V14C4.16667 14.4805 4.16732 14.7907 4.18661 15.0268C4.2051 15.2532 4.2365 15.3371 4.2575 15.3783C4.33739 15.5351 4.46487 15.6626 4.62168 15.7425C4.66288 15.7635 4.74681 15.7949 4.9732 15.8134C5.20931 15.8327 5.51954 15.8333 6 15.8333H14C14.4805 15.8333 14.7907 15.8327 15.0268 15.8134C15.2532 15.7949 15.3371 15.7635 15.3783 15.7425C15.5351 15.6626 15.6626 15.5351 15.7425 15.3783C15.7635 15.3371 15.7949 15.2532 15.8134 15.0268C15.8327 14.7907 15.8333 14.4805 15.8333 14V6C15.8333 5.51954 15.8327 5.20931 15.8134 4.9732C15.7949 4.74681 15.7635 4.66288 15.7425 4.62168C15.6626 4.46487 15.5351 4.33739 15.3783 4.2575C15.3371 4.2365 15.2532 4.2051 15.0268 4.18661C14.7907 4.16732 14.4805 4.16667 14 4.16667H6C5.51954 4.16667 5.20931 4.16732 4.9732 4.18661ZM13.8964 6.88571C14.2357 7.1967 14.2586 7.72384 13.9476 8.06311L9.3643 13.0631C9.21071 13.2307 8.99535 13.3282 8.76811 13.3331C8.54086 13.3381 8.32147 13.25 8.16075 13.0893L6.07741 11.0059C5.75198 10.6805 5.75198 10.1528 6.07741 9.82741C6.40285 9.50198 6.93049 9.50198 7.25592 9.82741L8.72382 11.2953L12.719 6.9369C13.03 6.59763 13.5572 6.57471 13.8964 6.88571Z"
  />
</svg>`,CodeIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.13455 3.33334H14.8655C15.3048 3.33333 15.6837 3.33332 15.9959 3.35882C16.3253 3.38574 16.653 3.44517 16.9683 3.60583C17.4387 3.84551 17.8212 4.22796 18.0609 4.69837C18.2215 5.01369 18.2809 5.34137 18.3079 5.67082C18.3334 5.98296 18.3334 6.36192 18.3333 6.80121V13.1988C18.3334 13.6381 18.3334 14.0171 18.3079 14.3292C18.2809 14.6587 18.2215 14.9863 18.0609 15.3017C17.8212 15.7721 17.4387 16.1545 16.9683 16.3942C16.653 16.5549 16.3253 16.6143 15.9959 16.6412C15.6837 16.6667 15.3047 16.6667 14.8654 16.6667H5.13457C4.69527 16.6667 4.3163 16.6667 4.00415 16.6412C3.6747 16.6143 3.34701 16.5549 3.0317 16.3942C2.56129 16.1545 2.17884 15.7721 1.93916 15.3017C1.7785 14.9863 1.71907 14.6587 1.69215 14.3292C1.66664 14.0171 1.66666 13.6381 1.66667 13.1988V6.80122C1.66666 6.36193 1.66664 5.98296 1.69215 5.67082C1.71907 5.34137 1.7785 5.01369 1.93916 4.69837C2.17884 4.22796 2.56129 3.84551 3.0317 3.60583C3.34701 3.44517 3.6747 3.38574 4.00415 3.35882C4.31629 3.33332 4.69526 3.33333 5.13455 3.33334ZM4.13987 5.01995C3.91348 5.03845 3.82955 5.06985 3.78835 5.09084C3.63155 5.17073 3.50406 5.29822 3.42417 5.45502C3.40317 5.49622 3.37178 5.58016 3.35328 5.80654C3.33399 6.04266 3.33334 6.35288 3.33334 6.83334V13.1667C3.33334 13.6471 3.33399 13.9574 3.35328 14.1935C3.37178 14.4199 3.40317 14.5038 3.42417 14.545C3.50406 14.7018 3.63155 14.8293 3.78835 14.9092C3.82955 14.9302 3.91348 14.9616 4.13987 14.9801C4.37598 14.9994 4.68621 15 5.16667 15H14.8333C15.3138 15 15.624 14.9994 15.8601 14.9801C16.0865 14.9616 16.1705 14.9302 16.2117 14.9092C16.3685 14.8293 16.4959 14.7018 16.5758 14.545C16.5968 14.5038 16.6282 14.4199 16.6467 14.1935C16.666 13.9574 16.6667 13.6471 16.6667 13.1667V6.83334C16.6667 6.35288 16.666 6.04266 16.6467 5.80654C16.6282 5.58016 16.5968 5.49622 16.5758 5.45502C16.4959 5.29822 16.3685 5.17073 16.2117 5.09084C16.1705 5.06985 16.0865 5.03845 15.8601 5.01995C15.624 5.00066 15.3138 5.00001 14.8333 5.00001H5.16667C4.68621 5.00001 4.37598 5.00066 4.13987 5.01995Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.92259 6.91073C9.24803 7.23617 9.24803 7.76381 8.92259 8.08925L7.01184 9.99999L8.92259 11.9107C9.24803 12.2362 9.24803 12.7638 8.92259 13.0892C8.59715 13.4147 8.06951 13.4147 7.74408 13.0892L5.24408 10.5892C4.91864 10.2638 4.91864 9.73617 5.24408 9.41073L7.74408 6.91073C8.06951 6.5853 8.59715 6.5853 8.92259 6.91073ZM11.0774 6.91073C11.4028 6.5853 11.9305 6.5853 12.2559 6.91073L14.7559 9.41073C15.0814 9.73617 15.0814 10.2638 14.7559 10.5892L12.2559 13.0892C11.9305 13.4147 11.4028 13.4147 11.0774 13.0892C10.752 12.7638 10.752 12.2362 11.0774 11.9107L12.9882 9.99999L11.0774 8.08925C10.752 7.76381 10.752 7.23617 11.0774 6.91073Z"
  />
</svg>`,QuoteIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.33334 3.33333C3.33334 2.8731 2.96024 2.5 2.50001 2.5C2.03977 2.5 1.66667 2.8731 1.66667 3.33333V16.6667C1.66667 17.1269 2.03977 17.5 2.50001 17.5C2.96024 17.5 3.33334 17.1269 3.33334 16.6667L3.33334 3.33333ZM15.8333 7.5C16.2936 7.5 16.6667 7.1269 16.6667 6.66667C16.6667 6.20643 16.2936 5.83333 15.8333 5.83333H5.83334C5.3731 5.83333 5.00001 6.20643 5.00001 6.66667C5.00001 7.1269 5.3731 7.5 5.83334 7.5H15.8333ZM13.3333 10C13.3333 10.4602 12.9602 10.8333 12.5 10.8333H5.83334C5.3731 10.8333 5.00001 10.4602 5.00001 10C5.00001 9.53976 5.3731 9.16667 5.83334 9.16667H12.5C12.9602 9.16667 13.3333 9.53976 13.3333 10ZM16.6667 14.1667C17.1269 14.1667 17.5 13.7936 17.5 13.3333C17.5 12.8731 17.1269 12.5 16.6667 12.5H5.83334C5.3731 12.5 5.00001 12.8731 5.00001 13.3333C5.00001 13.7936 5.3731 14.1667 5.83334 14.1667H16.6667Z"
  />
</svg>`,BoldIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.16666 2.5C4.16666 2.03976 4.53976 1.66667 5 1.66667H10.4167C12.948 1.66667 15 3.7187 15 6.25C15 7.63233 14.3881 8.87172 13.4203 9.71206C14.8569 10.4858 15.8333 12.0039 15.8333 13.75C15.8333 16.2813 13.7813 18.3333 11.25 18.3333H5C4.53976 18.3333 4.16666 17.9602 4.16666 17.5V2.5ZM5.83333 10.8333V16.6667H11.25C12.8608 16.6667 14.1667 15.3608 14.1667 13.75C14.1667 12.1392 12.8608 10.8333 11.25 10.8333H5.83333ZM5.83333 9.16667H10.4167C12.0275 9.16667 13.3333 7.86083 13.3333 6.25C13.3333 4.63917 12.0275 3.33333 10.4167 3.33333H5.83333V9.16667Z"
  />
</svg>`,ItalicIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12.4805 1.66669H8.33333C7.8731 1.66669 7.5 2.03978 7.5 2.50002C7.5 2.96026 7.8731 3.33335 8.33333 3.33335H11.3438L6.89937 16.6667H3.33333C2.8731 16.6667 2.5 17.0398 2.5 17.5C2.5 17.9603 2.8731 18.3334 3.33333 18.3334H7.48079C7.49371 18.3337 7.50659 18.3337 7.51945 18.3334H11.6667C12.1269 18.3334 12.5 17.9603 12.5 17.5C12.5 17.0398 12.1269 16.6667 11.6667 16.6667H8.65619L13.1006 3.33335H16.6667C17.1269 3.33335 17.5 2.96026 17.5 2.50002C17.5 2.03978 17.1269 1.66669 16.6667 1.66669H12.5192C12.5063 1.66639 12.4934 1.66639 12.4805 1.66669Z"
  />
</svg>`,UnderlineIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.5 2.5C2.5 2.03976 2.8731 1.66667 3.33333 1.66667H6.66667C7.1269 1.66667 7.5 2.03976 7.5 2.5C7.5 2.96024 7.1269 3.33333 6.66667 3.33333H5.83333V9.16667C5.83333 11.4679 7.69881 13.3333 10 13.3333C12.3012 13.3333 14.1667 11.4679 14.1667 9.16667V3.33333H13.3333C12.8731 3.33333 12.5 2.96024 12.5 2.5C12.5 2.03976 12.8731 1.66667 13.3333 1.66667H16.6667C17.1269 1.66667 17.5 2.03976 17.5 2.5C17.5 2.96024 17.1269 3.33333 16.6667 3.33333H15.8333V9.16667C15.8333 12.3883 13.2217 15 10 15C6.77834 15 4.16667 12.3883 4.16667 9.16667V3.33333H3.33333C2.8731 3.33333 2.5 2.96024 2.5 2.5ZM2.5 17.5C2.5 17.0398 2.8731 16.6667 3.33333 16.6667H16.6667C17.1269 16.6667 17.5 17.0398 17.5 17.5C17.5 17.9602 17.1269 18.3333 16.6667 18.3333H3.33333C2.8731 18.3333 2.5 17.9602 2.5 17.5Z"
  />
</svg>`,StrikethroughIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.33333 6.25C3.33333 3.7187 5.38536 1.66667 7.91667 1.66667H12.2396C14.6846 1.66667 16.6667 3.64874 16.6667 6.09375V6.25C16.6667 6.71024 16.2936 7.08333 15.8333 7.08333C15.3731 7.08333 15 6.71024 15 6.25V6.09375C15 4.56922 13.7641 3.33333 12.2396 3.33333H7.91667C6.30584 3.33333 5 4.63917 5 6.25C5 7.86083 6.30584 9.16667 7.91667 9.16667H17.5C17.9602 9.16667 18.3333 9.53976 18.3333 10C18.3333 10.4602 17.9602 10.8333 17.5 10.8333H15.619C16.2735 11.6258 16.6667 12.642 16.6667 13.75C16.6667 16.2813 14.6146 18.3333 12.0833 18.3333H7.83854C5.35038 18.3333 3.33333 16.3163 3.33333 13.8281V13.75C3.33333 13.2898 3.70643 12.9167 4.16667 12.9167C4.6269 12.9167 5 13.2898 5 13.75V13.8281C5 15.3958 6.27086 16.6667 7.83854 16.6667H12.0833C13.6942 16.6667 15 15.3608 15 13.75C15 12.1392 13.6942 10.8333 12.0833 10.8333H2.5C2.03976 10.8333 1.66667 10.4602 1.66667 10C1.66667 9.53976 2.03976 9.16667 2.5 9.16667H4.38097C3.72651 8.37422 3.33333 7.35803 3.33333 6.25Z"
  />
</svg>`,InlineCodeIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M11.8688 2.52488C12.3153 2.6365 12.5867 3.08895 12.4751 3.53544L9.14179 16.8688C9.03016 17.3153 8.57772 17.5867 8.13122 17.4751C7.68473 17.3635 7.41326 16.911 7.52488 16.4645L10.8582 3.13122C10.9698 2.68472 11.4223 2.41325 11.8688 2.52488ZM6.44567 6.10143C6.75784 6.43961 6.73675 6.96683 6.39857 7.279L3.67939 9.78901L6.444 12.7663C6.75717 13.1035 6.73764 13.6308 6.40038 13.944C6.06312 14.2572 5.53584 14.2376 5.22267 13.9004L1.88934 10.3106C1.73866 10.1484 1.65876 9.93279 1.66729 9.71151C1.67581 9.49023 1.77205 9.28145 1.93477 9.13125L5.2681 6.05433C5.60629 5.74216 6.1335 5.76324 6.44567 6.10143ZM13.5543 6.10143C13.8665 5.76324 14.3937 5.74216 14.7319 6.05433L18.0652 9.13125C18.2279 9.28145 18.3242 9.49023 18.3327 9.71151C18.3412 9.93279 18.2613 10.1484 18.1107 10.3106L14.7773 13.9004C14.4642 14.2376 13.9369 14.2572 13.5996 13.944C13.2624 13.6308 13.2428 13.1035 13.556 12.7663L16.3206 9.78901L13.6014 7.279C13.2633 6.96683 13.2422 6.43961 13.5543 6.10143Z"
  />
</svg>`,LinkIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M14.3542 11.368L16.5107 9.21144C17.9752 7.74698 17.9752 5.37261 16.5107 3.90814L16.0849 3.48228C14.6204 2.01782 12.246 2.01782 10.7816 3.48228L8.06404 6.19981C6.59957 7.66427 6.59957 10.0386 8.06403 11.5031L8.48989 11.929C8.75625 12.1953 9.05271 12.4132 9.36831 12.5827L10.0418 11.9092C10.1511 11.7999 10.2322 11.673 10.285 11.5377C9.97427 11.4202 9.68289 11.2363 9.4327 10.9862L9.00684 10.5603C8.06308 9.61653 8.06308 8.08638 9.00684 7.14262L11.7244 4.42509C12.6681 3.48133 14.1983 3.48133 15.1421 4.42509L15.5679 4.85095C16.5117 5.79472 16.5117 7.32487 15.5679 8.26863L14.1477 9.68884C14.3102 10.235 14.3791 10.8032 14.3542 11.368Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.63749 8.62368L3.48098 10.7802C2.01651 12.2447 2.01651 14.619 3.48098 16.0835L3.90684 16.5094C5.37131 17.9738 7.74568 17.9738 9.21014 16.5094L11.9277 13.7918C13.3921 12.3274 13.3921 9.95299 11.9277 8.48853L11.5018 8.06267C11.2354 7.79631 10.939 7.5784 10.6234 7.40893L9.94985 8.08247C9.84056 8.19176 9.7595 8.31859 9.70668 8.4539C10.0174 8.57144 10.3088 8.7553 10.559 9.00548L10.9849 9.43134C11.9286 10.3751 11.9286 11.9053 10.9849 12.849L8.26733 15.5665C7.32356 16.5103 5.79342 16.5103 4.84965 15.5665L4.42379 15.1407C3.48002 14.1969 3.48002 12.6668 4.42379 11.723L5.844 10.3028C5.68148 9.7566 5.61264 9.18846 5.63749 8.62368Z"
  />
</svg>`,CopyIcon$1=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M10.9679 1.66667L13.3333 1.66667C13.5543 1.66667 13.7663 1.75447 13.9226 1.91075L17.2559 5.24408C17.4122 5.40036 17.5 5.61232 17.5 5.83334V10.6988C17.5 11.1381 17.5 11.5171 17.4745 11.8292C17.4476 12.1586 17.3882 12.4863 17.2275 12.8016C16.9878 13.2721 16.6054 13.6545 16.135 13.8942C15.8197 14.0548 15.492 14.1143 15.1625 14.1412C14.8504 14.1667 14.4714 14.1667 14.0321 14.1667H12.5V15.8333C12.5 17.214 11.3807 18.3333 10 18.3333H5C3.61929 18.3333 2.5 17.214 2.5 15.8333V8.33334C2.5 6.95262 3.61929 5.83334 5 5.83334H7.5L7.5 5.13455C7.49998 4.69526 7.49997 4.31629 7.52547 4.00415C7.55239 3.67469 7.61182 3.34701 7.77248 3.03169C8.01217 2.56129 8.39462 2.17884 8.86502 1.93915C9.18034 1.77849 9.50802 1.71906 9.83748 1.69214C10.1496 1.66664 10.5286 1.66665 10.9679 1.66667ZM7.5 7.5H5C4.53976 7.5 4.16667 7.8731 4.16667 8.33334V15.8333C4.16667 16.2936 4.53976 16.6667 5 16.6667H10C10.4602 16.6667 10.8333 16.2936 10.8333 15.8333V14.1666C10.4508 14.1664 10.1173 14.1641 9.83748 14.1412C9.50802 14.1143 9.18034 14.0548 8.86502 13.8942C8.39462 13.6545 8.01217 13.2721 7.77248 12.8016C7.61182 12.4863 7.55239 12.1586 7.52547 11.8292C7.49997 11.517 7.49998 11.1381 7.5 10.6988L7.5 7.5ZM9.9732 3.35328C9.74681 3.37177 9.66288 3.40317 9.62167 3.42416C9.46487 3.50406 9.33739 3.63154 9.25749 3.78834C9.2365 3.82955 9.2051 3.91348 9.18661 4.13987C9.16732 4.37598 9.16667 4.68621 9.16667 5.16667V10.6667C9.16667 11.1471 9.16732 11.4574 9.18661 11.6935C9.2051 11.9199 9.2365 12.0038 9.25749 12.045C9.33739 12.2018 9.46487 12.3293 9.62167 12.4092C9.66288 12.4302 9.74681 12.4616 9.9732 12.4801C10.2093 12.4994 10.5195 12.5 11 12.5H14C14.4805 12.5 14.7907 12.4994 15.0268 12.4801C15.2532 12.4616 15.3371 12.4302 15.3783 12.4092C15.5351 12.3293 15.6626 12.2018 15.7425 12.045C15.7635 12.0038 15.7949 11.9199 15.8134 11.6935C15.8327 11.4574 15.8333 11.1471 15.8333 10.6667V7.5L13.8068 7.50001C13.5964 7.50003 13.3916 7.50005 13.2181 7.48588C13.0276 7.47032 12.8029 7.43359 12.5767 7.31835C12.2631 7.15856 12.0081 6.90359 11.8483 6.58999C11.7331 6.3638 11.6964 6.13902 11.6808 5.94853C11.6666 5.77506 11.6666 5.57023 11.6667 5.3599L11.6667 3.33334H11C10.5195 3.33334 10.2093 3.33398 9.9732 3.35328ZM13.3333 3.67851V5.33334C13.3333 5.58044 13.334 5.71565 13.3419 5.81281C13.3422 5.81668 13.3426 5.82034 13.3429 5.8238C13.3463 5.82411 13.35 5.82443 13.3539 5.82475C13.451 5.83269 13.5862 5.83334 13.8333 5.83334H15.4882L13.3333 3.67851Z"
  />
</svg>`,ArrowDownIcon=w`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M9.97678 11.318C9.96662 11.3111 9.94678 11.2967 9.9152 11.2699C9.82898 11.1967 9.71943 11.0881 9.52859 10.8972L6.39901 7.76763C6.08659 7.45521 5.58006 7.45521 5.26764 7.76763C4.95522 8.08005 4.95522 8.58658 5.26764 8.899L8.39722 12.0286C8.40353 12.0349 8.40982 12.0412 8.41611 12.0475C8.5813 12.2127 8.73751 12.3689 8.87972 12.4897C9.03447 12.621 9.22442 12.7566 9.46951 12.8363C9.81429 12.9483 10.1857 12.9483 10.5305 12.8363C10.7756 12.7566 10.9655 12.621 11.1203 12.4897C11.2625 12.3689 11.4187 12.2127 11.5839 12.0475L14.7323 8.899C15.0448 8.58658 15.0448 8.08005 14.7323 7.76763C14.4199 7.45521 13.9134 7.45521 13.601 7.76763L10.4714 10.8972C10.2806 11.0881 10.171 11.1967 10.0848 11.2699C10.0532 11.2967 10.0334 11.3111 10.0232 11.318C10.0079 11.3211 9.9921 11.3211 9.97678 11.318Z"
  />
</svg>`,paragraphButtons=[{flavour:"affine:paragraph",type:"text",name:"Text",icon:TextIcon},{flavour:"affine:paragraph",type:"h1",name:"Heading 1",icon:H1Icon},{flavour:"affine:paragraph",type:"h2",name:"Heading 2",icon:H2Icon},{flavour:"affine:paragraph",type:"h3",name:"Heading 3",icon:H3Icon},{flavour:"affine:paragraph",type:"h4",name:"Heading 4",icon:H4Icon},{flavour:"affine:paragraph",type:"h5",name:"Heading 5",icon:H5Icon},{flavour:"affine:paragraph",type:"h6",name:"Heading 6",icon:H6Icon},{flavour:"affine:list",type:"bulleted",name:"Bulleted List",icon:BulletedListIcon},{flavour:"affine:list",type:"numbered",name:"Numbered List",icon:NumberedIcon},{flavour:"affine:list",type:"todo",name:"To-do List",icon:TodoIcon},{flavour:"affine:code",type:"code",name:"Code Block",icon:CodeIcon},{flavour:"affine:paragraph",type:"quote",name:"Quote",icon:QuoteIcon}],formatButtons=[{id:"bold",name:"Bold",icon:BoldIcon,activeWhen:q=>"bold"in q,showWhen:q=>noneCodeBlockSelected(q),action:({page:q})=>{handleFormat(q,"bold")}},{id:"italic",name:"Italic",icon:ItalicIcon,activeWhen:q=>"italic"in q,showWhen:q=>noneCodeBlockSelected(q),action:({page:q})=>{handleFormat(q,"italic")}},{id:"underline",name:"Underline",icon:UnderlineIcon,activeWhen:q=>"underline"in q,showWhen:q=>noneCodeBlockSelected(q),action:({page:q})=>{handleFormat(q,"underline")}},{id:"strike",name:"Strikethrough",icon:StrikethroughIcon,activeWhen:q=>"strike"in q,showWhen:q=>noneCodeBlockSelected(q),action:({page:q})=>{handleFormat(q,"strike")}},{id:"code",name:"Code",icon:InlineCodeIcon,activeWhen:q=>"code"in q,showWhen:q=>noneCodeBlockSelected(q),action:({page:q})=>{handleFormat(q,"code")}},{id:"link",name:"Link",icon:LinkIcon,activeWhen:q=>"link"in q,showWhen:q=>q.length===1&&noneCodeBlockSelected(q),action:({page:q,abortController:j,format:X})=>{createLink(q),"link"in X||j.abort()}}],noneCodeBlockSelected=q=>!q.every(j=>j.flavour==="affine:code"),paragraphPanelStyle=i$c`
  .paragraph-button > svg:nth-child(2) {
    transition-duration: 0.3s;
  }
  .paragraph-button:is(:hover, :focus-visible, :active) > svg:nth-child(2) {
    transform: rotate(180deg);
  }

  .paragraph-panel {
    font-size: var(--affine-font-sm);
    box-sizing: border-box;
    position: absolute;
    width: 173px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 8px 4px;

    background: var(--affine-popover-background);
    box-shadow: var(--affine-popover-shadow);
    border-radius: 0px 10px 10px 10px;
    z-index: var(--affine-z-index-popover);
  }
`,formatQuickBarStyle=i$c`
  .format-quick-bar {
    box-sizing: border-box;
    position: fixed;
    display: flex;
    align-items: center;
    padding: 4px 8px;
    gap: 4px;
    height: 40px;

    border-radius: 10px 10px 10px 0;
    background: var(--affine-popover-background);
    box-shadow: var(--affine-popover-shadow);
    z-index: var(--affine-z-index-popover);
  }

  .divider {
    width: 1px;
    height: 100%;
    background-color: #e0e6eb;
  }

  ${paragraphPanelStyle}
  ${toolTipStyle}
`;var __defProp$h=Object.defineProperty,__getOwnPropDesc$h=Object.getOwnPropertyDescriptor,__decorateClass$h=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$h(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$h(j,X,ne),ne};const onCopy=()=>{document.dispatchEvent(new ClipboardEvent("copy")),toast("Copied to clipboard")};let FormatQuickBar=class extends s$6{constructor(){super(...arguments),this.left=null,this.top=null,this.bottom=null,this.abortController=new AbortController,this.positionUpdated=new Signal,this.models=[],this.page=null,this.paragraphType="text",this.paragraphPanelHoverDelay=150,this.paragraphPanelTimer=0,this.showParagraphPanel="hidden",this.format={}}connectedCallback(){super.connectedCallback();const q=getModelsByRange(getCurrentRange());if(this.models=q,!q.length)return;this.format=getFormat();const j=q[0];this.paragraphType=j.type,this.page=j.page,this.addEventListener("mousedown",X=>{X.preventDefault()})}_onHover(){if(this.showParagraphPanel!=="hidden"){clearTimeout(this.paragraphPanelTimer);return}this.paragraphPanelTimer=window.setTimeout(async()=>{const q=this.formatQuickBarElement.getBoundingClientRect(),j=document.body.getBoundingClientRect(),X=q.top-j.top,te=j.bottom-q.bottom;this.showParagraphPanel=X>te?"top":"bottom"},this.paragraphPanelHoverDelay)}_onHoverEnd(){if(this.showParagraphPanel!=="hidden"){this.paragraphPanelTimer=window.setTimeout(async()=>{this.showParagraphPanel="hidden"},this.paragraphPanelHoverDelay);return}clearTimeout(this.paragraphPanelTimer)}_paragraphPanelTemplate(){if(this.showParagraphPanel==="hidden")return y$1``;const q=i$5({left:"0",top:this.showParagraphPanel==="bottom"?"calc(100% + 4px)":null,bottom:this.showParagraphPanel==="top"?"calc(100% + 4px)":null,display:"flex",flexDirection:this.showParagraphPanel==="bottom"?"column":"column-reverse"});return y$1`<div
      class="paragraph-panel"
      style="${q}"
      @mouseover=${this._onHover}
      @mouseout=${this._onHoverEnd}
    >
      ${paragraphButtons.map(({flavour:j,type:X,name:te,icon:ne})=>y$1`<format-bar-button
          width="100%"
          style="padding-left: 12px; justify-content: flex-start;"
          text="${te}"
          data-testid="${X}"
          @click=${()=>{if(!this.page)throw new Error("Failed to format paragraph! Page not found.");if(this.paragraphType===X){const{flavour:re,type:oe}=paragraphButtons[0];updateSelectedTextType(re,oe,this.page),this.paragraphType=oe;return}updateSelectedTextType(j,X,this.page),this.paragraphType=X,this.positionUpdated.emit()}}
        >
          ${ne}
        </format-bar-button>`)}
    </div>`}render(){var le;const q=this.page;if(!this.models.length||!q)return console.error("Failed to render format-quick-bar! page not found!",this.models,q),y$1``;const j=((le=paragraphButtons.find(fe=>fe.type===this.paragraphType))==null?void 0:le.icon)??paragraphButtons[0].icon,X=y$1`<format-bar-button
      class="paragraph-button"
      width="52px"
      @mouseover=${this._onHover}
      @mouseout=${this._onHoverEnd}
    >
      ${j} ${ArrowDownIcon}
    </format-bar-button>`,te=this._paragraphPanelTemplate(),ne=formatButtons.filter(({showWhen:fe=()=>!0})=>fe(this.models)).map(({id:fe,name:we,icon:ke,action:ye,activeWhen:ve})=>y$1`<format-bar-button
          class="has-tool-tip"
          data-testid=${fe}
          ?active=${ve(this.format)}
          @click=${()=>{ye({page:q,abortController:this.abortController,format:this.format}),this.format=getFormat(),this.positionUpdated.emit()}}
        >
          ${ke}
          <tool-tip inert role="tooltip">${we}</tool-tip>
        </format-bar-button>`),re=y$1`<format-bar-button
      class="has-tool-tip"
      data-testid="copy"
      @click=${()=>onCopy()}
    >
      ${CopyIcon$1}
      <tool-tip inert role="tooltip">Copy</tool-tip>
    </format-bar-button>`,oe=i$5({left:this.left,top:this.top,bottom:this.bottom});return y$1`<div class="format-quick-bar" style="${oe}">
      ${X}
      <div class="divider"></div>
      ${ne}
      ${ne.length?y$1`<div class="divider"></div>`:""}
      ${re} ${te}
    </div>`}};FormatQuickBar.styles=formatQuickBarStyle;__decorateClass$h([e$8()],FormatQuickBar.prototype,"left",2);__decorateClass$h([e$8()],FormatQuickBar.prototype,"top",2);__decorateClass$h([e$8()],FormatQuickBar.prototype,"bottom",2);__decorateClass$h([e$8()],FormatQuickBar.prototype,"abortController",2);__decorateClass$h([e$8()],FormatQuickBar.prototype,"positionUpdated",2);__decorateClass$h([t$7()],FormatQuickBar.prototype,"models",2);__decorateClass$h([t$7()],FormatQuickBar.prototype,"page",2);__decorateClass$h([t$7()],FormatQuickBar.prototype,"paragraphType",2);__decorateClass$h([e$8()],FormatQuickBar.prototype,"paragraphPanelHoverDelay",2);__decorateClass$h([t$7()],FormatQuickBar.prototype,"paragraphPanelTimer",2);__decorateClass$h([t$7()],FormatQuickBar.prototype,"showParagraphPanel",2);__decorateClass$h([t$7()],FormatQuickBar.prototype,"format",2);__decorateClass$h([i$9(".format-quick-bar")],FormatQuickBar.prototype,"formatQuickBarElement",2);FormatQuickBar=__decorateClass$h([e$9("format-quick-bar")],FormatQuickBar);let globalAbortController=new AbortController;const showFormatQuickBar=async({anchorEl:q,direction:j="right-bottom",container:X=document.body,abortController:te=new AbortController})=>{globalAbortController.abort(),globalAbortController=te;const ne=document.createElement("format-quick-bar");ne.abortController=te;const re=new Signal;ne.positionUpdated=re;const oe=throttle(()=>{const ye=q??getCurrentRange(),ve=ye instanceof Range?calcPositionPointByRange(ye,j):ye.getBoundingClientRect(),be=document.body.getBoundingClientRect(),Ce=ne.formatQuickBarElement.getBoundingClientRect(),Ee=5,Oe=j.includes("bottom"),Ae=calcSafeCoordinate({positioningPoint:ve,objRect:Ce,boundaryRect:be,offsetX:-Ce.width/2,offsetY:Oe?Ee:-Ce.height-Ee});ne.left=`${Ae.x}px`,ne.top=`${Ae.y}px`},10),le=getModelsByRange(getCurrentRange());if(!le.length)return;const we=getContainerByModel(le[0]).querySelector(".affine-default-viewport");we&&we.addEventListener("scroll",oe,{passive:!0}),re.on(oe),window.addEventListener("resize",oe,{passive:!0});const ke=()=>{const ye=document.getSelection();(!ye||ye.type==="Caret")&&te.abort()};return document.addEventListener("selectionchange",ke),X.appendChild(ne),await sleep(),oe(),new Promise(ye=>{te.signal.addEventListener("abort",()=>{ne.remove(),we==null||we.removeEventListener("scroll",oe),window.removeEventListener("resize",oe),document.removeEventListener("selectionchange",ke),re.dispose(),ye()})})};function handleBlockEndEnter(q,j){const X=q.getParent(j);if(!X)return;const te=X.children.indexOf(j);if(te===-1)return;q.captureSync();const re=matchFlavours(j,["affine:list"])?{flavour:j.flavour,type:j.type}:{flavour:"affine:paragraph",type:"text"},oe=j.children.length?q.addBlock(re,j,0):q.addBlock(re,X,te+1);asyncFocusRichText(q,oe)}function handleSoftEnter(q,j,X){var ne;q.captureSync();const te=matchFlavours(j,["affine:code"]);(ne=j.text)==null||ne.insert(`
`,X,te?{"code-block":!0}:{})}function handleBlockSplit(q,j,X){if(!(j.text instanceof Text$1))return;const te=q.getParent(j);if(!te)return;const[ne,re]=j.text.split(X);q.captureSync(),q.markTextSplit(j.text,ne,re),q.updateBlock(j,{text:ne});let oe=te,le=oe.children.indexOf(j)+1;matchFlavours(j,["affine:list"])&&j.children.length>0&&(oe=j,le=0);const fe=q.addBlock({flavour:j.flavour,text:re,type:j.type},oe,le);asyncFocusRichText(q,fe)}function handleIndent(q,j,X=0){var le;const te=q.getPreviousSibling(j);if(!te)return;q.captureSync();const ne={flavour:j.flavour,type:j.type,text:(le=j==null?void 0:j.text)==null?void 0:le.clone()},re=j.children;q.deleteBlock(j);const oe=q.addBlock(ne,te);q.updateBlock(te,{children:[...te.children,...re]}),requestAnimationFrame(()=>{const fe=q.getBlockById(oe);assertExists(fe);const we=getRichTextByModel(fe);we==null||we.quill.setSelection(X,0)})}function handleUnindent(q,j,X=0){var ve;const te=q.getParent(j);if(!te||matchFlavours(te,["affine:group"]))return;const ne=q.getParent(te);if(!ne)return;q.captureSync();const re=q.getPreviousSiblings(j),oe=q.getNextSiblings(j);q.updateBlock(te,{children:re});const le=(ve=j==null?void 0:j.text)==null?void 0:ve.clone(),fe=[...j.children,...oe],we=ne.children.indexOf(te),ke={flavour:j.flavour,type:j.type,text:le,children:fe};q.deleteBlock(j);const ye=q.addBlock(ke,ne,we+1);requestAnimationFrame(()=>{const be=q.getBlockById(ye);assertExists(be);const Ce=getRichTextByModel(be);Ce==null||Ce.quill.setSelection(X,0)})}function handleLineStartBackspace(q,j){var X,te,ne,re,oe;if(matchFlavours(j,["affine:code"])){focusBlockByModel(j);return}if(matchFlavours(j,["affine:list"])){const le=q.getParent(j);if(!le)return;const fe=le.children.indexOf(j),we={flavour:"affine:paragraph",type:"text",text:(X=j==null?void 0:j.text)==null?void 0:X.clone(),children:j.children};q.captureSync(),q.deleteBlock(j);const ke=q.addBlock(we,le,fe);asyncFocusRichText(q,ke);return}if(matchFlavours(j,["affine:paragraph"])){if(j.type!=="text"){q.captureSync(),q.updateBlock(j,{type:"text"});return}const le=q.getParent(j);if(!le||matchFlavours(le,["affine:group"])){const fe=getContainerByModel(j),we=getPreviousBlock(fe,j.id);if(we&&matchFlavours(we,["affine:paragraph","affine:list"])){q.captureSync();const ke=((te=we.text)==null?void 0:te.length)||0;(ne=j.text)!=null&&ne.length&&((re=we.text)==null||re.join(j.text)),q.deleteBlock(j);const ye=getRichTextByModel(we);(oe=ye==null?void 0:ye.quill)==null||oe.setSelection(ke,0)}else we&&matchFlavours(we,["affine:embed","affine:divider","affine:code"])&&window.requestAnimationFrame(()=>{var ke;focusPreviousBlock(j,"start"),(ke=j.text)!=null&&ke.length||(q.captureSync(),q.deleteBlock(j))});return}handleUnindent(q,j);return}throw new Error("Failed to handle backspace! Unknown block flavours! flavour:"+j.flavour)}function handleKeyUp(q,j){const X=window.getSelection(),te=getContainerByModel(q),ne=getPreviousBlock(te,q.id);if(X){const re=X.getRangeAt(0),{height:oe,left:le,top:fe}=re.getBoundingClientRect(),we=caretRangeFromPoint(le,fe-oe/2);if((!we||!j.contains(we.startContainer))&&!isAtLineEdge(re))return ne&&matchFlavours(q,["affine:embed","affine:divider"])?ALLOW_DEFAULT:PREVENT_DEFAULT}return ALLOW_DEFAULT}function isAtLineEdge(q){var j;if(q.startOffset>0&&Number((j=q.startContainer.textContent)==null?void 0:j.length)-q.startOffset>0){const X=q.cloneRange();X.setStart(q.startContainer,q.startOffset-1),X.setEnd(q.startContainer,q.startOffset-1);const te=q.cloneRange();return te.setStart(q.endContainer,q.endOffset+1),te.setEnd(q.endContainer,q.endOffset+1),X.getBoundingClientRect().top!==te.getBoundingClientRect().top}return!1}function handleKeyDown(q,j){const X=window.getSelection();if(X){const te=X.getRangeAt(0),{bottom:ne,left:re,height:oe}=te.getBoundingClientRect(),le=caretRangeFromPoint(re,ne+oe/2);if(!le||!j.contains(le.startContainer)){const fe=getNextBlock(q.id);return fe?(matchFlavours(fe,["affine:divider"]),PREVENT_DEFAULT):ALLOW_DEFAULT}if(isAtLineEdge(te)){const{height:fe,left:we,bottom:ke}=le.getBoundingClientRect(),ye=caretRangeFromPoint(we,ke+fe/2);if(!ye||!j.contains(ye.startContainer))return PREVENT_DEFAULT}}return ALLOW_DEFAULT}function tryMatchSpaceHotkey(q,j,X,te,ne){const[,re]=X.getLine(ne.index);if(re>te.length||matchFlavours(j,["affine:code"]))return ALLOW_DEFAULT;let oe=!1;switch(te.trim()){case"[]":case"[ ]":oe=convertToList(q,j,"todo",te,{checked:!1});break;case"[x]":oe=convertToList(q,j,"todo",te,{checked:!0});break;case"-":case"*":oe=convertToList(q,j,"bulleted",te);break;case"***":oe=convertToDivider(q,j,te);break;case"---":oe=convertToDivider(q,j,te);break;case"#":oe=convertToParagraph(q,j,"h1",te);break;case"##":oe=convertToParagraph(q,j,"h2",te);break;case"###":oe=convertToParagraph(q,j,"h3",te);break;case"####":oe=convertToParagraph(q,j,"h4",te);break;case"#####":oe=convertToParagraph(q,j,"h5",te);break;case"######":oe=convertToParagraph(q,j,"h6",te);break;case">":oe=convertToParagraph(q,j,"quote",te);break;default:oe=convertToList(q,j,"numbered",te)}return oe?PREVENT_DEFAULT:ALLOW_DEFAULT}function getBlockEditingStateByPosition(q,j,X){for(let te=0;te<=q.length-1;te++){const ne=getBlockById(q[te].id);let re;if(q[te].type==="image"){const oe=ne==null?void 0:ne.querySelector("img");re=oe==null?void 0:oe.getBoundingClientRect()}else re=ne==null?void 0:ne.getBoundingClientRect();if(assertExists(re),isPointIn(re,j,X))return{position:re,model:q[te]}}return null}function isPointIn(q,j,X){return!(j<q.left||j>q.left+q.width+50||X<q.top||X>q.top+q.height)}async function downloadImage(q){const j=await getUrlByModel(q),X=new Image;j&&(X.src=j),X.setAttribute("crossOrigin","anonymous"),X.onload=function(){const te=document.createElement("canvas");te.width=X.width,te.height=X.height;const ne=te.getContext("2d");ne&&ne.drawImage(X,0,0,X.width,X.height);const re=te.toDataURL("image/png"),oe=document.createElement("a"),le=new MouseEvent("click");oe.download="image",oe.href=re,oe.dispatchEvent(le)}}async function copyImgToClip(q){const j=await getUrlByModel(q);assertExists(j);const X=new Image;X.src=j,X.onload=()=>{const te=document.createElement("canvas");te.width=X.width,te.height=X.height;const ne=te.getContext("2d");ne==null||ne.drawImage(X,0,0),te.toBlob(re=>{re&&navigator.clipboard.write([new ClipboardItem({[re.type]:re})])})},toast("Copied image to clipboard")}function focusCaption(q){var X;const j=(X=getBlockElementByModel(q))==null?void 0:X.querySelector(".affine-embed-wrapper-caption");j.classList.add("caption-show"),j.focus()}function handleUp(q,j,X){var ne;const te=window.getSelection();if(te!=null&&te.anchorNode){const re=getStartModelBySelection(),oe=getContainerByModel(re),le=getPreviousBlock(oe,re.id),fe=(ne=getBlockElementByModel(re))==null?void 0:ne.querySelector(".ql-editor"),we=te.getRangeAt(0),{height:ke,left:ye,top:ve}=we.getBoundingClientRect(),be=caretRangeFromPoint(ye,ve-ke/2);(!be||!fe.contains(be.startContainer))&&!isAtLineEdge(we)&&(le&&matchFlavours(le,["affine:group"])?document.querySelector(".affine-default-page-block-title").focus():focusPreviousBlock(re,new Point(ye,ve)))}else{j.updateSelectedRects.emit([]);const{state:re}=q,oe=getModelByElement(re.selectedBlocks[0]),le=getContainerByModel(oe),fe=getPreviousBlock(le,oe.id);assertExists(fe);const we=getDefaultPageBlock(oe);X.preventDefault(),focusPreviousBlock(oe,we.lastSelectionPosition instanceof Point?we.lastSelectionPosition:"end")}}function handleDown(q,j,X){if(q.state.selectedBlocks.length){j.updateSelectedRects.emit([]);const{state:te}=q,ne=getModelByElement(te.selectedBlocks[0]),re=getContainerByModel(ne),oe=getPreviousBlock(re,ne.id);assertExists(oe);const le=getDefaultPageBlock(ne);X.preventDefault(),focusNextBlock(ne,le.lastSelectionPosition instanceof Point?le.lastSelectionPosition:"start");return}else{const te=window.getSelection(),ne=getStartModelBySelection();if(matchFlavours(ne,["affine:code"]))return;assertExists(te);const re=te.getRangeAt(0),{left:oe,bottom:le}=re.getBoundingClientRect();focusNextBlock(ne,new Point(oe,le))}}function bindHotkeys(q,j,X,te){const{BACKSPACE:ne,SELECT_ALL:re,H1:oe,H2:le,H3:fe,H4:we,H5:ke,H6:ye,SHIFT_UP:ve,SHIFT_DOWN:be,NUMBERED_LIST:Ce,BULLETED:Ee,TEXT:Oe,UP:Ae,DOWN:Te,LEFT:Se,RIGHT:$e,ENTER:Le,CODE_BLOCK:Pe}=HOTKEYS;bindCommonHotkey(q),hotkey.addListener(Le,Re=>{const{type:Ne,selectedBlocks:je}=j.state,Ie=Re.target,De=Ie.classList.contains("affine-embed-wrapper-caption");if(Ne==="block"&&je.length||De){Re.stopPropagation(),Re.preventDefault();const Ve=De?Ie:je[je.length-1],ze=getModelByElement(Ve),qe=q.getParent(ze),Xe=qe==null?void 0:qe.children.indexOf(ze);assertExists(Xe),assertExists(qe);const tt=q.addBlock({flavour:"affine:paragraph",type:"text"},qe,Xe+1);asyncFocusRichText(q,tt),j.state.clear(),j.clearRects();return}}),hotkey.addListener(ne,Re=>{const{state:Ne}=j;if(Ne.type==="native"){handleBackspace(q,Re);return}else if(["block","divider","focus"].includes(Ne.type)){const{selectedBlocks:je}=Ne;if(Ne.type==="focus"){Ne.type="block";return}handleBlockSelectionBatchDelete(q,je.map(Ie=>getModelByElement(Ie))),Re.preventDefault(),Ne.clear(),X.updateSelectedRects.emit([]),X.updateEmbedRects.emit([]),X.updateEmbedEditingState.emit(null);return}if(isPageTitle(Re)){const je=Re.target;if(je.selectionStart!==je.selectionEnd){Re.preventDefault();const Ie=getSplicedTitle(je);q.updateBlock(te,{title:Ie}),q.workspace.setPageMeta(q.id,{title:Ie})}return}}),hotkey.addListener(re,Re=>{Re.preventDefault(),handleSelectAll(j),j.state.type="block"}),hotkey.addListener(Ae,Re=>{handleUp(j,X,Re)}),hotkey.addListener(Te,Re=>{handleDown(j,X,Re)}),hotkey.addListener(Se,Re=>{var De,Ve;let Ne=null;const{state:{selectedBlocks:je,type:Ie}}=j;if(je.length&&!(Ie==="native"&&((De=window.getSelection())!=null&&De.rangeCount)))Ne=getModelByElement(j.state.selectedBlocks[0]),X.updateSelectedRects.emit([]),j.state.clear(),Re.preventDefault();else{const ze=(Ve=window.getSelection())==null?void 0:Ve.getRangeAt(0);ze&&ze.collapsed&&ze.startOffset===0&&(Ne=getStartModelBySelection())}Ne&&focusPreviousBlock(Ne,"end")}),hotkey.addListener($e,Re=>{var De,Ve,ze;if(Re.target instanceof HTMLTextAreaElement&&Re.target.classList.contains("affine-default-page-block-title"))return;let Ne=null;const{state:{selectedBlocks:je,type:Ie}}=j;if(je.length&&!(Ie==="native"&&((De=window.getSelection())!=null&&De.rangeCount)))Ne=getModelByElement(j.state.selectedBlocks[j.state.selectedBlocks.length-1]),X.updateSelectedRects.emit([]),j.state.clear(),Re.preventDefault();else{const qe=(Ve=window.getSelection())==null?void 0:Ve.getRangeAt(0),Xe=getStartModelBySelection();qe&&qe.collapsed&&qe.startOffset===((ze=Xe.text)==null?void 0:ze.length)&&(Ne=getStartModelBySelection())}Ne&&focusNextBlock(Ne,"start")}),hotkey.addListener(oe,()=>{updateSelectedTextType("affine:paragraph","h1",q)}),hotkey.addListener(le,()=>{updateSelectedTextType("affine:paragraph","h2",q)}),hotkey.addListener(fe,()=>{updateSelectedTextType("affine:paragraph","h3",q)}),hotkey.addListener(we,()=>{updateSelectedTextType("affine:paragraph","h4",q)}),hotkey.addListener(ke,()=>{updateSelectedTextType("affine:paragraph","h5",q)}),hotkey.addListener(ye,()=>{updateSelectedTextType("affine:paragraph","h6",q)}),hotkey.addListener(Ce,()=>{updateSelectedTextType("affine:list","numbered",q)}),hotkey.addListener(Ee,()=>{updateSelectedTextType("affine:list","bulleted",q)}),hotkey.addListener(Oe,()=>{updateSelectedTextType("affine:paragraph","text",q)}),hotkey.addListener(ve,Re=>{}),hotkey.addListener(be,Re=>{}),hotkey.addListener(Pe,Re=>{var Ve;const Ne=getStartModelBySelection(),je=q.getParent(Ne),Ie=je==null?void 0:je.children.indexOf(Ne);assertExists(je);const De={flavour:"affine:code",text:(Ve=Ne.text)==null?void 0:Ve.clone()};q.deleteBlock(Ne),q.addBlock(De,je,Ie)})}function removeHotkeys(){removeCommonHotKey(),hotkey.removeListener([HOTKEYS.BACKSPACE,HOTKEYS.SELECT_ALL,HOTKEYS.H1,HOTKEYS.H2,HOTKEYS.H3,HOTKEYS.H4,HOTKEYS.H5,HOTKEYS.H6,HOTKEYS.SHIFT_UP,HOTKEYS.SHIFT_DOWN,HOTKEYS.BULLETED,HOTKEYS.NUMBERED_LIST,HOTKEYS.TEXT,HOTKEYS.UP,HOTKEYS.DOWN,HOTKEYS.LEFT,HOTKEYS.RIGHT,HOTKEYS.CODE_BLOCK,HOTKEYS.ENTER])}async function getUrlByModel(q){assertExists(q.sourceId);const j=await q.page.blobs;return j==null?void 0:j.get(q.sourceId)}function isControlledKeyboardEvent(q){return q.ctrlKey||q.metaKey||q.shiftKey}function copyCode(q){const j=getRichTextByModel(q.model);assertExists(j);const X=j==null?void 0:j.quill;X.setSelection(0,X.getLength()),document.dispatchEvent(new ClipboardEvent("copy")),resetNativeSelection(null),toast("Copied to clipboard")}function deleteCodeBlock(q){const j=q.model;j.page.deleteBlock(j)}function toggleWrap(q){const j=document.querySelector(`[${BLOCK_ID_ATTR}="${q.model.id}"] .ql-syntax`);assertExists(j),j.classList.toggle("wrap")}class EmbedResizeManager{constructor(j,X){this._originPosition={x:0,y:0},this._dropContainer=null,this._dropContainerSize={w:0,h:0,left:0},this._dragMoveTarget="right",this.state=j,this.signals=X}onStart(j){var X,te,ne;this._originPosition.x=j.raw.pageX,this._originPosition.y=j.raw.pageY,this._dropContainer=j.raw.target.closest(".resizes"),this._dropContainerSize.w=(X=this._dropContainer)==null?void 0:X.getBoundingClientRect().width,this._dropContainerSize.h=(te=this._dropContainer)==null?void 0:te.getBoundingClientRect().height,this._dropContainerSize.left=(ne=this._dropContainer)==null?void 0:ne.offsetLeft,j.raw.target.className.includes("right")?this._dragMoveTarget="right":this._dragMoveTarget="left"}onMove(j){var re;let X=0,te=0,ne=0;if(this._dragMoveTarget==="right"?X=this._dropContainerSize.w+(j.raw.pageX-this._originPosition.x):X=this._dropContainerSize.w-(j.raw.pageX-this._originPosition.x),X<=700&&(this._dragMoveTarget==="right"?ne=this._dropContainerSize.left-(j.raw.pageX-this._originPosition.x)/2:ne=this._dropContainerSize.left+(j.raw.pageX-this._originPosition.x)/2,te=X*(this._dropContainerSize.h/this._dropContainerSize.w),this._dropContainer)){this.signals.updateEmbedRects.emit([{width:X,height:te,left:ne,top:this._dropContainer.getBoundingClientRect().top}]);const oe=(re=this.state.activeComponent)==null?void 0:re.querySelector("img");oe&&(oe.style.width=X+"px",oe.style.height=te+"px")}}onEnd(){assertExists(this.state.activeComponent);const j=getModelByElement(this.state.activeComponent);j.page.captureSync(),assertExists(this._dropContainer);const{width:X,height:te}=this._dropContainer.getBoundingClientRect();j.page.updateBlock(j,{width:X,height:te})}}function intersects(q,j,X){return q.left<j.right+X.x&&q.right>j.left+X.x&&q.top<j.bottom+X.y&&q.bottom>j.top+X.y}function filterSelectedBlock(q,j,X){return Array.from(q.keys()).filter(ne=>{const re=ne.getBoundingClientRect();return intersects(re,j,X)})}function createSelectionRect(q,j){const X=Math.abs(q.x-j.x),te=Math.abs(q.y-j.y),ne=Math.min(q.x,j.x),re=Math.min(q.y,j.y);return new DOMRect(ne,re,X,te)}class PageSelectionState{constructor(j){this.selectEmbeds=[],this.selectedBlocks=[],this._startRange=null,this._startPoint=null,this._richTextCache=new Map,this._blockCache=new Map,this._embedCache=new Map,this._activeComponent=null,this.type=j}get activeComponent(){return this._activeComponent}set activeComponent(j){this._activeComponent=j}get startRange(){return this._startRange}get startPoint(){return this._startPoint}get richTextCache(){return this._richTextCache}get blockCache(){return this._blockCache}get embedCache(){return this._embedCache}resetStartRange(j){this._startRange=caretRangeFromPoint(j.raw.clientX,j.raw.clientY),this._startPoint={x:j.x,y:j.y}}refreshRichTextBoundsCache(j){getAllBlocks().forEach(te=>{const ne=te.getBoundingClientRect();this._blockCache.set(te,ne)})}clear(){this.type="none",this._richTextCache.clear(),this._startRange=null,this._startPoint=null,this.selectedBlocks=[]}}class DefaultSelectionManager{constructor({page:j,mouseRoot:X,signals:te,container:ne}){this.state=new PageSelectionState("none"),this._onContainerDragStart=re=>{if(this.state.resetStartRange(re),!isInput(re.raw)){if(isEmbed(re)){this.state.type="embed",this._embedResizeManager.onStart(re);return}isBlankArea(re)?this._onBlockSelectionDragStart(re):this._onNativeSelectionDragStart(re)}},this._onContainerDragMove=re=>{if(this.state.type==="native")return this._onNativeSelectionDragMove(re);if(!this._container.readonly){if(this.state.type==="block")return this._onBlockSelectionDragMove(re);if(this.state.type==="embed")return this._embedResizeManager.onMove(re)}},this._onContainerDragEnd=re=>{this.state.type==="native"?this._onNativeSelectionDragEnd(re):this.state.type==="block"?this._onBlockSelectionDragEnd(re):this.state.type==="embed"&&this._embedResizeManager.onEnd(),!this._container.readonly&&this._showFormatQuickBar(re)},this._onContainerClick=re=>{var fe;if(this.state.clear(),this._signals.updateSelectedRects.emit([]),this._signals.updateEmbedRects.emit([]),re.raw.target.tagName==="DEBUG-MENU")return;Array.from(document.querySelectorAll(".affine-embed-wrapper-caption")).forEach(we=>{we!==re.raw.target&&we.blur()});const le=getBlockEditingStateByPosition(this._blocks,re.raw.pageX,re.raw.pageY);if(le&&le.model){const{model:we}=le,ke=getDefaultPageBlock(we);ke.lastSelectionPosition="start"}if(le&&matchFlavours$1(le.model,["affine:embed","affine:divider"])){this.state.type="block",(fe=window.getSelection())==null||fe.removeAllRanges(),assertExists(le==null?void 0:le.model),this.state.activeComponent=getBlockElementByModel(le==null?void 0:le.model),assertExists(this.state.activeComponent),le.model.type==="image"?this._signals.updateEmbedRects.emit([le.position]):this._signals.updateSelectedRects.emit([le.position]),this.state.selectedBlocks.push(this.state.activeComponent);return}re.raw.target instanceof HTMLTextAreaElement||re.keys.shift||handleNativeRangeClick(this.page,re)},this._onContainerDblClick=re=>{if(this.state.clear(),this._signals.updateSelectedRects.emit([]),re.raw.target.tagName==="DEBUG-MENU"||re.raw.target instanceof HTMLTextAreaElement)return;const oe=handleNativeRangeDblClick(this.page);!oe||oe.collapsed||this._container.readonly||showFormatQuickBar({direction:"center-bottom"})},this._onContainerContextMenu=re=>{repairContextMenuRange(re)},this._onContainerMouseMove=re=>{const oe=getBlockEditingStateByPosition(this._blocks,re.raw.pageX,re.raw.pageY);re.raw.target.closest(".embed-editing-state")||((oe==null?void 0:oe.model.type)==="image"?(oe.position.x=oe.position.right+10,this._signals.updateEmbedEditingState.emit(oe)):(oe==null?void 0:oe.model.flavour)==="affine:code"?(oe.position.x=oe.position.right+10,this._signals.updateCodeBlockOption.emit(oe)):(this._signals.updateEmbedEditingState.emit(null),this._signals.updateCodeBlockOption.emit(null)))},this._onContainerMouseOut=re=>{},this.page=j,this._signals=te,this._mouseRoot=X,this._container=ne,this._embedResizeManager=new EmbedResizeManager(this.state,te),this._mouseDisposeCallback=initMouseEventHandlers(this._mouseRoot,this._onContainerDragStart,this._onContainerDragMove,this._onContainerDragEnd,this._onContainerClick,this._onContainerDblClick,this._onContainerMouseMove,this._onContainerMouseOut,this._onContainerContextMenu)}get _blocks(){var j;return((j=this.page.root)==null?void 0:j.children[0].children)??[]}get _containerOffset(){const j=this._mouseRoot.getBoundingClientRect();return{x:j.left,y:j.top}}_setSelectedBlocks(j){this.state.selectedBlocks=j;const{blockCache:X}=this.state,te=j.map(ne=>X.get(ne));this._signals.updateSelectedRects.emit(te)}_onBlockSelectionDragStart(j){this.state.type="block",this.state.resetStartRange(j),this.state.refreshRichTextBoundsCache(this._mouseRoot),resetNativeSelection(null)}_onBlockSelectionDragMove(j){assertExists(this.state.startPoint),assertExists(this.state.startPoint);const X={x:j.x,y:j.y},{startPoint:te}=this.state,ne=createSelectionRect(X,te),re=filterSelectedBlock(this.state.blockCache,ne,j.containerOffset);this._setSelectedBlocks(re),this._signals.updateFrameSelectionRect.emit(ne)}_onBlockSelectionDragEnd(j){this.state.type="block",this._signals.updateFrameSelectionRect.emit(null)}_onNativeSelectionDragStart(j){this._signals.nativeSelection.emit(!1),this.state.type="native"}_onNativeSelectionDragMove(j){handleNativeRangeDragMove(this.state.startRange,j)}_onNativeSelectionDragEnd(j){this._signals.nativeSelection.emit(!0)}_showFormatQuickBar(j){if(this.state.type==="native"){const{direction:X,selectedType:te}=getNativeSelectionMouseDragInfo(j);if(te==="Caret")return;showFormatQuickBar({direction:X})}else this.state.type}clearRects(){this._signals.updateSelectedRects.emit([]),this._signals.updateFrameSelectionRect.emit(null),this._signals.updateEmbedEditingState.emit(null),this._signals.updateEmbedRects.emit([])}dispose(){this._signals.updateSelectedRects.dispose(),this._signals.updateFrameSelectionRect.dispose(),this._signals.updateEmbedEditingState.dispose(),this._signals.updateEmbedRects.dispose(),this._mouseDisposeCallback()}resetSelectedBlockByRect(j,X="block"){this.state.type=X,this.state.refreshRichTextBoundsCache(this._mouseRoot);const{blockCache:te}=this.state,{_containerOffset:ne}=this,re=filterSelectedBlock(te,j,ne);this._setSelectedBlocks(re)}selectBlocksByRect(j){this.state.refreshRichTextBoundsCache(this._mouseRoot);const X=filterSelectedBlock(this.state.blockCache,j,{x:0,y:0});if(this.state.blockCache.size===this.state.selectedBlocks.length){this._signals.updateSelectedRects.emit([]),this._signals.updateEmbedRects.emit([]);return}this.state.clear(),this.state.type="block",this._signals.updateEmbedRects.emit([]),this._setSelectedBlocks(X)}}const CaptionIcon=w`
  <svg width="20" height="20" viewBox="0 0 20 20"  xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd"  clip-rule="evenodd" d="M2.5 4.16667C2.5 3.24619 3.24619 2.5 4.16667 2.5H7.5C8.42047 2.5 9.16667 3.24619 9.16667 4.16667V7.5C9.16667 8.42047 8.42047 9.16667 7.5 9.16667H4.16667C3.24619 9.16667 2.5 8.42047 2.5 7.5V4.16667ZM7.5 4.16667H4.16667V7.5H7.5V4.16667ZM2.5 12.5C2.5 12.0398 2.8731 11.6667 3.33333 11.6667H16.6667C17.1269 11.6667 17.5 12.0398 17.5 12.5C17.5 12.9602 17.1269 13.3333 16.6667 13.3333H3.33333C2.8731 13.3333 2.5 12.9602 2.5 12.5ZM3.33333 15.8333C2.8731 15.8333 2.5 16.2064 2.5 16.6667C2.5 17.1269 2.8731 17.5 3.33333 17.5H13.3333C13.7936 17.5 14.1667 17.1269 14.1667 16.6667C14.1667 16.2064 13.7936 15.8333 13.3333 15.8333H3.33333Z" />
  </svg>
`,DownloadIcon=w`
  <svg width="20" height="20" viewBox="0 0 20 20"  xmlns="http://www.w3.org/2000/svg">
    <path d="M14.1667 13.333C13.7064 13.333 13.3333 13.7061 13.3333 14.1663C13.3333 14.6266 13.7064 14.9997 14.1667 14.9997V13.333ZM14.175 14.9997C14.6352 14.9997 15.0083 14.6266 15.0083 14.1663C15.0083 13.7061 14.6352 13.333 14.175 13.333V14.9997ZM14.5 10.833C14.0398 10.833 13.6667 11.2061 13.6667 11.6663C13.6667 12.1266 14.0398 12.4997 14.5 12.4997V10.833ZM5.5 12.4997C5.96024 12.4997 6.33333 12.1266 6.33333 11.6663C6.33333 11.2061 5.96024 10.833 5.5 10.833V12.4997ZM3.52886 16.5395L3.20996 17.3094H3.20996L3.52886 16.5395ZM2.62687 15.6375L1.85697 15.9564L1.85697 15.9564L2.62687 15.6375ZM17.3731 15.6375L18.143 15.9564L17.3731 15.6375ZM16.4711 16.5395L16.79 17.3094L16.4711 16.5395ZM17.3731 12.6952L18.143 12.3763L17.3731 12.6952ZM16.4711 11.7932L16.1522 12.5631V12.5631L16.4711 11.7932ZM2.62687 12.6952L1.85697 12.3763L2.62687 12.6952ZM3.52886 11.7932L3.20996 11.0233L3.52886 11.7932ZM10 12.4997L9.41074 13.0889C9.73618 13.4144 10.2638 13.4144 10.5893 13.0889L10 12.4997ZM10.8333 3.33301C10.8333 2.87277 10.4602 2.49967 10 2.49967C9.53976 2.49967 9.16667 2.87277 9.16667 3.33301H10.8333ZM8.08926 9.41042C7.76382 9.08498 7.23618 9.08498 6.91074 9.41042C6.58531 9.73586 6.58531 10.2635 6.91074 10.5889L8.08926 9.41042ZM13.0893 10.5889C13.4147 10.2635 13.4147 9.73586 13.0893 9.41042C12.7638 9.08498 12.2362 9.08498 11.9107 9.41042L13.0893 10.5889ZM14.1667 14.9997H14.175V13.333H14.1667V14.9997ZM15 15.833H5V17.4997H15V15.833ZM14.5 12.4997H15V10.833H14.5V12.4997ZM5 12.4997H5.5V10.833H5V12.4997ZM5 15.833C4.60031 15.833 4.34228 15.8326 4.1448 15.8191C3.9548 15.8061 3.88244 15.7839 3.84776 15.7696L3.20996 17.3094C3.48157 17.4219 3.75649 17.4631 4.03135 17.4819C4.29872 17.5001 4.62312 17.4997 5 17.4997V15.833ZM1.66667 14.1663C1.66667 14.5432 1.66622 14.8676 1.68446 15.135C1.70321 15.4099 1.74446 15.6848 1.85697 15.9564L3.39677 15.3186C3.3824 15.2839 3.36022 15.2115 3.34726 15.0215C3.33378 14.8241 3.33333 14.566 3.33333 14.1663H1.66667ZM3.84776 15.7696C3.64357 15.685 3.48135 15.5228 3.39677 15.3186L1.85697 15.9564C2.1107 16.569 2.59739 17.0556 3.20996 17.3094L3.84776 15.7696ZM16.6667 14.1663C16.6667 14.566 16.6662 14.8241 16.6527 15.0215C16.6398 15.2115 16.6176 15.2839 16.6032 15.3186L18.143 15.9564C18.2555 15.6848 18.2968 15.4099 18.3155 15.135C18.3338 14.8676 18.3333 14.5432 18.3333 14.1663H16.6667ZM15 17.4997C15.3769 17.4997 15.7013 17.5001 15.9687 17.4819C16.2435 17.4631 16.5184 17.4219 16.79 17.3094L16.1522 15.7696C16.1176 15.7839 16.0452 15.8061 15.8552 15.8191C15.6577 15.8326 15.3997 15.833 15 15.833V17.4997ZM16.6032 15.3186C16.5187 15.5228 16.3564 15.685 16.1522 15.7696L16.79 17.3094C17.4026 17.0556 17.8893 16.569 18.143 15.9564L16.6032 15.3186ZM18.3333 14.1663C18.3333 13.7895 18.3338 13.4651 18.3155 13.1977C18.2968 12.9228 18.2555 12.6479 18.143 12.3763L16.6032 13.0141C16.6176 13.0488 16.6398 13.1211 16.6527 13.3111C16.6662 13.5086 16.6667 13.7667 16.6667 14.1663H18.3333ZM15 12.4997C15.3997 12.4997 15.6577 12.5001 15.8552 12.5136C16.0452 12.5266 16.1176 12.5487 16.1522 12.5631L16.79 11.0233C16.5184 10.9108 16.2435 10.8696 15.9687 10.8508C15.7013 10.8326 15.3769 10.833 15 10.833V12.4997ZM18.143 12.3763C17.8893 11.7637 17.4026 11.277 16.79 11.0233L16.1522 12.5631C16.3564 12.6477 16.5187 12.8099 16.6032 13.0141L18.143 12.3763ZM3.33333 14.1663C3.33333 13.7667 3.33378 13.5086 3.34726 13.3111C3.36022 13.1211 3.3824 13.0488 3.39677 13.0141L1.85697 12.3763C1.74446 12.6479 1.70321 12.9228 1.68446 13.1977C1.66622 13.4651 1.66667 13.7895 1.66667 14.1663H3.33333ZM5 10.833C4.62312 10.833 4.29872 10.8326 4.03135 10.8508C3.75649 10.8696 3.48157 10.9108 3.20996 11.0233L3.84776 12.5631C3.88244 12.5487 3.9548 12.5266 4.1448 12.5136C4.34228 12.5001 4.60031 12.4997 5 12.4997V10.833ZM3.39677 13.0141C3.48135 12.8099 3.64357 12.6477 3.84776 12.5631L3.20996 11.0233C2.59739 11.277 2.1107 11.7637 1.85697 12.3763L3.39677 13.0141ZM10.8333 12.4997V3.33301H9.16667V12.4997H10.8333ZM6.91074 10.5889L9.41074 13.0889L10.5893 11.9104L8.08926 9.41042L6.91074 10.5889ZM10.5893 13.0889L13.0893 10.5889L11.9107 9.41042L9.41074 11.9104L10.5893 13.0889Z"/>
  </svg>
`,CopyIcon=w`
  <svg width="20" height="20" viewBox="0 0 20 20"  xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9679 1.66699L13.3333 1.66699C13.5543 1.66699 13.7663 1.75479 13.9226 1.91107L17.2559 5.2444C17.4122 5.40068 17.5 5.61265 17.5 5.83366V10.6991C17.5 11.1384 17.5 11.5174 17.4745 11.8295C17.4476 12.159 17.3882 12.4867 17.2275 12.802C16.9878 13.2724 16.6054 13.6548 16.135 13.8945C15.8197 14.0552 15.492 14.1146 15.1625 14.1415C14.8504 14.167 14.4714 14.167 14.0321 14.167H12.5V15.8337C12.5 17.2144 11.3807 18.3337 10 18.3337H5C3.61929 18.3337 2.5 17.2144 2.5 15.8337V8.33366C2.5 6.95295 3.61929 5.83366 5 5.83366H7.5L7.5 5.13487C7.49998 4.69558 7.49997 4.31661 7.52547 4.00447C7.55239 3.67502 7.61182 3.34733 7.77248 3.03202C8.01217 2.56161 8.39462 2.17916 8.86502 1.93948C9.18034 1.77882 9.50802 1.71939 9.83748 1.69247C10.1496 1.66697 10.5286 1.66698 10.9679 1.66699ZM7.5 7.50033H5C4.53976 7.50033 4.16667 7.87342 4.16667 8.33366V15.8337C4.16667 16.2939 4.53976 16.667 5 16.667H10C10.4602 16.667 10.8333 16.2939 10.8333 15.8337V14.167C10.4508 14.1667 10.1173 14.1644 9.83748 14.1415C9.50802 14.1146 9.18034 14.0552 8.86502 13.8945C8.39462 13.6548 8.01217 13.2724 7.77248 12.802C7.61182 12.4867 7.55239 12.159 7.52547 11.8295C7.49997 11.5174 7.49998 11.1384 7.5 10.6991L7.5 7.50033ZM9.9732 3.3536C9.74681 3.3721 9.66288 3.40349 9.62167 3.42449C9.46487 3.50438 9.33739 3.63187 9.25749 3.78867C9.2365 3.82987 9.2051 3.9138 9.18661 4.14019C9.16732 4.3763 9.16667 4.68653 9.16667 5.16699V10.667C9.16667 11.1475 9.16732 11.4577 9.18661 11.6938C9.2051 11.9202 9.2365 12.0041 9.25749 12.0453C9.33739 12.2021 9.46487 12.3296 9.62167 12.4095C9.66288 12.4305 9.74681 12.4619 9.9732 12.4804C10.2093 12.4997 10.5195 12.5003 11 12.5003H14C14.4805 12.5003 14.7907 12.4997 15.0268 12.4804C15.2532 12.4619 15.3371 12.4305 15.3783 12.4095C15.5351 12.3296 15.6626 12.2021 15.7425 12.0453C15.7635 12.0041 15.7949 11.9202 15.8134 11.6938C15.8327 11.4577 15.8333 11.1475 15.8333 10.667V7.50033L13.8068 7.50033C13.5964 7.50035 13.3916 7.50038 13.2181 7.48621C13.0276 7.47064 12.8029 7.43392 12.5767 7.31867C12.2631 7.15888 12.0081 6.90391 11.8483 6.59031C11.7331 6.36412 11.6964 6.13935 11.6808 5.94885C11.6666 5.77538 11.6666 5.57055 11.6667 5.36023L11.6667 3.33366H11C10.5195 3.33366 10.2093 3.33431 9.9732 3.3536ZM13.3333 3.67884V5.33366C13.3333 5.58077 13.334 5.71598 13.3419 5.81313C13.3422 5.817 13.3426 5.82066 13.3429 5.82412C13.3463 5.82444 13.35 5.82476 13.3539 5.82507C13.451 5.83301 13.5862 5.83366 13.8333 5.83366H15.4882L13.3333 3.67884Z" />
  </svg>
`,DeleteIcon=w`
  <svg width="20" height="20" viewBox="0 0 20 20"  xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M18.3332 5.83333H1.6665V4.5H18.3332V5.83333Z" />
    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.66683 1.66667L13.3335 1.66667L13.3335 3L6.66683 3L6.66683 1.66667Z" />
    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.66683 5.83301V15.833C4.66683 16.4773 5.18916 16.9997 5.83349 16.9997H14.1668C14.8112 16.9997 15.3335 16.4773 15.3335 15.833V5.83301H16.6668V15.833C16.6668 17.2137 15.5475 18.333 14.1668 18.333H5.83349C4.45278 18.333 3.3335 17.2137 3.3335 15.833V5.83301H4.66683Z" />
    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.50016 15L7.50016 7.5L8.8335 7.5L8.8335 15L7.50016 15Z" />
    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.4998 7.5L12.4998 15L11.1665 15L11.1665 7.5L12.4998 7.5Z" />
</svg>`,LineWrapIcon=w`
<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M3.16665 2.5C3.53484 2.5 3.83331 2.79848 3.83331 3.16667L3.83331 16.8333C3.83331 17.2015 3.53484 17.5 3.16665 17.5C2.79846 17.5 2.49998 17.2015 2.49998 16.8333L2.49998 3.16667C2.49998 2.79848 2.79846 2.5 3.16665 2.5ZM9.31209 14.6598C9.58453 14.4121 9.60461 13.9905 9.35694 13.7181L8.85553 13.1665H11.8939C13.5757 13.1665 14.8333 11.6875 14.8333 9.99983C14.8333 8.31215 13.5757 6.83317 11.8939 6.83317H5.83334C5.46515 6.83317 5.16668 7.13164 5.16668 7.49983C5.16668 7.86802 5.46515 8.1665 5.83334 8.1665H11.8939C12.7226 8.1665 13.5 8.92609 13.5 9.99983C13.5 11.0736 12.7226 11.8332 11.8939 11.8332H8.85553L9.35694 11.2816C9.60461 11.0092 9.58453 10.5875 9.31209 10.3399C9.03966 10.0922 8.61802 10.1123 8.37035 10.3847L6.8552 12.0514C6.62404 12.3057 6.62404 12.694 6.8552 12.9483L8.37035 14.6149C8.61802 14.8874 9.03966 14.9075 9.31209 14.6598ZM16.1666 16.8333C16.1666 17.2015 16.4651 17.5 16.8333 17.5C17.2015 17.5 17.5 17.2015 17.5 16.8333L17.5 3.16667C17.5 2.79848 17.2015 2.5 16.8333 2.5C16.4651 2.5 16.1666 2.79848 16.1666 3.16667V16.8333Z"/>
</svg>
`;function FrameSelectionRect(q){if(q===null)return null;const j={left:q.left+"px",top:q.top+"px",width:q.width+"px",height:q.height+"px"};return y$1`
    <style>
      .affine-page-frame-selection-rect {
        position: absolute;
        background: var(--affine-selected-color);
        z-index: 1;
        pointer-events: none;
      }
    </style>
    <div
      class="affine-page-frame-selection-rect"
      style=${i$5(j)}
    ></div>
  `}function EmbedSelectedRectsContainer(q){return y$1`
    <style>
      .affine-page-selected-embed-rects-container > div {
        position: fixed;
        border: 3px solid var(--affine-primary-color);
      }
    </style>
    <div class="affine-page-selected-embed-rects-container resizable">
      ${q.map(j=>{const X={display:"block",left:j.left+"px",top:j.top+"px",width:j.width+"px",height:j.height+"px"};return y$1`
          <div class="resizes" style=${i$5(X)}>
            <div class="resize top-left"></div>
            <div class="resize top-right"></div>
            <div class="resize bottom-left"></div>
            <div class="resize bottom-right"></div>
          </div>
        `})}
    </div>
  `}function SelectedRectsContainer(q){return y$1`
    <style>
      .affine-page-selected-rects-container > div {
        position: fixed;
        background: var(--affine-selected-color);
        z-index: 1;
        pointer-events: none;
        border-radius: 5px;
      }
    </style>
    <div class="affine-page-selected-rects-container">
      ${q.map(j=>{const X={display:"block",left:j.left+"px",top:j.top+"px",width:j.width+"px",height:j.height+"px"};return y$1` <div style=${i$5(X)}></div>`})}
    </div>
  `}function EmbedEditingContainer(q,j){if(!q)return null;const X={left:q.position.x+"px",top:q.position.y+"px"};return y$1`
    <style>
      .affine-embed-editing-state-container > div {
          position: fixed;
          z-index: 1;
      }

      ${toolTipStyle}
    </style>

    <div class="affine-embed-editing-state-container">
      <div style=${i$5(X)} class="embed-editing-state">
        <format-bar-button
          class="has-tool-tip"
          width="100%"
          @click=${()=>{focusCaption(q.model),j.updateEmbedRects.emit([])}}
        >
          ${CaptionIcon}
          <tool-tip inert tip-position="right" role="tooltip">Caption</tool-tip>
        </format-bar-button>
        <format-bar-button
          class="has-tool-tip"
          width="100%"
          @click=${()=>{downloadImage(q.model)}}
        >
          ${DownloadIcon}
          <tool-tip inert tip-position="right" role="tooltip"
            >Download
          </tool-tip>
        </format-bar-button>
        <format-bar-button
          class="has-tool-tip"
          width="100%"
          @click=${()=>{copyImgToClip(q.model)}}
        >
          ${CopyIcon}
          <tool-tip inert tip-position="right" role="tooltip"
            >Copy to clipboard
          </tool-tip>
        </format-bar-button>
        <format-bar-button
          class="has-tool-tip"
          width="100%"
          @click="${()=>{q.model.page.deleteBlock(q.model),j.updateEmbedRects.emit([])}}"
        >
          ${DeleteIcon}
          <tool-tip inert tip-position="right" role="tooltip">Delete</tool-tip>
        </format-bar-button>
      </div>
    </div>
  `}function CodeBlockOptionContainer(q){if(q){const j={left:q.position.x+"px",top:q.position.y+"px"},X=document.querySelector(`[${BLOCK_ID_ATTR}="${q.model.id}"] .ql-syntax`);if(!X)return y$1``;const te=X.classList.contains("wrap");return y$1`
      <style>
        .affine-codeblock-option-container > div {
            position: fixed;
            z-index: 1;
        }

        ${toolTipStyle}
      </style>

      <div class="affine-codeblock-option-container">
        <div style=${i$5(j)} class="code-block-option">
          <format-bar-button
            class="has-tool-tip"
            width="100%"
            @click=${()=>copyCode(q)}
          >
            ${CopyIcon}
            <tool-tip inert tip-position="right" role="tooltip"
              >Copy to Clipboard
            </tool-tip>
          </format-bar-button>
          <format-bar-button
            class="has-tool-tip ${te?"filled":""}"
            width="100%"
            @click=${()=>toggleWrap(q)}
          >
            ${LineWrapIcon}
            <tool-tip inert tip-position="right" role="tooltip"
              >Wrap code
            </tool-tip>
          </format-bar-button>
          <format-bar-button
            class="has-tool-tip"
            width="100%"
            @click=${()=>deleteCodeBlock(q)}
          >
            ${DeleteIcon}
            <tool-tip inert tip-position="right" role="tooltip"
              >Delete
            </tool-tip>
          </format-bar-button>
        </div>
      </div>
    `}else return y$1``}const style$a=`.affine-default-viewport{overflow-x:hidden;overflow-y:auto;height:100%}.affine-default-page-block-container{font-family:var(--affine-font-family);font-size:var(--affine-font-base);line-height:var(--affine-line-height-base);color:var(--affine-text-color);font-weight:400;width:720px;margin:0 auto;cursor:default;min-height:calc(100% - 78px);height:auto;overflow:hidden;padding-bottom:150px}.affine-default-page-block-container>.affine-block-children-container{padding-left:0}.affine-default-page-block-title{height:0;width:100%;font-size:40px;line-height:50px;font-weight:700;outline:none;resize:none;border:0;font-family:inherit;color:inherit}.affine-default-page-block-title::placeholder{color:var(--affine-placeholder-color)}.affine-default-page-block-title:disabled{background-color:transparent}.affine-default-page-block-title-container{margin-top:78px}
`;var e$4,t$4,n$4=typeof Map=="function"?new Map:(e$4=[],t$4=[],{has:function(q){return e$4.indexOf(q)>-1},get:function(q){return t$4[e$4.indexOf(q)]},set:function(q,j){e$4.indexOf(q)===-1&&(e$4.push(q),t$4.push(j))},delete:function(q){var j=e$4.indexOf(q);j>-1&&(e$4.splice(j,1),t$4.splice(j,1))}}),o$4=function(q){return new Event(q,{bubbles:!0})};try{new Event("test")}catch(q){o$4=function(j){var X=document.createEvent("Event");return X.initEvent(j,!0,!1),X}}function r$2(q){var j=n$4.get(q);j&&j.destroy()}function i$4(q){var j=n$4.get(q);j&&j.update()}var l$4=null;typeof window>"u"||typeof window.getComputedStyle!="function"?((l$4=function(q){return q}).destroy=function(q){return q},l$4.update=function(q){return q}):((l$4=function(q,j){return q&&Array.prototype.forEach.call(q.length?q:[q],function(X){return function(te){if(te&&te.nodeName&&te.nodeName==="TEXTAREA"&&!n$4.has(te)){var ne,re=null,oe=null,le=null,fe=function(){te.clientWidth!==oe&&ve()},we=function(be){window.removeEventListener("resize",fe,!1),te.removeEventListener("input",ve,!1),te.removeEventListener("keyup",ve,!1),te.removeEventListener("autosize:destroy",we,!1),te.removeEventListener("autosize:update",ve,!1),Object.keys(be).forEach(function(Ce){te.style[Ce]=be[Ce]}),n$4.delete(te)}.bind(te,{height:te.style.height,resize:te.style.resize,overflowY:te.style.overflowY,overflowX:te.style.overflowX,wordWrap:te.style.wordWrap});te.addEventListener("autosize:destroy",we,!1),"onpropertychange"in te&&"oninput"in te&&te.addEventListener("keyup",ve,!1),window.addEventListener("resize",fe,!1),te.addEventListener("input",ve,!1),te.addEventListener("autosize:update",ve,!1),te.style.overflowX="hidden",te.style.wordWrap="break-word",n$4.set(te,{destroy:we,update:ve}),(ne=window.getComputedStyle(te,null)).resize==="vertical"?te.style.resize="none":ne.resize==="both"&&(te.style.resize="horizontal"),re=ne.boxSizing==="content-box"?-(parseFloat(ne.paddingTop)+parseFloat(ne.paddingBottom)):parseFloat(ne.borderTopWidth)+parseFloat(ne.borderBottomWidth),isNaN(re)&&(re=0),ve()}function ke(be){var Ce=te.style.width;te.style.width="0px",te.style.width=Ce,te.style.overflowY=be}function ye(){if(te.scrollHeight!==0){var be=function(Ce){for(var Ee=[];Ce&&Ce.parentNode&&Ce.parentNode instanceof Element;)Ce.parentNode.scrollTop&&(Ce.parentNode.style.scrollBehavior="auto",Ee.push([Ce.parentNode,Ce.parentNode.scrollTop])),Ce=Ce.parentNode;return function(){return Ee.forEach(function(Oe){var Ae=Oe[0];Ae.scrollTop=Oe[1],Ae.style.scrollBehavior=null})}}(te);te.style.height="",te.style.height=te.scrollHeight+re+"px",oe=te.clientWidth,be()}}function ve(){ye();var be=Math.round(parseFloat(te.style.height)),Ce=window.getComputedStyle(te,null),Ee=Ce.boxSizing==="content-box"?Math.round(parseFloat(Ce.height)):te.offsetHeight;if(Ee<be?Ce.overflowY==="hidden"&&(ke("scroll"),ye(),Ee=Ce.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(te,null).height)):te.offsetHeight):Ce.overflowY!=="hidden"&&(ke("hidden"),ye(),Ee=Ce.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(te,null).height)):te.offsetHeight),le!==Ee){le=Ee;var Oe=o$4("autosize:resized");try{te.dispatchEvent(Oe)}catch{}}}}(X)}),q}).destroy=function(q){return q&&Array.prototype.forEach.call(q.length?q:[q],r$2),q},l$4.update=function(q){return q&&Array.prototype.forEach.call(q.length?q:[q],i$4),q});var a$3=l$4,__defProp$g=Object.defineProperty,__getOwnPropDesc$g=Object.getOwnPropertyDescriptor,__decorateClass$g=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$g(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$g(j,X,ne),ne};function focusTextEnd(q){const j=q.value;q.focus(),q.value="",q.value=j}let DefaultPageBlockComponent=class extends NonShadowLitElement{constructor(){super(...arguments),this.readonly=!1,this.flavour="affine:page",this.getService=getService,this.lastSelectionPosition="start",this.frameSelectionRect=null,this.selectedRects=[],this.selectEmbedRects=[],this.signals={updateFrameSelectionRect:new Signal,updateSelectedRects:new Signal,updateEmbedRects:new Signal,updateEmbedEditingState:new Signal,updateCodeBlockOption:new Signal,nativeSelection:new Signal},this.isCompositionStart=!1,this._clearSelection=()=>{this.selection.state.clear(),this.signals.updateSelectedRects.emit([]),this.signals.updateEmbedRects.emit([]),this.signals.updateEmbedEditingState.emit(null)},this._handleCompositionStart=()=>{this.isCompositionStart=!0},this._handleCompositionEnd=()=>{this.isCompositionStart=!1},this._handleNativeKeydown=q=>{var j,X;if(!isControlledKeyboardEvent(q))if((q.key.length===1||q.key==="Enter")&&((j=window.getSelection())==null?void 0:j.type)==="Range"){const te=getCurrentRange();if(isMultiBlockRange(te)){const ne=getModelsByRange(te);deleteModels(this.page,ne)}window.removeEventListener("keydown",this._handleNativeKeydown)}else((X=window.getSelection())==null?void 0:X.type)!=="Range"&&window.removeEventListener("keydown",this._handleNativeKeydown)}}_onTitleKeyDown(q){const j=!this.page.isEmpty,{page:X,model:te,_title:ne}=this;if(q.key==="Enter"&&j){assertExists(ne.selectionStart);const re=ne.selectionStart,oe=ne.value.slice(0,re),le=ne.value.slice(re),fe=te.children[0],we={flavour:"affine:paragraph",text:new Text$1(X,le)},ke=X.addBlock(we,fe,0);X.updateBlock(te,{title:oe}),X.workspace.setPageMeta(X.id,{title:oe}),a$3.update(this._title),asyncFocusRichText(this.page,ke)}else q.key==="ArrowDown"&&j&&(q.preventDefault(),asyncFocusRichText(X,te.children[0].children[0].id))}_onTitleInput(q){const{page:j}=this;if(!this.model.id){const te=q.target.value,ne=j.addBlock({flavour:"affine:page",title:te}),re=j.addBlock({flavour:"affine:group"},ne);j.addBlock({flavour:"affine:paragraph"},re);return}let X=q.target.value;X.endsWith(`
`)&&(X=X.slice(0,-1)),j.updateBlock(this.model,{title:X}),j.workspace.setPageMeta(j.id,{title:X})}update(q){q.has("mouseRoot")&&q.has("page")&&(this.selection=new DefaultSelectionManager({page:this.page,mouseRoot:this.mouseRoot,signals:this.signals,container:this})),this._tryUpdateMetaTitle(),super.update(q)}_tryUpdateMetaTitle(){const{_title:q}=this;if(!q||q.value===void 0)return;const{page:j}=this;q.value!==j.meta.title&&j.workspace.setPageMeta(j.id,{title:this._title.value})}firstUpdated(){a$3(this._title),bindHotkeys(this.page,this.selection,this.signals,this.model),hotkey.enableHotkey(),this.model.propsUpdated.on(()=>{this.model.title!==this._title.value&&(this._title.value=this.model.title||"",this.requestUpdate())}),this.signals.updateFrameSelectionRect.on(q=>{this.frameSelectionRect=q,this.requestUpdate()}),this.signals.updateSelectedRects.on(q=>{this.selectedRects=q,this.requestUpdate()}),this.signals.updateEmbedRects.on(q=>{this.selectEmbedRects=q,this.requestUpdate()}),this.signals.updateEmbedEditingState.on(q=>{this.embedEditingState=q,this.requestUpdate()}),this.signals.updateCodeBlockOption.on(q=>{this.codeBlockOption=q,this.requestUpdate()}),this.signals.nativeSelection.on(q=>{q?window.addEventListener("keydown",this._handleNativeKeydown):window.removeEventListener("keydown",this._handleNativeKeydown)}),tryUpdateGroupSize(this.page,1),this.addEventListener("keydown",q=>{q.ctrlKey||q.metaKey||q.shiftKey||tryUpdateGroupSize(this.page,1)}),document.addEventListener("wheel",this._clearSelection),window.addEventListener("compositionstart",this._handleCompositionStart),window.addEventListener("compositionend",this._handleCompositionEnd),focusTextEnd(this._title)}disconnectedCallback(){super.disconnectedCallback(),removeHotkeys(),this.selection.dispose(),window.removeEventListener("compositionstart",this._handleCompositionStart),window.removeEventListener("compositionend",this._handleCompositionEnd),document.removeEventListener("wheel",this._clearSelection)}updated(q){const j=this.querySelector(".affine-default-page-block-title");this.readonly?j==null||j.setAttribute("disabled","disabled"):j==null||j.removeAttribute("disabled")}render(){this.setAttribute(BLOCK_ID_ATTR,this.model.id);const q=BlockChildrenContainer(this.model,this,()=>this.requestUpdate()),j=FrameSelectionRect(this.frameSelectionRect),X=SelectedRectsContainer(this.selectedRects),te=EmbedSelectedRectsContainer(this.selectEmbedRects),ne=EmbedEditingContainer(this.embedEditingState,this.signals),re=CodeBlockOptionContainer(this.codeBlockOption);return y$1`
      <div class="affine-default-viewport">
        <div class="affine-default-page-block-container">
          <div class="affine-default-page-block-title-container">
            <textarea
              .value=${this.model.title}
              placeholder="Title"
              class="affine-default-page-block-title"
              @keydown=${this._onTitleKeyDown}
              @input=${this._onTitleInput}
            ></textarea>
          </div>
          ${q}
        </div>
        ${X} ${j}
        ${te}${ne}
        ${re}
      </div>
    `}};DefaultPageBlockComponent.styles=i$c`
    ${r$6(style$a)}
  `;__decorateClass$g([e$8()],DefaultPageBlockComponent.prototype,"page",2);__decorateClass$g([e$8()],DefaultPageBlockComponent.prototype,"readonly",2);__decorateClass$g([e$8()],DefaultPageBlockComponent.prototype,"mouseRoot",2);__decorateClass$g([t$7()],DefaultPageBlockComponent.prototype,"frameSelectionRect",2);__decorateClass$g([t$7()],DefaultPageBlockComponent.prototype,"selectedRects",2);__decorateClass$g([t$7()],DefaultPageBlockComponent.prototype,"selectEmbedRects",2);__decorateClass$g([t$7()],DefaultPageBlockComponent.prototype,"embedEditingState",2);__decorateClass$g([t$7()],DefaultPageBlockComponent.prototype,"codeBlockOption",2);__decorateClass$g([e$8({hasChanged(){return!0}})],DefaultPageBlockComponent.prototype,"model",2);__decorateClass$g([i$9(".affine-default-page-block-title")],DefaultPageBlockComponent.prototype,"_title",2);DefaultPageBlockComponent=__decorateClass$g([e$9("affine-default-page")],DefaultPageBlockComponent);var __defProp$f=Object.defineProperty,__getOwnPropDesc$f=Object.getOwnPropertyDescriptor,__decorateClass$f=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$f(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$f(j,X,ne),ne};function getCommonRectStyle(q,j,X=!1,te=!1){return{position:"absolute",left:q.x+"px",top:q.y+"px",width:q.width+(X?0:PADDING_X)*j+"px",height:q.height+(X?0:PADDING_Y)*j+"px",borderRadius:`${10*j}px`,pointerEvents:"none",boxSizing:"border-box",backgroundColor:X&&te?"var(--affine-selected-color)":""}}function EdgelessHoverRect(q,j){if(!q)return null;const X=q.rect,te=q.block.flavour==="affine:shape",ne={...getCommonRectStyle(X,j,te),border:"1px solid var(--affine-primary-color)"};return y$1`
    <div class="affine-edgeless-hover-rect" style=${i$5(ne)}></div>
  `}const directionCursors={right:"ew-resize",left:"ew-resize",["left-top"]:"nw-resize",["right-top"]:"ne-resize",["left-bottom"]:"sw-resize",["right-bottom"]:"se-resize"};function Handle(q,j,X,te){const ne={position:"absolute",left:q-6+"px",top:j-6+"px",width:"12px",height:"12px",boxSizing:"border-box",borderRadius:"6px",zIndex:"10",border:"2px var(--affine-primary-color) solid",background:"white",cursor:directionCursors[X]},re=oe=>{te&&te(oe,X)};return y$1`
    <div
      aria-label=${`handle-${X}`}
      style=${i$5(ne)}
      @mousedown=${re}
    ></div>
  `}function EdgelessFrameSelectionRect(q){if(q===null)return y$1``;const j={left:q.left+"px",top:q.top+"px",width:q.width+"px",height:q.height+"px"};return y$1`
    <style>
      .affine-edgeless-frame-selection-rect {
        position: absolute;
        background: var(--affine-selected-color);
        z-index: 1;
        pointer-events: none;
      }
    </style>
    <div
      class="affine-edgeless-frame-selection-rect"
      style=${i$5(j)}
    ></div>
  `}function EdgelessBlockChild(q,j,X){const{xywh:te,flavour:ne}=q,re=ne==="affine:shape",{zoom:oe,viewportX:le,viewportY:fe}=X,[we,ke,ye,ve]=JSON.parse(te),be=(we-le-(re?SHAPE_PADDING/2:0))*oe,Ce=(ke-fe-(re?SHAPE_PADDING/2:0))*oe,Ee={position:"absolute",transform:`translate(${be}px, ${Ce}px) scale(${oe})`,transformOrigin:"0 0",width:ye+(re?SHAPE_PADDING:PADDING_X)+"px",height:ve+(re?SHAPE_PADDING:PADDING_Y)+"px",padding:re?"0px":`${PADDING_X/2}px`,background:re?"transparent":"white",pointerEvents:re?"none":"all",zIndex:re?"1":"0"};return y$1`
    <div
      data-test-id=${`affine-edgeless-block-child-${q.id}-container`}
      class="affine-edgeless-block-child"
      style=${i$5(Ee)}
    >
      ${BlockElement(q,j,!0)}
    </div>
  `}function EdgelessBlockChildrenContainer(q,j,X){const{zoom:te,viewportX:ne,viewportY:re}=X,oe=-ne*te,le=-re*te,fe={backgroundImage:"linear-gradient(#cccccc66 1px, transparent 1px),linear-gradient(90deg, #cccccc66 1px, transparent 1px)"},we={},ye=location.href.includes("grid")?fe:we;return y$1`
    <style>
      .affine-block-children-container.edgeless {
        padding-left: 0;
        position: relative;
        overflow: hidden;
        height: 100%;

        /* background-image: linear-gradient(#cccccc66 1px, transparent 1px),
                linear-gradient(90deg, #cccccc66 1px, transparent 1px); */
        background-size: ${20*X.zoom}px ${20*X.zoom}px;
        background-position: ${oe}px ${le}px;
        background-color: #fff;
      }
    </style>
    <div
      class="affine-block-children-container edgeless"
      style=${i$5(ye)}
    >
      ${c$2(q.children,ve=>ve.id,ve=>EdgelessBlockChild(ve,j,X))}
    </div>
  `}let EdgelessSelectedRect=class extends s$6{constructor(){super(...arguments),this.readonly=!1,this._dragStartInfo={startMouseX:0,startMouseY:0,absoluteX:0,absoluteY:0,width:0,height:0,direction:"left"},this._onHandleMouseDown=(q,j)=>{var X,te,ne;if(q.stopPropagation(),((X=this.state)==null?void 0:X.type)==="single"){const{rect:re,selected:{xywh:oe}}=this.state,[le,fe]=JSON.parse(oe);this._dragStartInfo={startMouseX:q.clientX,startMouseY:q.clientY,absoluteX:le,absoluteY:fe,width:re.width,height:re.height,direction:j},(te=this.parentElement)==null||te.addEventListener("mousemove",this._onDragMove),(ne=this.parentElement)==null||ne.addEventListener("mouseup",this._onDragEnd)}},this._onDragMove=q=>{if(this.state.type==="single"){const{selected:j,viewport:X}=this.state,{xywh:te}=j,[ne,re,oe,le]=JSON.parse(te);let fe=ne,we=re,ke=oe,ye=le;const ve=j.flavour==="affine:shape",be=this._dragStartInfo.startMouseX-q.clientX,Ce=this._dragStartInfo.startMouseY-q.clientY;switch(this._dragStartInfo.direction){case"right-top":we=this._dragStartInfo.absoluteY-Ce/this.zoom,ke=(this._dragStartInfo.width-be)/this.zoom,ye=(this._dragStartInfo.height+Ce)/this.zoom;break;case"left-bottom":fe=this._dragStartInfo.absoluteX-be/this.zoom,ke=(this._dragStartInfo.width+be)/this.zoom,ye=(this._dragStartInfo.height-Ce)/this.zoom;break;case"right-bottom":ke=(this._dragStartInfo.width-be)/this.zoom,ye=(this._dragStartInfo.height-Ce)/this.zoom;break;case"left-top":{we=this._dragStartInfo.absoluteY-Ce/this.zoom,fe=this._dragStartInfo.absoluteX-be/this.zoom,ke=(this._dragStartInfo.width+be)/this.zoom,ye=(this._dragStartInfo.height+Ce)/this.zoom;break}case"left":{fe=this._dragStartInfo.absoluteX-be/this.zoom,ke=(this._dragStartInfo.width+be)/this.zoom;break}case"right":{fe=ne,ke=(this._dragStartInfo.width-be)/this.zoom;break}}if(ke<GROUP_MIN_LENGTH&&(ke=GROUP_MIN_LENGTH,fe=ne),ye<GROUP_MIN_LENGTH&&(ye=GROUP_MIN_LENGTH,we=re),ke===oe&&fe===ne&&we===re&&ke===oe)return;const Oe=getBlockById(j.id),Ae=Oe==null?void 0:Oe.parentElement;Ae&&(Ae.style.width=ke+"px",Ae.style.translate=`translate(${fe}px, ${we}px) scale(${this.zoom})`),requestAnimationFrame(()=>{this.lock||(j.page.captureSync(),this.lock=!0),this.state.type==="single"?this.state.rect=getSelectionBoxBound(X,j.xywh):console.error("unexpected state.type:",this.state.type);const Te=JSON.stringify([fe,we,ke,ve?ye:((Oe==null?void 0:Oe.getBoundingClientRect().height)||0)/this.zoom]);j.xywh=Te,j.page.updateBlock(j,{xywh:Te})})}},this._onDragEnd=q=>{var j,X;this.lock=!1,this.state.type==="single"?this.state.selected.page.captureSync():console.error("unexpected state.type:",this.state.type),(j=this.parentElement)==null||j.removeEventListener("mousemove",this._onDragMove),(X=this.parentElement)==null||X.removeEventListener("mouseup",this._onDragEnd)}}_getHandles(q,j){if(j){const X=[q.x,q.y],te=[q.x+q.width,q.y],ne=[q.x,q.y+q.height],re=[q.x+q.width,q.y+q.height];return y$1`
        ${Handle(X[0],X[1],"left-top",this._onHandleMouseDown)}
        ${Handle(te[0],te[1],"right-top",this._onHandleMouseDown)}
        ${Handle(ne[0],ne[1],"left-bottom",this._onHandleMouseDown)}
        ${Handle(re[0],re[1],"right-bottom",this._onHandleMouseDown)}
      `}else{let X=null;if(this.state.type==="none")return X;if(!this.state.active){const te=[q.x,q.y+q.height/2+PADDING_Y*this.zoom/2],ne=[q.x+q.width+PADDING_X*this.zoom,q.y+q.height/2+PADDING_Y*this.zoom/2],re=Handle(te[0],te[1],"left",this._onHandleMouseDown),oe=Handle(ne[0],ne[1],"right",this._onHandleMouseDown);X=y$1` ${re}${oe} `}return X}}render(){if(this.state.type==="none")return y$1``;const q=this.state.selected.flavour==="affine:shape",j={border:`${this.state.active?2:1}px solid var(--affine-primary-color)`,zIndex:"3",...getCommonRectStyle(this.rect,this.zoom,q,!0)},X=this._getHandles(this.rect,q);return y$1`
      ${this.readonly?null:X}
      <div class="affine-edgeless-selected-rect" style=${i$5(j)}></div>
    `}};__decorateClass$f([e$8({type:Boolean})],EdgelessSelectedRect.prototype,"lock",2);__decorateClass$f([e$8({type:Number})],EdgelessSelectedRect.prototype,"zoom",2);__decorateClass$f([e$8({type:Object})],EdgelessSelectedRect.prototype,"state",2);__decorateClass$f([e$8()],EdgelessSelectedRect.prototype,"readonly",2);__decorateClass$f([e$8({type:Object})],EdgelessSelectedRect.prototype,"rect",2);EdgelessSelectedRect=__decorateClass$f([e$9("edgeless-selected-rect")],EdgelessSelectedRect);class SelectionController{constructor(j){this._blockSelectionState={type:"none"},this._hoverState=null,this._frameSelectionState=null,this._container=j}get isActive(){return this._blockSelectionState.type==="single"&&this._blockSelectionState.active}get hoverState(){return this._hoverState}get blockSelectionState(){return this._blockSelectionState}get frameSelectionState(){return this._frameSelectionState}get _page(){return this._container.page}get _blocks(){var j;return((j=this._page.root)==null?void 0:j.children)??[]}}class DefaultSelectionController extends SelectionController{constructor(){super(...arguments),this.mouseMode={type:"default"},this._startRange=null}_updateFrameSelectionState(j,X){this._frameSelectionState&&(this._frameSelectionState.end=new DOMPoint(j,X)),this._hoverState&&(this._blockSelectionState={type:"single",selected:this._hoverState.block,viewport:this._container.viewport,rect:this._hoverState.rect,active:!1})}_updateHoverState(j){j?this._hoverState={rect:getSelectionBoxBound(this._container.viewport,j.xywh),block:j}:this._hoverState=null}_handleClickOnSelected(j,X){const{viewport:te}=this._container;switch(this.blockSelectionState.type){case"none":this._blockSelectionState={type:"single",active:!1,viewport:this._container.viewport,selected:j,rect:getSelectionBoxBound(te,j.xywh)},this._container.signals.updateSelection.emit(this.blockSelectionState);break;case"single":this.blockSelectionState.selected===j?(this.blockSelectionState.active=!0,this._container.signals.updateSelection.emit(this.blockSelectionState)):(this._blockSelectionState={type:"single",viewport:this._container.viewport,active:!1,selected:j,rect:getSelectionBoxBound(te,j.xywh)},this._container.signals.updateSelection.emit(this.blockSelectionState)),handleNativeRangeClick(this._page,X);break}}onContainerClick(j){const{viewport:X}=this._container,[te,ne]=X.toModelCoord(j.x,j.y),re=pick(this._blocks,te,ne,this._container,j);re?this._handleClickOnSelected(re,j):(this._blockSelectionState={type:"none"},this._container.signals.updateSelection.emit(this.blockSelectionState),resetNativeSelection(null))}onContainerContextMenu(j){repairContextMenuRange(j)}onContainerDblClick(j){}onContainerDragStart(j){const{viewport:X}=this._container,[te,ne]=X.toModelCoord(j.x,j.y),re=pick(this._blocks,te,ne,this._container,j);re?this._handleClickOnSelected(re,j):(this._blockSelectionState={type:"none"},this._frameSelectionState={start:new DOMPoint(j.x,j.y),end:new DOMPoint(j.x,j.y)},this._container.signals.updateSelection.emit(this.blockSelectionState),resetNativeSelection(null)),this._startRange=caretRangeFromPoint(j.x,j.y)}onContainerDragMove(j){switch(this.blockSelectionState.type){case"none":break;case"single":if(this.blockSelectionState.active&&!matchFlavours(this.blockSelectionState.selected,["affine:shape"]))handleNativeRangeDragMove(this._startRange,j);else if(!this._frameSelectionState){const X=this.blockSelectionState.selected,[te,ne,re,oe]=JSON.parse(X.xywh),{zoom:le}=this._container.viewport,fe=JSON.stringify([te+j.delta.x/le,ne+j.delta.y/le,re,oe]);this._page.updateBlock(X,{xywh:fe}),this.blockSelectionState.rect=getSelectionBoxBound(this._container.viewport,fe),this._container.signals.updateSelection.emit(this.blockSelectionState)}break}this._frameSelectionState&&this._updateFrameSelectionState(j.x,j.y)}onContainerDragEnd(j){if(this.isActive){const{direction:X,selectedType:te}=getNativeSelectionMouseDragInfo(j);if(te==="Caret")return;showFormatQuickBar({direction:X})}else this.blockSelectionState.type==="single"&&(this._frameSelectionState||this._page.captureSync());this._frameSelectionState=null}onContainerMouseMove(j){const{viewport:X}=this._container,[te,ne]=X.toModelCoord(j.x,j.y),re=pick(this._blocks,te,ne,this._container,j);this._updateHoverState(re),this._container.signals.hoverUpdated.emit()}onContainerMouseOut(j){}syncBlockSelectionRect(){var j;if(this.blockSelectionState.type==="single"){const X=getSelectionBoxBound(this._container.viewport,this.blockSelectionState.selected.xywh);this.blockSelectionState.rect=X,this._container.signals.updateSelection.emit(this.blockSelectionState)}this._updateHoverState(((j=this._hoverState)==null?void 0:j.block)||null)}}class ShapeSelectionController extends SelectionController{constructor(){super(...arguments),this.mouseMode={type:"shape",color:"black",shape:"rectangle"},this._draggingShapeBlockId=null,this._draggingArea=null}onContainerClick(j){}onContainerContextMenu(j){}onContainerDblClick(j){}onContainerDragStart(j){this._container.page.captureSync();const[X,te]=this._container.viewport.toModelCoord(j.x,j.y);this._draggingShapeBlockId=this._container.page.addBlock({flavour:"affine:shape",xywh:JSON.stringify([X,te,0,0]),color:this.mouseMode.color,type:this.mouseMode.shape}),this._draggingArea={start:new DOMPoint(j.x,j.y),end:new DOMPoint(j.x,j.y)},this._container.signals.shapeUpdated.emit()}onContainerDragMove(j){assertExists(this._draggingShapeBlockId),assertExists(this._draggingArea),this._draggingArea.end=new DOMPoint(j.x,j.y);const[X,te]=this._container.viewport.toModelCoord(Math.min(this._draggingArea.start.x,this._draggingArea.end.x),Math.min(this._draggingArea.start.y,this._draggingArea.end.y)),ne=Math.abs(this._draggingArea.start.x-this._draggingArea.end.x)/this._container.viewport.zoom,re=Math.abs(this._draggingArea.start.y-this._draggingArea.end.y)/this._container.viewport.zoom;this._container.page.updateBlockById(this._draggingShapeBlockId,{xywh:JSON.stringify([X,te,ne,re])}),this._container.signals.shapeUpdated.emit()}onContainerDragEnd(j){this._draggingShapeBlockId=null,this._draggingArea=null,this._container.page.captureSync(),this._container.signals.shapeUpdated.emit()}onContainerMouseMove(j){}onContainerMouseOut(j){}syncBlockSelectionRect(){}}const MIN_ZOOM=.3;class ViewportState{constructor(){this._width=0,this._height=0,this._zoom=1,this._centerX=0,this._centerY=0}get zoom(){return this._zoom}get centerX(){return this._centerX}get centerY(){return this._centerY}get viewportX(){return this._centerX-this._width/2/this._zoom}get viewportY(){return this._centerY-this._height/2/this._zoom}get width(){return this._width}get height(){return this._height}toModelCoord(j,X){return[this.viewportX+j/this._zoom,this.viewportY+X/this._zoom]}toViewCoord(j,X){return[(j-this.viewportX)*this._zoom,(X-this.viewportY)*this._zoom]}setSize(j,X){this._width=j,this._height=X}setZoom(j){this._zoom=j}applyDeltaZoom(j){const X=this.zoom*(100+j)/100,te=Math.max(X,MIN_ZOOM);this.setZoom(te)}applyDeltaCenter(j,X){this._centerX+=j,this._centerY+=X}setCenter(j,X){this._centerX=j,this._centerY=X}}class EdgelessSelectionManager{constructor(j){this._mouseMode={type:"default"},this._previousSelectedShape=null,this._onContainerDragStart=X=>{if(!this._container.readonly)return this.currentController.onContainerDragStart(X)},this._onContainerDragMove=X=>{if(!this._container.readonly)return this.currentController.onContainerDragMove(X)},this._onContainerDragEnd=X=>{if(!this._container.readonly)return this.currentController.onContainerDragEnd(X)},this._onContainerClick=X=>this.currentController.onContainerClick(X),this._onContainerDblClick=X=>this.currentController.onContainerDblClick(X),this._onContainerMouseMove=X=>this._selectionManagers[this.mouseMode.type].onContainerMouseMove(X),this._onContainerMouseOut=X=>this._selectionManagers[this.mouseMode.type].onContainerMouseOut(X),this._onContainerContextMenu=X=>this._selectionManagers[this.mouseMode.type].onContainerContextMenu(X),this._container=j,this._selectionManagers={default:new DefaultSelectionController(this._container),shape:new ShapeSelectionController(this._container)},this._mouseDisposeCallback=initMouseEventHandlers(this._container,this._onContainerDragStart,this._onContainerDragMove,this._onContainerDragEnd,this._onContainerClick,this._onContainerDblClick,this._onContainerMouseMove,this._onContainerMouseOut,this._onContainerContextMenu),this._selectionUpdateCallback=this._container.signals.updateSelection.on(X=>{if(this._previousSelectedShape){const te=getBlockById(this._previousSelectedShape.id);te&&(te.selected=!1),this._previousSelectedShape=null}if(X.type==="single"&&matchFlavours(X.selected,["affine:shape"])){const te=getBlockById(X.selected.id);te&&(te.selected=!0),this._previousSelectedShape=X.selected}}),this._wheelDisposeCallback=initWheelEventHandlers(j)}get isActive(){return this.currentController.isActive}get mouseMode(){return this._mouseMode}set mouseMode(j){this._mouseMode=j,this._selectionManagers[this._mouseMode.type].mouseMode=this._mouseMode}get blockSelectionState(){return this.currentController.blockSelectionState}get currentController(){return this._selectionManagers[this.mouseMode.type]}get hoverState(){return this.currentController.hoverState?this.currentController.hoverState:null}get isHoveringShape(){var j;return((j=this.currentController.hoverState)==null?void 0:j.block.flavour)==="affine:shape"}get frameSelectionRect(){if(!this.currentController.frameSelectionState)return null;const{start:j,end:X}=this.currentController.frameSelectionState,te=Math.min(j.x,X.x),ne=Math.min(j.y,X.y),re=Math.max(j.x,X.x),oe=Math.max(j.y,X.y);return new DOMRect(te,ne,re-te,oe-ne)}syncBlockSelectionRect(){return this.currentController.syncBlockSelectionRect()}dispose(){this._mouseDisposeCallback(),this._wheelDisposeCallback(),this._selectionUpdateCallback.dispose()}}const style$9=`.affine-edgeless-page-block-container{position:relative;box-sizing:border-box;overflow:hidden;height:100%;font-family:var(--affine-font-family);font-size:var(--affine-font-base);line-height:var(--affine-line-height-base);color:var(--affine-edgeless-text-color);font-weight:400}
`;var __defProp$e=Object.defineProperty,__getOwnPropDesc$e=Object.getOwnPropertyDescriptor,__decorateClass$e=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$e(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$e(j,X,ne),ne};let EdgelessPageBlockComponent=class extends NonShadowLitElement{constructor(){super(...arguments),this.readonly=!1,this.flavour="edgeless",this.getService=getService,this.viewport=new ViewportState,this.signals={viewportUpdated:new Signal,updateSelection:new Signal,hoverUpdated:new Signal,shapeUpdated:new Signal},this._handleBackspace=q=>{if(this._selection.blockSelectionState.type==="single"){const j=this._selection.blockSelectionState.selected;j.flavour==="affine:shape"?(this.page.captureSync(),this.page.deleteBlock(j),this._selection=new EdgelessSelectionManager(this),this.signals.updateSelection.emit({type:"none"})):handleBackspace(this.page,q)}}}_bindHotkeys(){const{page:q}=this;hotkey.addListener(HOTKEYS.BACKSPACE,this._handleBackspace),hotkey.addListener(HOTKEYS.H1,()=>this._updateType("affine:paragraph","h1",q)),hotkey.addListener(HOTKEYS.H2,()=>this._updateType("affine:paragraph","h2",q)),hotkey.addListener(HOTKEYS.H3,()=>this._updateType("affine:paragraph","h3",q)),hotkey.addListener(HOTKEYS.H4,()=>this._updateType("affine:paragraph","h4",q)),hotkey.addListener(HOTKEYS.H5,()=>this._updateType("affine:paragraph","h5",q)),hotkey.addListener(HOTKEYS.H6,()=>this._updateType("affine:paragraph","h6",q)),hotkey.addListener(HOTKEYS.NUMBERED_LIST,()=>this._updateType("affine:list","numbered",q)),hotkey.addListener(HOTKEYS.BULLETED,()=>this._updateType("affine:list","bulleted",q)),hotkey.addListener(HOTKEYS.TEXT,()=>this._updateType("affine:paragraph","text",q)),bindCommonHotkey(q)}_updateType(q,j,X){updateSelectedTextType(q,j,X)}_removeHotkeys(){hotkey.removeListener([HOTKEYS.BACKSPACE,HOTKEYS.H1,HOTKEYS.H2,HOTKEYS.H3,HOTKEYS.H4,HOTKEYS.H5,HOTKEYS.H6,HOTKEYS.SHIFT_DOWN,HOTKEYS.NUMBERED_LIST,HOTKEYS.BULLETED,HOTKEYS.TEXT],this.flavour),removeCommonHotKey()}_initViewport(){const q=this.mouseRoot.getBoundingClientRect();this.viewport.setSize(q.width,q.height);const j=this.model.children[0],[X,te,ne,re]=JSON.parse(j.xywh);this.viewport.setCenter(X+ne/2,te+re/2)}_clearSelection(){requestAnimationFrame(()=>{this._selection.isActive||resetNativeSelection(null)})}update(q){q.has("mouseRoot")&&q.has("page")&&(this._selection=new EdgelessSelectionManager(this)),q.has("mouseMode")&&(this._selection.mouseMode=this.mouseMode),super.update(q)}firstUpdated(){this.model.children.forEach(q=>{q.propsUpdated.on(()=>this._selection.syncBlockSelectionRect())}),this.signals.viewportUpdated.on(()=>{this.style.setProperty("--affine-zoom",`${this.viewport.zoom}`),this._selection.syncBlockSelectionRect(),this.requestUpdate()}),this.signals.hoverUpdated.on(()=>this.requestUpdate()),this.signals.updateSelection.on(()=>this.requestUpdate()),this.signals.shapeUpdated.on(()=>this.requestUpdate()),this._historyDisposable=this.page.signals.historyUpdated.on(()=>{this._clearSelection(),this.requestUpdate()}),this._bindHotkeys(),tryUpdateGroupSize(this.page,this.viewport.zoom),this.addEventListener("keydown",q=>{q.ctrlKey||q.metaKey||q.shiftKey||tryUpdateGroupSize(this.page,this.viewport.zoom)}),requestAnimationFrame(()=>{this._initViewport(),this.requestUpdate()}),this._clearSelection()}disconnectedCallback(){super.disconnectedCallback(),this.signals.updateSelection.dispose(),this.signals.viewportUpdated.dispose(),this.signals.hoverUpdated.dispose(),this.signals.shapeUpdated.dispose(),this._historyDisposable.dispose(),this._selection.dispose(),this._removeHotkeys()}render(){this.setAttribute(BLOCK_ID_ATTR,this.model.id);const q=EdgelessBlockChildrenContainer(this.model,this,this.viewport),{_selection:j}=this,{frameSelectionRect:X}=j,te=this._selection.blockSelectionState,{zoom:ne}=this.viewport,re=EdgelessFrameSelectionRect(X),oe=EdgelessHoverRect(j.hoverState,ne);return y$1`
      <style></style>
      <div class="affine-edgeless-page-block-container">
        ${q} ${oe} ${re}
        ${te.type!=="none"?y$1`<edgeless-selected-rect
              .state=${te}
              .rect=${te.rect}
              .zoom=${ne}
              .readonly=${this.readonly}
            ></edgeless-selected-rect>`:null}
      </div>
    `}};EdgelessPageBlockComponent.styles=i$c`
    ${r$6(style$9)}
  `;__decorateClass$e([e$8()],EdgelessPageBlockComponent.prototype,"page",2);__decorateClass$e([e$8()],EdgelessPageBlockComponent.prototype,"readonly",2);__decorateClass$e([e$8()],EdgelessPageBlockComponent.prototype,"mouseRoot",2);__decorateClass$e([e$8()],EdgelessPageBlockComponent.prototype,"mouseMode",2);__decorateClass$e([e$8({hasChanged(){return!0}})],EdgelessPageBlockComponent.prototype,"model",2);__decorateClass$e([t$7()],EdgelessPageBlockComponent.prototype,"viewport",2);EdgelessPageBlockComponent=__decorateClass$e([e$9("affine-edgeless-page")],EdgelessPageBlockComponent);var __defProp$d=Object.defineProperty,__getOwnPropDesc$d=Object.getOwnPropertyDescriptor,__decorateClass$d=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$d(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$d(j,X,ne),ne};let CounterBlock=class extends s$6{constructor(){super(),this.count=0}async _notify(){this.count++,await this.updateComplete;const q={detail:this.count,bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("block-count-update",q))}render(){return y$1` <div @click=${this._notify}>${this.count}</div> `}};__decorateClass$d([e$8()],CounterBlock.prototype,"count",2);CounterBlock=__decorateClass$d([e$9("counter-block")],CounterBlock);var quillCursorsExports={},quillCursors={get exports(){return quillCursorsExports},set exports(q){quillCursorsExports=q}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(q,j){(function(X,te){q.exports=te()})(self,()=>(()=>{var X={582:(oe,le,fe)=>{fe.d(le,{Z:()=>be});var we=fe(81),ke=fe.n(we),ye=fe(645),ve=fe.n(ye)()(ke());ve.push([oe.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const be=ve},645:oe=>{oe.exports=function(le){var fe=[];return fe.toString=function(){return this.map(function(we){var ke="",ye=we[5]!==void 0;return we[4]&&(ke+="@supports (".concat(we[4],") {")),we[2]&&(ke+="@media ".concat(we[2]," {")),ye&&(ke+="@layer".concat(we[5].length>0?" ".concat(we[5]):""," {")),ke+=le(we),ye&&(ke+="}"),we[2]&&(ke+="}"),we[4]&&(ke+="}"),ke}).join("")},fe.i=function(we,ke,ye,ve,be){typeof we=="string"&&(we=[[null,we,void 0]]);var Ce={};if(ye)for(var Ee=0;Ee<this.length;Ee++){var Oe=this[Ee][0];Oe!=null&&(Ce[Oe]=!0)}for(var Ae=0;Ae<we.length;Ae++){var Te=[].concat(we[Ae]);ye&&Ce[Te[0]]||(be!==void 0&&(Te[5]===void 0||(Te[1]="@layer".concat(Te[5].length>0?" ".concat(Te[5]):""," {").concat(Te[1],"}")),Te[5]=be),ke&&(Te[2]&&(Te[1]="@media ".concat(Te[2]," {").concat(Te[1],"}")),Te[2]=ke),ve&&(Te[4]?(Te[1]="@supports (".concat(Te[4],") {").concat(Te[1],"}"),Te[4]=ve):Te[4]="".concat(ve)),fe.push(Te))}},fe}},81:oe=>{oe.exports=function(le){return le[1]}},465:(oe,le,fe)=>{oe=fe.nmd(oe);var we="__lodash_hash_undefined__",ke=9007199254740991,ye="[object Arguments]",ve="[object Boolean]",be="[object Date]",Ce="[object Function]",Ee="[object GeneratorFunction]",Oe="[object Map]",Ae="[object Number]",Te="[object Object]",Se="[object Promise]",$e="[object RegExp]",Le="[object Set]",Pe="[object String]",Re="[object Symbol]",Ne="[object WeakMap]",je="[object ArrayBuffer]",Ie="[object DataView]",De="[object Float32Array]",Ve="[object Float64Array]",ze="[object Int8Array]",qe="[object Int16Array]",Xe="[object Int32Array]",tt="[object Uint8Array]",at="[object Uint8ClampedArray]",pt="[object Uint16Array]",st="[object Uint32Array]",it=/\w*$/,Ge=/^\[object .+?Constructor\]$/,et=/^(?:0|[1-9]\d*)$/,Je={};Je[ye]=Je["[object Array]"]=Je[je]=Je[Ie]=Je[ve]=Je[be]=Je[De]=Je[Ve]=Je[ze]=Je[qe]=Je[Xe]=Je[Oe]=Je[Ae]=Je[Te]=Je[$e]=Je[Le]=Je[Pe]=Je[Re]=Je[tt]=Je[at]=Je[pt]=Je[st]=!0,Je["[object Error]"]=Je[Ce]=Je[Ne]=!1;var ft=typeof fe.g=="object"&&fe.g&&fe.g.Object===Object&&fe.g,dt=typeof self=="object"&&self&&self.Object===Object&&self,Qe=ft||dt||Function("return this")(),ht=le&&!le.nodeType&&le,mt=ht&&oe&&!oe.nodeType&&oe,vt=mt&&mt.exports===ht;function wt(yt,Ct){return yt.set(Ct[0],Ct[1]),yt}function St(yt,Ct){return yt.add(Ct),yt}function At(yt,Ct,Ot,Bt){var Ut=-1,Kt=yt?yt.length:0;for(Bt&&Kt&&(Ot=yt[++Ut]);++Ut<Kt;)Ot=Ct(Ot,yt[Ut],Ut,yt);return Ot}function Et(yt){var Ct=!1;if(yt!=null&&typeof yt.toString!="function")try{Ct=!!(yt+"")}catch{}return Ct}function Tt(yt){var Ct=-1,Ot=Array(yt.size);return yt.forEach(function(Bt,Ut){Ot[++Ct]=[Ut,Bt]}),Ot}function Ze(yt,Ct){return function(Ot){return yt(Ct(Ot))}}function rt(yt){var Ct=-1,Ot=Array(yt.size);return yt.forEach(function(Bt){Ot[++Ct]=Bt}),Ot}var lt,nt=Array.prototype,Ye=Function.prototype,Be=Object.prototype,Ue=Qe["__core-js_shared__"],He=(lt=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||""))?"Symbol(src)_1."+lt:"",ot=Ye.toString,ut=Be.hasOwnProperty,gt=Be.toString,$t=RegExp("^"+ot.call(ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=vt?Qe.Buffer:void 0,Me=Qe.Symbol,Fe=Qe.Uint8Array,We=Ze(Object.getPrototypeOf,Object),ct=Object.create,_t=Be.propertyIsEnumerable,xt=nt.splice,Pt=Object.getOwnPropertySymbols,Nt=Ke?Ke.isBuffer:void 0,Dt=Ze(Object.keys,Object),Ht=pn(Qe,"DataView"),Mt=pn(Qe,"Map"),an=pn(Qe,"Promise"),Qt=pn(Qe,"Set"),rn=pn(Qe,"WeakMap"),on=pn(Object,"create"),En=mn(Ht),dn=mn(Mt),Tn=mn(an),Sn=mn(Qt),In=mn(rn),On=Me?Me.prototype:void 0,Bn=On?On.valueOf:void 0;function fn(yt){var Ct=-1,Ot=yt?yt.length:0;for(this.clear();++Ct<Ot;){var Bt=yt[Ct];this.set(Bt[0],Bt[1])}}function nn(yt){var Ct=-1,Ot=yt?yt.length:0;for(this.clear();++Ct<Ot;){var Bt=yt[Ct];this.set(Bt[0],Bt[1])}}function sn(yt){var Ct=-1,Ot=yt?yt.length:0;for(this.clear();++Ct<Ot;){var Bt=yt[Ct];this.set(Bt[0],Bt[1])}}function wn(yt){this.__data__=new nn(yt)}function ln(yt,Ct,Ot){var Bt=yt[Ct];ut.call(yt,Ct)&&Nn(Bt,Ot)&&(Ot!==void 0||Ct in yt)||(yt[Ct]=Ot)}function An(yt,Ct){for(var Ot=yt.length;Ot--;)if(Nn(yt[Ot][0],Ct))return Ot;return-1}function cn(yt,Ct,Ot,Bt,Ut,Kt,Gt){var jt;if(Bt&&(jt=Kt?Bt(yt,Ut,Kt,Gt):Bt(yt)),jt!==void 0)return jt;if(!Yt(yt))return yt;var Jt=bt(yt);if(Jt){if(jt=function(It){var Wt=It.length,en=It.constructor(Wt);return Wt&&typeof It[0]=="string"&&ut.call(It,"index")&&(en.index=It.index,en.input=It.input),en}(yt),!Ct)return function(It,Wt){var en=-1,Vt=It.length;for(Wt||(Wt=Array(Vt));++en<Vt;)Wt[en]=It[en];return Wt}(yt,jt)}else{var Xt=gn(yt),yn=Xt==Ce||Xt==Ee;if(Lt(yt))return function(It,Wt){if(Wt)return It.slice();var en=new It.constructor(It.length);return It.copy(en),en}(yt,Ct);if(Xt==Te||Xt==ye||yn&&!Kt){if(Et(yt))return Kt?yt:{};if(jt=function(It){return typeof It.constructor!="function"||xn(It)?{}:Yt(Wt=We(It))?ct(Wt):{};var Wt}(yn?{}:yt),!Ct)return function(It,Wt){return Dn(It,Rn(It),Wt)}(yt,function(It,Wt){return It&&Dn(Wt,Ft(Wt),It)}(jt,yt))}else{if(!Je[Xt])return Kt?yt:{};jt=function(It,Wt,en,Vt){var qt,un=It.constructor;switch(Wt){case je:return Ln(It);case ve:case be:return new un(+It);case Ie:return function(zt,tn){var Zt=tn?Ln(zt.buffer):zt.buffer;return new zt.constructor(Zt,zt.byteOffset,zt.byteLength)}(It,Vt);case De:case Ve:case ze:case qe:case Xe:case tt:case at:case pt:case st:return function(zt,tn){var Zt=tn?Ln(zt.buffer):zt.buffer;return new zt.constructor(Zt,zt.byteOffset,zt.length)}(It,Vt);case Oe:return function(zt,tn,Zt){return At(tn?Zt(Tt(zt),!0):Tt(zt),wt,new zt.constructor)}(It,Vt,en);case Ae:case Pe:return new un(It);case $e:return function(zt){var tn=new zt.constructor(zt.source,it.exec(zt));return tn.lastIndex=zt.lastIndex,tn}(It);case Le:return function(zt,tn,Zt){return At(tn?Zt(rt(zt),!0):rt(zt),St,new zt.constructor)}(It,Vt,en);case Re:return qt=It,Bn?Object(Bn.call(qt)):{}}}(yt,Xt,cn,Ct)}}Gt||(Gt=new wn);var bn=Gt.get(yt);if(bn)return bn;if(Gt.set(yt,jt),!Jt)var Cn=Ot?function(It){return function(Wt,en,Vt){var qt=en(Wt);return bt(Wt)?qt:function(un,zt){for(var tn=-1,Zt=zt.length,hn=un.length;++tn<Zt;)un[hn+tn]=zt[tn];return un}(qt,Vt(Wt))}(It,Ft,Rn)}(yt):Ft(yt);return function(It,Wt){for(var en=-1,Vt=It?It.length:0;++en<Vt&&Wt(It[en],en)!==!1;);}(Cn||yt,function(It,Wt){Cn&&(It=yt[Wt=It]),ln(jt,Wt,cn(It,Ct,Ot,Bt,Wt,yt,Gt))}),jt}function Ln(yt){var Ct=new yt.constructor(yt.byteLength);return new Fe(Ct).set(new Fe(yt)),Ct}function Dn(yt,Ct,Ot,Bt){Ot||(Ot={});for(var Ut=-1,Kt=Ct.length;++Ut<Kt;){var Gt=Ct[Ut],jt=Bt?Bt(Ot[Gt],yt[Gt],Gt,Ot,yt):void 0;ln(Ot,Gt,jt===void 0?yt[Gt]:jt)}return Ot}function vn(yt,Ct){var Ot,Bt,Ut=yt.__data__;return((Bt=typeof(Ot=Ct))=="string"||Bt=="number"||Bt=="symbol"||Bt=="boolean"?Ot!=="__proto__":Ot===null)?Ut[typeof Ct=="string"?"string":"hash"]:Ut.map}function pn(yt,Ct){var Ot=function(Bt,Ut){return Bt==null?void 0:Bt[Ut]}(yt,Ct);return function(Bt){return!(!Yt(Bt)||(Ut=Bt,He&&He in Ut))&&(Rt(Bt)||Et(Bt)?$t:Ge).test(mn(Bt));var Ut}(Ot)?Ot:void 0}fn.prototype.clear=function(){this.__data__=on?on(null):{}},fn.prototype.delete=function(yt){return this.has(yt)&&delete this.__data__[yt]},fn.prototype.get=function(yt){var Ct=this.__data__;if(on){var Ot=Ct[yt];return Ot===we?void 0:Ot}return ut.call(Ct,yt)?Ct[yt]:void 0},fn.prototype.has=function(yt){var Ct=this.__data__;return on?Ct[yt]!==void 0:ut.call(Ct,yt)},fn.prototype.set=function(yt,Ct){return this.__data__[yt]=on&&Ct===void 0?we:Ct,this},nn.prototype.clear=function(){this.__data__=[]},nn.prototype.delete=function(yt){var Ct=this.__data__,Ot=An(Ct,yt);return!(Ot<0||(Ot==Ct.length-1?Ct.pop():xt.call(Ct,Ot,1),0))},nn.prototype.get=function(yt){var Ct=this.__data__,Ot=An(Ct,yt);return Ot<0?void 0:Ct[Ot][1]},nn.prototype.has=function(yt){return An(this.__data__,yt)>-1},nn.prototype.set=function(yt,Ct){var Ot=this.__data__,Bt=An(Ot,yt);return Bt<0?Ot.push([yt,Ct]):Ot[Bt][1]=Ct,this},sn.prototype.clear=function(){this.__data__={hash:new fn,map:new(Mt||nn),string:new fn}},sn.prototype.delete=function(yt){return vn(this,yt).delete(yt)},sn.prototype.get=function(yt){return vn(this,yt).get(yt)},sn.prototype.has=function(yt){return vn(this,yt).has(yt)},sn.prototype.set=function(yt,Ct){return vn(this,yt).set(yt,Ct),this},wn.prototype.clear=function(){this.__data__=new nn},wn.prototype.delete=function(yt){return this.__data__.delete(yt)},wn.prototype.get=function(yt){return this.__data__.get(yt)},wn.prototype.has=function(yt){return this.__data__.has(yt)},wn.prototype.set=function(yt,Ct){var Ot=this.__data__;if(Ot instanceof nn){var Bt=Ot.__data__;if(!Mt||Bt.length<199)return Bt.push([yt,Ct]),this;Ot=this.__data__=new sn(Bt)}return Ot.set(yt,Ct),this};var Rn=Pt?Ze(Pt,Object):function(){return[]},gn=function(yt){return gt.call(yt)};function Mn(yt,Ct){return!!(Ct=Ct??ke)&&(typeof yt=="number"||et.test(yt))&&yt>-1&&yt%1==0&&yt<Ct}function xn(yt){var Ct=yt&&yt.constructor;return yt===(typeof Ct=="function"&&Ct.prototype||Be)}function mn(yt){if(yt!=null){try{return ot.call(yt)}catch{}try{return yt+""}catch{}}return""}function Nn(yt,Ct){return yt===Ct||yt!=yt&&Ct!=Ct}(Ht&&gn(new Ht(new ArrayBuffer(1)))!=Ie||Mt&&gn(new Mt)!=Oe||an&&gn(an.resolve())!=Se||Qt&&gn(new Qt)!=Le||rn&&gn(new rn)!=Ne)&&(gn=function(yt){var Ct=gt.call(yt),Ot=Ct==Te?yt.constructor:void 0,Bt=Ot?mn(Ot):void 0;if(Bt)switch(Bt){case En:return Ie;case dn:return Oe;case Tn:return Se;case Sn:return Le;case In:return Ne}return Ct});var bt=Array.isArray;function kt(yt){return yt!=null&&function(Ct){return typeof Ct=="number"&&Ct>-1&&Ct%1==0&&Ct<=ke}(yt.length)&&!Rt(yt)}var Lt=Nt||function(){return!1};function Rt(yt){var Ct=Yt(yt)?gt.call(yt):"";return Ct==Ce||Ct==Ee}function Yt(yt){var Ct=typeof yt;return!!yt&&(Ct=="object"||Ct=="function")}function Ft(yt){return kt(yt)?function(Ct,Ot){var Bt=bt(Ct)||function(jt){return function(Jt){return function(Xt){return!!Xt&&typeof Xt=="object"}(Jt)&&kt(Jt)}(jt)&&ut.call(jt,"callee")&&(!_t.call(jt,"callee")||gt.call(jt)==ye)}(Ct)?function(jt,Jt){for(var Xt=-1,yn=Array(jt);++Xt<jt;)yn[Xt]=Jt(Xt);return yn}(Ct.length,String):[],Ut=Bt.length,Kt=!!Ut;for(var Gt in Ct)!Ot&&!ut.call(Ct,Gt)||Kt&&(Gt=="length"||Mn(Gt,Ut))||Bt.push(Gt);return Bt}(yt):function(Ct){if(!xn(Ct))return Dt(Ct);var Ot=[];for(var Bt in Object(Ct))ut.call(Ct,Bt)&&Bt!="constructor"&&Ot.push(Bt);return Ot}(yt)}oe.exports=function(yt){return cn(yt,!0,!0)}},307:(oe,le,fe)=>{oe=fe.nmd(oe);var we="__lodash_hash_undefined__",ke=9007199254740991,ye="[object Arguments]",ve="[object Array]",be="[object Boolean]",Ce="[object Date]",Ee="[object Error]",Oe="[object Function]",Ae="[object Map]",Te="[object Number]",Se="[object Object]",$e="[object Promise]",Le="[object RegExp]",Pe="[object Set]",Re="[object String]",Ne="[object WeakMap]",je="[object ArrayBuffer]",Ie="[object DataView]",De=/^\[object .+?Constructor\]$/,Ve=/^(?:0|[1-9]\d*)$/,ze={};ze["[object Float32Array]"]=ze["[object Float64Array]"]=ze["[object Int8Array]"]=ze["[object Int16Array]"]=ze["[object Int32Array]"]=ze["[object Uint8Array]"]=ze["[object Uint8ClampedArray]"]=ze["[object Uint16Array]"]=ze["[object Uint32Array]"]=!0,ze[ye]=ze[ve]=ze[je]=ze[be]=ze[Ie]=ze[Ce]=ze[Ee]=ze[Oe]=ze[Ae]=ze[Te]=ze[Se]=ze[Le]=ze[Pe]=ze[Re]=ze[Ne]=!1;var qe=typeof fe.g=="object"&&fe.g&&fe.g.Object===Object&&fe.g,Xe=typeof self=="object"&&self&&self.Object===Object&&self,tt=qe||Xe||Function("return this")(),at=le&&!le.nodeType&&le,pt=at&&oe&&!oe.nodeType&&oe,st=pt&&pt.exports===at,it=st&&qe.process,Ge=function(){try{return it&&it.binding&&it.binding("util")}catch{}}(),et=Ge&&Ge.isTypedArray;function Je(bt,kt){for(var Lt=-1,Rt=bt==null?0:bt.length;++Lt<Rt;)if(kt(bt[Lt],Lt,bt))return!0;return!1}function ft(bt){var kt=-1,Lt=Array(bt.size);return bt.forEach(function(Rt,Yt){Lt[++kt]=[Yt,Rt]}),Lt}function dt(bt){var kt=-1,Lt=Array(bt.size);return bt.forEach(function(Rt){Lt[++kt]=Rt}),Lt}var Qe,ht,mt,vt=Array.prototype,wt=Function.prototype,St=Object.prototype,At=tt["__core-js_shared__"],Et=wt.toString,Tt=St.hasOwnProperty,Ze=(Qe=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||""))?"Symbol(src)_1."+Qe:"",rt=St.toString,lt=RegExp("^"+Et.call(Tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=st?tt.Buffer:void 0,Ye=tt.Symbol,Be=tt.Uint8Array,Ue=St.propertyIsEnumerable,He=vt.splice,ot=Ye?Ye.toStringTag:void 0,ut=Object.getOwnPropertySymbols,gt=nt?nt.isBuffer:void 0,$t=(ht=Object.keys,mt=Object,function(bt){return ht(mt(bt))}),Ke=sn(tt,"DataView"),Me=sn(tt,"Map"),Fe=sn(tt,"Promise"),We=sn(tt,"Set"),ct=sn(tt,"WeakMap"),_t=sn(Object,"create"),xt=cn(Ke),Pt=cn(Me),Nt=cn(Fe),Dt=cn(We),Ht=cn(ct),Mt=Ye?Ye.prototype:void 0,an=Mt?Mt.valueOf:void 0;function Qt(bt){var kt=-1,Lt=bt==null?0:bt.length;for(this.clear();++kt<Lt;){var Rt=bt[kt];this.set(Rt[0],Rt[1])}}function rn(bt){var kt=-1,Lt=bt==null?0:bt.length;for(this.clear();++kt<Lt;){var Rt=bt[kt];this.set(Rt[0],Rt[1])}}function on(bt){var kt=-1,Lt=bt==null?0:bt.length;for(this.clear();++kt<Lt;){var Rt=bt[kt];this.set(Rt[0],Rt[1])}}function En(bt){var kt=-1,Lt=bt==null?0:bt.length;for(this.__data__=new on;++kt<Lt;)this.add(bt[kt])}function dn(bt){var kt=this.__data__=new rn(bt);this.size=kt.size}function Tn(bt,kt){for(var Lt=bt.length;Lt--;)if(Ln(bt[Lt][0],kt))return Lt;return-1}function Sn(bt){return bt==null?bt===void 0?"[object Undefined]":"[object Null]":ot&&ot in Object(bt)?function(kt){var Lt=Tt.call(kt,ot),Rt=kt[ot];try{kt[ot]=void 0;var Yt=!0}catch{}var Ft=rt.call(kt);return Yt&&(Lt?kt[ot]=Rt:delete kt[ot]),Ft}(bt):function(kt){return rt.call(kt)}(bt)}function In(bt){return xn(bt)&&Sn(bt)==ye}function On(bt,kt,Lt,Rt,Yt){return bt===kt||(bt==null||kt==null||!xn(bt)&&!xn(kt)?bt!=bt&&kt!=kt:function(Ft,yt,Ct,Ot,Bt,Ut){var Kt=vn(Ft),Gt=vn(yt),jt=Kt?ve:ln(Ft),Jt=Gt?ve:ln(yt),Xt=(jt=jt==ye?Se:jt)==Se,yn=(Jt=Jt==ye?Se:Jt)==Se,bn=jt==Jt;if(bn&&pn(Ft)){if(!pn(yt))return!1;Kt=!0,Xt=!1}if(bn&&!Xt)return Ut||(Ut=new dn),Kt||mn(Ft)?Bn(Ft,yt,Ct,Ot,Bt,Ut):function(Vt,qt,un,zt,tn,Zt,hn){switch(un){case Ie:if(Vt.byteLength!=qt.byteLength||Vt.byteOffset!=qt.byteOffset)return!1;Vt=Vt.buffer,qt=qt.buffer;case je:return!(Vt.byteLength!=qt.byteLength||!Zt(new Be(Vt),new Be(qt)));case be:case Ce:case Te:return Ln(+Vt,+qt);case Ee:return Vt.name==qt.name&&Vt.message==qt.message;case Le:case Re:return Vt==qt+"";case Ae:var kn=ft;case Pe:var Pn=1&zt;if(kn||(kn=dt),Vt.size!=qt.size&&!Pn)return!1;var $n=hn.get(Vt);if($n)return $n==qt;zt|=2,hn.set(Vt,qt);var _n=Bn(kn(Vt),kn(qt),zt,tn,Zt,hn);return hn.delete(Vt),_n;case"[object Symbol]":if(an)return an.call(Vt)==an.call(qt)}return!1}(Ft,yt,jt,Ct,Ot,Bt,Ut);if(!(1&Ct)){var Cn=Xt&&Tt.call(Ft,"__wrapped__"),It=yn&&Tt.call(yt,"__wrapped__");if(Cn||It){var Wt=Cn?Ft.value():Ft,en=It?yt.value():yt;return Ut||(Ut=new dn),Bt(Wt,en,Ct,Ot,Ut)}}return!!bn&&(Ut||(Ut=new dn),function(Vt,qt,un,zt,tn,Zt){var hn=1&un,kn=fn(Vt),Pn=kn.length;if(Pn!=fn(qt).length&&!hn)return!1;for(var $n=Pn;$n--;){var _n=kn[$n];if(!(hn?_n in qt:Tt.call(qt,_n)))return!1}var qn=Zt.get(Vt);if(qn&&Zt.get(qt))return qn==qt;var Un=!0;Zt.set(Vt,qt),Zt.set(qt,Vt);for(var zn=hn;++$n<Pn;){var Fn=Vt[_n=kn[$n]],Vn=qt[_n];if(zt)var Yn=hn?zt(Vn,Fn,_n,qt,Vt,Zt):zt(Fn,Vn,_n,Vt,qt,Zt);if(!(Yn===void 0?Fn===Vn||tn(Fn,Vn,un,zt,Zt):Yn)){Un=!1;break}zn||(zn=_n=="constructor")}if(Un&&!zn){var jn=Vt.constructor,Hn=qt.constructor;jn==Hn||!("constructor"in Vt)||!("constructor"in qt)||typeof jn=="function"&&jn instanceof jn&&typeof Hn=="function"&&Hn instanceof Hn||(Un=!1)}return Zt.delete(Vt),Zt.delete(qt),Un}(Ft,yt,Ct,Ot,Bt,Ut))}(bt,kt,Lt,Rt,On,Yt))}function Bn(bt,kt,Lt,Rt,Yt,Ft){var yt=1&Lt,Ct=bt.length,Ot=kt.length;if(Ct!=Ot&&!(yt&&Ot>Ct))return!1;var Bt=Ft.get(bt);if(Bt&&Ft.get(kt))return Bt==kt;var Ut=-1,Kt=!0,Gt=2&Lt?new En:void 0;for(Ft.set(bt,kt),Ft.set(kt,bt);++Ut<Ct;){var jt=bt[Ut],Jt=kt[Ut];if(Rt)var Xt=yt?Rt(Jt,jt,Ut,kt,bt,Ft):Rt(jt,Jt,Ut,bt,kt,Ft);if(Xt!==void 0){if(Xt)continue;Kt=!1;break}if(Gt){if(!Je(kt,function(yn,bn){if(Cn=bn,!Gt.has(Cn)&&(jt===yn||Yt(jt,yn,Lt,Rt,Ft)))return Gt.push(bn);var Cn})){Kt=!1;break}}else if(jt!==Jt&&!Yt(jt,Jt,Lt,Rt,Ft)){Kt=!1;break}}return Ft.delete(bt),Ft.delete(kt),Kt}function fn(bt){return function(kt,Lt,Rt){var Yt=Lt(kt);return vn(kt)?Yt:function(Ft,yt){for(var Ct=-1,Ot=yt.length,Bt=Ft.length;++Ct<Ot;)Ft[Bt+Ct]=yt[Ct];return Ft}(Yt,Rt(kt))}(bt,Nn,wn)}function nn(bt,kt){var Lt,Rt,Yt=bt.__data__;return((Rt=typeof(Lt=kt))=="string"||Rt=="number"||Rt=="symbol"||Rt=="boolean"?Lt!=="__proto__":Lt===null)?Yt[typeof kt=="string"?"string":"hash"]:Yt.map}function sn(bt,kt){var Lt=function(Rt,Yt){return Rt==null?void 0:Rt[Yt]}(bt,kt);return function(Rt){return!(!Mn(Rt)||function(Yt){return!!Ze&&Ze in Yt}(Rt))&&(Rn(Rt)?lt:De).test(cn(Rt))}(Lt)?Lt:void 0}Qt.prototype.clear=function(){this.__data__=_t?_t(null):{},this.size=0},Qt.prototype.delete=function(bt){var kt=this.has(bt)&&delete this.__data__[bt];return this.size-=kt?1:0,kt},Qt.prototype.get=function(bt){var kt=this.__data__;if(_t){var Lt=kt[bt];return Lt===we?void 0:Lt}return Tt.call(kt,bt)?kt[bt]:void 0},Qt.prototype.has=function(bt){var kt=this.__data__;return _t?kt[bt]!==void 0:Tt.call(kt,bt)},Qt.prototype.set=function(bt,kt){var Lt=this.__data__;return this.size+=this.has(bt)?0:1,Lt[bt]=_t&&kt===void 0?we:kt,this},rn.prototype.clear=function(){this.__data__=[],this.size=0},rn.prototype.delete=function(bt){var kt=this.__data__,Lt=Tn(kt,bt);return!(Lt<0||(Lt==kt.length-1?kt.pop():He.call(kt,Lt,1),--this.size,0))},rn.prototype.get=function(bt){var kt=this.__data__,Lt=Tn(kt,bt);return Lt<0?void 0:kt[Lt][1]},rn.prototype.has=function(bt){return Tn(this.__data__,bt)>-1},rn.prototype.set=function(bt,kt){var Lt=this.__data__,Rt=Tn(Lt,bt);return Rt<0?(++this.size,Lt.push([bt,kt])):Lt[Rt][1]=kt,this},on.prototype.clear=function(){this.size=0,this.__data__={hash:new Qt,map:new(Me||rn),string:new Qt}},on.prototype.delete=function(bt){var kt=nn(this,bt).delete(bt);return this.size-=kt?1:0,kt},on.prototype.get=function(bt){return nn(this,bt).get(bt)},on.prototype.has=function(bt){return nn(this,bt).has(bt)},on.prototype.set=function(bt,kt){var Lt=nn(this,bt),Rt=Lt.size;return Lt.set(bt,kt),this.size+=Lt.size==Rt?0:1,this},En.prototype.add=En.prototype.push=function(bt){return this.__data__.set(bt,we),this},En.prototype.has=function(bt){return this.__data__.has(bt)},dn.prototype.clear=function(){this.__data__=new rn,this.size=0},dn.prototype.delete=function(bt){var kt=this.__data__,Lt=kt.delete(bt);return this.size=kt.size,Lt},dn.prototype.get=function(bt){return this.__data__.get(bt)},dn.prototype.has=function(bt){return this.__data__.has(bt)},dn.prototype.set=function(bt,kt){var Lt=this.__data__;if(Lt instanceof rn){var Rt=Lt.__data__;if(!Me||Rt.length<199)return Rt.push([bt,kt]),this.size=++Lt.size,this;Lt=this.__data__=new on(Rt)}return Lt.set(bt,kt),this.size=Lt.size,this};var wn=ut?function(bt){return bt==null?[]:(bt=Object(bt),function(kt,Lt){for(var Rt=-1,Yt=kt==null?0:kt.length,Ft=0,yt=[];++Rt<Yt;){var Ct=kt[Rt];Ot=Ct,Ue.call(bt,Ot)&&(yt[Ft++]=Ct)}var Ot;return yt}(ut(bt)))}:function(){return[]},ln=Sn;function An(bt,kt){return!!(kt=kt??ke)&&(typeof bt=="number"||Ve.test(bt))&&bt>-1&&bt%1==0&&bt<kt}function cn(bt){if(bt!=null){try{return Et.call(bt)}catch{}try{return bt+""}catch{}}return""}function Ln(bt,kt){return bt===kt||bt!=bt&&kt!=kt}(Ke&&ln(new Ke(new ArrayBuffer(1)))!=Ie||Me&&ln(new Me)!=Ae||Fe&&ln(Fe.resolve())!=$e||We&&ln(new We)!=Pe||ct&&ln(new ct)!=Ne)&&(ln=function(bt){var kt=Sn(bt),Lt=kt==Se?bt.constructor:void 0,Rt=Lt?cn(Lt):"";if(Rt)switch(Rt){case xt:return Ie;case Pt:return Ae;case Nt:return $e;case Dt:return Pe;case Ht:return Ne}return kt});var Dn=In(function(){return arguments}())?In:function(bt){return xn(bt)&&Tt.call(bt,"callee")&&!Ue.call(bt,"callee")},vn=Array.isArray,pn=gt||function(){return!1};function Rn(bt){if(!Mn(bt))return!1;var kt=Sn(bt);return kt==Oe||kt=="[object GeneratorFunction]"||kt=="[object AsyncFunction]"||kt=="[object Proxy]"}function gn(bt){return typeof bt=="number"&&bt>-1&&bt%1==0&&bt<=ke}function Mn(bt){var kt=typeof bt;return bt!=null&&(kt=="object"||kt=="function")}function xn(bt){return bt!=null&&typeof bt=="object"}var mn=et?function(bt){return function(kt){return bt(kt)}}(et):function(bt){return xn(bt)&&gn(bt.length)&&!!ze[Sn(bt)]};function Nn(bt){return(kt=bt)!=null&&gn(kt.length)&&!Rn(kt)?function(Lt,Rt){var Yt=vn(Lt),Ft=!Yt&&Dn(Lt),yt=!Yt&&!Ft&&pn(Lt),Ct=!Yt&&!Ft&&!yt&&mn(Lt),Ot=Yt||Ft||yt||Ct,Bt=Ot?function(Gt,jt){for(var Jt=-1,Xt=Array(Gt);++Jt<Gt;)Xt[Jt]=jt(Jt);return Xt}(Lt.length,String):[],Ut=Bt.length;for(var Kt in Lt)!Rt&&!Tt.call(Lt,Kt)||Ot&&(Kt=="length"||yt&&(Kt=="offset"||Kt=="parent")||Ct&&(Kt=="buffer"||Kt=="byteLength"||Kt=="byteOffset")||An(Kt,Ut))||Bt.push(Kt);return Bt}(bt):function(Lt){if(Yt=(Rt=Lt)&&Rt.constructor,Rt!==(typeof Yt=="function"&&Yt.prototype||St))return $t(Lt);var Rt,Yt,Ft=[];for(var yt in Object(Lt))Tt.call(Lt,yt)&&yt!="constructor"&&Ft.push(yt);return Ft}(bt);var kt}oe.exports=function(bt,kt){return On(bt,kt)}},210:function(oe,le,fe){var we=this&&this.__importDefault||function(be){return be&&be.__esModule?be:{default:be}};Object.defineProperty(le,"__esModule",{value:!0});var ke,ye=we(fe(465)),ve=we(fe(307));(function(be){be.compose=function(Ce,Ee,Oe){Ce===void 0&&(Ce={}),Ee===void 0&&(Ee={}),typeof Ce!="object"&&(Ce={}),typeof Ee!="object"&&(Ee={});var Ae=ye.default(Ee);for(var Te in Oe||(Ae=Object.keys(Ae).reduce(function(Se,$e){return Ae[$e]!=null&&(Se[$e]=Ae[$e]),Se},{})),Ce)Ce[Te]!==void 0&&Ee[Te]===void 0&&(Ae[Te]=Ce[Te]);return Object.keys(Ae).length>0?Ae:void 0},be.diff=function(Ce,Ee){Ce===void 0&&(Ce={}),Ee===void 0&&(Ee={}),typeof Ce!="object"&&(Ce={}),typeof Ee!="object"&&(Ee={});var Oe=Object.keys(Ce).concat(Object.keys(Ee)).reduce(function(Ae,Te){return ve.default(Ce[Te],Ee[Te])||(Ae[Te]=Ee[Te]===void 0?null:Ee[Te]),Ae},{});return Object.keys(Oe).length>0?Oe:void 0},be.invert=function(Ce,Ee){Ce===void 0&&(Ce={}),Ee===void 0&&(Ee={}),Ce=Ce||{};var Oe=Object.keys(Ee).reduce(function(Ae,Te){return Ee[Te]!==Ce[Te]&&Ce[Te]!==void 0&&(Ae[Te]=Ee[Te]),Ae},{});return Object.keys(Ce).reduce(function(Ae,Te){return Ce[Te]!==Ee[Te]&&Ee[Te]===void 0&&(Ae[Te]=null),Ae},Oe)},be.transform=function(Ce,Ee,Oe){if(Oe===void 0&&(Oe=!1),typeof Ce!="object")return Ee;if(typeof Ee=="object"){if(!Oe)return Ee;var Ae=Object.keys(Ee).reduce(function(Te,Se){return Ce[Se]===void 0&&(Te[Se]=Ee[Se]),Te},{});return Object.keys(Ae).length>0?Ae:void 0}}})(ke||(ke={})),le.default=ke},895:function(oe,le,fe){var we=this&&this.__importDefault||function(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}},ke=we(fe(103)),ye=we(fe(465)),ve=we(fe(307)),be=we(fe(210)),Ce=we(fe(430)),Ee=String.fromCharCode(0),Oe=function(){function Ae(Te){Array.isArray(Te)?this.ops=Te:Te!=null&&Array.isArray(Te.ops)?this.ops=Te.ops:this.ops=[]}return Ae.prototype.insert=function(Te,Se){var $e={};return typeof Te=="string"&&Te.length===0?this:($e.insert=Te,Se!=null&&typeof Se=="object"&&Object.keys(Se).length>0&&($e.attributes=Se),this.push($e))},Ae.prototype.delete=function(Te){return Te<=0?this:this.push({delete:Te})},Ae.prototype.retain=function(Te,Se){if(Te<=0)return this;var $e={retain:Te};return Se!=null&&typeof Se=="object"&&Object.keys(Se).length>0&&($e.attributes=Se),this.push($e)},Ae.prototype.push=function(Te){var Se=this.ops.length,$e=this.ops[Se-1];if(Te=ye.default(Te),typeof $e=="object"){if(typeof Te.delete=="number"&&typeof $e.delete=="number")return this.ops[Se-1]={delete:$e.delete+Te.delete},this;if(typeof $e.delete=="number"&&Te.insert!=null&&(Se-=1,typeof($e=this.ops[Se-1])!="object"))return this.ops.unshift(Te),this;if(ve.default(Te.attributes,$e.attributes)){if(typeof Te.insert=="string"&&typeof $e.insert=="string")return this.ops[Se-1]={insert:$e.insert+Te.insert},typeof Te.attributes=="object"&&(this.ops[Se-1].attributes=Te.attributes),this;if(typeof Te.retain=="number"&&typeof $e.retain=="number")return this.ops[Se-1]={retain:$e.retain+Te.retain},typeof Te.attributes=="object"&&(this.ops[Se-1].attributes=Te.attributes),this}}return Se===this.ops.length?this.ops.push(Te):this.ops.splice(Se,0,Te),this},Ae.prototype.chop=function(){var Te=this.ops[this.ops.length-1];return Te&&Te.retain&&!Te.attributes&&this.ops.pop(),this},Ae.prototype.filter=function(Te){return this.ops.filter(Te)},Ae.prototype.forEach=function(Te){this.ops.forEach(Te)},Ae.prototype.map=function(Te){return this.ops.map(Te)},Ae.prototype.partition=function(Te){var Se=[],$e=[];return this.forEach(function(Le){(Te(Le)?Se:$e).push(Le)}),[Se,$e]},Ae.prototype.reduce=function(Te,Se){return this.ops.reduce(Te,Se)},Ae.prototype.changeLength=function(){return this.reduce(function(Te,Se){return Se.insert?Te+Ce.default.length(Se):Se.delete?Te-Se.delete:Te},0)},Ae.prototype.length=function(){return this.reduce(function(Te,Se){return Te+Ce.default.length(Se)},0)},Ae.prototype.slice=function(Te,Se){Te===void 0&&(Te=0),Se===void 0&&(Se=1/0);for(var $e=[],Le=Ce.default.iterator(this.ops),Pe=0;Pe<Se&&Le.hasNext();){var Re=void 0;Pe<Te?Re=Le.next(Te-Pe):(Re=Le.next(Se-Pe),$e.push(Re)),Pe+=Ce.default.length(Re)}return new Ae($e)},Ae.prototype.compose=function(Te){var Se=Ce.default.iterator(this.ops),$e=Ce.default.iterator(Te.ops),Le=[],Pe=$e.peek();if(Pe!=null&&typeof Pe.retain=="number"&&Pe.attributes==null){for(var Re=Pe.retain;Se.peekType()==="insert"&&Se.peekLength()<=Re;)Re-=Se.peekLength(),Le.push(Se.next());Pe.retain-Re>0&&$e.next(Pe.retain-Re)}for(var Ne=new Ae(Le);Se.hasNext()||$e.hasNext();)if($e.peekType()==="insert")Ne.push($e.next());else if(Se.peekType()==="delete")Ne.push(Se.next());else{var je=Math.min(Se.peekLength(),$e.peekLength()),Ie=Se.next(je),De=$e.next(je);if(typeof De.retain=="number"){var Ve={};typeof Ie.retain=="number"?Ve.retain=je:Ve.insert=Ie.insert;var ze=be.default.compose(Ie.attributes,De.attributes,typeof Ie.retain=="number");if(ze&&(Ve.attributes=ze),Ne.push(Ve),!$e.hasNext()&&ve.default(Ne.ops[Ne.ops.length-1],Ve)){var qe=new Ae(Se.rest());return Ne.concat(qe).chop()}}else typeof De.delete=="number"&&typeof Ie.retain=="number"&&Ne.push(De)}return Ne.chop()},Ae.prototype.concat=function(Te){var Se=new Ae(this.ops.slice());return Te.ops.length>0&&(Se.push(Te.ops[0]),Se.ops=Se.ops.concat(Te.ops.slice(1))),Se},Ae.prototype.diff=function(Te,Se){if(this.ops===Te.ops)return new Ae;var $e=[this,Te].map(function(je){return je.map(function(Ie){if(Ie.insert!=null)return typeof Ie.insert=="string"?Ie.insert:Ee;throw new Error("diff() called "+(je===Te?"on":"with")+" non-document")}).join("")}),Le=new Ae,Pe=ke.default($e[0],$e[1],Se),Re=Ce.default.iterator(this.ops),Ne=Ce.default.iterator(Te.ops);return Pe.forEach(function(je){for(var Ie=je[1].length;Ie>0;){var De=0;switch(je[0]){case ke.default.INSERT:De=Math.min(Ne.peekLength(),Ie),Le.push(Ne.next(De));break;case ke.default.DELETE:De=Math.min(Ie,Re.peekLength()),Re.next(De),Le.delete(De);break;case ke.default.EQUAL:De=Math.min(Re.peekLength(),Ne.peekLength(),Ie);var Ve=Re.next(De),ze=Ne.next(De);ve.default(Ve.insert,ze.insert)?Le.retain(De,be.default.diff(Ve.attributes,ze.attributes)):Le.push(ze).delete(De)}Ie-=De}}),Le.chop()},Ae.prototype.eachLine=function(Te,Se){Se===void 0&&(Se=`
`);for(var $e=Ce.default.iterator(this.ops),Le=new Ae,Pe=0;$e.hasNext();){if($e.peekType()!=="insert")return;var Re=$e.peek(),Ne=Ce.default.length(Re)-$e.peekLength(),je=typeof Re.insert=="string"?Re.insert.indexOf(Se,Ne)-Ne:-1;if(je<0)Le.push($e.next());else if(je>0)Le.push($e.next(je));else{if(Te(Le,$e.next(1).attributes||{},Pe)===!1)return;Pe+=1,Le=new Ae}}Le.length()>0&&Te(Le,{},Pe)},Ae.prototype.invert=function(Te){var Se=new Ae;return this.reduce(function($e,Le){if(Le.insert)Se.delete(Ce.default.length(Le));else{if(Le.retain&&Le.attributes==null)return Se.retain(Le.retain),$e+Le.retain;if(Le.delete||Le.retain&&Le.attributes){var Pe=Le.delete||Le.retain;return Te.slice($e,$e+Pe).forEach(function(Re){Le.delete?Se.push(Re):Le.retain&&Le.attributes&&Se.retain(Ce.default.length(Re),be.default.invert(Le.attributes,Re.attributes))}),$e+Pe}}return $e},0),Se.chop()},Ae.prototype.transform=function(Te,Se){if(Se===void 0&&(Se=!1),Se=!!Se,typeof Te=="number")return this.transformPosition(Te,Se);for(var $e=Te,Le=Ce.default.iterator(this.ops),Pe=Ce.default.iterator($e.ops),Re=new Ae;Le.hasNext()||Pe.hasNext();)if(Le.peekType()!=="insert"||!Se&&Pe.peekType()==="insert")if(Pe.peekType()==="insert")Re.push(Pe.next());else{var Ne=Math.min(Le.peekLength(),Pe.peekLength()),je=Le.next(Ne),Ie=Pe.next(Ne);if(je.delete)continue;Ie.delete?Re.push(Ie):Re.retain(Ne,be.default.transform(je.attributes,Ie.attributes,Se))}else Re.retain(Ce.default.length(Le.next()));return Re.chop()},Ae.prototype.transformPosition=function(Te,Se){Se===void 0&&(Se=!1),Se=!!Se;for(var $e=Ce.default.iterator(this.ops),Le=0;$e.hasNext()&&Le<=Te;){var Pe=$e.peekLength(),Re=$e.peekType();$e.next(),Re!=="delete"?(Re==="insert"&&(Le<Te||!Se)&&(Te+=Pe),Le+=Pe):Te-=Math.min(Pe,Te-Le)}return Te},Ae.Op=Ce.default,Ae.AttributeMap=be.default,Ae}();oe.exports=Oe},977:function(oe,le,fe){var we=this&&this.__importDefault||function(ve){return ve&&ve.__esModule?ve:{default:ve}};Object.defineProperty(le,"__esModule",{value:!0});var ke=we(fe(430)),ye=function(){function ve(be){this.ops=be,this.index=0,this.offset=0}return ve.prototype.hasNext=function(){return this.peekLength()<1/0},ve.prototype.next=function(be){be||(be=1/0);var Ce=this.ops[this.index];if(Ce){var Ee=this.offset,Oe=ke.default.length(Ce);if(be>=Oe-Ee?(be=Oe-Ee,this.index+=1,this.offset=0):this.offset+=be,typeof Ce.delete=="number")return{delete:be};var Ae={};return Ce.attributes&&(Ae.attributes=Ce.attributes),typeof Ce.retain=="number"?Ae.retain=be:typeof Ce.insert=="string"?Ae.insert=Ce.insert.substr(Ee,be):Ae.insert=Ce.insert,Ae}return{retain:1/0}},ve.prototype.peek=function(){return this.ops[this.index]},ve.prototype.peekLength=function(){return this.ops[this.index]?ke.default.length(this.ops[this.index])-this.offset:1/0},ve.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},ve.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var be=this.offset,Ce=this.index,Ee=this.next(),Oe=this.ops.slice(this.index);return this.offset=be,this.index=Ce,[Ee].concat(Oe)}return[]},ve}();le.default=ye},430:function(oe,le,fe){var we=this&&this.__importDefault||function(ve){return ve&&ve.__esModule?ve:{default:ve}};Object.defineProperty(le,"__esModule",{value:!0});var ke,ye=we(fe(977));(function(ve){ve.iterator=function(be){return new ye.default(be)},ve.length=function(be){return typeof be.delete=="number"?be.delete:typeof be.retain=="number"?be.retain:typeof be.insert=="string"?be.insert.length:1}})(ke||(ke={})),le.default=ke},103:oe=>{var le=-1;function fe(Se,$e,Le,Pe){if(Se===$e)return Se?[[0,Se]]:[];if(Le!=null){var Re=function(Ve,ze,qe){var Xe=typeof qe=="number"?{index:qe,length:0}:qe.oldRange,tt=typeof qe=="number"?null:qe.newRange,at=Ve.length,pt=ze.length;if(Xe.length===0&&(tt===null||tt.length===0)){var st=Xe.index,it=Ve.slice(0,st),Ge=Ve.slice(st),et=tt?tt.index:null,Je=st+pt-at;if((et===null||et===Je)&&!(Je<0||Je>pt)){var ft=ze.slice(0,Je);if((ht=ze.slice(Je))===Ge){var dt=Math.min(st,Je);if((vt=it.slice(0,dt))===(St=ft.slice(0,dt)))return Ae(vt,it.slice(dt),ft.slice(dt),Ge)}}if(et===null||et===st){var Qe=st,ht=(ft=ze.slice(0,Qe),ze.slice(Qe));if(ft===it){var mt=Math.min(at-Qe,pt-Qe);if((wt=Ge.slice(Ge.length-mt))===(At=ht.slice(ht.length-mt)))return Ae(it,Ge.slice(0,Ge.length-mt),ht.slice(0,ht.length-mt),wt)}}}if(Xe.length>0&&tt&&tt.length===0){var vt=Ve.slice(0,Xe.index),wt=Ve.slice(Xe.index+Xe.length);if(!(pt<(dt=vt.length)+(mt=wt.length))){var St=ze.slice(0,dt),At=ze.slice(pt-mt);if(vt===St&&wt===At)return Ae(vt,Ve.slice(dt,at-mt),ze.slice(dt,pt-mt),wt)}}return null}(Se,$e,Le);if(Re)return Re}var Ne=ke(Se,$e),je=Se.substring(0,Ne);Ne=ye(Se=Se.substring(Ne),$e=$e.substring(Ne));var Ie=Se.substring(Se.length-Ne),De=function(Ve,ze){var qe;if(!Ve)return[[1,ze]];if(!ze)return[[le,Ve]];var Xe=Ve.length>ze.length?Ve:ze,tt=Ve.length>ze.length?ze:Ve,at=Xe.indexOf(tt);if(at!==-1)return qe=[[1,Xe.substring(0,at)],[0,tt],[1,Xe.substring(at+tt.length)]],Ve.length>ze.length&&(qe[0][0]=qe[2][0]=le),qe;if(tt.length===1)return[[le,Ve],[1,ze]];var pt=function(Qe,ht){var mt=Qe.length>ht.length?Qe:ht,vt=Qe.length>ht.length?ht:Qe;if(mt.length<4||2*vt.length<mt.length)return null;function wt(nt,Ye,Be){for(var Ue,He,ot,ut,gt=nt.substring(Be,Be+Math.floor(nt.length/4)),$t=-1,Ke="";($t=Ye.indexOf(gt,$t+1))!==-1;){var Me=ke(nt.substring(Be),Ye.substring($t)),Fe=ye(nt.substring(0,Be),Ye.substring(0,$t));Ke.length<Fe+Me&&(Ke=Ye.substring($t-Fe,$t)+Ye.substring($t,$t+Me),Ue=nt.substring(0,Be-Fe),He=nt.substring(Be+Me),ot=Ye.substring(0,$t-Fe),ut=Ye.substring($t+Me))}return 2*Ke.length>=nt.length?[Ue,He,ot,ut,Ke]:null}var St,At,Et,Tt,Ze,rt=wt(mt,vt,Math.ceil(mt.length/4)),lt=wt(mt,vt,Math.ceil(mt.length/2));return rt||lt?(St=lt?rt&&rt[4].length>lt[4].length?rt:lt:rt,Qe.length>ht.length?(At=St[0],Et=St[1],Tt=St[2],Ze=St[3]):(Tt=St[0],Ze=St[1],At=St[2],Et=St[3]),[At,Et,Tt,Ze,St[4]]):null}(Ve,ze);if(pt){var st=pt[0],it=pt[1],Ge=pt[2],et=pt[3],Je=pt[4],ft=fe(st,Ge),dt=fe(it,et);return ft.concat([[0,Je]],dt)}return function(Qe,ht){for(var mt=Qe.length,vt=ht.length,wt=Math.ceil((mt+vt)/2),St=wt,At=2*wt,Et=new Array(At),Tt=new Array(At),Ze=0;Ze<At;Ze++)Et[Ze]=-1,Tt[Ze]=-1;Et[St+1]=0,Tt[St+1]=0;for(var rt=mt-vt,lt=rt%2!=0,nt=0,Ye=0,Be=0,Ue=0,He=0;He<wt;He++){for(var ot=-He+nt;ot<=He-Ye;ot+=2){for(var ut=St+ot,gt=(We=ot===-He||ot!==He&&Et[ut-1]<Et[ut+1]?Et[ut+1]:Et[ut-1]+1)-ot;We<mt&&gt<vt&&Qe.charAt(We)===ht.charAt(gt);)We++,gt++;if(Et[ut]=We,We>mt)Ye+=2;else if(gt>vt)nt+=2;else if(lt&&(Me=St+rt-ot)>=0&&Me<At&&Tt[Me]!==-1&&We>=(Ke=mt-Tt[Me]))return we(Qe,ht,We,gt)}for(var $t=-He+Be;$t<=He-Ue;$t+=2){for(var Ke,Me=St+$t,Fe=(Ke=$t===-He||$t!==He&&Tt[Me-1]<Tt[Me+1]?Tt[Me+1]:Tt[Me-1]+1)-$t;Ke<mt&&Fe<vt&&Qe.charAt(mt-Ke-1)===ht.charAt(vt-Fe-1);)Ke++,Fe++;if(Tt[Me]=Ke,Ke>mt)Ue+=2;else if(Fe>vt)Be+=2;else if(!lt){var We;if((ut=St+rt-$t)>=0&&ut<At&&Et[ut]!==-1&&(gt=St+(We=Et[ut])-ut,We>=(Ke=mt-Ke)))return we(Qe,ht,We,gt)}}}return[[le,Qe],[1,ht]]}(Ve,ze)}(Se=Se.substring(0,Se.length-Ne),$e=$e.substring(0,$e.length-Ne));return je&&De.unshift([0,je]),Ie&&De.push([0,Ie]),ve(De,Pe),De}function we(Se,$e,Le,Pe){var Re=Se.substring(0,Le),Ne=$e.substring(0,Pe),je=Se.substring(Le),Ie=$e.substring(Pe),De=fe(Re,Ne),Ve=fe(je,Ie);return De.concat(Ve)}function ke(Se,$e){if(!Se||!$e||Se.charAt(0)!==$e.charAt(0))return 0;for(var Le=0,Pe=Math.min(Se.length,$e.length),Re=Pe,Ne=0;Le<Re;)Se.substring(Ne,Re)==$e.substring(Ne,Re)?Ne=Le=Re:Pe=Re,Re=Math.floor((Pe-Le)/2+Le);return be(Se.charCodeAt(Re-1))&&Re--,Re}function ye(Se,$e){if(!Se||!$e||Se.slice(-1)!==$e.slice(-1))return 0;for(var Le=0,Pe=Math.min(Se.length,$e.length),Re=Pe,Ne=0;Le<Re;)Se.substring(Se.length-Re,Se.length-Ne)==$e.substring($e.length-Re,$e.length-Ne)?Ne=Le=Re:Pe=Re,Re=Math.floor((Pe-Le)/2+Le);return Ce(Se.charCodeAt(Se.length-Re))&&Re--,Re}function ve(Se,$e){Se.push([0,""]);for(var Le,Pe=0,Re=0,Ne=0,je="",Ie="";Pe<Se.length;)if(Pe<Se.length-1&&!Se[Pe][1])Se.splice(Pe,1);else switch(Se[Pe][0]){case 1:Ne++,Ie+=Se[Pe][1],Pe++;break;case le:Re++,je+=Se[Pe][1],Pe++;break;case 0:var De=Pe-Ne-Re-1;if($e){if(De>=0&&Oe(Se[De][1])){var Ve=Se[De][1].slice(-1);if(Se[De][1]=Se[De][1].slice(0,-1),je=Ve+je,Ie=Ve+Ie,!Se[De][1]){Se.splice(De,1),Pe--;var ze=De-1;Se[ze]&&Se[ze][0]===1&&(Ne++,Ie=Se[ze][1]+Ie,ze--),Se[ze]&&Se[ze][0]===le&&(Re++,je=Se[ze][1]+je,ze--),De=ze}}Ee(Se[Pe][1])&&(Ve=Se[Pe][1].charAt(0),Se[Pe][1]=Se[Pe][1].slice(1),je+=Ve,Ie+=Ve)}if(Pe<Se.length-1&&!Se[Pe][1]){Se.splice(Pe,1);break}if(je.length>0||Ie.length>0){je.length>0&&Ie.length>0&&((Le=ke(Ie,je))!==0&&(De>=0?Se[De][1]+=Ie.substring(0,Le):(Se.splice(0,0,[0,Ie.substring(0,Le)]),Pe++),Ie=Ie.substring(Le),je=je.substring(Le)),(Le=ye(Ie,je))!==0&&(Se[Pe][1]=Ie.substring(Ie.length-Le)+Se[Pe][1],Ie=Ie.substring(0,Ie.length-Le),je=je.substring(0,je.length-Le)));var qe=Ne+Re;je.length===0&&Ie.length===0?(Se.splice(Pe-qe,qe),Pe-=qe):je.length===0?(Se.splice(Pe-qe,qe,[1,Ie]),Pe=Pe-qe+1):Ie.length===0?(Se.splice(Pe-qe,qe,[le,je]),Pe=Pe-qe+1):(Se.splice(Pe-qe,qe,[le,je],[1,Ie]),Pe=Pe-qe+2)}Pe!==0&&Se[Pe-1][0]===0?(Se[Pe-1][1]+=Se[Pe][1],Se.splice(Pe,1)):Pe++,Ne=0,Re=0,je="",Ie=""}Se[Se.length-1][1]===""&&Se.pop();var Xe=!1;for(Pe=1;Pe<Se.length-1;)Se[Pe-1][0]===0&&Se[Pe+1][0]===0&&(Se[Pe][1].substring(Se[Pe][1].length-Se[Pe-1][1].length)===Se[Pe-1][1]?(Se[Pe][1]=Se[Pe-1][1]+Se[Pe][1].substring(0,Se[Pe][1].length-Se[Pe-1][1].length),Se[Pe+1][1]=Se[Pe-1][1]+Se[Pe+1][1],Se.splice(Pe-1,1),Xe=!0):Se[Pe][1].substring(0,Se[Pe+1][1].length)==Se[Pe+1][1]&&(Se[Pe-1][1]+=Se[Pe+1][1],Se[Pe][1]=Se[Pe][1].substring(Se[Pe+1][1].length)+Se[Pe+1][1],Se.splice(Pe+1,1),Xe=!0)),Pe++;Xe&&ve(Se,$e)}function be(Se){return Se>=55296&&Se<=56319}function Ce(Se){return Se>=56320&&Se<=57343}function Ee(Se){return Ce(Se.charCodeAt(0))}function Oe(Se){return be(Se.charCodeAt(Se.length-1))}function Ae(Se,$e,Le,Pe){return Oe(Se)||Ee(Pe)?null:function(Re){for(var Ne=[],je=0;je<Re.length;je++)Re[je][1].length>0&&Ne.push(Re[je]);return Ne}([[0,Se],[le,$e],[1,Le],[0,Pe]])}function Te(Se,$e,Le){return fe(Se,$e,Le,!0)}Te.INSERT=1,Te.DELETE=le,Te.EQUAL=0,oe.exports=Te},165:function(oe,le,fe){var we,ke;(ke=typeof(we=function(){var ye,ve={};function be(Oe,Ae,Te){var Se=Oe.getClientRects();if(Se.length===2){var $e=Oe.getBoundingClientRect();return Se[Ae][Te]<$e[Te]}return!1}function Ce(Oe){if(!Oe||screen.deviceXDPI===screen.logicalXDPI)return Oe;if("length"in Oe)return Array.prototype.map.call(Oe,Ce);var Ae=screen.deviceXDPI/screen.logicalXDPI;return{top:Oe.top/Ae,bottom:Oe.bottom/Ae,left:Oe.left/Ae,right:Oe.right/Ae,width:Oe.width/Ae,height:Oe.height/Ae}}function Ee(Oe,Ae){var Te,Se=0,$e=1024;if($e>=Ae.length)return Array.prototype.push.apply(Oe,Ae);for(;Se<Ae.length;)Te=Array.prototype.push.apply(Oe,Array.prototype.slice.call(Ae,Se,Se+$e)),Se+=$e;return Te}return ve.isBroken=function(){if(ye===void 0){var Oe=document.createElement("p"),Ae=document.createElement("span"),Te=document.createTextNode("aa"),Se=document.createTextNode("aa"),$e=document.createElement("img");$e.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var Le=document.createRange();if(ye={},Oe.appendChild(Te),Oe.appendChild(Ae),Ae.appendChild($e),Ae.appendChild(Se),document.body.appendChild(Oe),Le.setStart(Te,1),Le.setEnd(Ae,0),ye.getClientRects=ye.getBoundingClientRect=Le.getClientRects().length>1,ye.getClientRects||(Le.setEnd(Se,1),ye.getClientRects=ye.getBoundingClientRect=Le.getClientRects().length===2),!ye.getBoundingClientRect){Le.setEnd(Le.startContainer,Le.startOffset);var Pe=Le.getBoundingClientRect();ye.getBoundingClientRect=Pe.top===0&&Pe.left===0}if(document.body.removeChild(Oe),!ye.getBoundingClientRect){var Re=document.createElement("p");Re.style.width="0px",Re.style.fontSize="20px",Re.style.whiteSpace="normal",Re.style.wordBreak="normal";var Ne=document.createTextNode("m mm");Re.appendChild(Ne),document.body.appendChild(Re),Le.setStart(Ne,1),Le.setEnd(Ne,2),be(Le,1,"left")?ye.getBoundingClientRect=!0:(Le.setStart(Ne,1),Le.setEnd(Ne,3),be(Le,0,"top")&&(ye.getBoundingClientRect=!0)),document.body.removeChild(Re)}var je=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();ye.ieZoom=!!je&&je<=10}return ye},ve.getClientRects=function(Oe){var Ae=this.isBroken();if(Ae.ieZoom)return Ce(Oe.getClientRects());if(!Ae.getClientRects)return Oe.getClientRects();var Te=[],Se=[],$e=Oe.endContainer,Le=Oe.endOffset,Pe=document.createRange();function Re(Ne){for(var je=0;Ne=Ne.previousSibling;)je++;return je}for(;$e!==Oe.commonAncestorContainer;)Pe.setStart($e,0),Pe.setEnd($e,Le),Ee(Se,Pe.getClientRects()),Le=Re($e),$e=$e.parentNode;return(Pe=Oe.cloneRange()).setEnd($e,Le),Ee(Te,Pe.getClientRects()),Ee(Te,Se),Te},ve.getBoundingClientRect=function(Oe){var Ae=this.getClientRects(Oe);if(Ae.length===0)return null;var Te,Se=Oe.getBoundingClientRect(),$e=this.isBroken();if($e.ieZoom)return Ce(Se);if(!$e.getBoundingClientRect)return Se;if(Se.width===0&&Se.height===0)return Ae[0];for(var Le=0,Pe=Ae.length;Le<Pe;Le++){var Re=Ae[Le];Te?(Te.left=Math.min(Te.left,Re.left),Te.top=Math.min(Te.top,Re.top),Te.right=Math.max(Te.right,Re.right),Te.bottom=Math.max(Te.bottom,Re.bottom)):Te={left:Re.left,top:Re.top,right:Re.right,bottom:Re.bottom}}return Te&&(Te.width=Te.right-Te.left,Te.height=Te.bottom-Te.top),Te},ve})=="function"?we.call(le,fe,le,oe):we)===void 0||(oe.exports=ke)},33:(oe,le,fe)=>{fe.r(le),fe.d(le,{default:()=>ze});var we=function(){if(typeof Map<"u")return Map;function qe(Xe,tt){var at=-1;return Xe.some(function(pt,st){return pt[0]===tt&&(at=st,!0)}),at}return function(){function Xe(){this.__entries__=[]}return Object.defineProperty(Xe.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),Xe.prototype.get=function(tt){var at=qe(this.__entries__,tt),pt=this.__entries__[at];return pt&&pt[1]},Xe.prototype.set=function(tt,at){var pt=qe(this.__entries__,tt);~pt?this.__entries__[pt][1]=at:this.__entries__.push([tt,at])},Xe.prototype.delete=function(tt){var at=this.__entries__,pt=qe(at,tt);~pt&&at.splice(pt,1)},Xe.prototype.has=function(tt){return!!~qe(this.__entries__,tt)},Xe.prototype.clear=function(){this.__entries__.splice(0)},Xe.prototype.forEach=function(tt,at){at===void 0&&(at=null);for(var pt=0,st=this.__entries__;pt<st.length;pt++){var it=st[pt];tt.call(at,it[1],it[0])}},Xe}()}(),ke=typeof window<"u"&&typeof document<"u"&&window.document===document,ye=fe.g!==void 0&&fe.g.Math===Math?fe.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),ve=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ye):function(qe){return setTimeout(function(){return qe(Date.now())},1e3/60)},be=["top","right","bottom","left","width","height","size","weight"],Ce=typeof MutationObserver<"u",Ee=function(){function qe(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(Xe,tt){var at=!1,pt=!1,st=0;function it(){at&&(at=!1,Xe()),pt&&et()}function Ge(){ve(it)}function et(){var Je=Date.now();if(at){if(Je-st<2)return;pt=!0}else at=!0,pt=!1,setTimeout(Ge,20);st=Je}return et}(this.refresh.bind(this))}return qe.prototype.addObserver=function(Xe){~this.observers_.indexOf(Xe)||this.observers_.push(Xe),this.connected_||this.connect_()},qe.prototype.removeObserver=function(Xe){var tt=this.observers_,at=tt.indexOf(Xe);~at&&tt.splice(at,1),!tt.length&&this.connected_&&this.disconnect_()},qe.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},qe.prototype.updateObservers_=function(){var Xe=this.observers_.filter(function(tt){return tt.gatherActive(),tt.hasActive()});return Xe.forEach(function(tt){return tt.broadcastActive()}),Xe.length>0},qe.prototype.connect_=function(){ke&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ce?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},qe.prototype.disconnect_=function(){ke&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},qe.prototype.onTransitionEnd_=function(Xe){var tt=Xe.propertyName,at=tt===void 0?"":tt;be.some(function(pt){return!!~at.indexOf(pt)})&&this.refresh()},qe.getInstance=function(){return this.instance_||(this.instance_=new qe),this.instance_},qe.instance_=null,qe}(),Oe=function(qe,Xe){for(var tt=0,at=Object.keys(Xe);tt<at.length;tt++){var pt=at[tt];Object.defineProperty(qe,pt,{value:Xe[pt],enumerable:!1,writable:!1,configurable:!0})}return qe},Ae=function(qe){return qe&&qe.ownerDocument&&qe.ownerDocument.defaultView||ye},Te=Re(0,0,0,0);function Se(qe){return parseFloat(qe)||0}function $e(qe){for(var Xe=[],tt=1;tt<arguments.length;tt++)Xe[tt-1]=arguments[tt];return Xe.reduce(function(at,pt){return at+Se(qe["border-"+pt+"-width"])},0)}var Le=typeof SVGGraphicsElement<"u"?function(qe){return qe instanceof Ae(qe).SVGGraphicsElement}:function(qe){return qe instanceof Ae(qe).SVGElement&&typeof qe.getBBox=="function"};function Pe(qe){return ke?Le(qe)?function(Xe){var tt=Xe.getBBox();return Re(0,0,tt.width,tt.height)}(qe):function(Xe){var tt=Xe.clientWidth,at=Xe.clientHeight;if(!tt&&!at)return Te;var pt=Ae(Xe).getComputedStyle(Xe),st=function(Qe){for(var ht={},mt=0,vt=["top","right","bottom","left"];mt<vt.length;mt++){var wt=vt[mt],St=Qe["padding-"+wt];ht[wt]=Se(St)}return ht}(pt),it=st.left+st.right,Ge=st.top+st.bottom,et=Se(pt.width),Je=Se(pt.height);if(pt.boxSizing==="border-box"&&(Math.round(et+it)!==tt&&(et-=$e(pt,"left","right")+it),Math.round(Je+Ge)!==at&&(Je-=$e(pt,"top","bottom")+Ge)),!function(Qe){return Qe===Ae(Qe).document.documentElement}(Xe)){var ft=Math.round(et+it)-tt,dt=Math.round(Je+Ge)-at;Math.abs(ft)!==1&&(et-=ft),Math.abs(dt)!==1&&(Je-=dt)}return Re(st.left,st.top,et,Je)}(qe):Te}function Re(qe,Xe,tt,at){return{x:qe,y:Xe,width:tt,height:at}}var Ne=function(){function qe(Xe){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Re(0,0,0,0),this.target=Xe}return qe.prototype.isActive=function(){var Xe=Pe(this.target);return this.contentRect_=Xe,Xe.width!==this.broadcastWidth||Xe.height!==this.broadcastHeight},qe.prototype.broadcastRect=function(){var Xe=this.contentRect_;return this.broadcastWidth=Xe.width,this.broadcastHeight=Xe.height,Xe},qe}(),je=function(qe,Xe){var tt,at,pt,st,it,Ge,et,Je=(at=(tt=Xe).x,pt=tt.y,st=tt.width,it=tt.height,Ge=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,et=Object.create(Ge.prototype),Oe(et,{x:at,y:pt,width:st,height:it,top:pt,right:at+st,bottom:it+pt,left:at}),et);Oe(this,{target:qe,contentRect:Je})},Ie=function(){function qe(Xe,tt,at){if(this.activeObservations_=[],this.observations_=new we,typeof Xe!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=Xe,this.controller_=tt,this.callbackCtx_=at}return qe.prototype.observe=function(Xe){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(Xe instanceof Ae(Xe).Element))throw new TypeError('parameter 1 is not of type "Element".');var tt=this.observations_;tt.has(Xe)||(tt.set(Xe,new Ne(Xe)),this.controller_.addObserver(this),this.controller_.refresh())}},qe.prototype.unobserve=function(Xe){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(Xe instanceof Ae(Xe).Element))throw new TypeError('parameter 1 is not of type "Element".');var tt=this.observations_;tt.has(Xe)&&(tt.delete(Xe),tt.size||this.controller_.removeObserver(this))}},qe.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},qe.prototype.gatherActive=function(){var Xe=this;this.clearActive(),this.observations_.forEach(function(tt){tt.isActive()&&Xe.activeObservations_.push(tt)})},qe.prototype.broadcastActive=function(){if(this.hasActive()){var Xe=this.callbackCtx_,tt=this.activeObservations_.map(function(at){return new je(at.target,at.broadcastRect())});this.callback_.call(Xe,tt,Xe),this.clearActive()}},qe.prototype.clearActive=function(){this.activeObservations_.splice(0)},qe.prototype.hasActive=function(){return this.activeObservations_.length>0},qe}(),De=typeof WeakMap<"u"?new WeakMap:new we,Ve=function qe(Xe){if(!(this instanceof qe))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var tt=Ee.getInstance(),at=new Ie(Xe,tt,this);De.set(this,at)};["observe","unobserve","disconnect"].forEach(function(qe){Ve.prototype[qe]=function(){var Xe;return(Xe=De.get(this))[qe].apply(Xe,arguments)}});const ze=ye.ResizeObserver!==void 0?ye.ResizeObserver:Ve},413:(oe,le,fe)=>{fe.r(le),fe.d(le,{default:()=>Re});var we=fe(379),ke=fe.n(we),ye=fe(795),ve=fe.n(ye),be=fe(569),Ce=fe.n(be),Ee=fe(565),Oe=fe.n(Ee),Ae=fe(216),Te=fe.n(Ae),Se=fe(589),$e=fe.n(Se),Le=fe(582),Pe={};Pe.styleTagTransform=$e(),Pe.setAttributes=Oe(),Pe.insert=Ce().bind(null,"head"),Pe.domAPI=ve(),Pe.insertStyleElement=Te(),ke()(Le.Z,Pe);const Re=Le.Z&&Le.Z.locals?Le.Z.locals:void 0},379:oe=>{var le=[];function fe(ye){for(var ve=-1,be=0;be<le.length;be++)if(le[be].identifier===ye){ve=be;break}return ve}function we(ye,ve){for(var be={},Ce=[],Ee=0;Ee<ye.length;Ee++){var Oe=ye[Ee],Ae=ve.base?Oe[0]+ve.base:Oe[0],Te=be[Ae]||0,Se="".concat(Ae," ").concat(Te);be[Ae]=Te+1;var $e=fe(Se),Le={css:Oe[1],media:Oe[2],sourceMap:Oe[3],supports:Oe[4],layer:Oe[5]};if($e!==-1)le[$e].references++,le[$e].updater(Le);else{var Pe=ke(Le,ve);ve.byIndex=Ee,le.splice(Ee,0,{identifier:Se,updater:Pe,references:1})}Ce.push(Se)}return Ce}function ke(ye,ve){var be=ve.domAPI(ve);return be.update(ye),function(Ce){if(Ce){if(Ce.css===ye.css&&Ce.media===ye.media&&Ce.sourceMap===ye.sourceMap&&Ce.supports===ye.supports&&Ce.layer===ye.layer)return;be.update(ye=Ce)}else be.remove()}}oe.exports=function(ye,ve){var be=we(ye=ye||[],ve=ve||{});return function(Ce){Ce=Ce||[];for(var Ee=0;Ee<be.length;Ee++){var Oe=fe(be[Ee]);le[Oe].references--}for(var Ae=we(Ce,ve),Te=0;Te<be.length;Te++){var Se=fe(be[Te]);le[Se].references===0&&(le[Se].updater(),le.splice(Se,1))}be=Ae}}},569:oe=>{var le={};oe.exports=function(fe,we){var ke=function(ye){if(le[ye]===void 0){var ve=document.querySelector(ye);if(window.HTMLIFrameElement&&ve instanceof window.HTMLIFrameElement)try{ve=ve.contentDocument.head}catch{ve=null}le[ye]=ve}return le[ye]}(fe);if(!ke)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");ke.appendChild(we)}},216:oe=>{oe.exports=function(le){var fe=document.createElement("style");return le.setAttributes(fe,le.attributes),le.insert(fe,le.options),fe}},565:(oe,le,fe)=>{oe.exports=function(we){var ke=fe.nc;ke&&we.setAttribute("nonce",ke)}},795:oe=>{oe.exports=function(le){var fe=le.insertStyleElement(le);return{update:function(we){(function(ke,ye,ve){var be="";ve.supports&&(be+="@supports (".concat(ve.supports,") {")),ve.media&&(be+="@media ".concat(ve.media," {"));var Ce=ve.layer!==void 0;Ce&&(be+="@layer".concat(ve.layer.length>0?" ".concat(ve.layer):""," {")),be+=ve.css,Ce&&(be+="}"),ve.media&&(be+="}"),ve.supports&&(be+="}");var Ee=ve.sourceMap;Ee&&typeof btoa<"u"&&(be+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(Ee))))," */")),ye.styleTagTransform(be,ke,ye.options)})(fe,le,we)},remove:function(){(function(we){if(we.parentNode===null)return!1;we.parentNode.removeChild(we)})(fe)}}}},589:oe=>{oe.exports=function(le,fe){if(fe.styleSheet)fe.styleSheet.cssText=le;else{for(;fe.firstChild;)fe.removeChild(fe.firstChild);fe.appendChild(document.createTextNode(le))}}},621:(oe,le,fe)=>{var we;(function(ke){var ye=/^\s+/,ve=/\s+$/,be=0,Ce=ke.round,Ee=ke.min,Oe=ke.max,Ae=ke.random;function Te(Ze,rt){if(rt=rt||{},(Ze=Ze||"")instanceof Te)return Ze;if(!(this instanceof Te))return new Te(Ze,rt);var lt=function(nt){var Ye,Be,Ue,He={r:0,g:0,b:0},ot=1,ut=null,gt=null,$t=null,Ke=!1,Me=!1;return typeof nt=="string"&&(nt=function(Fe){Fe=Fe.replace(ye,"").replace(ve,"").toLowerCase();var We,ct=!1;if(it[Fe])Fe=it[Fe],ct=!0;else if(Fe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(We=Et.rgb.exec(Fe))?{r:We[1],g:We[2],b:We[3]}:(We=Et.rgba.exec(Fe))?{r:We[1],g:We[2],b:We[3],a:We[4]}:(We=Et.hsl.exec(Fe))?{h:We[1],s:We[2],l:We[3]}:(We=Et.hsla.exec(Fe))?{h:We[1],s:We[2],l:We[3],a:We[4]}:(We=Et.hsv.exec(Fe))?{h:We[1],s:We[2],v:We[3]}:(We=Et.hsva.exec(Fe))?{h:We[1],s:We[2],v:We[3],a:We[4]}:(We=Et.hex8.exec(Fe))?{r:dt(We[1]),g:dt(We[2]),b:dt(We[3]),a:vt(We[4]),format:ct?"name":"hex8"}:(We=Et.hex6.exec(Fe))?{r:dt(We[1]),g:dt(We[2]),b:dt(We[3]),format:ct?"name":"hex"}:(We=Et.hex4.exec(Fe))?{r:dt(We[1]+""+We[1]),g:dt(We[2]+""+We[2]),b:dt(We[3]+""+We[3]),a:vt(We[4]+""+We[4]),format:ct?"name":"hex8"}:!!(We=Et.hex3.exec(Fe))&&{r:dt(We[1]+""+We[1]),g:dt(We[2]+""+We[2]),b:dt(We[3]+""+We[3]),format:ct?"name":"hex"}}(nt)),typeof nt=="object"&&(Tt(nt.r)&&Tt(nt.g)&&Tt(nt.b)?(Ye=nt.r,Be=nt.g,Ue=nt.b,He={r:255*Je(Ye,255),g:255*Je(Be,255),b:255*Je(Ue,255)},Ke=!0,Me=String(nt.r).substr(-1)==="%"?"prgb":"rgb"):Tt(nt.h)&&Tt(nt.s)&&Tt(nt.v)?(ut=ht(nt.s),gt=ht(nt.v),He=function(Fe,We,ct){Fe=6*Je(Fe,360),We=Je(We,100),ct=Je(ct,100);var _t=ke.floor(Fe),xt=Fe-_t,Pt=ct*(1-We),Nt=ct*(1-xt*We),Dt=ct*(1-(1-xt)*We),Ht=_t%6;return{r:255*[ct,Nt,Pt,Pt,Dt,ct][Ht],g:255*[Dt,ct,ct,Nt,Pt,Pt][Ht],b:255*[Pt,Pt,Dt,ct,ct,Nt][Ht]}}(nt.h,ut,gt),Ke=!0,Me="hsv"):Tt(nt.h)&&Tt(nt.s)&&Tt(nt.l)&&(ut=ht(nt.s),$t=ht(nt.l),He=function(Fe,We,ct){var _t,xt,Pt;function Nt(Mt,an,Qt){return Qt<0&&(Qt+=1),Qt>1&&(Qt-=1),Qt<1/6?Mt+6*(an-Mt)*Qt:Qt<.5?an:Qt<2/3?Mt+(an-Mt)*(2/3-Qt)*6:Mt}if(Fe=Je(Fe,360),We=Je(We,100),ct=Je(ct,100),We===0)_t=xt=Pt=ct;else{var Dt=ct<.5?ct*(1+We):ct+We-ct*We,Ht=2*ct-Dt;_t=Nt(Ht,Dt,Fe+1/3),xt=Nt(Ht,Dt,Fe),Pt=Nt(Ht,Dt,Fe-1/3)}return{r:255*_t,g:255*xt,b:255*Pt}}(nt.h,ut,$t),Ke=!0,Me="hsl"),nt.hasOwnProperty("a")&&(ot=nt.a)),ot=et(ot),{ok:Ke,format:nt.format||Me,r:Ee(255,Oe(He.r,0)),g:Ee(255,Oe(He.g,0)),b:Ee(255,Oe(He.b,0)),a:ot}}(Ze);this._originalInput=Ze,this._r=lt.r,this._g=lt.g,this._b=lt.b,this._a=lt.a,this._roundA=Ce(100*this._a)/100,this._format=rt.format||lt.format,this._gradientType=rt.gradientType,this._r<1&&(this._r=Ce(this._r)),this._g<1&&(this._g=Ce(this._g)),this._b<1&&(this._b=Ce(this._b)),this._ok=lt.ok,this._tc_id=be++}function Se(Ze,rt,lt){Ze=Je(Ze,255),rt=Je(rt,255),lt=Je(lt,255);var nt,Ye,Be=Oe(Ze,rt,lt),Ue=Ee(Ze,rt,lt),He=(Be+Ue)/2;if(Be==Ue)nt=Ye=0;else{var ot=Be-Ue;switch(Ye=He>.5?ot/(2-Be-Ue):ot/(Be+Ue),Be){case Ze:nt=(rt-lt)/ot+(rt<lt?6:0);break;case rt:nt=(lt-Ze)/ot+2;break;case lt:nt=(Ze-rt)/ot+4}nt/=6}return{h:nt,s:Ye,l:He}}function $e(Ze,rt,lt){Ze=Je(Ze,255),rt=Je(rt,255),lt=Je(lt,255);var nt,Ye,Be=Oe(Ze,rt,lt),Ue=Ee(Ze,rt,lt),He=Be,ot=Be-Ue;if(Ye=Be===0?0:ot/Be,Be==Ue)nt=0;else{switch(Be){case Ze:nt=(rt-lt)/ot+(rt<lt?6:0);break;case rt:nt=(lt-Ze)/ot+2;break;case lt:nt=(Ze-rt)/ot+4}nt/=6}return{h:nt,s:Ye,v:He}}function Le(Ze,rt,lt,nt){var Ye=[Qe(Ce(Ze).toString(16)),Qe(Ce(rt).toString(16)),Qe(Ce(lt).toString(16))];return nt&&Ye[0].charAt(0)==Ye[0].charAt(1)&&Ye[1].charAt(0)==Ye[1].charAt(1)&&Ye[2].charAt(0)==Ye[2].charAt(1)?Ye[0].charAt(0)+Ye[1].charAt(0)+Ye[2].charAt(0):Ye.join("")}function Pe(Ze,rt,lt,nt){return[Qe(mt(nt)),Qe(Ce(Ze).toString(16)),Qe(Ce(rt).toString(16)),Qe(Ce(lt).toString(16))].join("")}function Re(Ze,rt){rt=rt===0?0:rt||10;var lt=Te(Ze).toHsl();return lt.s-=rt/100,lt.s=ft(lt.s),Te(lt)}function Ne(Ze,rt){rt=rt===0?0:rt||10;var lt=Te(Ze).toHsl();return lt.s+=rt/100,lt.s=ft(lt.s),Te(lt)}function je(Ze){return Te(Ze).desaturate(100)}function Ie(Ze,rt){rt=rt===0?0:rt||10;var lt=Te(Ze).toHsl();return lt.l+=rt/100,lt.l=ft(lt.l),Te(lt)}function De(Ze,rt){rt=rt===0?0:rt||10;var lt=Te(Ze).toRgb();return lt.r=Oe(0,Ee(255,lt.r-Ce(-rt/100*255))),lt.g=Oe(0,Ee(255,lt.g-Ce(-rt/100*255))),lt.b=Oe(0,Ee(255,lt.b-Ce(-rt/100*255))),Te(lt)}function Ve(Ze,rt){rt=rt===0?0:rt||10;var lt=Te(Ze).toHsl();return lt.l-=rt/100,lt.l=ft(lt.l),Te(lt)}function ze(Ze,rt){var lt=Te(Ze).toHsl(),nt=(lt.h+rt)%360;return lt.h=nt<0?360+nt:nt,Te(lt)}function qe(Ze){var rt=Te(Ze).toHsl();return rt.h=(rt.h+180)%360,Te(rt)}function Xe(Ze){var rt=Te(Ze).toHsl(),lt=rt.h;return[Te(Ze),Te({h:(lt+120)%360,s:rt.s,l:rt.l}),Te({h:(lt+240)%360,s:rt.s,l:rt.l})]}function tt(Ze){var rt=Te(Ze).toHsl(),lt=rt.h;return[Te(Ze),Te({h:(lt+90)%360,s:rt.s,l:rt.l}),Te({h:(lt+180)%360,s:rt.s,l:rt.l}),Te({h:(lt+270)%360,s:rt.s,l:rt.l})]}function at(Ze){var rt=Te(Ze).toHsl(),lt=rt.h;return[Te(Ze),Te({h:(lt+72)%360,s:rt.s,l:rt.l}),Te({h:(lt+216)%360,s:rt.s,l:rt.l})]}function pt(Ze,rt,lt){rt=rt||6,lt=lt||30;var nt=Te(Ze).toHsl(),Ye=360/lt,Be=[Te(Ze)];for(nt.h=(nt.h-(Ye*rt>>1)+720)%360;--rt;)nt.h=(nt.h+Ye)%360,Be.push(Te(nt));return Be}function st(Ze,rt){rt=rt||6;for(var lt=Te(Ze).toHsv(),nt=lt.h,Ye=lt.s,Be=lt.v,Ue=[],He=1/rt;rt--;)Ue.push(Te({h:nt,s:Ye,v:Be})),Be=(Be+He)%1;return Ue}Te.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Ze=this.toRgb();return(299*Ze.r+587*Ze.g+114*Ze.b)/1e3},getLuminance:function(){var Ze,rt,lt,nt=this.toRgb();return Ze=nt.r/255,rt=nt.g/255,lt=nt.b/255,.2126*(Ze<=.03928?Ze/12.92:ke.pow((Ze+.055)/1.055,2.4))+.7152*(rt<=.03928?rt/12.92:ke.pow((rt+.055)/1.055,2.4))+.0722*(lt<=.03928?lt/12.92:ke.pow((lt+.055)/1.055,2.4))},setAlpha:function(Ze){return this._a=et(Ze),this._roundA=Ce(100*this._a)/100,this},toHsv:function(){var Ze=$e(this._r,this._g,this._b);return{h:360*Ze.h,s:Ze.s,v:Ze.v,a:this._a}},toHsvString:function(){var Ze=$e(this._r,this._g,this._b),rt=Ce(360*Ze.h),lt=Ce(100*Ze.s),nt=Ce(100*Ze.v);return this._a==1?"hsv("+rt+", "+lt+"%, "+nt+"%)":"hsva("+rt+", "+lt+"%, "+nt+"%, "+this._roundA+")"},toHsl:function(){var Ze=Se(this._r,this._g,this._b);return{h:360*Ze.h,s:Ze.s,l:Ze.l,a:this._a}},toHslString:function(){var Ze=Se(this._r,this._g,this._b),rt=Ce(360*Ze.h),lt=Ce(100*Ze.s),nt=Ce(100*Ze.l);return this._a==1?"hsl("+rt+", "+lt+"%, "+nt+"%)":"hsla("+rt+", "+lt+"%, "+nt+"%, "+this._roundA+")"},toHex:function(Ze){return Le(this._r,this._g,this._b,Ze)},toHexString:function(Ze){return"#"+this.toHex(Ze)},toHex8:function(Ze){return function(rt,lt,nt,Ye,Be){var Ue=[Qe(Ce(rt).toString(16)),Qe(Ce(lt).toString(16)),Qe(Ce(nt).toString(16)),Qe(mt(Ye))];return Be&&Ue[0].charAt(0)==Ue[0].charAt(1)&&Ue[1].charAt(0)==Ue[1].charAt(1)&&Ue[2].charAt(0)==Ue[2].charAt(1)&&Ue[3].charAt(0)==Ue[3].charAt(1)?Ue[0].charAt(0)+Ue[1].charAt(0)+Ue[2].charAt(0)+Ue[3].charAt(0):Ue.join("")}(this._r,this._g,this._b,this._a,Ze)},toHex8String:function(Ze){return"#"+this.toHex8(Ze)},toRgb:function(){return{r:Ce(this._r),g:Ce(this._g),b:Ce(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Ce(this._r)+", "+Ce(this._g)+", "+Ce(this._b)+")":"rgba("+Ce(this._r)+", "+Ce(this._g)+", "+Ce(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Ce(100*Je(this._r,255))+"%",g:Ce(100*Je(this._g,255))+"%",b:Ce(100*Je(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Ce(100*Je(this._r,255))+"%, "+Ce(100*Je(this._g,255))+"%, "+Ce(100*Je(this._b,255))+"%)":"rgba("+Ce(100*Je(this._r,255))+"%, "+Ce(100*Je(this._g,255))+"%, "+Ce(100*Je(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Ge[Le(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Ze){var rt="#"+Pe(this._r,this._g,this._b,this._a),lt=rt,nt=this._gradientType?"GradientType = 1, ":"";if(Ze){var Ye=Te(Ze);lt="#"+Pe(Ye._r,Ye._g,Ye._b,Ye._a)}return"progid:DXImageTransform.Microsoft.gradient("+nt+"startColorstr="+rt+",endColorstr="+lt+")"},toString:function(Ze){var rt=!!Ze;Ze=Ze||this._format;var lt=!1,nt=this._a<1&&this._a>=0;return rt||!nt||Ze!=="hex"&&Ze!=="hex6"&&Ze!=="hex3"&&Ze!=="hex4"&&Ze!=="hex8"&&Ze!=="name"?(Ze==="rgb"&&(lt=this.toRgbString()),Ze==="prgb"&&(lt=this.toPercentageRgbString()),Ze!=="hex"&&Ze!=="hex6"||(lt=this.toHexString()),Ze==="hex3"&&(lt=this.toHexString(!0)),Ze==="hex4"&&(lt=this.toHex8String(!0)),Ze==="hex8"&&(lt=this.toHex8String()),Ze==="name"&&(lt=this.toName()),Ze==="hsl"&&(lt=this.toHslString()),Ze==="hsv"&&(lt=this.toHsvString()),lt||this.toHexString()):Ze==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return Te(this.toString())},_applyModification:function(Ze,rt){var lt=Ze.apply(null,[this].concat([].slice.call(rt)));return this._r=lt._r,this._g=lt._g,this._b=lt._b,this.setAlpha(lt._a),this},lighten:function(){return this._applyModification(Ie,arguments)},brighten:function(){return this._applyModification(De,arguments)},darken:function(){return this._applyModification(Ve,arguments)},desaturate:function(){return this._applyModification(Re,arguments)},saturate:function(){return this._applyModification(Ne,arguments)},greyscale:function(){return this._applyModification(je,arguments)},spin:function(){return this._applyModification(ze,arguments)},_applyCombination:function(Ze,rt){return Ze.apply(null,[this].concat([].slice.call(rt)))},analogous:function(){return this._applyCombination(pt,arguments)},complement:function(){return this._applyCombination(qe,arguments)},monochromatic:function(){return this._applyCombination(st,arguments)},splitcomplement:function(){return this._applyCombination(at,arguments)},triad:function(){return this._applyCombination(Xe,arguments)},tetrad:function(){return this._applyCombination(tt,arguments)}},Te.fromRatio=function(Ze,rt){if(typeof Ze=="object"){var lt={};for(var nt in Ze)Ze.hasOwnProperty(nt)&&(lt[nt]=nt==="a"?Ze[nt]:ht(Ze[nt]));Ze=lt}return Te(Ze,rt)},Te.equals=function(Ze,rt){return!(!Ze||!rt)&&Te(Ze).toRgbString()==Te(rt).toRgbString()},Te.random=function(){return Te.fromRatio({r:Ae(),g:Ae(),b:Ae()})},Te.mix=function(Ze,rt,lt){lt=lt===0?0:lt||50;var nt=Te(Ze).toRgb(),Ye=Te(rt).toRgb(),Be=lt/100;return Te({r:(Ye.r-nt.r)*Be+nt.r,g:(Ye.g-nt.g)*Be+nt.g,b:(Ye.b-nt.b)*Be+nt.b,a:(Ye.a-nt.a)*Be+nt.a})},Te.readability=function(Ze,rt){var lt=Te(Ze),nt=Te(rt);return(ke.max(lt.getLuminance(),nt.getLuminance())+.05)/(ke.min(lt.getLuminance(),nt.getLuminance())+.05)},Te.isReadable=function(Ze,rt,lt){var nt,Ye,Be,Ue,He,ot=Te.readability(Ze,rt);switch(Ye=!1,(Be=lt,(Ue=((Be=Be||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&Ue!=="AAA"&&(Ue="AA"),(He=(Be.size||"small").toLowerCase())!=="small"&&He!=="large"&&(He="small"),nt={level:Ue,size:He}).level+nt.size){case"AAsmall":case"AAAlarge":Ye=ot>=4.5;break;case"AAlarge":Ye=ot>=3;break;case"AAAsmall":Ye=ot>=7}return Ye},Te.mostReadable=function(Ze,rt,lt){var nt,Ye,Be,Ue,He=null,ot=0;Ye=(lt=lt||{}).includeFallbackColors,Be=lt.level,Ue=lt.size;for(var ut=0;ut<rt.length;ut++)(nt=Te.readability(Ze,rt[ut]))>ot&&(ot=nt,He=Te(rt[ut]));return Te.isReadable(Ze,He,{level:Be,size:Ue})||!Ye?He:(lt.includeFallbackColors=!1,Te.mostReadable(Ze,["#fff","#000"],lt))};var it=Te.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ge=Te.hexNames=function(Ze){var rt={};for(var lt in Ze)Ze.hasOwnProperty(lt)&&(rt[Ze[lt]]=lt);return rt}(it);function et(Ze){return Ze=parseFloat(Ze),(isNaN(Ze)||Ze<0||Ze>1)&&(Ze=1),Ze}function Je(Ze,rt){(function(nt){return typeof nt=="string"&&nt.indexOf(".")!=-1&&parseFloat(nt)===1})(Ze)&&(Ze="100%");var lt=function(nt){return typeof nt=="string"&&nt.indexOf("%")!=-1}(Ze);return Ze=Ee(rt,Oe(0,parseFloat(Ze))),lt&&(Ze=parseInt(Ze*rt,10)/100),ke.abs(Ze-rt)<1e-6?1:Ze%rt/parseFloat(rt)}function ft(Ze){return Ee(1,Oe(0,Ze))}function dt(Ze){return parseInt(Ze,16)}function Qe(Ze){return Ze.length==1?"0"+Ze:""+Ze}function ht(Ze){return Ze<=1&&(Ze=100*Ze+"%"),Ze}function mt(Ze){return ke.round(255*parseFloat(Ze)).toString(16)}function vt(Ze){return dt(Ze)/255}var wt,St,At,Et=(St="[\\s|\\(]+("+(wt="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")\\s*\\)?",At="[\\s|\\(]+("+wt+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")\\s*\\)?",{CSS_UNIT:new RegExp(wt),rgb:new RegExp("rgb"+St),rgba:new RegExp("rgba"+At),hsl:new RegExp("hsl"+St),hsla:new RegExp("hsla"+At),hsv:new RegExp("hsv"+St),hsva:new RegExp("hsva"+At),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Tt(Ze){return!!Et.CSS_UNIT.exec(Ze)}oe.exports?oe.exports=Te:(we=function(){return Te}.call(le,fe,le,oe))===void 0||(oe.exports=we)})(Math)},607:function(oe,le,fe){var we=this&&this.__importDefault||function(ve){return ve&&ve.__esModule?ve:{default:ve}};Object.defineProperty(le,"__esModule",{value:!0}),le.Cursor=le.default=void 0;var ke=we(fe(678));le.default=ke.default;var ye=we(fe(353));le.Cursor=ye.default,fe(413)},353:(oe,le,fe)=>{Object.defineProperty(le,"__esModule",{value:!0});var we=fe(621),ke=function(){function ye(ve,be,Ce){this.id=ve,this.name=be,this.color=Ce,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return ye.prototype.build=function(ve){var be=document.createElement(ye.CONTAINER_ELEMENT_TAG);be.classList.add(ye.CURSOR_CLASS),be.id="ql-cursor-".concat(this.id),be.innerHTML=ve.template;var Ce=be.getElementsByClassName(ye.SELECTION_CLASS)[0],Ee=be.getElementsByClassName(ye.CARET_CONTAINER_CLASS)[0],Oe=Ee.getElementsByClassName(ye.CARET_CLASS)[0],Ae=be.getElementsByClassName(ye.FLAG_CLASS)[0];return Ae.style.backgroundColor=this.color,Oe.style.backgroundColor=this.color,be.getElementsByClassName(ye.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(ve.hideDelayMs,"ms"),this._hideSpeedMs=ve.hideSpeedMs,this._positionFlag=ve.positionFlag,Ae.style.transitionDelay=this._hideDelay,Ae.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=be,this._selectionEl=Ce,this._caretEl=Ee,this._flagEl=Ae,Ee.addEventListener("mouseover",this._setHoverState),this._el},ye.prototype.show=function(){this._el.classList.remove(ye.HIDDEN_CLASS)},ye.prototype.hide=function(){this._el.classList.add(ye.HIDDEN_CLASS)},ye.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},ye.prototype.toggleNearCursor=function(ve,be){var Ce=this._getCoordinates(),Ee=Ce.left,Oe=Ce.right,Ae=Ce.top,Te=Ce.bottom,Se=ve>=Ee&&ve<=Oe&&be>=Ae&&be<=Te;return this._caretEl.classList.toggle(ye.CONTAINER_HOVER_CLASS,Se),Se},ye.prototype.toggleFlag=function(ve){var be=this;this._caretEl.classList.toggle(ye.CONTAINER_HOVER_CLASS,ve)||(this._flagEl.classList.add(ye.NO_DELAY_CLASS),setTimeout(function(){return be._flagEl.classList.remove(ye.NO_DELAY_CLASS)},this._hideSpeedMs))},ye.prototype.updateCaret=function(ve,be){this._caretEl.style.top="".concat(ve.top,"px"),this._caretEl.style.left="".concat(ve.left,"px"),this._caretEl.style.height="".concat(ve.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,ve,be):this._updateCaretFlag(ve,be)},ye.prototype.updateSelection=function(ve,be){var Ce=this;this._clearSelection(),ve=ve||[],ve=Array.from(ve),ve=this._sanitize(ve),(ve=this._sortByDomPosition(ve)).forEach(function(Ee){return Ce._addSelection(Ee,be)})},ye.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},ye.prototype._toggleOpenedCursor=function(ve){var be=this.toggleNearCursor(ve.clientX,ve.clientY);this._caretEl.classList.toggle(ye.CONTAINER_NO_POINTER_CLASS,be),be||document.removeEventListener("mousemove",this._toggleOpenedCursor)},ye.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},ye.prototype._updateCaretFlag=function(ve,be){this._flagEl.style.width="";var Ce=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(ye.FLAG_FLIPPED_CLASS),ve.left>be.width-Ce.width&&this._flagEl.classList.add(ye.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(ve.left,"px"),this._flagEl.style.top="".concat(ve.top,"px"),this._flagEl.style.width="".concat(Math.ceil(Ce.width),"px")},ye.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},ye.prototype._addSelection=function(ve,be){var Ce=this._selectionBlock(ve,be);this._selectionEl.appendChild(Ce)},ye.prototype._selectionBlock=function(ve,be){var Ce=document.createElement(ye.SELECTION_ELEMENT_TAG);return Ce.classList.add(ye.SELECTION_BLOCK_CLASS),Ce.style.top="".concat(ve.top-be.top,"px"),Ce.style.left="".concat(ve.left-be.left,"px"),Ce.style.width="".concat(ve.width,"px"),Ce.style.height="".concat(ve.height,"px"),Ce.style.backgroundColor=we(this.color).setAlpha(.3).toString(),Ce},ye.prototype._sortByDomPosition=function(ve){return ve.sort(function(be,Ce){return be.top===Ce.top?be.left-Ce.left:be.top-Ce.top})},ye.prototype._sanitize=function(ve){var be=this,Ce=new Set;return ve.filter(function(Ee){if(!Ee.width||!Ee.height)return!1;var Oe=be._serialize(Ee);return!Ce.has(Oe)&&(Ce.add(Oe),!0)})},ye.prototype._serialize=function(ve){return["top:".concat(ve.top),"right:".concat(ve.right),"bottom:".concat(ve.bottom),"left:".concat(ve.left)].join(";")},ye.CONTAINER_ELEMENT_TAG="SPAN",ye.SELECTION_ELEMENT_TAG="SPAN",ye.CURSOR_CLASS="ql-cursor",ye.SELECTION_CLASS="ql-cursor-selections",ye.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",ye.CARET_CLASS="ql-cursor-caret",ye.CARET_CONTAINER_CLASS="ql-cursor-caret-container",ye.CONTAINER_HOVER_CLASS="hover",ye.CONTAINER_NO_POINTER_CLASS="no-pointer",ye.FLAG_CLASS="ql-cursor-flag",ye.FLAG_FLIPPED_CLASS="flag-flipped",ye.NAME_CLASS="ql-cursor-name",ye.HIDDEN_CLASS="hidden",ye.NO_DELAY_CLASS="no-delay",ye}();le.default=ke},678:function(oe,le,fe){var we=this&&this.__createBinding||(Object.create?function(Se,$e,Le,Pe){Pe===void 0&&(Pe=Le),Object.defineProperty(Se,Pe,{enumerable:!0,get:function(){return $e[Le]}})}:function(Se,$e,Le,Pe){Pe===void 0&&(Pe=Le),Se[Pe]=$e[Le]}),ke=this&&this.__setModuleDefault||(Object.create?function(Se,$e){Object.defineProperty(Se,"default",{enumerable:!0,value:$e})}:function(Se,$e){Se.default=$e}),ye=this&&this.__importStar||function(Se){if(Se&&Se.__esModule)return Se;var $e={};if(Se!=null)for(var Le in Se)Le!=="default"&&Object.prototype.hasOwnProperty.call(Se,Le)&&we($e,Se,Le);return ke($e,Se),$e},ve=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(le,"__esModule",{value:!0});var be=ve(fe(353)),Ce=ye(fe(165)),Ee=ve(fe(338)),Oe=ve(fe(33)),Ae=fe(895),Te=function(){function Se($e,Le){Le===void 0&&(Le={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=$e,this.options=this._setDefaults(Le),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return Se.prototype.createCursor=function($e,Le,Pe){var Re=this._cursors[$e];if(!Re){Re=new be.default($e,Le,Pe),this._cursors[$e]=Re;var Ne=Re.build(this.options);this._container.appendChild(Ne)}return Re},Se.prototype.moveCursor=function($e,Le){var Pe=this._cursors[$e];Pe&&(Pe.range=Le,this._updateCursor(Pe))},Se.prototype.removeCursor=function($e){var Le=this._cursors[$e];Le&&(Le.remove(),delete this._cursors[$e])},Se.prototype.update=function(){var $e=this;this.cursors().forEach(function(Le){return $e._updateCursor(Le)})},Se.prototype.clearCursors=function(){var $e=this;this.cursors().forEach(function(Le){return $e.removeCursor(Le.id)})},Se.prototype.toggleFlag=function($e,Le){var Pe=this._cursors[$e];Pe&&Pe.toggleFlag(Le)},Se.prototype.cursors=function(){var $e=this;return Object.keys(this._cursors).map(function(Le){return $e._cursors[Le]})},Se.prototype._registerSelectionChangeListeners=function(){var $e=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(Le){$e._currentSelection=Le})},Se.prototype._registerTextChangeListener=function(){var $e=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(Le){return $e._handleTextChange(Le)})},Se.prototype._registerDomListeners=function(){var $e=this,Le=this.quill.container.getElementsByClassName("ql-editor")[0];Le.addEventListener("scroll",function(){return $e.update()}),Le.addEventListener("touchstart",this._handleCursorTouch)},Se.prototype._handleCursorTouch=function($e){var Le=this;this.cursors().forEach(function(Pe){Pe.toggleNearCursor($e.pageX,$e.pageY),setTimeout(function(){return Pe.toggleFlag(!1)},Le.options.hideDelayMs)})},Se.prototype._registerResizeObserver=function(){var $e=this;if(!this._isObserving){var Le=this.quill.container.getElementsByClassName("ql-editor")[0],Pe=new Oe.default(function(Re){Re[0].target.isConnected||(Pe.disconnect(),$e._isObserving=!1),$e.update()});Pe.observe(Le),this._isObserving=!0}},Se.prototype._updateCursor=function($e){if(this._registerResizeObserver(),!$e.range)return $e.hide();var Le=this._indexWithinQuillBounds($e.range.index),Pe=this._indexWithinQuillBounds($e.range.index+$e.range.length),Re=this.quill.getLeaf(Le),Ne=this.quill.getLeaf(Pe);if(!this._leafIsValid(Re)||!this._leafIsValid(Ne))return $e.hide();$e.show();var je=this._boundsContainer.getBoundingClientRect(),Ie=this.quill.getBounds(Pe);$e.updateCaret(Ie,je);var De=this._lineRanges($e,Re,Ne).reduce(function(Ve,ze){return Ve.concat(Array.from(Ce.getClientRects(ze)))},[]);$e.updateSelection(De,je)},Se.prototype._indexWithinQuillBounds=function($e){var Le=this.quill.getLength(),Pe=Le?Le-1:0;return $e=Math.max($e,0),Math.min($e,Pe)},Se.prototype._leafIsValid=function($e){return $e&&$e[0]&&$e[0].domNode&&$e[1]>=0},Se.prototype._handleTextChange=function($e){var Le=this;window.setTimeout(function(){Le.options.transformOnTextChange&&Le._transformCursors($e),Le.options.selectionChangeSource&&(Le._emitSelection(),Le.update())})},Se.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},Se.prototype._setDefaults=function($e){return($e=Object.assign({},$e)).template||($e.template=Se.DEFAULTS.template),$e.containerClass||($e.containerClass=Se.DEFAULTS.containerClass),$e.selectionChangeSource!==null&&($e.selectionChangeSource||($e.selectionChangeSource=Se.DEFAULTS.selectionChangeSource)),$e.hideDelayMs=Number.isInteger($e.hideDelayMs)?$e.hideDelayMs:Se.DEFAULTS.hideDelayMs,$e.hideSpeedMs=Number.isInteger($e.hideSpeedMs)?$e.hideSpeedMs:Se.DEFAULTS.hideSpeedMs,$e.transformOnTextChange=!!$e.transformOnTextChange,$e},Se.prototype._lineRanges=function($e,Le,Pe){var Re=this.quill.getLines($e.range);return Re.reduce(function(Ne,je,Ie){if(!je.children){var De=document.createRange();return De.selectNode(je.domNode),Ne.concat(De)}var Ve=Ie===0?Le:je.path(0).pop(),ze=Ve[0],qe=Ve[1],Xe=Ie===Re.length-1?Pe:je.path(je.length()-1).pop(),tt=Xe[0],at=Xe[1],pt=document.createRange();return ze.domNode.nodeType===Node.TEXT_NODE?pt.setStart(ze.domNode,qe):pt.setStartBefore(ze.domNode),tt.domNode.nodeType===Node.TEXT_NODE?pt.setEnd(tt.domNode,at):pt.setEndAfter(tt.domNode),Ne.concat(pt)},[])},Se.prototype._transformCursors=function($e){var Le=this;$e=new Ae($e),this.cursors().filter(function(Pe){return Pe.range}).forEach(function(Pe){Pe.range.index=$e.transformPosition(Pe.range.index),Le._updateCursor(Pe)})},Se.DEFAULTS={template:Ee.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},Se}();le.default=Te},338:function(oe,le,fe){var we=this&&this.__importDefault||function(ve){return ve&&ve.__esModule?ve:{default:ve}};Object.defineProperty(le,"__esModule",{value:!0});var ke=we(fe(353)),ye=`
  <span class="`.concat(ke.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(ke.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(ke.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(ke.default.FLAG_CLASS,`">
    <small class="`).concat(ke.default.NAME_CLASS,`"></small>
  </div>
`);le.default=ye}},te={};function ne(oe){var le=te[oe];if(le!==void 0)return le.exports;var fe=te[oe]={id:oe,loaded:!1,exports:{}};return X[oe].call(fe.exports,fe,fe.exports,ne),fe.loaded=!0,fe.exports}ne.n=oe=>{var le=oe&&oe.__esModule?()=>oe.default:()=>oe;return ne.d(le,{a:le}),le},ne.d=(oe,le)=>{for(var fe in le)ne.o(le,fe)&&!ne.o(oe,fe)&&Object.defineProperty(oe,fe,{enumerable:!0,get:le[fe]})},ne.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ne.o=(oe,le)=>Object.prototype.hasOwnProperty.call(oe,le),ne.r=oe=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(oe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(oe,"__esModule",{value:!0})},ne.nmd=oe=>(oe.paths=[],oe.children||(oe.children=[]),oe),ne.nc=void 0;var re=ne(607);return re.default})())})(quillCursors);const QuillCursors=getDefaultExportFromCjs(quillCursorsExports),_Shortcuts=class{static match(q,j,X){const te=q.getSelection();if(!te)return PREVENT_DEFAULT;const[ne]=q.getLine(te.index);if(_Shortcuts._isValid(X,ne.domNode.tagName)){for(const re of _Shortcuts._matches)if(X.match(re.pattern))return re.action(j,q,X,te,re.pattern)}return PREVENT_DEFAULT}static _isValid(q,j){return typeof q<"u"&&q&&_Shortcuts._ignoreTags.indexOf(j)===-1}};let Shortcuts=_Shortcuts;Shortcuts._ignoreTags=["PRE"];Shortcuts._matches=[{name:"bolditalic",pattern:/(?:\*){3}(.+?)(?:\*){3}$/g,action:(q,j,X,te,ne)=>{var fe,we,ke,ye,ve;const re=ne.exec(X);if(!re)return PREVENT_DEFAULT;const oe=re[0],le=te.index-oe.length;return X.match(/^([* \n]+)$/g)?PREVENT_DEFAULT:((fe=q.text)==null||fe.insert(" ",le+oe.length),q.page.captureSync(),(we=q.text)==null||we.format(le,oe.length,{bold:!0,italic:!0}),j.setSelection(le+oe.length+1,0),(ke=q.text)==null||ke.delete(le+oe.length,1),(ye=q.text)==null||ye.delete(le+oe.length-3,3),(ve=q.text)==null||ve.delete(le,3),j.format("bold",!1),j.format("italic",!1),ALLOW_DEFAULT)}},{name:"bold",pattern:/(?:\*){2}(.+?)(?:\*){2}$/g,action:(q,j,X,te,ne)=>{var fe,we,ke,ye,ve;const re=ne.exec(X);if(!re)return PREVENT_DEFAULT;const oe=re[0],le=te.index-oe.length;return X.match(/^([* \n]+)$/g)?PREVENT_DEFAULT:((fe=q.text)==null||fe.insert(" ",le+oe.length),q.page.captureSync(),(we=q.text)==null||we.format(le,oe.length,{bold:!0}),j.setSelection(le+oe.length+1,0),(ke=q.text)==null||ke.delete(le+oe.length,1),(ye=q.text)==null||ye.delete(le+oe.length-2,2),(ve=q.text)==null||ve.delete(le,2),j.format("bold",!1),ALLOW_DEFAULT)}},{name:"italic",pattern:/(?:\*){1}(.+?)(?:\*){1}$/g,action:(q,j,X,te,ne)=>{var fe,we,ke,ye,ve;const re=ne.exec(X);if(!re)return PREVENT_DEFAULT;const oe=re[0],le=te.index-oe.length;return X.match(/^([* \n]+)$/g)?PREVENT_DEFAULT:((fe=q.text)==null||fe.insert(" ",le+oe.length),q.page.captureSync(),(we=q.text)==null||we.format(le,oe.length,{italic:!0}),j.setSelection(le+oe.length+1,0),(ke=q.text)==null||ke.delete(le+oe.length,1),(ye=q.text)==null||ye.delete(le+oe.length-1,1),(ve=q.text)==null||ve.delete(le,1),j.format("italic",!1),ALLOW_DEFAULT)}},{name:"strikethrough",pattern:/(?:~~)(.+?)(?:~~)$/g,action:(q,j,X,te,ne)=>{var fe,we,ke,ye,ve;const re=ne.exec(X);if(!re)return PREVENT_DEFAULT;const oe=re[0],le=te.index-oe.length;return X.match(/^([* \n]+)$/g)?PREVENT_DEFAULT:((fe=q.text)==null||fe.insert(" ",le+oe.length),q.page.captureSync(),(we=q.text)==null||we.format(le,oe.length,{strike:!0}),j.setSelection(le+oe.length+1,0),(ke=q.text)==null||ke.delete(le+oe.length,1),(ye=q.text)==null||ye.delete(le+oe.length-2,2),(ve=q.text)==null||ve.delete(le,2),j.format("strike",!1),ALLOW_DEFAULT)}},{name:"underthrough",pattern:/(?:~)(.+?)(?:~)$/g,action:(q,j,X,te,ne)=>{var fe,we,ke,ye,ve,be;const re=ne.exec(X);if(!re)return PREVENT_DEFAULT;const oe=re[0],le=te.index-oe.length;return X.match(/^([* \n]+)$/g)?PREVENT_DEFAULT:((fe=q.text)==null||fe.insert(" ",te.index),q.page.captureSync(),(we=q.text)==null||we.format(le,oe.length,{underline:!0}),j.setSelection(le+oe.length+1,0),(ke=q.text)==null||ke.delete(le+oe.length,1),(ye=q.text)==null||ye.delete(te.index,1),(ve=q.text)==null||ve.delete(te.index-1,1),(be=q.text)==null||be.delete(le,1),j.format("underline",!1),ALLOW_DEFAULT)}},{name:"code",pattern:/(?:`)([^`]+?)(?:`)$/g,action:(q,j,X,te,ne)=>{var fe,we,ke,ye,ve;const re=ne.exec(X);if(!re)return PREVENT_DEFAULT;const oe=re[0],le=te.index-oe.length;return X.match(/^([* \n]+)$/g)?PREVENT_DEFAULT:((fe=q.text)==null||fe.insert(" ",le+oe.length),q.page.captureSync(),(we=q.text)==null||we.format(le,oe.length,{code:!0}),j.setSelection(le+oe.length+1,0),(ke=q.text)==null||ke.delete(le+oe.length,1),(ye=q.text)==null||ye.delete(le+oe.length-1,1),(ve=q.text)==null||ve.delete(le,1),j.format("code",!1),ALLOW_DEFAULT)}},{name:"codeblock",pattern:/^```/g,action:(q,j,X,te,ne)=>{if(q.flavour==="affine:paragraph"&&q.type==="quote")return PREVENT_DEFAULT;const re=getDefaultPageBlock(q).page,oe=re.getParent(q);assertExists(oe);const le=oe.children.indexOf(q),fe={flavour:"affine:code"};return re.deleteBlock(q),re.addBlock(fe,oe,le),ALLOW_DEFAULT}},{name:"link",pattern:/(((https?|ftp|file):\/\/)|www.)[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]$/g,action:(q,j,X,te,ne)=>{var fe,we,ke;const re=ne.exec(X);if(!re)return PREVENT_DEFAULT;const oe=re[0],le=te.index-oe.length;return(fe=q.text)==null||fe.insert(" ",le+oe.length),q.page.captureSync(),(we=q.text)==null||we.format(le,oe.length,{link:oe}),j.setSelection(le+oe.length+1,0),(ke=q.text)==null||ke.delete(le+oe.length,1),j.format("link",!1),ALLOW_DEFAULT}},{name:"link",pattern:/(?:\[(.+?)\])(?:\((.+?)\))$/g,action:(q,j,X,te,ne)=>{var ke,ye,ve,be,Ce,Ee,Oe,Ae;const re=X.search(ne),oe=(ke=X.match(ne))==null?void 0:ke[0],le=(ye=X.match(/(?:\[(.*?)\])/g))==null?void 0:ye[0],fe=(ve=X.match(/(?:\((.*?)\))/g))==null?void 0:ve[0];if(re===-1||!oe||!le||!fe)return PREVENT_DEFAULT;const we=te.index-oe.length;return(be=q.text)==null||be.insert(" ",te.index),q.page.captureSync(),(Ce=q.text)==null||Ce.format(we,le.length,{link:fe.slice(1,fe.length-1)}),j.setSelection(re+oe.length+1,0),(Ee=q.text)==null||Ee.delete(re+oe.length,1),(Oe=q.text)==null||Oe.delete(te.index-fe.length-1,fe.length+1),(Ae=q.text)==null||Ae.delete(we,1),j.format("link",!1),ALLOW_DEFAULT}}];function isAtBlockEnd(q){var j;return q.getLength()-1===((j=q.getSelection(!0))==null?void 0:j.index)}function createKeyboardBindings(q,j){function X(Ee,Oe){const{prefix:Ae}=Oe;return Shortcuts.match(this.quill,j,Ae),ALLOW_DEFAULT}function te(Ee,Oe){const{prefix:Ae}=Oe;return Shortcuts.match(this.quill,j,Ae)?PREVENT_DEFAULT:ALLOW_DEFAULT}function ne(){var Le,Pe;const Ee=isAtBlockEnd(this.quill),Oe=q.getParent(j),Ae=(Oe==null?void 0:Oe.lastChild())===j,Te=matchFlavours(j,["affine:list"])&&((Le=j.text)==null?void 0:Le.length)===0,Se=((Pe=this.quill.getSelection())==null?void 0:Pe.index)||0,$e=[{flavour:"affine:paragraph",type:"quote"},{flavour:"affine:code",type:"code"}];if(Te&&Oe&&matchFlavours(Oe,["affine:group"])&&j.children.length===0)handleLineStartBackspace(q,j);else if(Te&&Ae)handleUnindent(q,j,Se);else if(Ee){const Re=$e.find(({flavour:Ie,type:De})=>j.flavour===Ie&&j.type===De),Ne=/\n\n$/.test(this.quill.getText());Re&&!Ne?re.bind(this)():(Re&&this.quill.deleteText(Se,1),handleBlockEndEnter(q,j))}else $e.findIndex(({flavour:Ne,type:je})=>j.flavour===Ne&&j.type===je)!==-1?re.bind(this)():handleBlockSplit(q,j,Se);return PREVENT_DEFAULT}function re(){var Oe;const Ee=((Oe=this.quill.getSelection())==null?void 0:Oe.index)||0;return handleSoftEnter(q,j,Ee),this.quill.setSelection(Ee+1,0),PREVENT_DEFAULT}function oe(){var Oe;const Ee=(Oe=this.quill.getSelection())==null?void 0:Oe.index;return handleIndent(q,j,Ee),PREVENT_DEFAULT}function le(){var Oe;const Ee=(Oe=this.quill.getSelection())==null?void 0:Oe.index;return handleUnindent(q,j,Ee),PREVENT_DEFAULT}function fe(Ee){return Ee.index>=0?handleKeyUp(j,this.quill.root):ALLOW_DEFAULT}function we(Ee){return Ee.index>=0?handleKeyDown(j,this.quill.root):ALLOW_DEFAULT}function ke(Ee){return Ee.index===0&&Ee.length===0?PREVENT_DEFAULT:ALLOW_DEFAULT}function ye(Ee){const Oe=this.quill.getText().length;return Ee.index+1===Oe&&getNextBlock(j.id)?PREVENT_DEFAULT:ALLOW_DEFAULT}function ve(Ee,Oe){const{quill:Ae}=this,{prefix:Te}=Oe;return tryMatchSpaceHotkey(q,j,Ae,Te,Ee)}function be(){return isCollapsedAtBlockStart(this.quill)?(handleLineStartBackspace(q,j),PREVENT_DEFAULT):(isMultiBlockRange(getCurrentRange()),ALLOW_DEFAULT)}return{"code exit":{key:"enter",handler:()=>ALLOW_DEFAULT},enterMarkdownMatch:{key:"enter",handler:X},spaceMarkdownMatch:{key:" ",handler:te},hardEnter:{key:"enter",handler:ne},softEnter:{key:"enter",shiftKey:!0,handler:re},tab:{key:"tab",handler:oe},shiftTab:{key:"tab",shiftKey:!0,handler:le},"list autofill":{key:" ",shiftKey:!1,prefix:/^(\d+\.|-|\*|\[ ?\]|\[x\]|(#){1,6}|(-){3}|(\*){3}|>)$/,handler:ve},"list autofill shift":{key:" ",shiftKey:!0,prefix:/^(\d+\.|-|\*|\[ ?\]|\[x\]|(#){1,6}|(-){3}|(\*){3}|>)$/,handler:ve},backspace:{key:"backspace",handler:be},up:{key:"up",shiftKey:!1,handler:fe},down:{key:"down",shiftKey:!1,handler:we},left:{key:37,shiftKey:!1,handler:ke},right:{key:"right",shiftKey:!1,handler:ye}}}const style$8=`.ql-container{box-sizing:border-box;height:100%;margin:0;position:relative}.ql-container.ql-disabled .ql-tooltip{visibility:hidden}.ql-clipboard{left:-100000px;height:1px;overflow-y:hidden;position:absolute;top:50%}.ql-container p{margin:0;padding:0}.ql-editor{box-sizing:border-box;height:100%;outline:none;tab-size:4;-moz-tab-size:4;text-align:left;white-space:pre-wrap;word-wrap:break-word;margin:3px 0}.ql-editor>*{cursor:text}.ql-editor.ql-blank:before{color:var(--affine-disable-color);content:attr(data-placeholder);pointer-events:none;position:absolute}
`,Quill$1=Q,Module=Quill$1.import("core/module"),CodeBlock=Quill$1.import("formats/code-block"),CodeToken$1=Quill$1.import("modules/syntax");class SyntaxCodeBlock extends CodeBlock{constructor(j){super(j)}replaceWith(j){this.attach(),super.replaceWith(j)}refresh(j,X,te){this.highlight(j,X),this.updateLineNumber(te)}highlight(j,X){const te=this.domNode.textContent;(this.cachedText!==te||X)&&((te.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=j(te),this.domNode.normalize(),this.attach()),this.cachedText=te)}updateLineNumber(j){const X=this.domNode.textContent;if(X===this.cachedTextLineNumber)return;const te=j.querySelector("#line-number");for(assertExists(te);te.firstChild;)te.removeChild(te.firstChild);const ne=X.split(`
`),re=X.endsWith(`
`)?ne.length-1:ne.length,oe=re.toString().length;te.style.left=25-oe*8+"px";for(let le=1;le<=re;le++){const fe=document.createElement("div");fe.innerHTML=`${le}`,te.appendChild(fe)}this.cachedTextLineNumber=X}}SyntaxCodeBlock.className="ql-syntax";class Syntax extends Module{constructor(j,X){if(super(j,X),this._language="javascript",this._language=X.language,this._codeBlockElement=X.codeBlockElement,typeof this.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");let te;this.quill.on(Quill$1.events.SCROLL_OPTIMIZE,()=>{clearTimeout(te),te=window.setTimeout(()=>{this.highlight(!1,X.codeBlockElement)},this.options.interval)}),this.highlight(!1,X.codeBlockElement)}static register(){Quill$1.register(CodeToken$1,!0),Quill$1.register(SyntaxCodeBlock,!0)}setLang(j){this._language!==j&&(this._language=j,this.highlight(!0,this._codeBlockElement))}highlight(j,X){const te=this.quill;if(te.selection.composing)return;te.getFormat(0,te.getLength())["code-block"]||te.formatText(0,te.getLength(),"code-block",!0),te.update(Quill$1.sources.USER);const ne=te.getSelection();te.scroll.descendants(SyntaxCodeBlock).forEach(re=>{re.refresh(oe=>this.options.highlight(oe,{language:this._language}).value,j,X)}),te.update(Quill$1.sources.SILENT),ne!=null&&te.setSelection(ne,Quill$1.sources.SILENT)}}Syntax.DEFAULTS={highlight:function(){return window.hljs==null?null:function(q){return window.hljs.highlightAuto(q).value}}(),interval:0};var __defProp$c=Object.defineProperty,__getOwnPropDesc$c=Object.getOwnPropertyDescriptor,__decorateClass$c=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$c(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$c(j,X,ne),ne};const Quill=Q;Quill.register("modules/cursors",QuillCursors);const Clipboard=Quill.import("modules/clipboard");class EmptyClipboard extends Clipboard{onPaste(){}}Quill.register("modules/clipboard",EmptyClipboard,!0);const Strike=Quill.import("formats/strike");Strike.tagName="del";Quill.register(Strike,!0);const CodeToken=Quill.import("modules/syntax");CodeToken.register();Syntax.register();Quill.register("modules/syntax",Syntax,!0);let RichText=class extends NonShadowLitElement{constructor(){super(...arguments),this.modules={}}firstUpdated(){const{host:q,model:j,placeholder:X,_textContainer:te}=this,{page:ne}=q,re=createKeyboardBindings(ne,j);this.quill=new Quill(te,{modules:Object.assign({cursors:!0,toolbar:!1,history:{maxStack:0,userOnly:!0},keyboard:{bindings:re}},this.modules),placeholder:X}),ne.attachRichText(j.id,this.quill),ne.awareness.updateLocalCursor(),this.model.propsUpdated.on(()=>this.requestUpdate()),this.modules.syntax&&(this.quill.formatText(0,this.quill.getLength(),"code-block",!0),this.quill.format("code-block",!0)),this.quill.on("text-change",oe=>{var we,ke,ye,ve,be,Ce,Ee,Oe,Ae,Te,Se,$e,Le,Pe;const le={code:"code",link:"link-node"};let fe=null;if((ke=(we=oe.ops[1])==null?void 0:we.attributes)!=null&&ke.code&&(fe="code"),(ve=(ye=oe.ops[1])==null?void 0:ye.attributes)!=null&&ve.link&&(fe="link"),oe.ops.length===2&&((be=oe.ops[1])!=null&&be.insert)&&fe){const Re=oe.ops[0].retain,Ne=le[fe];if(Re!==void 0){const je=this.quill.getLeaf(Re+Number((Ce=oe.ops[1])==null?void 0:Ce.insert.toString().length)),Ie=this.quill.getLeaf(Re+Number((Ee=oe.ops[1])==null?void 0:Ee.insert.toString().length)+1),De=(Ae=(Oe=je[0])==null?void 0:Oe.domNode)==null?void 0:Ae.parentElement,Ve=De==null?void 0:De.closest(Ne),ze=(Se=(Te=Ie[0])==null?void 0:Te.domNode)==null?void 0:Se.parentElement,qe=ze==null?void 0:ze.closest(Ne),Xe=($e=oe.ops[1])==null?void 0:$e.insert.toString();(!qe||qe!==Ve)&&((Pe=j.text)==null||Pe.replace(Re,Xe.length,this.host.isCompositionStart?" ":((Le=oe.ops[1])==null?void 0:Le.insert.toString())||"",{[fe]:!1}))}}})}disconnectedCallback(){super.disconnectedCallback(),this.host.page.detachRichText(this.model.id)}updated(){var q,j;(q=this.quill)==null||q.root.setAttribute("data-placeholder",this.placeholder??""),(j=this.quill)==null||j.root.setAttribute("contenteditable",`${!this.host.readonly}`),this.modules.syntax&&this.quill.theme.modules.syntax.setLang(this.modules.syntax.language)}render(){return y$1`
      <div class="affine-rich-text quill-container ql-container">
        <slot></slot>
      </div>
    `}};RichText.styles=i$c`
    ${r$6(style$8)}
  `;__decorateClass$c([i$9(".affine-rich-text.quill-container")],RichText.prototype,"_textContainer",2);__decorateClass$c([e$8({hasChanged(){return!0}})],RichText.prototype,"host",2);__decorateClass$c([e$8()],RichText.prototype,"model",2);__decorateClass$c([e$8()],RichText.prototype,"placeholder",2);__decorateClass$c([e$8({hasChanged:()=>!0})],RichText.prototype,"modules",2);RichText=__decorateClass$c([e$9("rich-text")],RichText);const style$7=`.affine-paragraph-block-container{border-radius:5px}.affine-paragraph-block-container.selected{background-color:var(--affine-selected-color)}.h1{font-size:calc(var(--affine-font-base) + 12px);line-height:calc(var(--affine-line-height-base) + 14px);margin-top:calc(var(--affine-paragraph-space) + 20px);font-weight:600;--affine-link-color: var(--affine-link-color2)}.h1 code{font-size:calc(var(--affine-font-base) + 8px)}.h2{font-size:calc(var(--affine-font-base) + 10px);line-height:calc(var(--affine-line-height-base) + 12px);margin-top:calc(var(--affine-paragraph-space) + 18px);font-weight:600;--affine-link-color: var(--affine-link-color2)}.h2 code{font-size:calc(var(--affine-font-base) + 6px)}.h3{font-size:calc(var(--affine-font-base) + 8px);line-height:calc(var(--affine-line-height-base) + 10px);margin-top:calc(var(--affine-paragraph-space) + 16px);font-weight:600;--affine-link-color: var(--affine-link-color2)}.h3 code{font-size:calc(var(--affine-font-base) + 4px)}.h4{font-size:calc(var(--affine-font-base) + 6px);line-height:calc(var(--affine-line-height-base) + 8px);margin-top:calc(var(--affine-paragraph-space) + 14px);font-weight:600;--affine-link-color: var(--affine-link-color2)}.h4 code{font-size:calc(var(--affine-font-base) + 2px)}.h5{font-size:calc(var(--affine-font-base) + 4px);line-height:calc(var(--affine-line-height-base) + 4px);margin-top:calc(var(--affine-paragraph-space) + 12px);font-weight:600;--affine-link-color: var(--affine-link-color2)}.h5 code{font-size:calc(var(--affine-font-base))}.h6{font-size:calc(var(--affine-font-base) + 2px);line-height:calc(var(--affine-line-height-base) + 2px);margin-top:calc(var(--affine-paragraph-space) + 10px);font-weight:600;--affine-link-color: var(--affine-link-color2)}.h6 code{font-size:calc(var(--affine-font-base) - 2px)}.quote{font-size:18px;line-height:26px;padding-left:12px;margin-top:18px;position:relative}.quote:after{content:"";width:4px;height:100%;position:absolute;left:0;top:0;background:var(--affine-quote-color);border-radius:4px}.text{margin-top:var(--affine-paragraph-space);font-size:var(--affine-font-base)}strong{font-weight:600}code{background:var(--affine-code-background);color:var(--affine-code-color);font-family:var(--affine-font-mono);font-variant-ligatures:none;padding:0 5px;border-radius:5px;font-size:calc(var(--affine-font-base) - 4px)}u{text-decoration:none;border-bottom:1px solid var(--affine-text-color)}del{text-decoration:line-through}em{font-style:italic}
`;var __defProp$b=Object.defineProperty,__getOwnPropDesc$b=Object.getOwnPropertyDescriptor,__decorateClass$b=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$b(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$b(j,X,ne),ne};const getPlaceholder=q=>{const{type:j}=q;switch(j){case"h1":return"Heading 1";case"h2":return"Heading 2";case"h3":return"Heading 3";case"h4":return"Heading 4";case"h5":return"Heading 5";case"h6":return"Heading 6";default:return""}};let ParagraphBlockComponent=class extends NonShadowLitElement{firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}render(){this.setAttribute(BLOCK_ID_ATTR,this.model.id);const{type:q}=this.model,j=BlockChildrenContainer(this.model,this.host,()=>this.requestUpdate()),X=getPlaceholder(this.model);return y$1`
      <div class="affine-paragraph-block-container ${q}">
        <rich-text
          .host=${this.host}
          .model=${this.model}
          .placeholder=${X}
        ></rich-text>
        ${j}
      </div>
    `}};ParagraphBlockComponent.styles=i$c`
    ${r$6(style$7)}
  `;__decorateClass$b([e$8({hasChanged(){return!0}})],ParagraphBlockComponent.prototype,"model",2);__decorateClass$b([e$8()],ParagraphBlockComponent.prototype,"host",2);ParagraphBlockComponent=__decorateClass$b([e$9("affine-paragraph")],ParagraphBlockComponent);const point1=()=>y$1`
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <circle cx="12" cy="12" r="2" />
    </svg>
  `,point2=()=>y$1`
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z"
      />
    </svg>
  `,point3=()=>y$1`
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path
        d="M11.6056 10.1634C11.8234 9.94555 12.1766 9.94555 12.3944 10.1634L13.8366 11.6056C14.0545 11.8234 14.0545 12.1766 13.8366 12.3944L12.3944 13.8366C12.1766 14.0545 11.8234 14.0545 11.6056 13.8366L10.1634 12.3944C9.94555 12.1766 9.94555 11.8234 10.1634 11.6056L11.6056 10.1634Z"
      />
    </svg>
  `,point4=()=>y$1`
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M13.4422 12L12 10.5578L10.5578 12L12 13.4422L13.4422 12ZM12.3944 10.1634C12.1766 9.94555 11.8234 9.94555 11.6056 10.1634L10.1634 11.6056C9.94555 11.8234 9.94555 12.1766 10.1634 12.3944L11.6056 13.8366C11.8234 14.0545 12.1766 14.0545 12.3944 13.8366L13.8366 12.3944C14.0545 12.1766 14.0545 11.8234 13.8366 11.6056L12.3944 10.1634Z"
        fill="#7389FD"
      />
    </svg>
  `,checkboxChecked=()=>y$1`
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7 4C5.34315 4 4 5.34315 4 7V17C4 18.6569 5.34315 20 7 20H17C18.6569 20 20 18.6569 20 17V7C20 5.34315 18.6569 4 17 4H7ZM17.5665 9.56473C17.8785 9.25181 17.8776 8.74528 17.5647 8.43336C17.2518 8.12144 16.7453 8.12225 16.4334 8.43517L10.3547 14.5333L7.56666 11.7352C7.2548 11.4222 6.74827 11.4213 6.43529 11.7331C6.1223 12.045 6.12139 12.5515 6.43325 12.8645L9.64626 16.0891C10.037 16.4813 10.672 16.4814 11.0629 16.0893L17.5665 9.56473Z"
        fill="#A6ABB7"
      />
    </svg>
  `,checkboxUnchecked=()=>y$1`
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M17 5.6H7C6.2268 5.6 5.6 6.2268 5.6 7V17C5.6 17.7732 6.2268 18.4 7 18.4H17C17.7732 18.4 18.4 17.7732 18.4 17V7C18.4 6.2268 17.7732 5.6 17 5.6ZM7 4C5.34315 4 4 5.34315 4 7V17C4 18.6569 5.34315 20 7 20H17C18.6569 20 20 18.6569 20 17V7C20 5.34315 18.6569 4 17 4H7Z"
        fill="#A6ABB7"
      />
    </svg>
  `,points=[point1(),point2(),point3(),point4()];function number2letter(q){const j="a".charCodeAt(0),te="z".charCodeAt(0)-j+1;let ne="";for(;q>=0;)ne=String.fromCharCode(q%te+j)+ne,q=Math.floor(q/te)-1;return ne}function number2roman(q){const j={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};let X="";for(const te in j)for(;q>=j[te];)X+=te,q-=j[te];return X}function getPrefix(q,j){const X=[()=>j+1,number2letter,()=>number2roman(j+1)];return X[q%X.length](j)}function getNumberPrefix({index:q,deep:j}){return`${getPrefix(j,q)} .`}function getListIcon({model:q,index:j,deep:X,onClick:te}){return y$1`<div
    class="affine-list-block__prefix ${q.type==="todo"?"affine-list-block__todo-prefix":""}"
    @click="${ne=>{te==null||te(ne)}}"
  >
    ${(()=>{switch(q.type){case"bulleted":return points[X%points.length];case"numbered":return getNumberPrefix({deep:X,index:j});case"todo":return q.checked?checkboxChecked():checkboxUnchecked();default:return""}})()}
  </div>`}const getIndex=(q,j)=>{var re;const X=((re=q.page.getParent(j))==null?void 0:re.children)||[],te=X.findIndex(oe=>oe===j);let ne=0;for(let oe=0;oe<te;oe++)X[oe].flavour===j.flavour&&X[oe].type===j.type?ne+=1:ne=0;return ne},getListDeep=(q,j)=>{let X=0,te=q.page.getParent(j);for(;(te==null?void 0:te.flavour)===j.flavour;)X++,te=q.page.getParent(te);return X},getListInfo=(q,j)=>{const X=getListDeep(q,j),te=getIndex(q,j);return{deep:X,index:te}},style$6=`.affine-list-block-container{box-sizing:border-box;border-radius:5px;margin-top:2px}.affine-list-block-container--first{margin-top:var(--affine-paragraph-space)}.affine-list-block-container .affine-list-block-container{margin-top:0}.affine-list-block-container.selected{background-color:var(--affine-selected-color)}.affine-list-rich-text-wrapper{display:flex}.affine-list-rich-text-wrapper rich-text{flex:1}.affine-list-block__prefix{flex-shrink:0;min-width:26px;height:26px;margin-top:3px;margin-right:4px;display:flex;align-items:center;justify-content:flex-start;color:var(--affine-code-color);font-size:14px;line-height:var(--affine-line-height-base);user-select:none}.affine-list-block__todo-prefix{cursor:pointer}.affine-list-block__todo{width:16px;height:16px;border-radius:4px;border:1px solid var(--affine-icon-color)}.affine-list-block__todo.affine-list-block__todo--active{background:var(--affine-icon-color)}.affine-list--checked{color:var(--affine-icon-color)}
`;var __defProp$a=Object.defineProperty,__getOwnPropDesc$a=Object.getOwnPropertyDescriptor,__decorateClass$a=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$a(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$a(j,X,ne),ne};function selectList(q){const j=getDefaultPageBlock(q).selection,X=getBlockElementByModel(q);if(!X)throw console.error("list block model:",q,"blockElement:",X),new Error("Failed to select list! blockElement not found!");const te=X.getBoundingClientRect();j.resetSelectedBlockByRect(te)}let ListBlockComponent=class extends NonShadowLitElement{firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}render(){this.setAttribute(BLOCK_ID_ATTR,this.model.id);const{deep:q,index:j}=getListInfo(this.host,this.model),X=getListIcon({model:this.model,deep:q,index:j,onClick:()=>{if(this.model.type!=="todo"){selectList(this.model);return}this.host.page.captureSync(),this.host.page.updateBlock(this.model,{checked:!this.model.checked})}}),te=BlockChildrenContainer(this.model,this.host,()=>this.requestUpdate());return y$1`
      <div
        class=${`affine-list-block-container ${j===0&&q===0?"affine-list-block-container--first":""}`}
      >
        <div
          class=${`affine-list-rich-text-wrapper ${this.model.checked?"affine-list--checked":""}`}
        >
          ${X}
          <rich-text .host=${this.host} .model=${this.model}></rich-text>
        </div>
        ${te}
      </div>
    `}};ListBlockComponent.styles=i$c`
    ${r$6(style$6)}
  `;__decorateClass$a([e$8({hasChanged(){return!0}})],ListBlockComponent.prototype,"model",2);__decorateClass$a([e$8()],ListBlockComponent.prototype,"host",2);ListBlockComponent=__decorateClass$a([e$9("affine-list")],ListBlockComponent);const style$5=`.affine-group-block-container>.affine-block-children-container{padding-left:0}.affine-group-block-container.selected{background-color:var(--affine-selected-color)}
`;var __defProp$9=Object.defineProperty,__getOwnPropDesc$9=Object.getOwnPropertyDescriptor,__decorateClass$9=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$9(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$9(j,X,ne),ne};let GroupBlockComponent=class extends NonShadowLitElement{firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}render(){this.setAttribute(BLOCK_ID_ATTR,this.model.id);const q=BlockChildrenContainer(this.model,this.host,()=>this.requestUpdate());return y$1`
      <div class="affine-group-block-container">${q}</div>
    `}};GroupBlockComponent.styles=i$c`
    ${r$6(style$5)}
  `;__decorateClass$9([e$8({hasChanged(){return!0}})],GroupBlockComponent.prototype,"model",2);__decorateClass$9([e$8()],GroupBlockComponent.prototype,"host",2);GroupBlockComponent=__decorateClass$9([e$9("affine-group")],GroupBlockComponent);const style$4=`.affine-divider-block-container{width:100%;height:20px;display:flex;flex-direction:column;justify-content:center;margin-top:var(--affine-paragraph-space)}hr{width:100%}
`;var __defProp$8=Object.defineProperty,__getOwnPropDesc$8=Object.getOwnPropertyDescriptor,__decorateClass$8=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$8(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$8(j,X,ne),ne};let DividerBlockComponent=class extends NonShadowLitElement{firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}render(){this.setAttribute(BLOCK_ID_ATTR,this.model.id);const q=BlockChildrenContainer(this.model,this.host,()=>this.requestUpdate());return y$1`
      <div class=${"affine-divider-block-container"}>
        <hr />
        ${q}
      </div>
    `}};DividerBlockComponent.styles=i$c`
    ${r$6(style$4)}
  `;__decorateClass$8([e$8({hasChanged(){return!0}})],DividerBlockComponent.prototype,"model",2);__decorateClass$8([e$8()],DividerBlockComponent.prototype,"host",2);DividerBlockComponent=__decorateClass$8([e$9("affine-divider")],DividerBlockComponent);const style$3=`.affine-embed-wrapper{text-align:center;height:24px}.affine-embed-wrapper-caption{width:100%;font-size:var(--affine-font-sm);outline:none;border:0;font-family:inherit;color:inherit;text-align:center;color:var(--affine-icon-color);display:none}.affine-embed-wrapper-caption::placeholder{color:var(--affine-placeholder-color)}.affine-embed-wrapper-caption:disabled{background-color:var(--affine-page-background)}.affine-embed-wrapper .caption-show{display:inline-block}
`;var __defProp$7=Object.defineProperty,__getOwnPropDesc$7=Object.getOwnPropertyDescriptor,__decorateClass$7=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$7(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$7(j,X,ne),ne};let EmbedBlockComponent=class extends NonShadowLitElement{firstUpdated(){var q;this._caption=((q=this.model)==null?void 0:q.caption)??"",this._caption&&this._input.classList.add("caption-show")}_onInputChange(){this._caption=this._input.value,this.model.page.updateBlock(this.model,{caption:this._caption})}_onInputBlur(){this._caption||this._input.classList.remove("caption-show")}render(){return y$1`
      <div class="affine-embed-block-container">
        <div class="affine-embed-wrapper">
          <slot></slot>
          <input
            .disabled=${this.readonly}
            placeholder="Write a caption"
            class="affine-embed-wrapper-caption"
            value=${this._caption}
            @input=${this._onInputChange}
            @blur=${this._onInputBlur}
            @click=${q=>{q.stopPropagation()}}
          />
        </div>
      </div>
    `}};EmbedBlockComponent.styles=i$c`
    ${r$6(style$3)}
  `;__decorateClass$7([e$8()],EmbedBlockComponent.prototype,"model",2);__decorateClass$7([e$8()],EmbedBlockComponent.prototype,"readonly",2);__decorateClass$7([i$9("input")],EmbedBlockComponent.prototype,"_input",2);__decorateClass$7([t$7()],EmbedBlockComponent.prototype,"_caption",2);EmbedBlockComponent=__decorateClass$7([e$9("affine-embed")],EmbedBlockComponent);const style$2=`.affine-image-wrapper{padding:8px;width:100%;text-align:center;line-height:0}.affine-image-wrapper img{max-width:100%;margin:auto;width:100%}.resizable{max-width:100%}.active .resizable{border:1px solid var(--affine-primary-color)!important}.resizable .image-option-container{display:none;position:absolute;top:4px;right:-52px;margin:0;padding-left:12px}.embed-editing-state{box-shadow:0 1px 10px -6px #18274bcc,0 3px 16px -6px #18274b66;border-radius:10px;list-style:none;padding:4px;width:40px;background-color:var(--affine-page-background);margin:0}.resizable .resizes{height:100%;box-sizing:border-box;line-height:0}.resizable .resizes .resize{width:10px;height:10px;border-radius:50%;background:white;border:3px solid var(--affine-primary-color);position:absolute}.resizable:hover .resize{display:block}.active .resize{display:block!important}.resizable .resizes .resize.top-left{left:-5px;top:-5px;cursor:nwse-resize}.resizable .resizes .resize.top-right{right:-5px;top:-5px;cursor:nesw-resize}.resizable .resizes .resize.bottom-left{left:-5px;bottom:-5px;cursor:nesw-resize}.resizable .resizes .resize.bottom-right{right:-5px;bottom:-5px;cursor:nwse-resize}.resizable-img{border:2px solid var(--affine-page-background)}.resizable-img:hover{border:2px solid var(--affine-primary-color)}
`;var __defProp$6=Object.defineProperty,__getOwnPropDesc$6=Object.getOwnPropertyDescriptor,__decorateClass$6=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$6(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$6(j,X,ne),ne};let ImageBlockComponent=class extends NonShadowLitElement{async firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate());const{width:q,height:j}=this.model,X=await this.model.page.blobs;assertExists(X);const te=await X.get(this.model.sourceId);te&&(this._source=te),q&&j&&(this._resizeImg.style.width=q+"px",this._resizeImg.style.height=j+"px")}render(){this.setAttribute(BLOCK_ID_ATTR,this.model.id);const q=BlockChildrenContainer(this.model,this.host,()=>this.requestUpdate()),{width:j,height:X}=this.model;return j&&X&&this._resizeImg&&(this._resizeImg.style.width=j+"px",this._resizeImg.style.height=X+"px"),y$1`
      <affine-embed .model=${this.model} .readonly=${this.host.readonly}>
        <div class="affine-image-wrapper">
          <div>
            <img class="resizable-img" src=${this._source} />
          </div>
          ${q}
        </div>
      </affine-embed>
    `}};ImageBlockComponent.styles=i$c`
    ${r$6(style$2)}
  `;__decorateClass$6([e$8()],ImageBlockComponent.prototype,"host",2);__decorateClass$6([i$9(".resizable-img")],ImageBlockComponent.prototype,"_resizeImg",2);__decorateClass$6([t$7()],ImageBlockComponent.prototype,"_source",2);ImageBlockComponent=__decorateClass$6([e$9("affine-image")],ImageBlockComponent);const codeBlockStyle=`code-block{position:relative;z-index:1}.affine-code-block-container{font-size:calc(var(--affine-font-base) - 4px);line-height:calc(var(--affine-line-height-base) - 6px);position:relative;width:720px;padding:32px 0;background:var(--affine-code-block-background);border-radius:10px;margin-top:calc(var(--affine-paragraph-space) + 3px)}.affine-code-block-container pre{font-family:var(--affine-font-mono);font-variant-ligatures:none}.affine-code-block-container .container{position:absolute;font-size:var(--affine-font-xs);line-height:calc(var(--affine-line-height-base) - 10px);top:12px;left:9px}.affine-code-block-container.selected{background-color:var(--affine-selected-color)}.affine-code-block-container rich-text{position:relative}#line-number{position:absolute;text-align:right;top:5.4px;line-height:calc(var(--affine-line-height-base) - 6px);color:var(--affine-line-number-color)}.affine-code-block-container .ql-container{left:40px;border-radius:5px;padding:2px 12px}.affine-code-block-container .ql-syntax{width:660px;margin:0;overflow:scroll}.affine-code-block-container .wrap{white-space:pre-wrap}.code-block-option .filled{fill:var(--affine-primary-color)}.lang-container{line-height:calc(var(--affine-line-height-base) - 10px);text-align:justify;position:relative}.code-block-option{box-shadow:0 1px 10px -6px #18274bcc,0 3px 16px -6px #18274b66;border-radius:10px;list-style:none;padding:4px;width:40px;background-color:var(--affine-page-background);margin:0}.clicked{color:var(--affine-primary-color)!important;background:var(--affine-hover-background)!important}
`,codeTheme=`pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#000;background:#fff}.hljs-addition,.hljs-meta,.hljs-string,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#756bb1}.hljs-comment,.hljs-quote{color:#636363}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-regexp{color:#31a354}.hljs-deletion,.hljs-variable{color:#88f}.hljs-built_in,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-selector-tag,.hljs-strong,.hljs-tag,.hljs-title,.hljs-type{color:#3182bd}.hljs-emphasis{font-style:italic}.hljs-attribute{color:#e6550d}
`;var __defProp$5=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__decorateClass$5=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$5(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$5(j,X,ne),ne};let CodeBlockComponent=class extends NonShadowLitElement{constructor(){super(...arguments),this.showLangList="hidden",this.disposeTimer=0,this.filterText=""}get highlight(){return this.host.getService(this.model.flavour).hljs.default.highlight}firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}_onClick(){this.showLangList="visible"}render(){const j=getDefaultPageBlock(this.model).codeBlockOption,X=this.getBoundingClientRect(),te=j?j.position.y+X.height>X.top&&j.position.y<X.bottom:!1,ne=BlockChildrenContainer(this.model,this.host,()=>this.requestUpdate());return this.setAttribute(BLOCK_ID_ATTR,this.model.id),y$1`
      <div class="affine-code-block-container">
        ${te||this.showLangList!=="hidden"?y$1`<div class="container">
              <div class="lang-container" @click=${this._onClick}>
                <code-block-button
                  width="101px"
                  height="24px"
                  class="${this.showLangList==="hidden"?"":"clicked"}"
                >
                  ${this.model.language} ${ArrowDownIcon}
                </code-block-button>
              </div>
              <lang-list
                showLangList=${this.showLangList}
                id=${this.model.id}
                @selected-language-changed=${re=>{this.model.setLang(re.detail.language)}}
                @dispose=${()=>{this.showLangList="hidden"}}
              ></lang-list>
            </div>`:y$1``}
        <rich-text
          .host=${this.host}
          .model=${this.model}
          .modules=${{syntax:{highlight:this.highlight,codeBlockElement:this,language:this.model.language}}}
        >
          <div id="line-number"></div>
        </rich-text>
        ${ne}
      </div>
    `}};CodeBlockComponent.styles=i$c`
    ${r$6(codeTheme)}
    ${r$6(codeBlockStyle)}
      ${toolTipStyle}
  `;__decorateClass$5([e$8({hasChanged:()=>!0})],CodeBlockComponent.prototype,"model",2);__decorateClass$5([e$8()],CodeBlockComponent.prototype,"host",2);__decorateClass$5([i$9(".lang-container")],CodeBlockComponent.prototype,"langContainerElement",2);__decorateClass$5([i$9("lang-list")],CodeBlockComponent.prototype,"langListElement",2);__decorateClass$5([t$7()],CodeBlockComponent.prototype,"showLangList",2);__decorateClass$5([t$7()],CodeBlockComponent.prototype,"disposeTimer",2);__decorateClass$5([t$7()],CodeBlockComponent.prototype,"filterText",2);CodeBlockComponent=__decorateClass$5([e$9("affine-code")],CodeBlockComponent);const style$1=`lang-list{display:flex;flex-direction:column;position:absolute;background:var(--affine-popover-background);border-radius:10px;top:24px;z-index:1}.lang-list-container{box-shadow:4px 4px 7px #3a4c5c0a,-4px -4px 13px #3a4c5c05,6px 6px 36px #3a4c5c0f;border-radius:0 10px 10px}.lang-list-button-container{position:relative;overflow:scroll;height:424px;width:200px;padding-top:5px;padding-left:4px;padding-right:4px}.lang-item{display:flex;justify-content:flex-start;padding-left:12px;margin-bottom:5px}code-block-button{font-size:var(--affine-font-sm);text-align:justify;line-height:22px}code-block-button:hover{color:var(--affine-primary-color);background:var(--affine-hover-background)}#filter-input{display:flex;align-items:center;height:32px;width:192px;border:1px solid #d0d7e3;border-radius:10px;padding-left:20.25%;padding-top:4px;font-family:var(--affine-font-family);font-size:var(--affine-font-sm);box-sizing:border-box;color:inherit;background:transparent}#filter-input:focus{outline:none}#filter-input::placeholder{color:#888a9e;font-size:var(--affine-font-sm)}.search-icon{left:8.25%;position:absolute;top:16px}
`;i$c`
  width: 0.9em;
  height: 0.9em;
  vertical-align: middle;
  font-size: inherit;
  margin-bottom: 0.1em;
`;const SearchIcon=w`
<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.0917 15.9085L14 12.8418C15.2001 11.3455 15.7812 9.44625 15.624 7.53458C15.4668 5.62292 14.5831 3.84415 13.1546 2.56403C11.7261 1.28392 9.8615 0.599756 7.9441 0.652223C6.0267 0.70469 4.20226 1.4898 2.84595 2.84612C1.48963 4.20243 0.704522 6.02686 0.652055 7.94427C0.599588 9.86167 1.28375 11.7263 2.56387 13.1548C3.84398 14.5832 5.62275 15.4669 7.53441 15.6242C9.44608 15.7814 11.3453 15.2002 12.8417 14.0002L15.9083 17.0668C15.9858 17.1449 16.078 17.2069 16.1795 17.2492C16.2811 17.2915 16.39 17.3133 16.5 17.3133C16.61 17.3133 16.7189 17.2915 16.8205 17.2492C16.922 17.2069 17.0142 17.1449 17.0917 17.0668C17.2419 16.9114 17.3258 16.7038 17.3258 16.4877C17.3258 16.2716 17.2419 16.0639 17.0917 15.9085ZM8.16666 14.0002C7.01294 14.0002 5.88512 13.658 4.92584 13.0171C3.96655 12.3761 3.21888 11.4651 2.77737 10.3992C2.33585 9.33325 2.22034 8.16036 2.44542 7.0288C2.6705 5.89725 3.22607 4.85785 4.04187 4.04204C4.85768 3.22624 5.89708 2.67066 7.02864 2.44558C8.16019 2.2205 9.33308 2.33602 10.399 2.77753C11.4649 3.21904 12.3759 3.96672 13.0169 4.926C13.6579 5.88529 14 7.01311 14 8.16683C14 9.71393 13.3854 11.1977 12.2915 12.2916C11.1975 13.3856 9.71376 14.0002 8.16666 14.0002Z" fill="#888A9E"/>
</svg>
`;var __defProp$4=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__decorateClass$4=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$4(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$4(j,X,ne),ne};let LangList=class extends NonShadowLitElement{constructor(){super(...arguments),this.filterText="",this.selectedLanguage="",this.showLangList="hidden",this.disposeTimer=0,this.delay=150}static get styles(){return i$c`
      ${r$6(style$1)}
    `}updated(){this.showLangList!=="hidden"&&this.filterInput.focus()}firstUpdated(){document.addEventListener("click",q=>{this._clickHandler(q)})}_clickHandler(q){var X;(X=q.target.closest(".container"))!=null&&X.closest(`[data-block-id="${this.id}"]`)||this._dispose()}_dispose(){this.dispatchEvent(createEvent("dispose",null)),document.removeEventListener("click",this._clickHandler),this.filterText=""}_onLanguageClicked(q){this.selectedLanguage=q,this.dispatchEvent(createEvent("selected-language-changed",{language:this.selectedLanguage??"JavaScript"})),this._dispose()}render(){const q=LangList.languages.filter(X=>this.filterText?X.toLowerCase().startsWith(this.filterText.toLowerCase()):!0);if(this.showLangList==="hidden")return y$1``;const j=i$5({display:"flex","padding-top":"8px","padding-left":"4px"});return y$1`
      <div class="lang-list-container">
        <div style="${j}">
          <div class="search-icon">${SearchIcon}</div>
          <input
            id="filter-input"
            type="text"
            placeholder="Search"
            value=${this.filterText}
            @keyup=${()=>{var X;return this.filterText=(X=this.filterInput)==null?void 0:X.value}}
          />
        </div>
        <div class="lang-list-button-container">
          ${q.map(X=>y$1`
              <code-block-button
                width="100%"
                @click="${()=>this._onLanguageClicked(X)}"
                class="lang-item"
              >
                ${X}
              </code-block-button>
            `)}
        </div>
      </div>
    `}};LangList.languages=["TypeScript","Rust","Python","Java","C","CPP","JavaScript","PHP","Go","Bash","Swift","Dart","Delphi","XML","1c","abnf","accesslog","actionscript","ada","angelscript","apache","applescript","arcade","arduino","armasm","asciidoc","aspectj","autohotkey","autoit","avrasm","awk","axapta","basic","bnf","brainfuck","cal","capnproto","ceylon","clean","clojure","clojure-repl","cmake","coffeescript","coq","cos","crmsh","crystal","csharp","csp","css","d","markdown","diff","django","dns","dockerfile","dos","dsconfig","dts","dust","ebnf","elixir","elm","ruby","erb","erlang-repl","erlang","excel","fix","flix","fortran","fsharp","gams","gauss","gcode","gherkin","glsl","gml","golo","gradle","graphql","groovy","haml","handlebars","haskell","haxe","hsp","http","hy","inform7","ini","irpf90","isbl","jboss-cli","json","julia","julia-repl","kotlin","lasso","latex","ldif","leaf","less","lisp","livecodeserver","livescript","llvm","lsl","lua","makefile","mathematica","matlab","maxima","mel","mercury","mipsasm","mizar","perl","mojolicious","monkey","moonscript","n1ql","nestedtext","nginx","nim","nix","node-repl","nsis","objectivec","ocaml","openscad","oxygene","parser3","pf","pgsql","php-template","plaintext","pony","powershell","processing","profile","prolog","properties","protobuf","puppet","purebasic","python-repl","q","qml","r","reasonml","rib","roboconf","routeros","rsl","ruleslanguage","sas","scala","scheme","scilab","scss","shell","smali","smalltalk","sml","sqf","sql","stan","stata","step21","stylus","subunit","taggerscript","yaml","tap","tcl","thrift","tp","twig","vala","vbnet","vbscript","vbscript-html","verilog","vhdl","vim","wasm","wren","x86asm","xl","xquery","zephir"];__decorateClass$4([t$7()],LangList.prototype,"filterText",2);__decorateClass$4([e$8()],LangList.prototype,"id",2);__decorateClass$4([e$8({type:String})],LangList.prototype,"selectedLanguage",2);__decorateClass$4([e$8()],LangList.prototype,"showLangList",2);__decorateClass$4([i$9("#filter-input")],LangList.prototype,"filterInput",2);__decorateClass$4([t$7()],LangList.prototype,"disposeTimer",2);__decorateClass$4([e$8()],LangList.prototype,"delay",2);LangList=__decorateClass$4([e$9("lang-list")],LangList);var __defProp$3=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__decorateClass$3=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$3(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$3(j,X,ne),ne};let CodeBlockButton=class extends IconButton{constructor(){super(...arguments),this.width="100px",this.height="32px"}connectedCallback(){super.connectedCallback(),this.style.setProperty("--button-width",typeof this.width=="string"?this.width:`${this.width}px`),this.style.setProperty("--button-height",typeof this.height=="string"?this.height:`${this.height}px`)}render(){return y$1` <slot></slot> `}};CodeBlockButton.styles=i$c`
    ${IconButton.styles}
    :host {
      width: var(--button-width);
      height: var(--button-height);
      fill: var(--affine-icon-color);
    }
  `;__decorateClass$3([e$8()],CodeBlockButton.prototype,"width",2);__decorateClass$3([e$8()],CodeBlockButton.prototype,"height",2);CodeBlockButton=__decorateClass$3([e$9("code-block-button")],CodeBlockButton);const env$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},importIdentifier$1="__ $BLOCKSUITE_BLOCKS$ __";env$1[importIdentifier$1]===!0&&console.error("@blocksuite/blocks was already imported. This breaks constructor checks and will lead to issues!");env$1[importIdentifier$1]=!0;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o$3=(q,j,X)=>{for(const te of j)if(te[0]===q)return(0,te[1])();return X==null?void 0:X()};var CLIPBOARD_MIMETYPE=(q=>(q.BLOCKS_CLIP_WRAPPED="blocksuite/x-c+w",q.HTML="text/html",q.TEXT="text/plain",q.IMAGE_BMP="image/bmp",q.IMAGE_GIF="image/gif",q.IMAGE_JPEG="image/jpeg",q.IMAGE_JPG="image/jpg",q.IMAGE_PNG="image/png",q.IMAGE_SVG="image/svg",q.IMAGE_WEBP="image/webp",q))(CLIPBOARD_MIMETYPE||{}),ClipboardAction=(q=>(q.copy="copy",q.cut="cut",q.paste="paste",q))(ClipboardAction||{});class ClipboardEventDispatcher{constructor(j){this.signals={[ClipboardAction.copy]:new Signal,[ClipboardAction.cut]:new Signal,[ClipboardAction.paste]:new Signal},this._copyHandler=this._copyHandler.bind(this),this._cutHandler=this._cutHandler.bind(this),this._pasteHandler=this._pasteHandler.bind(this),this.initClipboardTargetEvent(j)}initClipboardTargetEvent(j){j&&(this.disposeClipboardTargetEvent(j),j.addEventListener(ClipboardAction.copy,this._copyHandler),j.addEventListener(ClipboardAction.cut,this._cutHandler),j.addEventListener(ClipboardAction.paste,this._pasteHandler),document.addEventListener(ClipboardAction.copy,this._copyHandler),document.addEventListener(ClipboardAction.cut,this._cutHandler),document.addEventListener(ClipboardAction.paste,this._pasteHandler))}disposeClipboardTargetEvent(j){j&&(j.removeEventListener(ClipboardAction.copy,this._copyHandler),j.removeEventListener(ClipboardAction.cut,this._cutHandler),j.removeEventListener(ClipboardAction.paste,this._pasteHandler),document.removeEventListener(ClipboardAction.copy,this._copyHandler),document.removeEventListener(ClipboardAction.cut,this._cutHandler),document.removeEventListener(ClipboardAction.paste,this._pasteHandler))}static editorElementActive(){var j;return((j=document.activeElement)==null?void 0:j.closest("editor-container"))!=null}_copyHandler(j){this.signals.copy.emit(j)}_cutHandler(j){ClipboardEventDispatcher.editorElementActive()&&this.signals.cut.emit(j)}_pasteHandler(j){ClipboardEventDispatcher.editorElementActive()&&this.signals.paste.emit(j)}dispose(j){this.signals.copy.dispose(),this.signals.cut.dispose(),this.signals.paste.dispose(),this.disposeClipboardTargetEvent(j)}}let ClipboardItem$1=class{constructor(j,X){this.mimeType=j,this.data=X}hasData(){return this.data!==null&&this.data!==void 0}};class CopyCutManager{constructor(j){this._editor=j,this.handleCopy=this.handleCopy.bind(this),this.handleCut=this.handleCut.bind(this)}handleCopy(j){const X=this._getClipItems();X.length&&this._copyToClipboard(j,X)}handleCut(j){this.handleCopy(j)}_getClipItems(){const j=[],te=getSelectInfo(this._editor.page).selectedBlocks,ne=this._getCustomClip(te);ne&&j.push(ne);const re=this._getTextClip(te);re&&j.push(re);const oe=this._getHtmlClip(te);return oe&&j.push(oe),j}_getCustomClip(j){const X=j.map(te=>this._getClipInfoBySelectionInfo(te));return new ClipboardItem$1(CLIPBOARD_MIMETYPE.BLOCKS_CLIP_WRAPPED,JSON.stringify({data:X}))}_getHtmlClip(j){const X=this._editor.contentParser.block2Html(j);return new ClipboardItem$1(CLIPBOARD_MIMETYPE.HTML,X)}_getTextClip(j){const X=this._editor.contentParser.block2Text(j);return new ClipboardItem$1(CLIPBOARD_MIMETYPE.TEXT,X)}_getClipInfoBySelectionInfo(j){var fe;const X=this._editor.page.getBlockById(j.id);if(!X)return null;let{flavour:te,type:ne}=X,re=[];matchFlavours(X,["affine:page"])?(te="affine:paragraph",ne="text",re=[{insert:X.block2Text("",j.startPos,j.endPos)}]):matchFlavours(X,["affine:embed"])?(te="affine:embed",ne="image",re=[{insert:X.block2Text("",0,0)}]):re=(fe=X.text)==null?void 0:fe.sliceToDelta(j.startPos||0,j.endPos);const oe=[];j.children.forEach(we=>{const ke=this._getClipInfoBySelectionInfo(we);ke&&oe.push(ke)});const le={flavour:te,type:ne,text:re,checked:X instanceof ListBlockModel?X.checked:void 0,children:oe};return X instanceof EmbedBlockModel&&Object.assign(le,{sourceId:X.sourceId,caption:X.caption,width:X.width,height:X.height}),le}_copyToClipboard(j,X){const te=j.clipboardData;if(te)try{X.forEach(ne=>{te.setData(ne.mimeType,ne.data)}),j.preventDefault(),j.stopPropagation()}catch{}else this._copyToClipboardFromPc(X)&&(j.preventDefault(),j.stopPropagation())}_copyToClipboardFromPc(j){const X=getCurrentRange();let te=!1;const ne=document.createElement("textarea");ne.value="temp",document.body.appendChild(ne),ne.select(),ne.setSelectionRange(0,ne.value.length);const re=function(oe){const le=oe.clipboardData;le&&j.forEach(fe=>{le.setData(fe.mimeType,fe.data)}),oe.preventDefault(),oe.stopPropagation(),ne.removeEventListener("copy",re)};ne.addEventListener("copy",re);try{te=document.execCommand("copy")}finally{ne.removeEventListener("copy",re),document.body.removeChild(ne),resetNativeSelection(X)}return te}}const _MarkdownUtils=class{static checkIfTextContainsMd(q){q=q.replace(/¨/g,"¨T"),q=q.replace(/\$/g,"¨D"),q=q.replace(/\r\n/g,`
`),q=q.replace(/\r/g,`
`),q=q.replace(/\u00A0/g,"&nbsp;"),q=`

${q}

`,q=_MarkdownUtils._detab(q);for(let j=0;j<_MarkdownUtils._checkRegArr.length;j++){const X=j===3?`${q}¨0`:q;if(_MarkdownUtils._checkRegArr[j].test(X))return!0}return!1}static _detab(q){return q=q.replace(/\t(?=\t)/g," "),q=q.replace(/\t/g,"¨A¨B"),q=q.replace(/¨B(.+?)¨A/g,(j,X)=>{let te=X;const ne=4-te.length%4;for(let re=0;re<ne;re++)te+=" ";return te}),q=q.replace(/¨A/g," "),q=q.replace(/¨B/g,""),q}};let MarkdownUtils=_MarkdownUtils;MarkdownUtils._checkRegArr=[/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,/!\[([^\[\]]+)]()()()()()/g,/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,/\[([^\[\]]+)]()()()()()/g];const _PasteManager=class{constructor(q){this.handlePaste=async j=>{var te;const X=j.clipboardData;if(X){if(_PasteManager._isPlainText(X)){if(X.getData("text/plain")==="text/plain")return;if((te=document.activeElement)!=null&&te.classList.contains("affine-default-page-block-title"))return}const re=this._clipboardEvent2Blocks(j);if(re instanceof Promise){j.preventDefault(),j.stopPropagation();const oe=await re;this.insertBlocks(oe)}}},this._editor=q}_clipboardEvent2Blocks(q){const j=q.clipboardData;return j?_PasteManager._isPureFileInClipboard(j)?this._file2Blocks(j):this._clipboardData2Blocks(j):void 0}getOptimalClip(q){for(let j=0;j<_PasteManager._optimalMimeTypes.length;j++){const X=_PasteManager._optimalMimeTypes[j],te=q==null?void 0:q.getData(X);if(te)return{type:X,data:te}}return null}async _clipboardData2Blocks(q){const j=this.getOptimalClip(q);if((j==null?void 0:j.type)===CLIPBOARD_MIMETYPE.BLOCKS_CLIP_WRAPPED)return JSON.parse(j.data).data;const X=q.getData(CLIPBOARD_MIMETYPE.TEXT);if(getStartModelBySelection().flavour==="affine:code")return[{text:[{insert:X}],children:[]}];const ne=MarkdownUtils.checkIfTextContainsMd(X);return(j==null?void 0:j.type)===CLIPBOARD_MIMETYPE.HTML&&!ne?this._editor.contentParser.htmlText2Block(j.data):ne?this._editor.contentParser.markdown2Block(X):this._editor.contentParser.text2blocks(X)}async _file2Blocks(q){const j=_PasteManager._getImageFile(q);if(j&&j.type.includes("image")){const X=await this._editor.page.blobs;return assertExists(X),[{flavour:"affine:embed",type:"image",sourceId:await X.set(j),children:[],text:[{insert:""}]}]}return[]}static _isPlainText(q){return q.types[0]==="text/plain"}static _isPureFileInClipboard(q){const j=q.types;return j.length===1&&j[0]==="Files"||j.length===2&&(j.includes("text/plain")||j.includes("text/html"))&&j.includes("Files")}static _getImageFile(q){const j=q.files;if(j&&j[0]&&j[0].type.indexOf("image")>-1)return j[0]}insertBlocks(q,j){var te,ne,re,oe,le,fe,we,ke,ye;if(q.length===0)return;const X=j||getSelectInfo(this._editor.page);if(X.type==="Range"||X.type==="Caret"){const ve=X.selectedBlocks[X.selectedBlocks.length-1],be=this._editor.page.getBlockById(ve.id);let Ce=be,Ee=0;if(be)if(matchFlavours(be,["affine:page"]))if(matchFlavours(be.children[0],["affine:group"]))Ce=be.children[0];else{const Ae=this._editor.page.addBlock({flavour:"affine:group"},be.id);Ce=this._editor.page.getBlockById(Ae)}else matchFlavours(be,["affine:group"])||(Ce=this._editor.page.getParent(be),Ee=((Ce==null?void 0:Ce.children.indexOf(be))||0)+1);const Oe=[];if(be&&!matchFlavours(be,["affine:page"])){const Ae=ve.endPos||((te=be==null?void 0:be.text)==null?void 0:te.length)||0,Te=q[0].text,Se=Te.reduce((Pe,Re)=>Pe+(Re.insert||"").length,0);if((ne=be==null?void 0:be.text)==null||ne.insertList(Te,Ae),be&&this._addBlocks(q[0].children,be,0,Oe),q[0].flavour==="affine:divider"||q[0].flavour==="affine:embed"){Ce&&this._addBlocks(q.slice(0),Ce,Ee,Oe);const Pe=this._editor.page.getBlockById(ve.id);Pe&&matchFlavours(Pe,["affine:paragraph"])&&((re=Pe==null?void 0:Pe.text)==null?void 0:re.length)===0&&(Pe==null?void 0:Pe.children.length)===0&&this._editor.page.deleteBlock(Pe)}else Ce&&this._addBlocks(q.slice(1),Ce,Ee,Oe);let $e=be==null?void 0:be.id,Le=Ae+Se;if(Oe.length>0){const Pe=(oe=be==null?void 0:be.text)==null?void 0:oe.sliceToDelta(Ae+Se);$e=Oe[Oe.length-1];const Re=this._editor.page.getBlockById($e);(Re==null?void 0:Re.flavour)!=="affine:embed"&&(Re==null?void 0:Re.flavour)!=="affine:divider"&&((fe=be==null?void 0:be.text)==null||fe.delete(Ae+Se,(le=be==null?void 0:be.text)==null?void 0:le.length),Le=((we=Re==null?void 0:Re.text)==null?void 0:we.length)||0,(ye=Re==null?void 0:Re.text)==null||ye.insertList(Pe,(ke=Re==null?void 0:Re.text)==null?void 0:ke.length))}setTimeout(()=>{var Pe;$e&&((Pe=this._editor.page.richTextAdapters.get($e))==null||Pe.quill.setSelection(Le,0))})}else Ce&&this._addBlocks(q,Ce,Ee,Oe)}else if(X.type==="Block"){const ve=this._editor.page.getBlockById(X.selectedBlocks[X.selectedBlocks.length-1].id);let be=ve,Ce=0;if(ve)if(matchFlavours(ve,["affine:page"]))if(matchFlavours(ve.children[0],["affine:group"]))be=ve.children[0];else{const Oe=this._editor.page.addBlock({flavour:"affine:group"},ve.id);be=this._editor.page.getBlockById(Oe)}else matchFlavours(ve,["affine:group"])||(be=this._editor.page.getParent(ve),Ce=((be==null?void 0:be.children.indexOf(ve))||0)+1);const Ee=[];be&&this._addBlocks(q,be,Ce,Ee)}}_addBlocks(q,j,X,te){var ne;for(let re=0;re<q.length;re++){const oe=q[re],le={flavour:oe.flavour,type:oe.type,checked:oe.checked,sourceId:oe.sourceId,caption:oe.caption,width:oe.width,height:oe.height},fe=this._editor.page.addBlock(le,j,X+re),we=this._editor.page.getBlockById(fe);we&&!matchFlavours(we,["affine:embed","affine:divider"])&&oe.text&&((ne=we==null?void 0:we.text)==null||ne.applyDelta(oe.text)),te.push(fe),we&&this._addBlocks(oe.children,we,0,te)}}};let PasteManager=_PasteManager;PasteManager._optimalMimeTypes=[CLIPBOARD_MIMETYPE.BLOCKS_CLIP_WRAPPED,CLIPBOARD_MIMETYPE.HTML,CLIPBOARD_MIMETYPE.TEXT];function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults=getDefaults();function changeDefaults(q){defaults=q}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=q=>escapeReplacements[q];function escape$1(q,j){if(j){if(escapeTest.test(q))return q.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(q))return q.replace(escapeReplaceNoEncode,getEscapeReplacement);return q}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(q){return q.replace(unescapeTest,(j,X)=>(X=X.toLowerCase(),X==="colon"?":":X.charAt(0)==="#"?X.charAt(1)==="x"?String.fromCharCode(parseInt(X.substring(2),16)):String.fromCharCode(+X.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(q,j){q=typeof q=="string"?q:q.source,j=j||"";const X={replace:(te,ne)=>(ne=ne.source||ne,ne=ne.replace(caret,"$1"),q=q.replace(te,ne),X),getRegex:()=>new RegExp(q,j)};return X}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(q,j,X){if(q){let te;try{te=decodeURIComponent(unescape$1(X)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(te.indexOf("javascript:")===0||te.indexOf("vbscript:")===0||te.indexOf("data:")===0)return null}j&&!originIndependentUrl.test(X)&&(X=resolveUrl(j,X));try{X=encodeURI(X).replace(/%25/g,"%")}catch{return null}return X}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(q,j){baseUrls[" "+q]||(justDomain.test(q)?baseUrls[" "+q]=q+"/":baseUrls[" "+q]=rtrim(q,"/",!0)),q=baseUrls[" "+q];const X=q.indexOf(":")===-1;return j.substring(0,2)==="//"?X?j:q.replace(protocol,"$1")+j:j.charAt(0)==="/"?X?j:q.replace(domain,"$1")+j:q+j}const noopTest={exec:function q(){}};function merge(q){let j=1,X,te;for(;j<arguments.length;j++){X=arguments[j];for(te in X)Object.prototype.hasOwnProperty.call(X,te)&&(q[te]=X[te])}return q}function splitCells(q,j){const X=q.replace(/\|/g,(re,oe,le)=>{let fe=!1,we=oe;for(;--we>=0&&le[we]==="\\";)fe=!fe;return fe?"|":" |"}),te=X.split(/ \|/);let ne=0;if(te[0].trim()||te.shift(),te.length>0&&!te[te.length-1].trim()&&te.pop(),te.length>j)te.splice(j);else for(;te.length<j;)te.push("");for(;ne<te.length;ne++)te[ne]=te[ne].trim().replace(/\\\|/g,"|");return te}function rtrim(q,j,X){const te=q.length;if(te===0)return"";let ne=0;for(;ne<te;){const re=q.charAt(te-ne-1);if(re===j&&!X)ne++;else if(re!==j&&X)ne++;else break}return q.slice(0,te-ne)}function findClosingBracket(q,j){if(q.indexOf(j[1])===-1)return-1;const X=q.length;let te=0,ne=0;for(;ne<X;ne++)if(q[ne]==="\\")ne++;else if(q[ne]===j[0])te++;else if(q[ne]===j[1]&&(te--,te<0))return ne;return-1}function checkSanitizeDeprecation(q){q&&q.sanitize&&!q.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(q,j){if(j<1)return"";let X="";for(;j>1;)j&1&&(X+=q),j>>=1,q+=q;return X+q}function outputLink(q,j,X,te){const ne=j.href,re=j.title?escape$1(j.title):null,oe=q[1].replace(/\\([\[\]])/g,"$1");if(q[0].charAt(0)!=="!"){te.state.inLink=!0;const le={type:"link",raw:X,href:ne,title:re,text:oe,tokens:te.inlineTokens(oe)};return te.state.inLink=!1,le}return{type:"image",raw:X,href:ne,title:re,text:escape$1(oe)}}function indentCodeCompensation(q,j){const X=q.match(/^(\s+)(?:```)/);if(X===null)return j;const te=X[1];return j.split(`
`).map(ne=>{const re=ne.match(/^\s+/);if(re===null)return ne;const[oe]=re;return oe.length>=te.length?ne.slice(te.length):ne}).join(`
`)}class Tokenizer{constructor(j){this.options=j||defaults}space(j){const X=this.rules.block.newline.exec(j);if(X&&X[0].length>0)return{type:"space",raw:X[0]}}code(j){const X=this.rules.block.code.exec(j);if(X){const te=X[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:X[0],codeBlockStyle:"indented",text:this.options.pedantic?te:rtrim(te,`
`)}}}fences(j){const X=this.rules.block.fences.exec(j);if(X){const te=X[0],ne=indentCodeCompensation(te,X[3]||"");return{type:"code",raw:te,lang:X[2]?X[2].trim().replace(this.rules.inline._escapes,"$1"):X[2],text:ne}}}heading(j){const X=this.rules.block.heading.exec(j);if(X){let te=X[2].trim();if(/#$/.test(te)){const ne=rtrim(te,"#");(this.options.pedantic||!ne||/ $/.test(ne))&&(te=ne.trim())}return{type:"heading",raw:X[0],depth:X[1].length,text:te,tokens:this.lexer.inline(te)}}}hr(j){const X=this.rules.block.hr.exec(j);if(X)return{type:"hr",raw:X[0]}}blockquote(j){const X=this.rules.block.blockquote.exec(j);if(X){const te=X[0].replace(/^ *>[ \t]?/gm,""),ne=this.lexer.state.top;this.lexer.state.top=!0;const re=this.lexer.blockTokens(te);return this.lexer.state.top=ne,{type:"blockquote",raw:X[0],tokens:re,text:te}}}list(j){let X=this.rules.block.list.exec(j);if(X){let te,ne,re,oe,le,fe,we,ke,ye,ve,be,Ce,Ee=X[1].trim();const Oe=Ee.length>1,Ae={type:"list",raw:"",ordered:Oe,start:Oe?+Ee.slice(0,-1):"",loose:!1,items:[]};Ee=Oe?`\\d{1,9}\\${Ee.slice(-1)}`:`\\${Ee}`,this.options.pedantic&&(Ee=Oe?Ee:"[*+-]");const Te=new RegExp(`^( {0,3}${Ee})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;j&&(Ce=!1,!(!(X=Te.exec(j))||this.rules.block.hr.test(j)));){if(te=X[0],j=j.substring(te.length),ke=X[2].split(`
`,1)[0].replace(/^\t+/,$e=>" ".repeat(3*$e.length)),ye=j.split(`
`,1)[0],this.options.pedantic?(oe=2,be=ke.trimLeft()):(oe=X[2].search(/[^ ]/),oe=oe>4?1:oe,be=ke.slice(oe),oe+=X[1].length),fe=!1,!ke&&/^ *$/.test(ye)&&(te+=ye+`
`,j=j.substring(ye.length+1),Ce=!0),!Ce){const $e=new RegExp(`^ {0,${Math.min(3,oe-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Le=new RegExp(`^ {0,${Math.min(3,oe-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Pe=new RegExp(`^ {0,${Math.min(3,oe-1)}}(?:\`\`\`|~~~)`),Re=new RegExp(`^ {0,${Math.min(3,oe-1)}}#`);for(;j&&(ve=j.split(`
`,1)[0],ye=ve,this.options.pedantic&&(ye=ye.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Pe.test(ye)||Re.test(ye)||$e.test(ye)||Le.test(j)));){if(ye.search(/[^ ]/)>=oe||!ye.trim())be+=`
`+ye.slice(oe);else{if(fe||ke.search(/[^ ]/)>=4||Pe.test(ke)||Re.test(ke)||Le.test(ke))break;be+=`
`+ye}!fe&&!ye.trim()&&(fe=!0),te+=ve+`
`,j=j.substring(ve.length+1),ke=ye.slice(oe)}}Ae.loose||(we?Ae.loose=!0:/\n *\n *$/.test(te)&&(we=!0)),this.options.gfm&&(ne=/^\[[ xX]\] /.exec(be),ne&&(re=ne[0]!=="[ ] ",be=be.replace(/^\[[ xX]\] +/,""))),Ae.items.push({type:"list_item",raw:te,task:!!ne,checked:re,loose:!1,text:be}),Ae.raw+=te}Ae.items[Ae.items.length-1].raw=te.trimRight(),Ae.items[Ae.items.length-1].text=be.trimRight(),Ae.raw=Ae.raw.trimRight();const Se=Ae.items.length;for(le=0;le<Se;le++)if(this.lexer.state.top=!1,Ae.items[le].tokens=this.lexer.blockTokens(Ae.items[le].text,[]),!Ae.loose){const $e=Ae.items[le].tokens.filter(Pe=>Pe.type==="space"),Le=$e.length>0&&$e.some(Pe=>/\n.*\n/.test(Pe.raw));Ae.loose=Le}if(Ae.loose)for(le=0;le<Se;le++)Ae.items[le].loose=!0;return Ae}}html(j){const X=this.rules.block.html.exec(j);if(X){const te={type:"html",raw:X[0],pre:!this.options.sanitizer&&(X[1]==="pre"||X[1]==="script"||X[1]==="style"),text:X[0]};if(this.options.sanitize){const ne=this.options.sanitizer?this.options.sanitizer(X[0]):escape$1(X[0]);te.type="paragraph",te.text=ne,te.tokens=this.lexer.inline(ne)}return te}}def(j){const X=this.rules.block.def.exec(j);if(X){const te=X[1].toLowerCase().replace(/\s+/g," "),ne=X[2]?X[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",re=X[3]?X[3].substring(1,X[3].length-1).replace(this.rules.inline._escapes,"$1"):X[3];return{type:"def",tag:te,raw:X[0],href:ne,title:re}}}table(j){const X=this.rules.block.table.exec(j);if(X){const te={type:"table",header:splitCells(X[1]).map(ne=>({text:ne})),align:X[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:X[3]&&X[3].trim()?X[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(te.header.length===te.align.length){te.raw=X[0];let ne=te.align.length,re,oe,le,fe;for(re=0;re<ne;re++)/^ *-+: *$/.test(te.align[re])?te.align[re]="right":/^ *:-+: *$/.test(te.align[re])?te.align[re]="center":/^ *:-+ *$/.test(te.align[re])?te.align[re]="left":te.align[re]=null;for(ne=te.rows.length,re=0;re<ne;re++)te.rows[re]=splitCells(te.rows[re],te.header.length).map(we=>({text:we}));for(ne=te.header.length,oe=0;oe<ne;oe++)te.header[oe].tokens=this.lexer.inline(te.header[oe].text);for(ne=te.rows.length,oe=0;oe<ne;oe++)for(fe=te.rows[oe],le=0;le<fe.length;le++)fe[le].tokens=this.lexer.inline(fe[le].text);return te}}}lheading(j){const X=this.rules.block.lheading.exec(j);if(X)return{type:"heading",raw:X[0],depth:X[2].charAt(0)==="="?1:2,text:X[1],tokens:this.lexer.inline(X[1])}}paragraph(j){const X=this.rules.block.paragraph.exec(j);if(X){const te=X[1].charAt(X[1].length-1)===`
`?X[1].slice(0,-1):X[1];return{type:"paragraph",raw:X[0],text:te,tokens:this.lexer.inline(te)}}}text(j){const X=this.rules.block.text.exec(j);if(X)return{type:"text",raw:X[0],text:X[0],tokens:this.lexer.inline(X[0])}}escape(j){const X=this.rules.inline.escape.exec(j);if(X)return{type:"escape",raw:X[0],text:escape$1(X[1])}}tag(j){const X=this.rules.inline.tag.exec(j);if(X)return!this.lexer.state.inLink&&/^<a /i.test(X[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(X[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(X[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(X[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:X[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(X[0]):escape$1(X[0]):X[0]}}link(j){const X=this.rules.inline.link.exec(j);if(X){const te=X[2].trim();if(!this.options.pedantic&&/^</.test(te)){if(!/>$/.test(te))return;const oe=rtrim(te.slice(0,-1),"\\");if((te.length-oe.length)%2===0)return}else{const oe=findClosingBracket(X[2],"()");if(oe>-1){const fe=(X[0].indexOf("!")===0?5:4)+X[1].length+oe;X[2]=X[2].substring(0,oe),X[0]=X[0].substring(0,fe).trim(),X[3]=""}}let ne=X[2],re="";if(this.options.pedantic){const oe=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ne);oe&&(ne=oe[1],re=oe[3])}else re=X[3]?X[3].slice(1,-1):"";return ne=ne.trim(),/^</.test(ne)&&(this.options.pedantic&&!/>$/.test(te)?ne=ne.slice(1):ne=ne.slice(1,-1)),outputLink(X,{href:ne&&ne.replace(this.rules.inline._escapes,"$1"),title:re&&re.replace(this.rules.inline._escapes,"$1")},X[0],this.lexer)}}reflink(j,X){let te;if((te=this.rules.inline.reflink.exec(j))||(te=this.rules.inline.nolink.exec(j))){let ne=(te[2]||te[1]).replace(/\s+/g," ");if(ne=X[ne.toLowerCase()],!ne){const re=te[0].charAt(0);return{type:"text",raw:re,text:re}}return outputLink(te,ne,te[0],this.lexer)}}emStrong(j,X,te=""){let ne=this.rules.inline.emStrong.lDelim.exec(j);if(!ne||ne[3]&&te.match(/[\p{L}\p{N}]/u))return;const re=ne[1]||ne[2]||"";if(!re||re&&(te===""||this.rules.inline.punctuation.exec(te))){const oe=ne[0].length-1;let le,fe,we=oe,ke=0;const ye=ne[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(ye.lastIndex=0,X=X.slice(-1*j.length+oe);(ne=ye.exec(X))!=null;){if(le=ne[1]||ne[2]||ne[3]||ne[4]||ne[5]||ne[6],!le)continue;if(fe=le.length,ne[3]||ne[4]){we+=fe;continue}else if((ne[5]||ne[6])&&oe%3&&!((oe+fe)%3)){ke+=fe;continue}if(we-=fe,we>0)continue;fe=Math.min(fe,fe+we+ke);const ve=j.slice(0,oe+ne.index+(ne[0].length-le.length)+fe);if(Math.min(oe,fe)%2){const Ce=ve.slice(1,-1);return{type:"em",raw:ve,text:Ce,tokens:this.lexer.inlineTokens(Ce)}}const be=ve.slice(2,-2);return{type:"strong",raw:ve,text:be,tokens:this.lexer.inlineTokens(be)}}}}codespan(j){const X=this.rules.inline.code.exec(j);if(X){let te=X[2].replace(/\n/g," ");const ne=/[^ ]/.test(te),re=/^ /.test(te)&&/ $/.test(te);return ne&&re&&(te=te.substring(1,te.length-1)),te=escape$1(te,!0),{type:"codespan",raw:X[0],text:te}}}br(j){const X=this.rules.inline.br.exec(j);if(X)return{type:"br",raw:X[0]}}del(j){const X=this.rules.inline.del.exec(j);if(X)return{type:"del",raw:X[0],text:X[2],tokens:this.lexer.inlineTokens(X[2])}}autolink(j,X){const te=this.rules.inline.autolink.exec(j);if(te){let ne,re;return te[2]==="@"?(ne=escape$1(this.options.mangle?X(te[1]):te[1]),re="mailto:"+ne):(ne=escape$1(te[1]),re=ne),{type:"link",raw:te[0],text:ne,href:re,tokens:[{type:"text",raw:ne,text:ne}]}}}url(j,X){let te;if(te=this.rules.inline.url.exec(j)){let ne,re;if(te[2]==="@")ne=escape$1(this.options.mangle?X(te[0]):te[0]),re="mailto:"+ne;else{let oe;do oe=te[0],te[0]=this.rules.inline._backpedal.exec(te[0])[0];while(oe!==te[0]);ne=escape$1(te[0]),te[1]==="www."?re="http://"+te[0]:re=te[0]}return{type:"link",raw:te[0],text:ne,href:re,tokens:[{type:"text",raw:ne,text:ne}]}}}inlineText(j,X){const te=this.rules.inline.text.exec(j);if(te){let ne;return this.lexer.state.inRawBlock?ne=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(te[0]):escape$1(te[0]):te[0]:ne=escape$1(this.options.smartypants?X(te[0]):te[0]),{type:"text",raw:te[0],text:ne}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal=merge({},block);block.gfm=merge({},block.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic=merge({},block.normal,{html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal=merge({},inline);inline.pedantic=merge({},inline.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()});inline.gfm=merge({},inline.normal,{escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks=merge({},inline.gfm,{br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function smartypants(q){return q.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(q){let j="",X,te;const ne=q.length;for(X=0;X<ne;X++)te=q.charCodeAt(X),Math.random()>.5&&(te="x"+te.toString(16)),j+="&#"+te+";";return j}class Lexer{constructor(j){this.tokens=[],this.tokens.links=Object.create(null),this.options=j||defaults,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const X={block:block.normal,inline:inline.normal};this.options.pedantic?(X.block=block.pedantic,X.inline=inline.pedantic):this.options.gfm&&(X.block=block.gfm,this.options.breaks?X.inline=inline.breaks:X.inline=inline.gfm),this.tokenizer.rules=X}static get rules(){return{block,inline}}static lex(j,X){return new Lexer(X).lex(j)}static lexInline(j,X){return new Lexer(X).inlineTokens(j)}lex(j){j=j.replace(/\r\n|\r/g,`
`),this.blockTokens(j,this.tokens);let X;for(;X=this.inlineQueue.shift();)this.inlineTokens(X.src,X.tokens);return this.tokens}blockTokens(j,X=[]){this.options.pedantic?j=j.replace(/\t/g,"    ").replace(/^ +$/gm,""):j=j.replace(/^( *)(\t+)/gm,(le,fe,we)=>fe+"    ".repeat(we.length));let te,ne,re,oe;for(;j;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(le=>(te=le.call({lexer:this},j,X))?(j=j.substring(te.raw.length),X.push(te),!0):!1))){if(te=this.tokenizer.space(j)){j=j.substring(te.raw.length),te.raw.length===1&&X.length>0?X[X.length-1].raw+=`
`:X.push(te);continue}if(te=this.tokenizer.code(j)){j=j.substring(te.raw.length),ne=X[X.length-1],ne&&(ne.type==="paragraph"||ne.type==="text")?(ne.raw+=`
`+te.raw,ne.text+=`
`+te.text,this.inlineQueue[this.inlineQueue.length-1].src=ne.text):X.push(te);continue}if(te=this.tokenizer.fences(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.heading(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.hr(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.blockquote(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.list(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.html(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.def(j)){j=j.substring(te.raw.length),ne=X[X.length-1],ne&&(ne.type==="paragraph"||ne.type==="text")?(ne.raw+=`
`+te.raw,ne.text+=`
`+te.raw,this.inlineQueue[this.inlineQueue.length-1].src=ne.text):this.tokens.links[te.tag]||(this.tokens.links[te.tag]={href:te.href,title:te.title});continue}if(te=this.tokenizer.table(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.lheading(j)){j=j.substring(te.raw.length),X.push(te);continue}if(re=j,this.options.extensions&&this.options.extensions.startBlock){let le=1/0;const fe=j.slice(1);let we;this.options.extensions.startBlock.forEach(function(ke){we=ke.call({lexer:this},fe),typeof we=="number"&&we>=0&&(le=Math.min(le,we))}),le<1/0&&le>=0&&(re=j.substring(0,le+1))}if(this.state.top&&(te=this.tokenizer.paragraph(re))){ne=X[X.length-1],oe&&ne.type==="paragraph"?(ne.raw+=`
`+te.raw,ne.text+=`
`+te.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ne.text):X.push(te),oe=re.length!==j.length,j=j.substring(te.raw.length);continue}if(te=this.tokenizer.text(j)){j=j.substring(te.raw.length),ne=X[X.length-1],ne&&ne.type==="text"?(ne.raw+=`
`+te.raw,ne.text+=`
`+te.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ne.text):X.push(te);continue}if(j){const le="Infinite loop on byte: "+j.charCodeAt(0);if(this.options.silent){console.error(le);break}else throw new Error(le)}}return this.state.top=!0,X}inline(j,X=[]){return this.inlineQueue.push({src:j,tokens:X}),X}inlineTokens(j,X=[]){let te,ne,re,oe=j,le,fe,we;if(this.tokens.links){const ke=Object.keys(this.tokens.links);if(ke.length>0)for(;(le=this.tokenizer.rules.inline.reflinkSearch.exec(oe))!=null;)ke.includes(le[0].slice(le[0].lastIndexOf("[")+1,-1))&&(oe=oe.slice(0,le.index)+"["+repeatString("a",le[0].length-2)+"]"+oe.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(le=this.tokenizer.rules.inline.blockSkip.exec(oe))!=null;)oe=oe.slice(0,le.index)+"["+repeatString("a",le[0].length-2)+"]"+oe.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(le=this.tokenizer.rules.inline.escapedEmSt.exec(oe))!=null;)oe=oe.slice(0,le.index+le[0].length-2)+"++"+oe.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;j;)if(fe||(we=""),fe=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(ke=>(te=ke.call({lexer:this},j,X))?(j=j.substring(te.raw.length),X.push(te),!0):!1))){if(te=this.tokenizer.escape(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.tag(j)){j=j.substring(te.raw.length),ne=X[X.length-1],ne&&te.type==="text"&&ne.type==="text"?(ne.raw+=te.raw,ne.text+=te.text):X.push(te);continue}if(te=this.tokenizer.link(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.reflink(j,this.tokens.links)){j=j.substring(te.raw.length),ne=X[X.length-1],ne&&te.type==="text"&&ne.type==="text"?(ne.raw+=te.raw,ne.text+=te.text):X.push(te);continue}if(te=this.tokenizer.emStrong(j,oe,we)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.codespan(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.br(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.del(j)){j=j.substring(te.raw.length),X.push(te);continue}if(te=this.tokenizer.autolink(j,mangle)){j=j.substring(te.raw.length),X.push(te);continue}if(!this.state.inLink&&(te=this.tokenizer.url(j,mangle))){j=j.substring(te.raw.length),X.push(te);continue}if(re=j,this.options.extensions&&this.options.extensions.startInline){let ke=1/0;const ye=j.slice(1);let ve;this.options.extensions.startInline.forEach(function(be){ve=be.call({lexer:this},ye),typeof ve=="number"&&ve>=0&&(ke=Math.min(ke,ve))}),ke<1/0&&ke>=0&&(re=j.substring(0,ke+1))}if(te=this.tokenizer.inlineText(re,smartypants)){j=j.substring(te.raw.length),te.raw.slice(-1)!=="_"&&(we=te.raw.slice(-1)),fe=!0,ne=X[X.length-1],ne&&ne.type==="text"?(ne.raw+=te.raw,ne.text+=te.text):X.push(te);continue}if(j){const ke="Infinite loop on byte: "+j.charCodeAt(0);if(this.options.silent){console.error(ke);break}else throw new Error(ke)}}return X}}class Renderer{constructor(j){this.options=j||defaults}code(j,X,te){const ne=(X||"").match(/\S*/)[0];if(this.options.highlight){const re=this.options.highlight(j,ne);re!=null&&re!==j&&(te=!0,j=re)}return j=j.replace(/\n$/,"")+`
`,ne?'<pre><code class="'+this.options.langPrefix+escape$1(ne)+'">'+(te?j:escape$1(j,!0))+`</code></pre>
`:"<pre><code>"+(te?j:escape$1(j,!0))+`</code></pre>
`}blockquote(j){return`<blockquote>
${j}</blockquote>
`}html(j){return j}heading(j,X,te,ne){if(this.options.headerIds){const re=this.options.headerPrefix+ne.slug(te);return`<h${X} id="${re}">${j}</h${X}>
`}return`<h${X}>${j}</h${X}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(j,X,te){const ne=X?"ol":"ul",re=X&&te!==1?' start="'+te+'"':"";return"<"+ne+re+`>
`+j+"</"+ne+`>
`}listitem(j){return`<li>${j}</li>
`}checkbox(j){return"<input "+(j?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(j){return`<p>${j}</p>
`}table(j,X){return X&&(X=`<tbody>${X}</tbody>`),`<table>
<thead>
`+j+`</thead>
`+X+`</table>
`}tablerow(j){return`<tr>
${j}</tr>
`}tablecell(j,X){const te=X.header?"th":"td";return(X.align?`<${te} align="${X.align}">`:`<${te}>`)+j+`</${te}>
`}strong(j){return`<strong>${j}</strong>`}em(j){return`<em>${j}</em>`}codespan(j){return`<code>${j}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(j){return`<del>${j}</del>`}link(j,X,te){if(j=cleanUrl(this.options.sanitize,this.options.baseUrl,j),j===null)return te;let ne='<a href="'+j+'"';return X&&(ne+=' title="'+X+'"'),ne+=">"+te+"</a>",ne}image(j,X,te){if(j=cleanUrl(this.options.sanitize,this.options.baseUrl,j),j===null)return te;let ne=`<img src="${j}" alt="${te}"`;return X&&(ne+=` title="${X}"`),ne+=this.options.xhtml?"/>":">",ne}text(j){return j}}class TextRenderer{strong(j){return j}em(j){return j}codespan(j){return j}del(j){return j}html(j){return j}text(j){return j}link(j,X,te){return""+te}image(j,X,te){return""+te}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(j){return j.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(j,X){let te=j,ne=0;if(this.seen.hasOwnProperty(te)){ne=this.seen[j];do ne++,te=j+"-"+ne;while(this.seen.hasOwnProperty(te))}return X||(this.seen[j]=ne,this.seen[te]=0),te}slug(j,X={}){const te=this.serialize(j);return this.getNextSafeSlug(te,X.dryrun)}}class Parser{constructor(j){this.options=j||defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(j,X){return new Parser(X).parse(j)}static parseInline(j,X){return new Parser(X).parseInline(j)}parse(j,X=!0){let te="",ne,re,oe,le,fe,we,ke,ye,ve,be,Ce,Ee,Oe,Ae,Te,Se,$e,Le,Pe;const Re=j.length;for(ne=0;ne<Re;ne++){if(be=j[ne],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[be.type]&&(Pe=this.options.extensions.renderers[be.type].call({parser:this},be),Pe!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(be.type))){te+=Pe||"";continue}switch(be.type){case"space":continue;case"hr":{te+=this.renderer.hr();continue}case"heading":{te+=this.renderer.heading(this.parseInline(be.tokens),be.depth,unescape$1(this.parseInline(be.tokens,this.textRenderer)),this.slugger);continue}case"code":{te+=this.renderer.code(be.text,be.lang,be.escaped);continue}case"table":{for(ye="",ke="",le=be.header.length,re=0;re<le;re++)ke+=this.renderer.tablecell(this.parseInline(be.header[re].tokens),{header:!0,align:be.align[re]});for(ye+=this.renderer.tablerow(ke),ve="",le=be.rows.length,re=0;re<le;re++){for(we=be.rows[re],ke="",fe=we.length,oe=0;oe<fe;oe++)ke+=this.renderer.tablecell(this.parseInline(we[oe].tokens),{header:!1,align:be.align[oe]});ve+=this.renderer.tablerow(ke)}te+=this.renderer.table(ye,ve);continue}case"blockquote":{ve=this.parse(be.tokens),te+=this.renderer.blockquote(ve);continue}case"list":{for(Ce=be.ordered,Ee=be.start,Oe=be.loose,le=be.items.length,ve="",re=0;re<le;re++)Te=be.items[re],Se=Te.checked,$e=Te.task,Ae="",Te.task&&(Le=this.renderer.checkbox(Se),Oe?Te.tokens.length>0&&Te.tokens[0].type==="paragraph"?(Te.tokens[0].text=Le+" "+Te.tokens[0].text,Te.tokens[0].tokens&&Te.tokens[0].tokens.length>0&&Te.tokens[0].tokens[0].type==="text"&&(Te.tokens[0].tokens[0].text=Le+" "+Te.tokens[0].tokens[0].text)):Te.tokens.unshift({type:"text",text:Le}):Ae+=Le),Ae+=this.parse(Te.tokens,Oe),ve+=this.renderer.listitem(Ae,$e,Se);te+=this.renderer.list(ve,Ce,Ee);continue}case"html":{te+=this.renderer.html(be.text);continue}case"paragraph":{te+=this.renderer.paragraph(this.parseInline(be.tokens));continue}case"text":{for(ve=be.tokens?this.parseInline(be.tokens):be.text;ne+1<Re&&j[ne+1].type==="text";)be=j[++ne],ve+=`
`+(be.tokens?this.parseInline(be.tokens):be.text);te+=X?this.renderer.paragraph(ve):ve;continue}default:{const Ne='Token with "'+be.type+'" type was not found.';if(this.options.silent){console.error(Ne);return}else throw new Error(Ne)}}}return te}parseInline(j,X){X=X||this.renderer;let te="",ne,re,oe;const le=j.length;for(ne=0;ne<le;ne++){if(re=j[ne],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[re.type]&&(oe=this.options.extensions.renderers[re.type].call({parser:this},re),oe!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(re.type))){te+=oe||"";continue}switch(re.type){case"escape":{te+=X.text(re.text);break}case"html":{te+=X.html(re.text);break}case"link":{te+=X.link(re.href,re.title,this.parseInline(re.tokens,X));break}case"image":{te+=X.image(re.href,re.title,re.text);break}case"strong":{te+=X.strong(this.parseInline(re.tokens,X));break}case"em":{te+=X.em(this.parseInline(re.tokens,X));break}case"codespan":{te+=X.codespan(re.text);break}case"br":{te+=X.br();break}case"del":{te+=X.del(this.parseInline(re.tokens,X));break}case"text":{te+=X.text(re.text);break}default:{const fe='Token with "'+re.type+'" type was not found.';if(this.options.silent){console.error(fe);return}else throw new Error(fe)}}}return te}}function marked(q,j,X){if(typeof q>"u"||q===null)throw new Error("marked(): input parameter is undefined or null");if(typeof q!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(q)+", string expected");if(typeof j=="function"&&(X=j,j=null),j=merge({},marked.defaults,j||{}),checkSanitizeDeprecation(j),X){const ne=j.highlight;let re;try{re=Lexer.lex(q,j)}catch(fe){return X(fe)}const oe=function(fe){let we;if(!fe)try{j.walkTokens&&marked.walkTokens(re,j.walkTokens),we=Parser.parse(re,j)}catch(ke){fe=ke}return j.highlight=ne,fe?X(fe):X(null,we)};if(!ne||ne.length<3||(delete j.highlight,!re.length))return oe();let le=0;marked.walkTokens(re,function(fe){fe.type==="code"&&(le++,setTimeout(()=>{ne(fe.text,fe.lang,function(we,ke){if(we)return oe(we);ke!=null&&ke!==fe.text&&(fe.text=ke,fe.escaped=!0),le--,le===0&&oe()})},0))}),le===0&&oe();return}function te(ne){if(ne.message+=`
Please report this to https://github.com/markedjs/marked.`,j.silent)return"<p>An error occurred:</p><pre>"+escape$1(ne.message+"",!0)+"</pre>";throw ne}try{const ne=Lexer.lex(q,j);if(j.walkTokens){if(j.async)return Promise.all(marked.walkTokens(ne,j.walkTokens)).then(()=>Parser.parse(ne,j)).catch(te);marked.walkTokens(ne,j.walkTokens)}return Parser.parse(ne,j)}catch(ne){te(ne)}}marked.options=marked.setOptions=function(q){return merge(marked.defaults,q),changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults;marked.use=function(...q){const j=marked.defaults.extensions||{renderers:{},childTokens:{}};q.forEach(X=>{const te=merge({},X);if(te.async=marked.defaults.async||te.async,X.extensions&&(X.extensions.forEach(ne=>{if(!ne.name)throw new Error("extension name required");if(ne.renderer){const re=j.renderers[ne.name];re?j.renderers[ne.name]=function(...oe){let le=ne.renderer.apply(this,oe);return le===!1&&(le=re.apply(this,oe)),le}:j.renderers[ne.name]=ne.renderer}if(ne.tokenizer){if(!ne.level||ne.level!=="block"&&ne.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");j[ne.level]?j[ne.level].unshift(ne.tokenizer):j[ne.level]=[ne.tokenizer],ne.start&&(ne.level==="block"?j.startBlock?j.startBlock.push(ne.start):j.startBlock=[ne.start]:ne.level==="inline"&&(j.startInline?j.startInline.push(ne.start):j.startInline=[ne.start]))}ne.childTokens&&(j.childTokens[ne.name]=ne.childTokens)}),te.extensions=j),X.renderer){const ne=marked.defaults.renderer||new Renderer;for(const re in X.renderer){const oe=ne[re];ne[re]=(...le)=>{let fe=X.renderer[re].apply(ne,le);return fe===!1&&(fe=oe.apply(ne,le)),fe}}te.renderer=ne}if(X.tokenizer){const ne=marked.defaults.tokenizer||new Tokenizer;for(const re in X.tokenizer){const oe=ne[re];ne[re]=(...le)=>{let fe=X.tokenizer[re].apply(ne,le);return fe===!1&&(fe=oe.apply(ne,le)),fe}}te.tokenizer=ne}if(X.walkTokens){const ne=marked.defaults.walkTokens;te.walkTokens=function(re){let oe=[];return oe.push(X.walkTokens.call(this,re)),ne&&(oe=oe.concat(ne.call(this,re))),oe}}marked.setOptions(te)})};marked.walkTokens=function(q,j){let X=[];for(const te of q)switch(X=X.concat(j.call(marked,te)),te.type){case"table":{for(const ne of te.header)X=X.concat(marked.walkTokens(ne.tokens,j));for(const ne of te.rows)for(const re of ne)X=X.concat(marked.walkTokens(re.tokens,j));break}case"list":{X=X.concat(marked.walkTokens(te.items,j));break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[te.type]?marked.defaults.extensions.childTokens[te.type].forEach(function(ne){X=X.concat(marked.walkTokens(te[ne],j))}):te.tokens&&(X=X.concat(marked.walkTokens(te.tokens,j)))}return X};marked.parseInline=function(q,j){if(typeof q>"u"||q===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof q!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(q)+", string expected");j=merge({},marked.defaults,j||{}),checkSanitizeDeprecation(j);try{const X=Lexer.lexInline(q,j);return j.walkTokens&&marked.walkTokens(X,j.walkTokens),Parser.parseInline(X,j)}catch(X){if(X.message+=`
Please report this to https://github.com/markedjs/marked.`,j.silent)return"<p>An error occurred:</p><pre>"+escape$1(X.message+"",!0)+"</pre>";throw X}};marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;function extend(q){for(var j=1;j<arguments.length;j++){var X=arguments[j];for(var te in X)X.hasOwnProperty(te)&&(q[te]=X[te])}return q}function repeat(q,j){return Array(j+1).join(q)}function trimLeadingNewlines(q){return q.replace(/^\n*/,"")}function trimTrailingNewlines(q){for(var j=q.length;j>0&&q[j-1]===`
`;)j--;return q.substring(0,j)}var blockElements=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function isBlock(q){return is(q,blockElements)}var voidElements=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function isVoid(q){return is(q,voidElements)}function hasVoid(q){return has(q,voidElements)}var meaningfulWhenBlankElements=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function isMeaningfulWhenBlank(q){return is(q,meaningfulWhenBlankElements)}function hasMeaningfulWhenBlank(q){return has(q,meaningfulWhenBlankElements)}function is(q,j){return j.indexOf(q.nodeName)>=0}function has(q,j){return q.getElementsByTagName&&j.some(function(X){return q.getElementsByTagName(X).length})}var rules={};rules.paragraph={filter:"p",replacement:function(q){return`

`+q+`

`}};rules.lineBreak={filter:"br",replacement:function(q,j,X){return X.br+`
`}};rules.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(q,j,X){var te=Number(j.nodeName.charAt(1));if(X.headingStyle==="setext"&&te<3){var ne=repeat(te===1?"=":"-",q.length);return`

`+q+`
`+ne+`

`}else return`

`+repeat("#",te)+" "+q+`

`}};rules.blockquote={filter:"blockquote",replacement:function(q){return q=q.replace(/^\n+|\n+$/g,""),q=q.replace(/^/gm,"> "),`

`+q+`

`}};rules.list={filter:["ul","ol"],replacement:function(q,j){var X=j.parentNode;return X.nodeName==="LI"&&X.lastElementChild===j?`
`+q:`

`+q+`

`}};rules.listItem={filter:"li",replacement:function(q,j,X){q=q.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var te=X.bulletListMarker+"   ",ne=j.parentNode;if(ne.nodeName==="OL"){var re=ne.getAttribute("start"),oe=Array.prototype.indexOf.call(ne.children,j);te=(re?Number(re)+oe:oe+1)+".  "}return te+q+(j.nextSibling&&!/\n$/.test(q)?`
`:"")}};rules.indentedCodeBlock={filter:function(q,j){return j.codeBlockStyle==="indented"&&q.nodeName==="PRE"&&q.firstChild&&q.firstChild.nodeName==="CODE"},replacement:function(q,j,X){return`

    `+j.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};rules.fencedCodeBlock={filter:function(q,j){return j.codeBlockStyle==="fenced"&&q.nodeName==="PRE"&&q.firstChild&&q.firstChild.nodeName==="CODE"},replacement:function(q,j,X){for(var te=j.firstChild.getAttribute("class")||"",ne=(te.match(/language-(\S+)/)||[null,""])[1],re=j.firstChild.textContent,oe=X.fence.charAt(0),le=3,fe=new RegExp("^"+oe+"{3,}","gm"),we;we=fe.exec(re);)we[0].length>=le&&(le=we[0].length+1);var ke=repeat(oe,le);return`

`+ke+ne+`
`+re.replace(/\n$/,"")+`
`+ke+`

`}};rules.horizontalRule={filter:"hr",replacement:function(q,j,X){return`

`+X.hr+`

`}};rules.inlineLink={filter:function(q,j){return j.linkStyle==="inlined"&&q.nodeName==="A"&&q.getAttribute("href")},replacement:function(q,j){var X=j.getAttribute("href"),te=cleanAttribute(j.getAttribute("title"));return te&&(te=' "'+te+'"'),"["+q+"]("+X+te+")"}};rules.referenceLink={filter:function(q,j){return j.linkStyle==="referenced"&&q.nodeName==="A"&&q.getAttribute("href")},replacement:function(q,j,X){var te=j.getAttribute("href"),ne=cleanAttribute(j.getAttribute("title"));ne&&(ne=' "'+ne+'"');var re,oe;switch(X.linkReferenceStyle){case"collapsed":re="["+q+"][]",oe="["+q+"]: "+te+ne;break;case"shortcut":re="["+q+"]",oe="["+q+"]: "+te+ne;break;default:var le=this.references.length+1;re="["+q+"]["+le+"]",oe="["+le+"]: "+te+ne}return this.references.push(oe),re},references:[],append:function(q){var j="";return this.references.length&&(j=`

`+this.references.join(`
`)+`

`,this.references=[]),j}};rules.emphasis={filter:["em","i"],replacement:function(q,j,X){return q.trim()?X.emDelimiter+q+X.emDelimiter:""}};rules.strong={filter:["strong","b"],replacement:function(q,j,X){return q.trim()?X.strongDelimiter+q+X.strongDelimiter:""}};rules.code={filter:function(q){var j=q.previousSibling||q.nextSibling,X=q.parentNode.nodeName==="PRE"&&!j;return q.nodeName==="CODE"&&!X},replacement:function(q){if(!q)return"";q=q.replace(/\r?\n|\r/g," ");for(var j=/^`|^ .*?[^ ].* $|`$/.test(q)?" ":"",X="`",te=q.match(/`+/gm)||[];te.indexOf(X)!==-1;)X=X+"`";return X+j+q+j+X}};rules.image={filter:"img",replacement:function(q,j){var X=cleanAttribute(j.getAttribute("alt")),te=j.getAttribute("src")||"",ne=cleanAttribute(j.getAttribute("title")),re=ne?' "'+ne+'"':"";return te?"!["+X+"]("+te+re+")":""}};function cleanAttribute(q){return q?q.replace(/(\n+\s*)+/g,`
`):""}function Rules(q){this.options=q,this._keep=[],this._remove=[],this.blankRule={replacement:q.blankReplacement},this.keepReplacement=q.keepReplacement,this.defaultRule={replacement:q.defaultReplacement},this.array=[];for(var j in q.rules)this.array.push(q.rules[j])}Rules.prototype={add:function(q,j){this.array.unshift(j)},keep:function(q){this._keep.unshift({filter:q,replacement:this.keepReplacement})},remove:function(q){this._remove.unshift({filter:q,replacement:function(){return""}})},forNode:function(q){if(q.isBlank)return this.blankRule;var j;return(j=findRule(this.array,q,this.options))||(j=findRule(this._keep,q,this.options))||(j=findRule(this._remove,q,this.options))?j:this.defaultRule},forEach:function(q){for(var j=0;j<this.array.length;j++)q(this.array[j],j)}};function findRule(q,j,X){for(var te=0;te<q.length;te++){var ne=q[te];if(filterValue(ne,j,X))return ne}}function filterValue(q,j,X){var te=q.filter;if(typeof te=="string"){if(te===j.nodeName.toLowerCase())return!0}else if(Array.isArray(te)){if(te.indexOf(j.nodeName.toLowerCase())>-1)return!0}else if(typeof te=="function"){if(te.call(q,j,X))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function collapseWhitespace(q){var j=q.element,X=q.isBlock,te=q.isVoid,ne=q.isPre||function(ye){return ye.nodeName==="PRE"};if(!(!j.firstChild||ne(j))){for(var re=null,oe=!1,le=null,fe=next(le,j,ne);fe!==j;){if(fe.nodeType===3||fe.nodeType===4){var we=fe.data.replace(/[ \r\n\t]+/g," ");if((!re||/ $/.test(re.data))&&!oe&&we[0]===" "&&(we=we.substr(1)),!we){fe=remove(fe);continue}fe.data=we,re=fe}else if(fe.nodeType===1)X(fe)||fe.nodeName==="BR"?(re&&(re.data=re.data.replace(/ $/,"")),re=null,oe=!1):te(fe)||ne(fe)?(re=null,oe=!0):re&&(oe=!1);else{fe=remove(fe);continue}var ke=next(le,fe,ne);le=fe,fe=ke}re&&(re.data=re.data.replace(/ $/,""),re.data||remove(re))}}function remove(q){var j=q.nextSibling||q.parentNode;return q.parentNode.removeChild(q),j}function next(q,j,X){return q&&q.parentNode===j||X(j)?j.nextSibling||j.parentNode:j.firstChild||j.nextSibling||j.parentNode}var root=typeof window<"u"?window:{};function canParseHTMLNatively(){var q=root.DOMParser,j=!1;try{new q().parseFromString("","text/html")&&(j=!0)}catch{}return j}function createHTMLParser(){var q=function(){};return shouldUseActiveX()?q.prototype.parseFromString=function(j){var X=new window.ActiveXObject("htmlfile");return X.designMode="on",X.open(),X.write(j),X.close(),X}:q.prototype.parseFromString=function(j){var X=document.implementation.createHTMLDocument("");return X.open(),X.write(j),X.close(),X},q}function shouldUseActiveX(){var q=!1;try{document.implementation.createHTMLDocument("").open()}catch{window.ActiveXObject&&(q=!0)}return q}var HTMLParser=canParseHTMLNatively()?root.DOMParser:createHTMLParser();function RootNode(q,j){var X;if(typeof q=="string"){var te=htmlParser().parseFromString('<x-turndown id="turndown-root">'+q+"</x-turndown>","text/html");X=te.getElementById("turndown-root")}else X=q.cloneNode(!0);return collapseWhitespace({element:X,isBlock,isVoid,isPre:j.preformattedCode?isPreOrCode:null}),X}var _htmlParser;function htmlParser(){return _htmlParser=_htmlParser||new HTMLParser,_htmlParser}function isPreOrCode(q){return q.nodeName==="PRE"||q.nodeName==="CODE"}function Node$1(q,j){return q.isBlock=isBlock(q),q.isCode=q.nodeName==="CODE"||q.parentNode.isCode,q.isBlank=isBlank(q),q.flankingWhitespace=flankingWhitespace(q,j),q}function isBlank(q){return!isVoid(q)&&!isMeaningfulWhenBlank(q)&&/^\s*$/i.test(q.textContent)&&!hasVoid(q)&&!hasMeaningfulWhenBlank(q)}function flankingWhitespace(q,j){if(q.isBlock||j.preformattedCode&&q.isCode)return{leading:"",trailing:""};var X=edgeWhitespace(q.textContent);return X.leadingAscii&&isFlankedByWhitespace("left",q,j)&&(X.leading=X.leadingNonAscii),X.trailingAscii&&isFlankedByWhitespace("right",q,j)&&(X.trailing=X.trailingNonAscii),{leading:X.leading,trailing:X.trailing}}function edgeWhitespace(q){var j=q.match(/^(([ \t\r\n]*)(\s*))[\s\S]*?((\s*?)([ \t\r\n]*))$/);return{leading:j[1],leadingAscii:j[2],leadingNonAscii:j[3],trailing:j[4],trailingNonAscii:j[5],trailingAscii:j[6]}}function isFlankedByWhitespace(q,j,X){var te,ne,re;return q==="left"?(te=j.previousSibling,ne=/ $/):(te=j.nextSibling,ne=/^ /),te&&(te.nodeType===3?re=ne.test(te.nodeValue):X.preformattedCode&&te.nodeName==="CODE"?re=!1:te.nodeType===1&&!isBlock(te)&&(re=ne.test(te.textContent))),re}var reduce=Array.prototype.reduce,escapes=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function TurndownService(q){if(!(this instanceof TurndownService))return new TurndownService(q);var j={rules,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(X,te){return te.isBlock?`

`:""},keepReplacement:function(X,te){return te.isBlock?`

`+te.outerHTML+`

`:te.outerHTML},defaultReplacement:function(X,te){return te.isBlock?`

`+X+`

`:X}};this.options=extend({},j,q),this.rules=new Rules(this.options)}TurndownService.prototype={turndown:function(q){if(!canConvert(q))throw new TypeError(q+" is not a string, or an element/document/fragment node.");if(q==="")return"";var j=process$1.call(this,new RootNode(q,this.options));return postProcess.call(this,j)},use:function(q){if(Array.isArray(q))for(var j=0;j<q.length;j++)this.use(q[j]);else if(typeof q=="function")q(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(q,j){return this.rules.add(q,j),this},keep:function(q){return this.rules.keep(q),this},remove:function(q){return this.rules.remove(q),this},escape:function(q){return escapes.reduce(function(j,X){return j.replace(X[0],X[1])},q)}};function process$1(q){var j=this;return reduce.call(q.childNodes,function(X,te){te=new Node$1(te,j.options);var ne="";return te.nodeType===3?ne=te.isCode?te.nodeValue:j.escape(te.nodeValue):te.nodeType===1&&(ne=replacementForNode.call(j,te)),join(X,ne)},"")}function postProcess(q){var j=this;return this.rules.forEach(function(X){typeof X.append=="function"&&(q=join(q,X.append(j.options)))}),q.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function replacementForNode(q){var j=this.rules.forNode(q),X=process$1.call(this,q),te=q.flankingWhitespace;return(te.leading||te.trailing)&&(X=X.trim()),te.leading+j.replacement(X,q,this.options)+te.trailing}function join(q,j){var X=trimTrailingNewlines(q),te=trimLeadingNewlines(j),ne=Math.max(q.length-X.length,j.length-te.length),re=`

`.substring(0,ne);return X+re+te}function canConvert(q){return q!=null&&(typeof q=="string"||q.nodeType&&(q.nodeType===1||q.nodeType===9||q.nodeType===11))}const globalCSS=i$c`
  :root {
    --affine-primary-color: #3a4c5c;
    --affine-font-family: Avenir Next, Poppins, apple-system, BlinkMacSystemFont,
      Helvetica Neue, Tahoma, PingFang SC, Microsoft Yahei, Arial,
      Hiragino Sans GB, sans-serif, Apple Color Emoji, Segoe UI Emoji,
      Segoe UI Symbol, Noto Color Emoji;
    --affine-font-mono: Space Mono, Consolas, Menlo, Monaco, Courier, monospace;
  }
  body {
    font-family: var(--affine-font-family);
    color: var(--affine-primary-color);
  }
`,highlightCSS=i$c`
  pre code.hljs {
    display: block;
    overflow-x: auto;
    padding: 1em;
  }

  code.hljs {
    padding: 3px 5px;
  }

  .hljs {
    color: #000;
    background: #fff;
  }

  .hljs-addition,
  .hljs-meta,
  .hljs-string,
  .hljs-symbol,
  .hljs-template-tag,
  .hljs-template-variable {
    color: #756bb1;
  }

  .hljs-comment,
  .hljs-quote {
    color: #636363;
  }

  .hljs-bullet,
  .hljs-link,
  .hljs-literal,
  .hljs-number,
  .hljs-regexp {
    color: #31a354;
  }

  .hljs-deletion,
  .hljs-variable {
    color: #88f;
  }

  .hljs-built_in,
  .hljs-doctag,
  .hljs-keyword,
  .hljs-name,
  .hljs-section,
  .hljs-selector-class,
  .hljs-selector-id,
  .hljs-selector-tag,
  .hljs-strong,
  .hljs-tag,
  .hljs-title,
  .hljs-type {
    color: #3182bd;
  }

  .hljs-emphasis {
    font-style: italic;
  }

  .hljs-attribute {
    color: #e6550d;
  }
`,UNTITLED_PAGE_NAME="Untitled",FileExporter={exportTextFile(q,j,X){const te=document.createElement("a");te.setAttribute("href","data:"+X+";charset=utf-8,"+encodeURIComponent(j)),te.setAttribute("download",q),te.style.display="none",document.body.appendChild(te),te.click(),document.body.removeChild(te)},exportHtml(q,j){const X=(q==null?void 0:q.trim())||UNTITLED_PAGE_NAME;FileExporter.exportTextFile(X+".html",wrapHtmlWithHtmlDocumentText(X,j),"text/html")},exportHtmlAsMarkdown(q,j){const X=new TurndownService;X.addRule("input",{filter:["input"],replacement:function(re,oe){return oe.getAttribute("checked")===null?"[ ] ":"[x] "}}),X.addRule("codeBlock",{filter:["pre"],replacement:function(re,oe){return"```"+oe.getAttribute("code-lang")+`
`+oe.textContent+"```\n"}});const te=X.turndown(j),ne=(q==null?void 0:q.trim())||UNTITLED_PAGE_NAME;FileExporter.exportTextFile(ne+".md",te,"text/plain")}};function wrapHtmlWithHtmlDocumentText(q,j){const X=`<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
<style>
  ${globalCSS}
  ${highlightCSS}
</style>`;return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>${q}</title>
  ${X}
</head>
<body>
<div style="margin:0 auto;padding:1rem;max-width:720px">
${j}
</div>
</body>
</html>
`}const INLINE_TAGS=["DEL","STRONG","B","EM","I","U","S","SPAN","A","INPUT","MARK","CODE","LABEL","BIG","SMALL","ABBR","CITE"];class ParserHtml{constructor(j){this._contentParser=j}registerParsers(){this._contentParser.registerParserHtmlText2Block("nodeParser",this._nodePaser.bind(this)),this._contentParser.registerParserHtmlText2Block("commonParser",this._commonParser.bind(this)),this._contentParser.registerParserHtmlText2Block("listItemParser",this._listItemParser.bind(this)),this._contentParser.registerParserHtmlText2Block("blockQuoteParser",this._blockQuoteParser.bind(this))}_nodePaser(j){var ne,re,oe,le,fe,we,ke,ye,ve,be,Ce,Ee;let X;if(X=(ne=this._contentParser.getParserHtmlText2Block("customNodeParser"))==null?void 0:ne(j),X&&X.length>0)return X;const te=j.tagName;if(j instanceof Text||INLINE_TAGS.includes(te))X=(re=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:re({element:j,flavour:"affine:paragraph",type:"text"});else switch(te){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":X=(oe=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:oe({element:j,flavour:"affine:paragraph",type:te.toLowerCase()});break;case"BLOCKQUOTE":X=(le=this._contentParser.getParserHtmlText2Block("blockQuoteParser"))==null?void 0:le(j);break;case"P":j.firstChild instanceof Text&&((fe=j.firstChild.textContent)!=null&&fe.startsWith("[] ")||(we=j.firstChild.textContent)!=null&&we.startsWith("[ ] ")||(ke=j.firstChild.textContent)!=null&&ke.startsWith("[x] "))?X=(ye=this._contentParser.getParserHtmlText2Block("listItemParser"))==null?void 0:ye(j):X=(ve=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:ve({element:j,flavour:"affine:paragraph",type:"text"});break;case"DIV":X=(be=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:be({element:j,flavour:"affine:paragraph",type:"text"});break;case"LI":X=(Ce=this._contentParser.getParserHtmlText2Block("listItemParser"))==null?void 0:Ce(j);break;case"HR":X=(Ee=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:Ee({element:j,flavour:"affine:divider"});break}return X&&X.length>0?X:Array.from(j.children).map(Oe=>{var Te;const Ae=((Te=this._contentParser.getParserHtmlText2Block("nodeParser"))==null?void 0:Te(Oe))||[];return Ae&&Ae.length?Ae:[]}).flat().filter(Oe=>Oe)}_commonParser({element:j,flavour:X,type:te,checked:ne,ignoreEmptyElement:re=!0}){const oe=this._commonHTML2Block(j,X,te,ne,re);return oe?[oe]:null}_commonHTML2Block(j,X,te,ne,re=!0){const oe=j.childNodes;let le=!1;const fe=[],we=[];for(let ke=0;ke<oe.length;ke++){const ye=oe.item(ke);if(ye){if(!le){if(ye instanceof Text){fe.push(...this._commonHTML2Text(ye,{},re));continue}const ve=ye;if(INLINE_TAGS.includes(ve.tagName)){fe.push(...this._commonHTML2Text(ye,{},re));continue}}if(ye instanceof Element){const ve=this._nodePaser(ye);ve&&we.push(...ve)}le=!0}}return{flavour:X,type:te,checked:ne,text:fe,children:we}}_commonHTML2Text(j,X={},te=!0){if(j instanceof Text)return(j.textContent||"").split(`
`).map(fe=>({insert:fe,attributes:X}));const ne=j,re=Array.from(ne.childNodes),oe=getTextStyle(ne);return re.length?re.reduce((fe,we)=>{const ke=this._commonHTML2Text(we,{...X,...oe},te);return fe.push(...ke),fe},[]).filter(fe=>fe):te?[]:[{insert:"",attributes:oe}]}_listItemParser(j){var le,fe,we,ke,ye,ve,be,Ce;let te=((le=j.parentElement)==null?void 0:le.tagName)==="OL"?"numbered":"bulleted",ne,re;return(((fe=re=j.firstElementChild)==null?void 0:fe.tagName)==="INPUT"||((ke=re=(we=j.firstElementChild)==null?void 0:we.firstElementChild)==null?void 0:ke.tagName)==="INPUT")&&(te="todo",ne=(re==null?void 0:re.getAttribute("checked"))!==null),j.firstChild instanceof Text&&((ye=j.firstChild.textContent)!=null&&ye.startsWith("[] ")?(j.firstChild.textContent=j.firstChild.textContent.slice(3),te="todo",ne=!1):(ve=j.firstChild.textContent)!=null&&ve.startsWith("[ ] ")?(j.firstChild.textContent=j.firstChild.textContent.slice(4),te="todo",ne=!1):(be=j.firstChild.textContent)!=null&&be.startsWith("[x] ")&&(j.firstChild.textContent=j.firstChild.textContent.slice(4),te="todo",ne=!0)),(Ce=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:Ce({element:j,flavour:"affine:list",type:te,checked:ne})}_blockQuoteParser(j){var ne;const X=re=>{const oe=[];return re.forEach(le=>{const fe=le.text.filter(ke=>ke.insert);oe.length>0&&fe.length>0&&oe.push({insert:`
`}),oe.push(...fe);const we=X(le.children);oe.length>0&&we.length>0&&oe.push({insert:`
`}),oe.push(...we)}),oe},te=(ne=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:ne({element:j,flavour:"affine:paragraph",type:"text"});return te?[{flavour:"affine:paragraph",type:"quote",text:X(te),children:[]}]:null}}const getIsLink=q=>["A"].includes(q.tagName),getTextStyle=q=>{const j=q.tagName,X={},te=(q.getAttribute("style")||"").split(";").reduce((ne,re)=>{const[oe,le]=re.split(":");return oe&&le&&(ne[oe]=le),ne},{});return(te["font-weight"]==="bold"||Number(te["font-weight"])>400||["STRONG","B","H1","H2","H3","H4","H5","H6"].includes(q.tagName))&&(X.bold=!0),getIsLink(q)&&(X.link=q.getAttribute("href")||q.getAttribute("src")),(j==="EM"||te.fontStyle==="italic")&&(X.italic=!0),(j==="U"||te["text-decoration"]&&te["text-decoration"].indexOf("underline")!==-1||te["border-bottom"])&&(X.underline=!0),j==="CODE"&&(X.code=!0),(j==="S"||j==="DEL"||te["text-decoration"]&&te["text-decoration"].indexOf("line-through")!==-1)&&(X.strike=!0),j==="MARK"&&(X.background="yellow"),X};class ContentParser{constructor(j){this.signals={beforeHtml2Block:new Signal},this._parsers={},this._editor=j,this._parseHtml=new ParserHtml(this),this._parseHtml.registerParsers()}onExportHtml(){const j=this._editor.page.root;if(!j)return;const X=this.block2Html(this._getSelectedBlock(j).children);FileExporter.exportHtml(j.title,X)}onExportMarkdown(){const j=this._editor.page.root;if(!j)return;const X=this.block2Html(this._getSelectedBlock(j).children);FileExporter.exportHtmlAsMarkdown(j.title,X)}block2Html(j){return j.reduce((te,ne,re,oe)=>te+this._getHtmlInfoBySelectionInfo(ne,re>0?oe[re-1]:null,re<oe.length-1?oe[re+1]:null),"")}block2Text(j){return j.reduce((te,ne)=>te+this._getTextInfoBySelectionInfo(ne),"")}htmlText2Block(j){var te;const X=document.createElement("html");return X.innerHTML=j,(te=X.querySelector("head"))==null||te.remove(),this.signals.beforeHtml2Block.emit(X),this._convertHtml2Blocks(X)}markdown2Block(j){const X={name:"underline",level:"inline",start(ne){return ne.indexOf("~")},tokenizer(ne){const oe=/^~([^~]+)~/.exec(ne);if(oe)return{type:"underline",raw:oe[0],text:oe[1].trim()}},renderer(ne){return`<u>${ne.text}</u>`}};marked.use({extensions:[X]});const te=marked.parse(j);return this.htmlText2Block(te)}registerParserHtmlText2Block(j,X){this._parsers[j]=X}getParserHtmlText2Block(j){return this._parsers[j]||null}text2blocks(j){return j.split(`
`).map(X=>({flavour:"affine:paragraph",type:"text",text:[{insert:X}],children:[]}))}_getSelectedBlock(j){return{id:j.id,children:j.children.map(te=>this._getSelectedBlock(te))}}_getHtmlInfoBySelectionInfo(j,X,te){const ne=this._editor.page.getBlockById(j.id);if(!ne)return"";const re=j.children.reduce((le,fe,we,ke)=>{const ye=this._getHtmlInfoBySelectionInfo(fe,we>0?ke[we-1]:null,we<ke.length-1?ke[we+1]:null);return ye&&le.push(ye),le},[]);return ne.block2html(re.join(""),(X==null?void 0:X.id)||"",(te==null?void 0:te.id)||"",j.startPos,j.endPos)}_getTextInfoBySelectionInfo(j){const X=this._editor.page.getBlockById(j.id);if(!X)return"";const te=[];return j.children.forEach(re=>{const oe=this._getTextInfoBySelectionInfo(re);oe&&te.push(oe)}),X.block2Text(te.join(""),j.startPos,j.endPos)}_convertHtml2Blocks(j){return Array.from(j.children).map(X=>{var ne;const te=((ne=this.getParserHtmlText2Block("nodeParser"))==null?void 0:ne(X))||[];return te&&te.length?te:[]}).flat().filter(X=>X)}}class ClipboardManager{constructor(j,X){this._editor=j,this._clipboardTarget=X,this._copy=new CopyCutManager(this._editor),this._paste=new PasteManager(this._editor),this._clipboardEventDispatcher=new ClipboardEventDispatcher(this._clipboardTarget),this._clipboardEventDispatcher.signals.copy.on(this._copy.handleCopy),this._clipboardEventDispatcher.signals.cut.on(this._copy.handleCut),this._clipboardEventDispatcher.signals.paste.on(this._paste.handlePaste)}set clipboardTarget(j){this._clipboardEventDispatcher.disposeClipboardTargetEvent(this._clipboardTarget),this._clipboardTarget=j,this._clipboardEventDispatcher.initClipboardTargetEvent(this._clipboardTarget)}get clipboardTarget(){return this._clipboardTarget}importMarkdown(j,X){const te=this._editor.contentParser.markdown2Block(j);this._paste.insertBlocks(te,{type:"Block",selectedBlocks:[{id:X,children:[]}]})}dispose(){this._clipboardEventDispatcher.dispose(this.clipboardTarget)}}var __defProp$2=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__decorateClass$2=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$2(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$2(j,X,ne),ne};let EditorContainer=class extends NonShadowLitElement{constructor(){super(...arguments),this.mode="page",this.readonly=!1,this.mouseMode={type:"default"},this.clipboard=new ClipboardManager(this,this),this.contentParser=new ContentParser(this),this._disposables=new DisposableGroup}get model(){return this.page.root}createRenderRoot(){return this}connectedCallback(){var q;if(super.connectedCallback(),this._disposables.add(Signal.fromEvent(window,"keydown").on(j=>{j.altKey&&j.metaKey&&j.code==="KeyC"&&j.preventDefault()})),!this.page)throw new Error("Missing page for EditorContainer!");this._disposables.add(Signal.fromEvent(window,"affine.switch-mouse-mode").on(({detail:j})=>{this.mouseMode=j})),this._disposables.add(this.page.signals.rootAdded.on(()=>{this.requestUpdate()})),(q=this._placeholderInput)==null||q.focus()}disconnectedCallback(){super.disconnectedCallback(),this._disposables.dispose(),this._disposables=new DisposableGroup}render(){if(!this.model)return null;const q=y$1`
      <affine-default-page
        .mouseRoot=${this}
        .page=${this.page}
        .model=${this.model}
        .readonly=${this.readonly}
      ></affine-default-page>
    `,j=y$1`
      <affine-edgeless-page
        .mouseRoot=${this}
        .page=${this.page}
        .model=${this.model}
        .mouseMode=${this.mouseMode}
        .readonly=${this.readonly}
      ></affine-edgeless-page>
    `,X=y$1`
      ${o$3(this.mode,[["page",()=>q],["edgeless",()=>j]])}
    `;return y$1`
      <style>
        .affine-editor-container {
          height: 100%;
          position: relative;
          overflow-y: auto;
          overflow-x: hidden;
        }
      </style>
      <div class="affine-editor-container">${X}</div>
    `}};__decorateClass$2([e$8()],EditorContainer.prototype,"page",2);__decorateClass$2([e$8()],EditorContainer.prototype,"mode",2);__decorateClass$2([e$8()],EditorContainer.prototype,"readonly",2);__decorateClass$2([e$8()],EditorContainer.prototype,"mouseMode",2);__decorateClass$2([t$7()],EditorContainer.prototype,"clipboard",2);__decorateClass$2([t$7()],EditorContainer.prototype,"contentParser",2);__decorateClass$2([i$9(".affine-block-placeholder-input")],EditorContainer.prototype,"_placeholderInput",2);EditorContainer=__decorateClass$2([e$9("editor-container")],EditorContainer);const env=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},importIdentifier="__ $BLOCKSUITE_EDITOR$ __";env[importIdentifier]===!0&&console.error("@blocksuite/editor was already imported. This breaks constructor checks and will lead to issues!");env[importIdentifier]=!0;const light="";var t$3=window,e$3=t$3.ShadowRoot&&(t$3.ShadyCSS===void 0||t$3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$3=Symbol(),n$3=new WeakMap,o$2=class{constructor(j,X,te){if(this._$cssResult$=!0,te!==s$3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=j,this.t=X}get styleSheet(){let j=this.o;const X=this.t;if(e$3&&j===void 0){const te=X!==void 0&&X.length===1;te&&(j=n$3.get(X)),j===void 0&&((this.o=j=new CSSStyleSheet).replaceSync(this.cssText),te&&n$3.set(X,j))}return j}toString(){return this.cssText}},r$1=q=>new o$2(typeof q=="string"?q:q+"",void 0,s$3),i$3=(q,...j)=>{const X=q.length===1?q[0]:j.reduce((te,ne,re)=>te+(oe=>{if(oe._$cssResult$===!0)return oe.cssText;if(typeof oe=="number")return oe;throw Error("Value passed to 'css' function must be a 'css' function result: "+oe+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(ne)+q[re+1],q[0]);return new o$2(X,q,s$3)},S=(q,j)=>{e$3?q.adoptedStyleSheets=j.map(X=>X instanceof CSSStyleSheet?X:X.styleSheet):j.forEach(X=>{const te=document.createElement("style"),ne=t$3.litNonce;ne!==void 0&&te.setAttribute("nonce",ne),te.textContent=X.cssText,q.appendChild(te)})},c$1=e$3?q=>q:q=>q instanceof CSSStyleSheet?(j=>{let X="";for(const te of j.cssRules)X+=te.cssText;return r$1(X)})(q):q,s2$1,e2$2=window,r2$1=e2$2.trustedTypes,h$1=r2$1?r2$1.emptyScript:"",o2$2=e2$2.reactiveElementPolyfillSupport,n2$1={toAttribute(q,j){switch(j){case Boolean:q=q?h$1:null;break;case Object:case Array:q=q==null?q:JSON.stringify(q)}return q},fromAttribute(q,j){let X=q;switch(j){case Boolean:X=q!==null;break;case Number:X=q===null?null:Number(q);break;case Object:case Array:try{X=JSON.parse(q)}catch{X=null}}return X}},a$2=(q,j)=>j!==q&&(j==j||q==q),l$3={attribute:!0,type:String,converter:n2$1,reflect:!1,hasChanged:a$2},d$1=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(j){var X;this.finalize(),((X=this.h)!==null&&X!==void 0?X:this.h=[]).push(j)}static get observedAttributes(){this.finalize();const j=[];return this.elementProperties.forEach((X,te)=>{const ne=this._$Ep(te,X);ne!==void 0&&(this._$Ev.set(ne,te),j.push(ne))}),j}static createProperty(j,X=l$3){if(X.state&&(X.attribute=!1),this.finalize(),this.elementProperties.set(j,X),!X.noAccessor&&!this.prototype.hasOwnProperty(j)){const te=typeof j=="symbol"?Symbol():"__"+j,ne=this.getPropertyDescriptor(j,te,X);ne!==void 0&&Object.defineProperty(this.prototype,j,ne)}}static getPropertyDescriptor(j,X,te){return{get(){return this[X]},set(ne){const re=this[j];this[X]=ne,this.requestUpdate(j,re,te)},configurable:!0,enumerable:!0}}static getPropertyOptions(j){return this.elementProperties.get(j)||l$3}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const j=Object.getPrototypeOf(this);if(j.finalize(),j.h!==void 0&&(this.h=[...j.h]),this.elementProperties=new Map(j.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const X=this.properties,te=[...Object.getOwnPropertyNames(X),...Object.getOwnPropertySymbols(X)];for(const ne of te)this.createProperty(ne,X[ne])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(j){const X=[];if(Array.isArray(j)){const te=new Set(j.flat(1/0).reverse());for(const ne of te)X.unshift(c$1(ne))}else j!==void 0&&X.push(c$1(j));return X}static _$Ep(j,X){const te=X.attribute;return te===!1?void 0:typeof te=="string"?te:typeof j=="string"?j.toLowerCase():void 0}u(){var j;this._$E_=new Promise(X=>this.enableUpdating=X),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(j=this.constructor.h)===null||j===void 0||j.forEach(X=>X(this))}addController(j){var X,te;((X=this._$ES)!==null&&X!==void 0?X:this._$ES=[]).push(j),this.renderRoot!==void 0&&this.isConnected&&((te=j.hostConnected)===null||te===void 0||te.call(j))}removeController(j){var X;(X=this._$ES)===null||X===void 0||X.splice(this._$ES.indexOf(j)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((j,X)=>{this.hasOwnProperty(X)&&(this._$Ei.set(X,this[X]),delete this[X])})}createRenderRoot(){var j;const X=(j=this.shadowRoot)!==null&&j!==void 0?j:this.attachShadow(this.constructor.shadowRootOptions);return S(X,this.constructor.elementStyles),X}connectedCallback(){var j;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(j=this._$ES)===null||j===void 0||j.forEach(X=>{var te;return(te=X.hostConnected)===null||te===void 0?void 0:te.call(X)})}enableUpdating(j){}disconnectedCallback(){var j;(j=this._$ES)===null||j===void 0||j.forEach(X=>{var te;return(te=X.hostDisconnected)===null||te===void 0?void 0:te.call(X)})}attributeChangedCallback(j,X,te){this._$AK(j,te)}_$EO(j,X,te=l$3){var ne;const re=this.constructor._$Ep(j,te);if(re!==void 0&&te.reflect===!0){const oe=(((ne=te.converter)===null||ne===void 0?void 0:ne.toAttribute)!==void 0?te.converter:n2$1).toAttribute(X,te.type);this._$El=j,oe==null?this.removeAttribute(re):this.setAttribute(re,oe),this._$El=null}}_$AK(j,X){var te;const ne=this.constructor,re=ne._$Ev.get(j);if(re!==void 0&&this._$El!==re){const oe=ne.getPropertyOptions(re),le=typeof oe.converter=="function"?{fromAttribute:oe.converter}:((te=oe.converter)===null||te===void 0?void 0:te.fromAttribute)!==void 0?oe.converter:n2$1;this._$El=re,this[re]=le.fromAttribute(X,oe.type),this._$El=null}}requestUpdate(j,X,te){let ne=!0;j!==void 0&&(((te=te||this.constructor.getPropertyOptions(j)).hasChanged||a$2)(this[j],X)?(this._$AL.has(j)||this._$AL.set(j,X),te.reflect===!0&&this._$El!==j&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(j,te))):ne=!1),!this.isUpdatePending&&ne&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(X){Promise.reject(X)}const j=this.scheduleUpdate();return j!=null&&await j,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var j;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((ne,re)=>this[re]=ne),this._$Ei=void 0);let X=!1;const te=this._$AL;try{X=this.shouldUpdate(te),X?(this.willUpdate(te),(j=this._$ES)===null||j===void 0||j.forEach(ne=>{var re;return(re=ne.hostUpdate)===null||re===void 0?void 0:re.call(ne)}),this.update(te)):this._$Ek()}catch(ne){throw X=!1,this._$Ek(),ne}X&&this._$AE(te)}willUpdate(j){}_$AE(j){var X;(X=this._$ES)===null||X===void 0||X.forEach(te=>{var ne;return(ne=te.hostUpdated)===null||ne===void 0?void 0:ne.call(te)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(j)),this.updated(j)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(j){return!0}update(j){this._$EC!==void 0&&(this._$EC.forEach((X,te)=>this._$EO(te,this[te],X)),this._$EC=void 0),this._$Ek()}updated(j){}firstUpdated(j){}};d$1.finalized=!0,d$1.elementProperties=new Map,d$1.elementStyles=[],d$1.shadowRootOptions={mode:"open"},o2$2==null||o2$2({ReactiveElement:d$1}),((s2$1=e2$2.reactiveElementVersions)!==null&&s2$1!==void 0?s2$1:e2$2.reactiveElementVersions=[]).push("1.4.2");var t2,i2$3=window,s3=i2$3.trustedTypes,e3$1=s3?s3.createPolicy("lit-html",{createHTML:q=>q}):void 0,o3$1=`lit$${(Math.random()+"").slice(9)}$`,n3="?"+o3$1,l2$2=`<${n3}>`,h2$1=document,r3=(q="")=>h2$1.createComment(q),d2$1=q=>q===null||typeof q!="object"&&typeof q!="function",u$1=Array.isArray,c2$1=q=>u$1(q)||typeof(q==null?void 0:q[Symbol.iterator])=="function",v=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a2$1=/-->/g,f$2=/>/g,_=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m$1=/'/g,p$1=/"/g,$=/^(?:script|style|textarea|title)$/i,g$1=q=>(j,...X)=>({_$litType$:q,strings:j,values:X}),y=g$1(1),x$1=Symbol.for("lit-noChange"),b$1=Symbol.for("lit-nothing"),T$1=new WeakMap,A$1=h2$1.createTreeWalker(h2$1,129,null,!1),E=(q,j)=>{const X=q.length-1,te=[];let ne,re=j===2?"<svg>":"",oe=v;for(let fe=0;fe<X;fe++){const we=q[fe];let ke,ye,ve=-1,be=0;for(;be<we.length&&(oe.lastIndex=be,ye=oe.exec(we),ye!==null);)be=oe.lastIndex,oe===v?ye[1]==="!--"?oe=a2$1:ye[1]!==void 0?oe=f$2:ye[2]!==void 0?($.test(ye[2])&&(ne=RegExp("</"+ye[2],"g")),oe=_):ye[3]!==void 0&&(oe=_):oe===_?ye[0]===">"?(oe=ne??v,ve=-1):ye[1]===void 0?ve=-2:(ve=oe.lastIndex-ye[2].length,ke=ye[1],oe=ye[3]===void 0?_:ye[3]==='"'?p$1:m$1):oe===p$1||oe===m$1?oe=_:oe===a2$1||oe===f$2?oe=v:(oe=_,ne=void 0);const Ce=oe===_&&q[fe+1].startsWith("/>")?" ":"";re+=oe===v?we+l2$2:ve>=0?(te.push(ke),we.slice(0,ve)+"$lit$"+we.slice(ve)+o3$1+Ce):we+o3$1+(ve===-2?(te.push(void 0),fe):Ce)}const le=re+(q[X]||"<?>")+(j===2?"</svg>":"");if(!Array.isArray(q)||!q.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e3$1!==void 0?e3$1.createHTML(le):le,te]},C$1=class{constructor({strings:j,_$litType$:X},te){let ne;this.parts=[];let re=0,oe=0;const le=j.length-1,fe=this.parts,[we,ke]=E(j,X);if(this.el=C$1.createElement(we,te),A$1.currentNode=this.el.content,X===2){const ye=this.el.content,ve=ye.firstChild;ve.remove(),ye.append(...ve.childNodes)}for(;(ne=A$1.nextNode())!==null&&fe.length<le;){if(ne.nodeType===1){if(ne.hasAttributes()){const ye=[];for(const ve of ne.getAttributeNames())if(ve.endsWith("$lit$")||ve.startsWith(o3$1)){const be=ke[oe++];if(ye.push(ve),be!==void 0){const Ce=ne.getAttribute(be.toLowerCase()+"$lit$").split(o3$1),Ee=/([.?@])?(.*)/.exec(be);fe.push({type:1,index:re,name:Ee[2],strings:Ce,ctor:Ee[1]==="."?M:Ee[1]==="?"?k$1:Ee[1]==="@"?H$1:S2})}else fe.push({type:6,index:re})}for(const ve of ye)ne.removeAttribute(ve)}if($.test(ne.tagName)){const ye=ne.textContent.split(o3$1),ve=ye.length-1;if(ve>0){ne.textContent=s3?s3.emptyScript:"";for(let be=0;be<ve;be++)ne.append(ye[be],r3()),A$1.nextNode(),fe.push({type:2,index:++re});ne.append(ye[ve],r3())}}}else if(ne.nodeType===8)if(ne.data===n3)fe.push({type:2,index:re});else{let ye=-1;for(;(ye=ne.data.indexOf(o3$1,ye+1))!==-1;)fe.push({type:7,index:re}),ye+=o3$1.length-1}re++}}static createElement(j,X){const te=h2$1.createElement("template");return te.innerHTML=j,te}};function P(q,j,X=q,te){var ne,re,oe,le;if(j===x$1)return j;let fe=te!==void 0?(ne=X._$Co)===null||ne===void 0?void 0:ne[te]:X._$Cl;const we=d2$1(j)?void 0:j._$litDirective$;return(fe==null?void 0:fe.constructor)!==we&&((re=fe==null?void 0:fe._$AO)===null||re===void 0||re.call(fe,!1),we===void 0?fe=void 0:(fe=new we(q),fe._$AT(q,X,te)),te!==void 0?((oe=(le=X)._$Co)!==null&&oe!==void 0?oe:le._$Co=[])[te]=fe:X._$Cl=fe),fe!==void 0&&(j=P(q,fe._$AS(q,j.values),fe,te)),j}var V=class{constructor(q,j){this.u=[],this._$AN=void 0,this._$AD=q,this._$AM=j}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(q){var j;const{el:{content:X},parts:te}=this._$AD,ne=((j=q==null?void 0:q.creationScope)!==null&&j!==void 0?j:h2$1).importNode(X,!0);A$1.currentNode=ne;let re=A$1.nextNode(),oe=0,le=0,fe=te[0];for(;fe!==void 0;){if(oe===fe.index){let we;fe.type===2?we=new N(re,re.nextSibling,this,q):fe.type===1?we=new fe.ctor(re,fe.name,fe.strings,this,q):fe.type===6&&(we=new I(re,this,q)),this.u.push(we),fe=te[++le]}oe!==(fe==null?void 0:fe.index)&&(re=A$1.nextNode(),oe++)}return ne}p(q){let j=0;for(const X of this.u)X!==void 0&&(X.strings!==void 0?(X._$AI(q,X,j),j+=X.strings.length-2):X._$AI(q[j])),j++}},N=class{constructor(q,j,X,te){var ne;this.type=2,this._$AH=b$1,this._$AN=void 0,this._$AA=q,this._$AB=j,this._$AM=X,this.options=te,this._$Cm=(ne=te==null?void 0:te.isConnected)===null||ne===void 0||ne}get _$AU(){var q,j;return(j=(q=this._$AM)===null||q===void 0?void 0:q._$AU)!==null&&j!==void 0?j:this._$Cm}get parentNode(){let q=this._$AA.parentNode;const j=this._$AM;return j!==void 0&&q.nodeType===11&&(q=j.parentNode),q}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(q,j=this){q=P(this,q,j),d2$1(q)?q===b$1||q==null||q===""?(this._$AH!==b$1&&this._$AR(),this._$AH=b$1):q!==this._$AH&&q!==x$1&&this.g(q):q._$litType$!==void 0?this.$(q):q.nodeType!==void 0?this.T(q):c2$1(q)?this.k(q):this.g(q)}O(q,j=this._$AB){return this._$AA.parentNode.insertBefore(q,j)}T(q){this._$AH!==q&&(this._$AR(),this._$AH=this.O(q))}g(q){this._$AH!==b$1&&d2$1(this._$AH)?this._$AA.nextSibling.data=q:this.T(h2$1.createTextNode(q)),this._$AH=q}$(q){var j;const{values:X,_$litType$:te}=q,ne=typeof te=="number"?this._$AC(q):(te.el===void 0&&(te.el=C$1.createElement(te.h,this.options)),te);if(((j=this._$AH)===null||j===void 0?void 0:j._$AD)===ne)this._$AH.p(X);else{const re=new V(ne,this),oe=re.v(this.options);re.p(X),this.T(oe),this._$AH=re}}_$AC(q){let j=T$1.get(q.strings);return j===void 0&&T$1.set(q.strings,j=new C$1(q)),j}k(q){u$1(this._$AH)||(this._$AH=[],this._$AR());const j=this._$AH;let X,te=0;for(const ne of q)te===j.length?j.push(X=new N(this.O(r3()),this.O(r3()),this,this.options)):X=j[te],X._$AI(ne),te++;te<j.length&&(this._$AR(X&&X._$AB.nextSibling,te),j.length=te)}_$AR(q=this._$AA.nextSibling,j){var X;for((X=this._$AP)===null||X===void 0||X.call(this,!1,!0,j);q&&q!==this._$AB;){const te=q.nextSibling;q.remove(),q=te}}setConnected(q){var j;this._$AM===void 0&&(this._$Cm=q,(j=this._$AP)===null||j===void 0||j.call(this,q))}},S2=class{constructor(q,j,X,te,ne){this.type=1,this._$AH=b$1,this._$AN=void 0,this.element=q,this.name=j,this._$AM=te,this.options=ne,X.length>2||X[0]!==""||X[1]!==""?(this._$AH=Array(X.length-1).fill(new String),this.strings=X):this._$AH=b$1}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(q,j=this,X,te){const ne=this.strings;let re=!1;if(ne===void 0)q=P(this,q,j,0),re=!d2$1(q)||q!==this._$AH&&q!==x$1,re&&(this._$AH=q);else{const oe=q;let le,fe;for(q=ne[0],le=0;le<ne.length-1;le++)fe=P(this,oe[X+le],j,le),fe===x$1&&(fe=this._$AH[le]),re||(re=!d2$1(fe)||fe!==this._$AH[le]),fe===b$1?q=b$1:q!==b$1&&(q+=(fe??"")+ne[le+1]),this._$AH[le]=fe}re&&!te&&this.j(q)}j(q){q===b$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,q??"")}},M=class extends S2{constructor(){super(...arguments),this.type=3}j(q){this.element[this.name]=q===b$1?void 0:q}},R$1=s3?s3.emptyScript:"",k$1=class extends S2{constructor(){super(...arguments),this.type=4}j(j){j&&j!==b$1?this.element.setAttribute(this.name,R$1):this.element.removeAttribute(this.name)}},H$1=class extends S2{constructor(j,X,te,ne,re){super(j,X,te,ne,re),this.type=5}_$AI(j,X=this){var te;if((j=(te=P(this,j,X,0))!==null&&te!==void 0?te:b$1)===x$1)return;const ne=this._$AH,re=j===b$1&&ne!==b$1||j.capture!==ne.capture||j.once!==ne.once||j.passive!==ne.passive,oe=j!==b$1&&(ne===b$1||re);re&&this.element.removeEventListener(this.name,this,ne),oe&&this.element.addEventListener(this.name,this,j),this._$AH=j}handleEvent(j){var X,te;typeof this._$AH=="function"?this._$AH.call((te=(X=this.options)===null||X===void 0?void 0:X.host)!==null&&te!==void 0?te:this.element,j):this._$AH.handleEvent(j)}},I=class{constructor(q,j,X){this.element=q,this.type=6,this._$AN=void 0,this._$AM=j,this.options=X}get _$AU(){return this._$AM._$AU}_$AI(q){P(this,q)}},z=i2$3.litHtmlPolyfillSupport;z==null||z(C$1,N),((t2=i2$3.litHtmlVersions)!==null&&t2!==void 0?t2:i2$3.litHtmlVersions=[]).push("2.4.0");var Z=(q,j,X)=>{var te,ne;const re=(te=X==null?void 0:X.renderBefore)!==null&&te!==void 0?te:j;let oe=re._$litPart$;if(oe===void 0){const le=(ne=X==null?void 0:X.renderBefore)!==null&&ne!==void 0?ne:null;re._$litPart$=oe=new N(j.insertBefore(r3(),le),le,void 0,X??{})}return oe._$AI(q),oe},l3,o4,s4=class extends d$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var q,j;const X=super.createRenderRoot();return(q=(j=this.renderOptions).renderBefore)!==null&&q!==void 0||(j.renderBefore=X.firstChild),X}update(q){const j=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(q),this._$Dt=Z(j,this.renderRoot,this.renderOptions)}connectedCallback(){var q;super.connectedCallback(),(q=this._$Dt)===null||q===void 0||q.setConnected(!0)}disconnectedCallback(){var q;super.disconnectedCallback(),(q=this._$Dt)===null||q===void 0||q.setConnected(!1)}render(){return x$1}};s4.finalized=!0,s4._$litElement$=!0,(l3=globalThis.litElementHydrateSupport)===null||l3===void 0||l3.call(globalThis,{LitElement:s4});var n4=globalThis.litElementPolyfillSupport;n4==null||n4({LitElement:s4});((o4=globalThis.litElementVersions)!==null&&o4!==void 0?o4:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var component_styles_default=i$3`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`,button_styles_default=i$3`
  ${component_styles_default}

  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label {
    display: inline-block;
  }

  .button__label::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  @media (forced-colors: active) {
    .button.button--outline.button--checked:not(.button--disabled) {
      outline: solid 2px transparent;
    }
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:focus-visible:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    font-size: var(--sl-button-font-size-small);
    height: var(--sl-input-height-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    font-size: var(--sl-button-font-size-medium);
    height: var(--sl-input-height-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    font-size: var(--sl-button-font-size-large);
    height: var(--sl-input-height-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    height: auto;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    translate: 50% -50%;
    pointer-events: none;
  }

  .button--rtl ::slotted(sl-badge) {
    right: auto;
    left: 0;
    translate: -50% -50%;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host(.sl-button-group__button--first:not(.sl-button-group__button--last)) .button {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }

  :host(.sl-button-group__button--inner) .button {
    border-radius: 0;
  }

  :host(.sl-button-group__button--last:not(.sl-button-group__button--first)) .button {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }

  /* All except the first */
  :host(.sl-button-group__button:not(.sl-button-group__button--first)) {
    margin-inline-start: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(.sl-button-group__button:not(.sl-button-group__button--first, .sl-button-group__button--radio, [variant='default']):not(:hover))
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host(.sl-button-group__button--hover) {
    z-index: 1;
  }

  /* Focus and checked are always on top */
  :host(.sl-button-group__button--focus),
  :host(.sl-button-group__button[checked]) {
    z-index: 2;
  }
`,__defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(q,j,X)=>j in q?__defProp$1(q,j,{enumerable:!0,configurable:!0,writable:!0,value:X}):q[j]=X,__spreadValues=(q,j)=>{for(var X in j||(j={}))__hasOwnProp.call(j,X)&&__defNormalProp(q,X,j[X]);if(__getOwnPropSymbols)for(var X of __getOwnPropSymbols(j))__propIsEnum.call(j,X)&&__defNormalProp(q,X,j[X]);return q},__spreadProps=(q,j)=>__defProps(q,__getOwnPropDescs(j)),__objRest=(q,j)=>{var X={};for(var te in q)__hasOwnProp.call(q,te)&&j.indexOf(te)<0&&(X[te]=q[te]);if(q!=null&&__getOwnPropSymbols)for(var te of __getOwnPropSymbols(q))j.indexOf(te)<0&&__propIsEnum.call(q,te)&&(X[te]=q[te]);return X},__decorateClass$1=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc$1(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp$1(j,X,ne),ne},formCollections=new WeakMap,userInteractedControls=new WeakMap,reportValidityOverloads=new WeakMap,FormSubmitController=class{constructor(q,j){(this.host=q).addController(this),this.options=__spreadValues({form:X=>X.closest("form"),name:X=>X.name,value:X=>X.value,defaultValue:X=>X.defaultValue,disabled:X=>{var te;return(te=X.disabled)!=null?te:!1},reportValidity:X=>typeof X.reportValidity=="function"?X.reportValidity():!0,setValue:(X,te)=>X.value=te},j),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleFormReset=this.handleFormReset.bind(this),this.reportFormValidity=this.reportFormValidity.bind(this),this.handleUserInput=this.handleUserInput.bind(this)}hostConnected(){this.form=this.options.form(this.host),this.form&&(formCollections.has(this.form)?formCollections.get(this.form).add(this.host):formCollections.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)||(reportValidityOverloads.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity())),this.host.addEventListener("sl-input",this.handleUserInput)}hostDisconnected(){var q;this.form&&((q=formCollections.get(this.form))==null||q.delete(this.host),this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)&&(this.form.reportValidity=reportValidityOverloads.get(this.form),reportValidityOverloads.delete(this.form)),this.form=void 0),this.host.removeEventListener("sl-input",this.handleUserInput)}hostUpdated(){var q;const j=this.host,X=Boolean(userInteractedControls.get(j)),te=Boolean(j.invalid),ne=Boolean(j.required);(q=this.form)!=null&&q.noValidate?(j.removeAttribute("data-required"),j.removeAttribute("data-optional"),j.removeAttribute("data-invalid"),j.removeAttribute("data-valid"),j.removeAttribute("data-user-invalid"),j.removeAttribute("data-user-valid")):(j.toggleAttribute("data-required",ne),j.toggleAttribute("data-optional",!ne),j.toggleAttribute("data-invalid",te),j.toggleAttribute("data-valid",!te),j.toggleAttribute("data-user-invalid",te&&X),j.toggleAttribute("data-user-valid",!te&&X))}handleFormData(q){const j=this.options.disabled(this.host),X=this.options.name(this.host),te=this.options.value(this.host),ne=this.host.tagName.toLowerCase()==="sl-button";!j&&!ne&&typeof X=="string"&&typeof te<"u"&&(Array.isArray(te)?te.forEach(re=>{q.formData.append(X,re.toString())}):q.formData.append(X,te.toString()))}handleFormSubmit(q){var j;const X=this.options.disabled(this.host),te=this.options.reportValidity;this.form&&!this.form.noValidate&&((j=formCollections.get(this.form))==null||j.forEach(ne=>{this.setUserInteracted(ne,!0)})),this.form&&!this.form.noValidate&&!X&&!te(this.host)&&(q.preventDefault(),q.stopImmediatePropagation())}handleFormReset(){this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1)}async handleUserInput(){await this.host.updateComplete,this.setUserInteracted(this.host,!0)}reportFormValidity(){if(this.form&&!this.form.noValidate){const q=this.form.querySelectorAll("*");for(const j of q)if(typeof j.reportValidity=="function"&&!j.reportValidity())return!1}return!0}setUserInteracted(q,j){userInteractedControls.set(q,j),q.requestUpdate()}doAction(q,j){if(this.form){const X=document.createElement("button");X.type=q,X.style.position="absolute",X.style.width="0",X.style.height="0",X.style.clipPath="inset(50%)",X.style.overflow="hidden",X.style.whiteSpace="nowrap",j&&(X.name=j.name,X.value=j.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(te=>{j.hasAttribute(te)&&X.setAttribute(te,j.getAttribute(te))})),this.form.append(X),X.click(),X.remove()}}reset(q){this.doAction("reset",q)}submit(q){this.doAction("submit",q)}},e$2=Symbol.for(""),l$2=q=>{if((q==null?void 0:q.r)===e$2)return q==null?void 0:q._$litStatic$},i$2=(q,...j)=>({_$litStatic$:j.reduce((X,te,ne)=>X+(re=>{if(re._$litStatic$!==void 0)return re._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${re}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(te)+q[ne+1],q[0]),r:e$2}),s$2=new Map,a$1=q=>(j,...X)=>{const te=X.length;let ne,re;const oe=[],le=[];let fe,we=0,ke=!1;for(;we<te;){for(fe=j[we];we<te&&(re=X[we],(ne=l$2(re))!==void 0);)fe+=ne+j[++we],ke=!0;le.push(re),oe.push(fe),we++}if(we===te&&oe.push(j[te]),ke){const ye=oe.join("$$lit$$");(j=s$2.get(ye))===void 0&&(oe.raw=oe,s$2.set(ye,j=oe)),X=le}return q(j,...X)},n$2=a$1(y);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var connectedElements=new Set,documentElementObserver=new MutationObserver(update),translations=new Map,documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,fallback;documentElementObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]});function registerTranslation(...q){q.map(j=>{const X=j.$code.toLowerCase();translations.has(X)?translations.set(X,Object.assign(Object.assign({},translations.get(X)),j)):translations.set(X,j),fallback||(fallback=j)}),update()}function update(){documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,[...connectedElements.keys()].map(q=>{typeof q.requestUpdate=="function"&&q.requestUpdate()})}var LocalizeController=class{constructor(q){this.host=q,this.host.addController(this)}hostConnected(){connectedElements.add(this.host)}hostDisconnected(){connectedElements.delete(this.host)}dir(){return`${this.host.dir||documentDirection}`.toLowerCase()}lang(){return`${this.host.lang||documentLanguage}`.toLowerCase()}term(q,...j){var X,te;const ne=new Intl.Locale(this.lang()),re=ne==null?void 0:ne.language.toLowerCase(),oe=(te=(X=ne==null?void 0:ne.region)===null||X===void 0?void 0:X.toLowerCase())!==null&&te!==void 0?te:"",le=translations.get(`${re}-${oe}`),fe=translations.get(re);let we;if(le&&le[q])we=le[q];else if(fe&&fe[q])we=fe[q];else if(fallback&&fallback[q])we=fallback[q];else return console.error(`No translation found for: ${String(q)}`),q;return typeof we=="function"?we(...j):we}date(q,j){return q=new Date(q),new Intl.DateTimeFormat(this.lang(),j).format(q)}number(q,j){return q=Number(q),isNaN(q)?"":new Intl.NumberFormat(this.lang(),j).format(q)}relativeTime(q,j,X){return new Intl.RelativeTimeFormat(this.lang(),X).format(q,j)}},LocalizeController2=class extends LocalizeController{},translation={$code:"en",$name:"English",$dir:"ltr",clearEntry:"Clear entry",close:"Close",copy:"Copy",currentValue:"Current value",hidePassword:"Hide password",loading:"Loading",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",toggleColorFormat:"Toggle color format"};registerTranslation(translation);var HasSlotController=class{constructor(q,...j){this.slotNames=[],(this.host=q).addController(this),this.slotNames=j,this.handleSlotChange=this.handleSlotChange.bind(this)}hasDefaultSlot(){return[...this.host.childNodes].some(q=>{if(q.nodeType===q.TEXT_NODE&&q.textContent.trim()!=="")return!0;if(q.nodeType===q.ELEMENT_NODE){const j=q;if(j.tagName.toLowerCase()==="sl-visually-hidden")return!1;if(!j.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(q){return this.host.querySelector(`:scope > [slot="${q}"]`)!==null}test(q){return q==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(q)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}handleSlotChange(q){const j=q.target;(this.slotNames.includes("[default]")&&!j.name||j.name&&this.slotNames.includes(j.name))&&this.host.requestUpdate()}};function getTextContent(q){if(!q)return"";const j=q.assignedNodes({flatten:!0});let X="";return[...j].forEach(te=>{te.nodeType===Node.TEXT_NODE&&(X+=te.textContent)}),X}var l$1=q=>q??b$1;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$2={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$1=q=>(...j)=>({_$litDirective$:q,values:j}),i$1=class{constructor(j){}get _$AU(){return this._$AM._$AU}_$AT(j,X,te){this._$Ct=j,this._$AM=X,this._$Ci=te}_$AS(j,X){return this.update(j,X)}update(j,X){return this.render(...X)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var o$1=e$1(class extends i$1{constructor(q){var j;if(super(q),q.type!==t$2.ATTRIBUTE||q.name!=="class"||((j=q.strings)===null||j===void 0?void 0:j.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(q){return" "+Object.keys(q).filter(j=>q[j]).join(" ")+" "}update(q,[j]){var X,te;if(this.nt===void 0){this.nt=new Set,q.strings!==void 0&&(this.st=new Set(q.strings.join(" ").split(/\s/).filter(re=>re!=="")));for(const re in j)j[re]&&!(!((X=this.st)===null||X===void 0)&&X.has(re))&&this.nt.add(re);return this.render(j)}const ne=q.element.classList;this.nt.forEach(re=>{re in j||(ne.remove(re),this.nt.delete(re))});for(const re in j){const oe=!!j[re];oe===this.nt.has(re)||!((te=this.st)===null||te===void 0)&&te.has(re)||(oe?(ne.add(re),this.nt.add(re)):(ne.remove(re),this.nt.delete(re)))}return x$1}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function watch(q,j){const X=__spreadValues({waitUntilFirstUpdate:!1},j);return(te,ne)=>{const{update:re}=te;if(q in te){const oe=q;te.update=function(le){if(le.has(oe)){const fe=le.get(oe),we=this[oe];fe!==we&&(!X.waitUntilFirstUpdate||this.hasUpdated)&&this[ne](fe,we)}re.call(this,le)}}}}var e=q=>j=>typeof j=="function"?((X,te)=>(customElements.define(X,te),te))(q,j):((X,te)=>{const{kind:ne,elements:re}=te;return{kind:ne,elements:re,finisher(oe){customElements.define(X,oe)}}})(q,j),i=(q,j)=>j.kind==="method"&&j.descriptor&&!("value"in j.descriptor)?__spreadProps(__spreadValues({},j),{finisher(X){X.createProperty(j.key,q)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:j.key,initializer(){typeof j.initializer=="function"&&(this[j.key]=j.initializer.call(this))},finisher(X){X.createProperty(j.key,q)}};function e2$1(q){return(j,X)=>X!==void 0?((te,ne,re)=>{ne.constructor.createProperty(re,te)})(q,j,X):i(q,j)}function t$1(q){return e2$1(__spreadProps(__spreadValues({},q),{state:!0}))}var o=({finisher:q,descriptor:j})=>(X,te)=>{var ne;if(te===void 0){const re=(ne=X.originalKey)!==null&&ne!==void 0?ne:X.key,oe=j!=null?{kind:"method",placement:"prototype",key:re,descriptor:j(X.key)}:__spreadProps(__spreadValues({},X),{key:re});return q!=null&&(oe.finisher=function(le){q(le,re)}),oe}{const re=X.constructor;j!==void 0&&Object.defineProperty(X,te,j(te)),q==null||q(re,te)}};function i2$2(q,j){return o({descriptor:X=>{const te={get(){var ne,re;return(re=(ne=this.renderRoot)===null||ne===void 0?void 0:ne.querySelector(q))!==null&&re!==void 0?re:null},enumerable:!0,configurable:!0};if(j){const ne=typeof X=="symbol"?Symbol():"__"+X;te.get=function(){var re,oe;return this[ne]===void 0&&(this[ne]=(oe=(re=this.renderRoot)===null||re===void 0?void 0:re.querySelector(q))!==null&&oe!==void 0?oe:null),this[ne]}}return te}})}var n$1;((n$1=window.HTMLSlotElement)===null||n$1===void 0?void 0:n$1.prototype.assignedElements)!=null;var ShoelaceElement=class extends s4{emit(q,j){const X=new CustomEvent(q,__spreadValues({bubbles:!0,cancelable:!1,composed:!0,detail:{}},j));return this.dispatchEvent(X),X}};__decorateClass$1([e2$1()],ShoelaceElement.prototype,"dir",2);__decorateClass$1([e2$1()],ShoelaceElement.prototype,"lang",2);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var SlButton=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this,{form:q=>{if(q.hasAttribute("form")){const j=q.getRootNode(),X=q.getAttribute("form");return j.getElementById(X)}return q.closest("form")}}),this.hasSlotController=new HasSlotController(this,"[default]","prefix","suffix"),this.localize=new LocalizeController2(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href=""}firstUpdated(){this.isButton()&&(this.invalid=!this.button.checkValidity())}click(){this.button.click()}focus(q){this.button.focus(q)}blur(){this.button.blur()}checkValidity(){return this.isButton()?this.button.checkValidity():!0}reportValidity(){return this.isButton()?this.button.reportValidity():!0}setCustomValidity(q){this.isButton()&&(this.button.setCustomValidity(q),this.invalid=!this.button.checkValidity())}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(q){if(this.disabled||this.loading){q.preventDefault(),q.stopPropagation();return}this.type==="submit"&&this.formSubmitController.submit(this),this.type==="reset"&&this.formSubmitController.reset(this)}handleDisabledChange(){this.isButton()&&(this.button.disabled=this.disabled,this.invalid=!this.button.checkValidity())}isButton(){return!this.href}isLink(){return!!this.href}render(){const q=this.isLink(),j=q?i$2`a`:i$2`button`;return n$2`
      <${j}
        part="base"
        class=${o$1({button:!0,"button--default":this.variant==="default","button--primary":this.variant==="primary","button--success":this.variant==="success","button--neutral":this.variant==="neutral","button--warning":this.variant==="warning","button--danger":this.variant==="danger","button--text":this.variant==="text","button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":this.localize.dir()==="rtl","button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${l$1(q?void 0:this.disabled)}
        type=${l$1(q?void 0:this.type)}
        title=${this.title}
        name=${l$1(q?void 0:this.name)}
        value=${l$1(q?void 0:this.value)}
        href=${l$1(q?this.href:void 0)}
        target=${l$1(q?this.target:void 0)}
        download=${l$1(q?this.download:void 0)}
        rel=${l$1(q&&this.target?"noreferrer noopener":void 0)}
        role=${l$1(q?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <slot name="prefix" part="prefix" class="button__prefix"></slot>
        <slot part="label" class="button__label"></slot>
        <slot name="suffix" part="suffix" class="button__suffix"></slot>
        ${this.caret?n$2` <sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon> `:""}
        ${this.loading?n$2`<sl-spinner></sl-spinner>`:""}
      </${j}>
    `}};SlButton.styles=button_styles_default;__decorateClass$1([i2$2(".button")],SlButton.prototype,"button",2);__decorateClass$1([t$1()],SlButton.prototype,"hasFocus",2);__decorateClass$1([t$1()],SlButton.prototype,"invalid",2);__decorateClass$1([e2$1()],SlButton.prototype,"title",2);__decorateClass$1([e2$1({reflect:!0})],SlButton.prototype,"variant",2);__decorateClass$1([e2$1({reflect:!0})],SlButton.prototype,"size",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlButton.prototype,"caret",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlButton.prototype,"disabled",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlButton.prototype,"loading",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlButton.prototype,"outline",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlButton.prototype,"pill",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlButton.prototype,"circle",2);__decorateClass$1([e2$1()],SlButton.prototype,"type",2);__decorateClass$1([e2$1()],SlButton.prototype,"name",2);__decorateClass$1([e2$1()],SlButton.prototype,"value",2);__decorateClass$1([e2$1()],SlButton.prototype,"href",2);__decorateClass$1([e2$1()],SlButton.prototype,"target",2);__decorateClass$1([e2$1()],SlButton.prototype,"download",2);__decorateClass$1([e2$1()],SlButton.prototype,"form",2);__decorateClass$1([e2$1({attribute:"formaction"})],SlButton.prototype,"formAction",2);__decorateClass$1([e2$1({attribute:"formenctype"})],SlButton.prototype,"formEnctype",2);__decorateClass$1([e2$1({attribute:"formmethod"})],SlButton.prototype,"formMethod",2);__decorateClass$1([e2$1({attribute:"formnovalidate",type:Boolean})],SlButton.prototype,"formNoValidate",2);__decorateClass$1([e2$1({attribute:"formtarget"})],SlButton.prototype,"formTarget",2);__decorateClass$1([watch("disabled",{waitUntilFirstUpdate:!0})],SlButton.prototype,"handleDisabledChange",1);SlButton=__decorateClass$1([e("sl-button")],SlButton);var spinner_styles_default=i$3`
  ${component_styles_default}

  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
    mix-blend-mode: multiply;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      rotate: 0deg;
      stroke-dasharray: 0.01em, 2.75em;
    }

    50% {
      rotate: 450deg;
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      rotate: 1080deg;
      stroke-dasharray: 0.01em, 2.75em;
    }
  }
`,SlSpinner=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this)}render(){return y`
      <svg part="base" class="spinner" role="progressbar" aria-valuetext=${this.localize.term("loading")}>
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}};SlSpinner.styles=spinner_styles_default;SlSpinner=__decorateClass$1([e("sl-spinner")],SlSpinner);var basePath$1="";function setBasePath(q){basePath$1=q}function getBasePath(){if(!basePath$1){const q=[...document.getElementsByTagName("script")],j=q.find(X=>X.hasAttribute("data-shoelace"));if(j)setBasePath(j.getAttribute("data-shoelace"));else{const X=q.find(ne=>/shoelace(\.min)?\.js($|\?)/.test(ne.src));let te="";X&&(te=X.getAttribute("src")),setBasePath(te.split("/").slice(0,-1).join("/"))}}return basePath$1.replace(/\/$/,"")}var library={name:"default",resolver:q=>`${getBasePath()}/assets/icons/${q}.svg`},library_default_default=library,icons={caret:`
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  `,check:`
    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(3.428571, 3.428571)">
            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>
    </svg>
  `,indeterminate:`
    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(2.285714, 6.857143)">
            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,radio:`
    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor">
          <circle cx="8" cy="8" r="3.42857143"></circle>
        </g>
      </g>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,"x-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},systemLibrary={name:"system",resolver:q=>q in icons?`data:image/svg+xml,${encodeURIComponent(icons[q])}`:""},library_system_default=systemLibrary,registry=[library_default_default,library_system_default],watchedIcons=[];function watchIcon(q){watchedIcons.push(q)}function unwatchIcon(q){watchedIcons=watchedIcons.filter(j=>j!==q)}function getIconLibrary(q){return registry.find(j=>j.name===q)}var includeFiles=new Map;function requestInclude(q,j="cors"){if(includeFiles.has(q))return includeFiles.get(q);const X=fetch(q,{mode:j}).then(async te=>({ok:te.ok,status:te.status,html:await te.text()}));return includeFiles.set(q,X),X}var iconFiles=new Map;async function requestIcon(q){if(iconFiles.has(q))return iconFiles.get(q);const j=await requestInclude(q),X={ok:j.ok,status:j.status,svg:null};if(j.ok){const te=document.createElement("div");te.innerHTML=j.html;const ne=te.firstElementChild;X.svg=(ne==null?void 0:ne.tagName.toLowerCase())==="svg"?ne.outerHTML:""}return iconFiles.set(q,X),X}var icon_styles_default=i$3`
  ${component_styles_default}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    contain: strict;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`,e4=class extends i$1{constructor(q){if(super(q),this.it=b$1,q.type!==t$2.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(q){if(q===b$1||q==null)return this._t=void 0,this.it=q;if(q===x$1)return q;if(typeof q!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(q===this.it)return this._t;this.it=q;const j=[q];return j.raw=j,this._t={_$litType$:this.constructor.resultType,strings:j,values:[]}}};e4.directiveName="unsafeHTML",e4.resultType=1;var t3=class extends e4{};t3.directiveName="unsafeSVG",t3.resultType=2;var o2$1=e$1(t3),parser,SlIcon=class extends ShoelaceElement{constructor(){super(...arguments),this.svg="",this.label="",this.library="default"}connectedCallback(){super.connectedCallback(),watchIcon(this)}firstUpdated(){this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),unwatchIcon(this)}getUrl(){const q=getIconLibrary(this.library);return this.name&&q?q.resolver(this.name):this.src}redraw(){this.setIcon()}handleLabelChange(){typeof this.label=="string"&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var q;const j=getIconLibrary(this.library),X=this.getUrl();if(parser||(parser=new DOMParser),X)try{const te=await requestIcon(X);if(X!==this.getUrl())return;if(te.ok){const re=parser.parseFromString(te.svg,"text/html").body.querySelector("svg");re!==null?((q=j==null?void 0:j.mutator)==null||q.call(j,re),this.svg=re.outerHTML,this.emit("sl-load")):(this.svg="",this.emit("sl-error"))}else this.svg="",this.emit("sl-error")}catch{this.emit("sl-error")}else this.svg.length>0&&(this.svg="")}handleChange(){this.setIcon()}render(){return y` ${o2$1(this.svg)} `}};SlIcon.styles=icon_styles_default;__decorateClass$1([t$1()],SlIcon.prototype,"svg",2);__decorateClass$1([e2$1({reflect:!0})],SlIcon.prototype,"name",2);__decorateClass$1([e2$1()],SlIcon.prototype,"src",2);__decorateClass$1([e2$1()],SlIcon.prototype,"label",2);__decorateClass$1([e2$1({reflect:!0})],SlIcon.prototype,"library",2);__decorateClass$1([watch("label")],SlIcon.prototype,"handleLabelChange",1);__decorateClass$1([watch("name"),watch("src"),watch("library")],SlIcon.prototype,"setIcon",1);SlIcon=__decorateClass$1([e("sl-icon")],SlIcon);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var tooltip_styles_default=i$3`
  ${component_styles_default}

  :host {
    --max-width: 20rem;
    --hide-delay: 0ms;
    --show-delay: 150ms;

    display: contents;
  }

  .tooltip {
    --arrow-size: var(--sl-tooltip-arrow-size);
    --arrow-color: var(--sl-tooltip-background-color);
  }

  .tooltip::part(popup) {
    pointer-events: none;
    z-index: var(--sl-z-index-tooltip);
  }

  .tooltip[placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .tooltip[placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .tooltip[placement^='left']::part(popup) {
    transform-origin: right;
  }

  .tooltip[placement^='right']::part(popup) {
    transform-origin: left;
  }

  .tooltip__body {
    display: block;
    width: max-content;
    max-width: var(--max-width);
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    padding: var(--sl-tooltip-padding);
    pointer-events: none;
  }
`;function waitForEvent(q,j){return new Promise(X=>{function te(ne){ne.target===q&&(q.removeEventListener(j,te),X())}q.addEventListener(j,te)})}function animateTo(q,j,X){return new Promise(te=>{if((X==null?void 0:X.duration)===1/0)throw new Error("Promise-based animations must be finite.");const ne=q.animate(j,__spreadProps(__spreadValues({},X),{duration:prefersReducedMotion()?0:X.duration}));ne.addEventListener("cancel",te,{once:!0}),ne.addEventListener("finish",te,{once:!0})})}function parseDuration(q){return q=q.toString().toLowerCase(),q.indexOf("ms")>-1?parseFloat(q):q.indexOf("s")>-1?parseFloat(q)*1e3:parseFloat(q)}function prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function stopAnimations(q){return Promise.all(q.getAnimations().map(j=>new Promise(X=>{const te=requestAnimationFrame(X);j.addEventListener("cancel",()=>te,{once:!0}),j.addEventListener("finish",()=>te,{once:!0}),j.cancel()})))}var defaultAnimationRegistry=new Map,customAnimationRegistry=new WeakMap;function ensureAnimation(q){return q??{keyframes:[],options:{duration:0}}}function getLogicalAnimation(q,j){return j.toLowerCase()==="rtl"?{keyframes:q.rtlKeyframes||q.keyframes,options:q.options}:q}function setDefaultAnimation(q,j){defaultAnimationRegistry.set(q,ensureAnimation(j))}function getAnimation(q,j,X){const te=customAnimationRegistry.get(q);if(te!=null&&te[j])return getLogicalAnimation(te[j],X.dir);const ne=defaultAnimationRegistry.get(j);return ne?getLogicalAnimation(ne,X.dir):{keyframes:[],options:{duration:0}}}var SlTooltip=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.content="",this.placement="top",this.disabled=!1,this.distance=8,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleBlur=this.handleBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.updateComplete.then(()=>{this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut)})}firstUpdated(){this.body.hidden=!this.open,this.open&&(this.popup.active=!0,this.popup.reposition())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("blur",this.handleBlur,!0),this.removeEventListener("focus",this.handleFocus,!0),this.removeEventListener("click",this.handleClick),this.removeEventListener("keydown",this.handleKeyDown),this.removeEventListener("mouseover",this.handleMouseOver),this.removeEventListener("mouseout",this.handleMouseOut)}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}getTarget(){const q=[...this.children].find(j=>j.tagName.toLowerCase()!=="style"&&j.getAttribute("slot")!=="content");if(!q)throw new Error("Invalid tooltip target: no child element was found.");return q}handleBlur(){this.hasTrigger("focus")&&this.hide()}handleClick(){this.hasTrigger("click")&&(this.open?this.hide():this.show())}handleFocus(){this.hasTrigger("focus")&&this.show()}handleKeyDown(q){this.open&&q.key==="Escape"&&(q.stopPropagation(),this.hide())}handleMouseOver(){if(this.hasTrigger("hover")){const q=parseDuration(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.show(),q)}}handleMouseOut(){if(this.hasTrigger("hover")){const q=parseDuration(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.hide(),q)}}async handleOpenChange(){if(this.open){if(this.disabled)return;this.emit("sl-show"),await stopAnimations(this.body),this.body.hidden=!1,this.popup.active=!0;const{keyframes:q,options:j}=getAnimation(this,"tooltip.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,q,j),this.emit("sl-after-show")}else{this.emit("sl-hide"),await stopAnimations(this.body);const{keyframes:q,options:j}=getAnimation(this,"tooltip.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,q,j),this.popup.active=!1,this.body.hidden=!0,this.emit("sl-after-hide")}}async handleOptionsChange(){this.hasUpdated&&(await this.updateComplete,this.popup.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}hasTrigger(q){return this.trigger.split(" ").includes(q)}render(){return y`
      <sl-popup
        part="base"
        exportparts="
          popup:base__popup,
          arrow:base__arrow
        "
        class=${o$1({tooltip:!0,"tooltip--open":this.open})}
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        arrow
      >
        <slot slot="anchor" aria-describedby="tooltip"></slot>

        <slot
          name="content"
          part="body"
          id="tooltip"
          class="tooltip__body"
          role="tooltip"
          aria-live=${this.open?"polite":"off"}
        >
          ${this.content}
        </slot>
      </sl-popup>
    `}};SlTooltip.styles=tooltip_styles_default;__decorateClass$1([i2$2("slot:not([name])")],SlTooltip.prototype,"defaultSlot",2);__decorateClass$1([i2$2(".tooltip__body")],SlTooltip.prototype,"body",2);__decorateClass$1([i2$2("sl-popup")],SlTooltip.prototype,"popup",2);__decorateClass$1([e2$1()],SlTooltip.prototype,"content",2);__decorateClass$1([e2$1()],SlTooltip.prototype,"placement",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlTooltip.prototype,"disabled",2);__decorateClass$1([e2$1({type:Number})],SlTooltip.prototype,"distance",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlTooltip.prototype,"open",2);__decorateClass$1([e2$1({type:Number})],SlTooltip.prototype,"skidding",2);__decorateClass$1([e2$1()],SlTooltip.prototype,"trigger",2);__decorateClass$1([e2$1({type:Boolean})],SlTooltip.prototype,"hoist",2);__decorateClass$1([watch("open",{waitUntilFirstUpdate:!0})],SlTooltip.prototype,"handleOpenChange",1);__decorateClass$1([watch("content"),watch("distance"),watch("hoist"),watch("placement"),watch("skidding")],SlTooltip.prototype,"handleOptionsChange",1);__decorateClass$1([watch("disabled")],SlTooltip.prototype,"handleDisabledChange",1);SlTooltip=__decorateClass$1([e("sl-tooltip")],SlTooltip);setDefaultAnimation("tooltip.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}});setDefaultAnimation("tooltip.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}});var popup_styles_default=i$3`
  ${component_styles_default}

  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45º. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }
`;function t(q){return q.split("-")[0]}function e3(q){return q.split("-")[1]}function n(q){return["top","bottom"].includes(t(q))?"x":"y"}function r(q){return q==="y"?"height":"width"}function i2$1(q,j,X){let{reference:te,floating:ne}=q;const re=te.x+te.width/2-ne.width/2,oe=te.y+te.height/2-ne.height/2,le=n(j),fe=r(le),we=te[fe]/2-ne[fe]/2,ke=le==="x";let ye;switch(t(j)){case"top":ye={x:re,y:te.y-ne.height};break;case"bottom":ye={x:re,y:te.y+te.height};break;case"right":ye={x:te.x+te.width,y:oe};break;case"left":ye={x:te.x-ne.width,y:oe};break;default:ye={x:te.x,y:te.y}}switch(e3(j)){case"start":ye[le]-=we*(X&&ke?-1:1);break;case"end":ye[le]+=we*(X&&ke?-1:1)}return ye}var o2=async(q,j,X)=>{const{placement:te="bottom",strategy:ne="absolute",middleware:re=[],platform:oe}=X,le=re.filter(Boolean),fe=await(oe.isRTL==null?void 0:oe.isRTL(j));let we=await oe.getElementRects({reference:q,floating:j,strategy:ne}),{x:ke,y:ye}=i2$1(we,te,fe),ve=te,be={},Ce=0;for(let Ee=0;Ee<le.length;Ee++){const{name:Oe,fn:Ae}=le[Ee],{x:Te,y:Se,data:$e,reset:Le}=await Ae({x:ke,y:ye,initialPlacement:te,placement:ve,strategy:ne,middlewareData:be,rects:we,platform:oe,elements:{reference:q,floating:j}});ke=Te??ke,ye=Se??ye,be=__spreadProps(__spreadValues({},be),{[Oe]:__spreadValues(__spreadValues({},be[Oe]),$e)}),Le&&Ce<=50&&(Ce++,typeof Le=="object"&&(Le.placement&&(ve=Le.placement),Le.rects&&(we=Le.rects===!0?await oe.getElementRects({reference:q,floating:j,strategy:ne}):Le.rects),{x:ke,y:ye}=i2$1(we,ve,fe)),Ee=-1)}return{x:ke,y:ye,placement:ve,strategy:ne,middlewareData:be}};function a(q){return typeof q!="number"?function(j){return __spreadValues({top:0,right:0,bottom:0,left:0},j)}(q):{top:q,right:q,bottom:q,left:q}}function l(q){return __spreadProps(__spreadValues({},q),{top:q.y,left:q.x,right:q.x+q.width,bottom:q.y+q.height})}async function s$1(q,j){var X;j===void 0&&(j={});const{x:te,y:ne,platform:re,rects:oe,elements:le,strategy:fe}=q,{boundary:we="clippingAncestors",rootBoundary:ke="viewport",elementContext:ye="floating",altBoundary:ve=!1,padding:be=0}=j,Ce=a(be),Ee=le[ve?ye==="floating"?"reference":"floating":ye],Oe=l(await re.getClippingRect({element:(X=await(re.isElement==null?void 0:re.isElement(Ee)))==null||X?Ee:Ee.contextElement||await(re.getDocumentElement==null?void 0:re.getDocumentElement(le.floating)),boundary:we,rootBoundary:ke,strategy:fe})),Ae=l(re.convertOffsetParentRelativeRectToViewportRelativeRect?await re.convertOffsetParentRelativeRectToViewportRelativeRect({rect:ye==="floating"?__spreadProps(__spreadValues({},oe.floating),{x:te,y:ne}):oe.reference,offsetParent:await(re.getOffsetParent==null?void 0:re.getOffsetParent(le.floating)),strategy:fe}):oe[ye]);return{top:Oe.top-Ae.top+Ce.top,bottom:Ae.bottom-Oe.bottom+Ce.bottom,left:Oe.left-Ae.left+Ce.left,right:Ae.right-Oe.right+Ce.right}}var c=Math.min,f$1=Math.max;function u(q,j,X){return f$1(q,c(j,X))}var m=q=>({name:"arrow",options:q,async fn(j){const{element:X,padding:te=0}=q??{},{x:ne,y:re,placement:oe,rects:le,platform:fe}=j;if(X==null)return{};const we=a(te),ke={x:ne,y:re},ye=n(oe),ve=e3(oe),be=r(ye),Ce=await fe.getDimensions(X),Ee=ye==="y"?"top":"left",Oe=ye==="y"?"bottom":"right",Ae=le.reference[be]+le.reference[ye]-ke[ye]-le.floating[be],Te=ke[ye]-le.reference[ye],Se=await(fe.getOffsetParent==null?void 0:fe.getOffsetParent(X));let $e=Se?ye==="y"?Se.clientHeight||0:Se.clientWidth||0:0;$e===0&&($e=le.floating[be]);const Le=Ae/2-Te/2,Pe=we[Ee],Re=$e-Ce[be]-we[Oe],Ne=$e/2-Ce[be]/2+Le,je=u(Pe,Ne,Re),Ie=(ve==="start"?we[Ee]:we[Oe])>0&&Ne!==je&&le.reference[be]<=le.floating[be];return{[ye]:ke[ye]-(Ie?Ne<Pe?Pe-Ne:Re-Ne:0),data:{[ye]:je,centerOffset:Ne-je}}}}),g={left:"right",right:"left",bottom:"top",top:"bottom"};function d(q){return q.replace(/left|right|bottom|top/g,j=>g[j])}function p(q,j,X){X===void 0&&(X=!1);const te=e3(q),ne=n(q),re=r(ne);let oe=ne==="x"?te===(X?"end":"start")?"right":"left":te==="start"?"bottom":"top";return j.reference[re]>j.floating[re]&&(oe=d(oe)),{main:oe,cross:d(oe)}}var h={start:"end",end:"start"};function y2(q){return q.replace(/start|end/g,j=>h[j])}var x=["top","right","bottom","left"];x.reduce((q,j)=>q.concat(j,j+"-start",j+"-end"),[]);var b=function(q){return q===void 0&&(q={}),{name:"flip",options:q,async fn(j){var X;const{placement:te,middlewareData:ne,rects:re,initialPlacement:oe,platform:le,elements:fe}=j,we=q,{mainAxis:ke=!0,crossAxis:ye=!0,fallbackPlacements:ve,fallbackStrategy:be="bestFit",flipAlignment:Ce=!0}=we,Ee=__objRest(we,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),Oe=t(te),Ae=ve||(Oe===oe||!Ce?[d(oe)]:function(je){const Ie=d(je);return[y2(je),Ie,y2(Ie)]}(oe)),Te=[oe,...Ae],Se=await s$1(j,Ee),$e=[];let Le=((X=ne.flip)==null?void 0:X.overflows)||[];if(ke&&$e.push(Se[Oe]),ye){const{main:je,cross:Ie}=p(te,re,await(le.isRTL==null?void 0:le.isRTL(fe.floating)));$e.push(Se[je],Se[Ie])}if(Le=[...Le,{placement:te,overflows:$e}],!$e.every(je=>je<=0)){var Pe,Re;const je=((Pe=(Re=ne.flip)==null?void 0:Re.index)!=null?Pe:0)+1,Ie=Te[je];if(Ie)return{data:{index:je,overflows:Le},reset:{placement:Ie}};let De="bottom";switch(be){case"bestFit":{var Ne;const Ve=(Ne=Le.map(ze=>[ze,ze.overflows.filter(qe=>qe>0).reduce((qe,Xe)=>qe+Xe,0)]).sort((ze,qe)=>ze[1]-qe[1])[0])==null?void 0:Ne[0].placement;Ve&&(De=Ve);break}case"initialPlacement":De=oe}if(te!==De)return{reset:{placement:De}}}return{}}}},T=function(q){return q===void 0&&(q=0),{name:"offset",options:q,async fn(j){const{x:X,y:te}=j,ne=await async function(re,oe){const{placement:le,platform:fe,elements:we}=re,ke=await(fe.isRTL==null?void 0:fe.isRTL(we.floating)),ye=t(le),ve=e3(le),be=n(le)==="x",Ce=["left","top"].includes(ye)?-1:1,Ee=ke&&be?-1:1,Oe=typeof oe=="function"?oe(re):oe;let{mainAxis:Ae,crossAxis:Te,alignmentAxis:Se}=typeof Oe=="number"?{mainAxis:Oe,crossAxis:0,alignmentAxis:null}:__spreadValues({mainAxis:0,crossAxis:0,alignmentAxis:null},Oe);return ve&&typeof Se=="number"&&(Te=ve==="end"?-1*Se:Se),be?{x:Te*Ee,y:Ae*Ce}:{x:Ae*Ce,y:Te*Ee}}(j,q);return{x:X+ne.x,y:te+ne.y,data:ne}}}};function O(q){return q==="x"?"y":"x"}var L=function(q){return q===void 0&&(q={}),{name:"shift",options:q,async fn(j){const{x:X,y:te,placement:ne}=j,re=q,{mainAxis:oe=!0,crossAxis:le=!1,limiter:fe={fn:Ae=>{let{x:Te,y:Se}=Ae;return{x:Te,y:Se}}}}=re,we=__objRest(re,["mainAxis","crossAxis","limiter"]),ke={x:X,y:te},ye=await s$1(j,we),ve=n(t(ne)),be=O(ve);let Ce=ke[ve],Ee=ke[be];if(oe){const Ae=ve==="y"?"bottom":"right";Ce=u(Ce+ye[ve==="y"?"top":"left"],Ce,Ce-ye[Ae])}if(le){const Ae=be==="y"?"bottom":"right";Ee=u(Ee+ye[be==="y"?"top":"left"],Ee,Ee-ye[Ae])}const Oe=fe.fn(__spreadProps(__spreadValues({},j),{[ve]:Ce,[be]:Ee}));return __spreadProps(__spreadValues({},Oe),{data:{x:Oe.x-X,y:Oe.y-te}})}}},k=function(q){return q===void 0&&(q={}),{name:"size",options:q,async fn(j){const{placement:X,rects:te,platform:ne,elements:re}=j,oe=q,{apply:le=()=>{}}=oe,fe=__objRest(oe,["apply"]),we=await s$1(j,fe),ke=t(X),ye=e3(X);let ve,be;ke==="top"||ke==="bottom"?(ve=ke,be=ye===(await(ne.isRTL==null?void 0:ne.isRTL(re.floating))?"start":"end")?"left":"right"):(be=ke,ve=ye==="end"?"top":"bottom");const Ce=f$1(we.left,0),Ee=f$1(we.right,0),Oe=f$1(we.top,0),Ae=f$1(we.bottom,0),Te={availableHeight:te.floating.height-(["left","right"].includes(X)?2*(Oe!==0||Ae!==0?Oe+Ae:f$1(we.top,we.bottom)):we[ve]),availableWidth:te.floating.width-(["top","bottom"].includes(X)?2*(Ce!==0||Ee!==0?Ce+Ee:f$1(we.left,we.right)):we[be])};await le(__spreadValues(__spreadValues({},j),Te));const Se=await ne.getDimensions(re.floating);return te.floating.width!==Se.width||te.floating.height!==Se.height?{reset:{rects:!0}}:{}}}};function n2(q){return q&&q.document&&q.location&&q.alert&&q.setInterval}function o3(q){if(q==null)return window;if(!n2(q)){const j=q.ownerDocument;return j&&j.defaultView||window}return q}function i3(q){return o3(q).getComputedStyle(q)}function r2(q){return n2(q)?"":q?(q.nodeName||"").toLowerCase():""}function l2$1(){const q=navigator.userAgentData;return q&&Array.isArray(q.brands)?q.brands.map(j=>j.brand+"/"+j.version).join(" "):navigator.userAgent}function c2(q){return q instanceof o3(q).HTMLElement}function s2(q){return q instanceof o3(q).Element}function f2(q){return typeof ShadowRoot>"u"?!1:q instanceof o3(q).ShadowRoot||q instanceof ShadowRoot}function u2(q){const{overflow:j,overflowX:X,overflowY:te,display:ne}=i3(q);return/auto|scroll|overlay|hidden/.test(j+te+X)&&!["inline","contents"].includes(ne)}function a2(q){return["table","td","th"].includes(r2(q))}function d2(q){const j=/firefox/i.test(l2$1()),X=i3(q),te=X.backdropFilter||X.WebkitBackdropFilter;return X.transform!=="none"||X.perspective!=="none"||!!te&&te!=="none"||j&&X.willChange==="filter"||j&&!!X.filter&&X.filter!=="none"||["transform","perspective"].some(ne=>X.willChange.includes(ne))||["paint","layout","strict","content"].some(ne=>{const re=X.contain;return re!=null&&re.includes(ne)})}function h2(){return!/^((?!chrome|android).)*safari/i.test(l2$1())}function g2(q){return["html","body","#document"].includes(r2(q))}var m2=Math.min,p2=Math.max,w2=Math.round;function v2(q,j,X){var te,ne,re,oe;j===void 0&&(j=!1),X===void 0&&(X=!1);const le=q.getBoundingClientRect();let fe=1,we=1;j&&c2(q)&&(fe=q.offsetWidth>0&&w2(le.width)/q.offsetWidth||1,we=q.offsetHeight>0&&w2(le.height)/q.offsetHeight||1);const ke=s2(q)?o3(q):window,ye=!h2()&&X,ve=(le.left+(ye&&(te=(ne=ke.visualViewport)==null?void 0:ne.offsetLeft)!=null?te:0))/fe,be=(le.top+(ye&&(re=(oe=ke.visualViewport)==null?void 0:oe.offsetTop)!=null?re:0))/we,Ce=le.width/fe,Ee=le.height/we;return{width:Ce,height:Ee,top:be,right:ve+Ce,bottom:be+Ee,left:ve,x:ve,y:be}}function y3(q){return(j=q,(j instanceof o3(j).Node?q.ownerDocument:q.document)||window.document).documentElement;var j}function x2(q){return s2(q)?{scrollLeft:q.scrollLeft,scrollTop:q.scrollTop}:{scrollLeft:q.pageXOffset,scrollTop:q.pageYOffset}}function b2(q){return v2(y3(q)).left+x2(q).scrollLeft}function L2(q,j,X){const te=c2(j),ne=y3(j),re=v2(q,te&&function(fe){const we=v2(fe);return w2(we.width)!==fe.offsetWidth||w2(we.height)!==fe.offsetHeight}(j),X==="fixed");let oe={scrollLeft:0,scrollTop:0};const le={x:0,y:0};if(te||!te&&X!=="fixed")if((r2(j)!=="body"||u2(ne))&&(oe=x2(j)),c2(j)){const fe=v2(j,!0);le.x=fe.x+j.clientLeft,le.y=fe.y+j.clientTop}else ne&&(le.x=b2(ne));return{x:re.left+oe.scrollLeft-le.x,y:re.top+oe.scrollTop-le.y,width:re.width,height:re.height}}function E2(q){if(r2(q)==="html")return q;const j=q.assignedSlot||q.parentNode||(f2(q)?q.host:null)||y3(q);return f2(j)?j.host:j}function R(q){return c2(q)&&i3(q).position!=="fixed"?q.offsetParent:null}function T2(q){const j=o3(q);let X=R(q);for(;X&&a2(X)&&i3(X).position==="static";)X=R(X);return X&&(r2(X)==="html"||r2(X)==="body"&&i3(X).position==="static"&&!d2(X))?j:X||function(te){let ne=E2(te);for(;c2(ne)&&!g2(ne);){if(d2(ne))return ne;ne=E2(ne)}return null}(q)||j}function W(q){const j=E2(q);return g2(j)?q.ownerDocument.body:c2(j)&&u2(j)?j:W(j)}function H(q,j){var X;j===void 0&&(j=[]);const te=W(q),ne=te===((X=q.ownerDocument)==null?void 0:X.body),re=o3(te),oe=ne?[re].concat(re.visualViewport||[],u2(te)?te:[]):te,le=j.concat(oe);return ne?le:le.concat(H(oe))}function D2(q,j,X){return j==="viewport"?l(function(te,ne){const re=o3(te),oe=y3(te),le=re.visualViewport;let fe=oe.clientWidth,we=oe.clientHeight,ke=0,ye=0;if(le){fe=le.width,we=le.height;const ve=h2();(ve||!ve&&ne==="fixed")&&(ke=le.offsetLeft,ye=le.offsetTop)}return{width:fe,height:we,x:ke,y:ye}}(q,X)):s2(j)?function(te,ne){const re=v2(te,!1,ne==="fixed"),oe=re.top+te.clientTop,le=re.left+te.clientLeft;return{top:oe,left:le,x:le,y:oe,right:le+te.clientWidth,bottom:oe+te.clientHeight,width:te.clientWidth,height:te.clientHeight}}(j,X):l(function(te){var ne;const re=y3(te),oe=x2(te),le=(ne=te.ownerDocument)==null?void 0:ne.body,fe=p2(re.scrollWidth,re.clientWidth,le?le.scrollWidth:0,le?le.clientWidth:0),we=p2(re.scrollHeight,re.clientHeight,le?le.scrollHeight:0,le?le.clientHeight:0);let ke=-oe.scrollLeft+b2(te);const ye=-oe.scrollTop;return i3(le||re).direction==="rtl"&&(ke+=p2(re.clientWidth,le?le.clientWidth:0)-fe),{width:fe,height:we,x:ke,y:ye}}(y3(q)))}var A={getClippingRect:function(q){let{element:j,boundary:X,rootBoundary:te,strategy:ne}=q;const re=X==="clippingAncestors"?function(we){let ke=H(we).filter(Ce=>s2(Ce)&&r2(Ce)!=="body"),ye=null;const ve=i3(we).position==="fixed";let be=ve?E2(we):we;for(;s2(be)&&!g2(be);){const Ce=i3(be),Ee=d2(be);(ve?Ee||ye:Ee||Ce.position!=="static"||!ye||!["absolute","fixed"].includes(ye.position))?ye=Ce:ke=ke.filter(Oe=>Oe!==be),be=E2(be)}return ke}(j):[].concat(X),oe=[...re,te],le=oe[0],fe=oe.reduce((we,ke)=>{const ye=D2(j,ke,ne);return we.top=p2(ye.top,we.top),we.right=m2(ye.right,we.right),we.bottom=m2(ye.bottom,we.bottom),we.left=p2(ye.left,we.left),we},D2(j,le,ne));return{width:fe.right-fe.left,height:fe.bottom-fe.top,x:fe.left,y:fe.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(q){let{rect:j,offsetParent:X,strategy:te}=q;const ne=c2(X),re=y3(X);if(X===re)return j;let oe={scrollLeft:0,scrollTop:0};const le={x:0,y:0};if((ne||!ne&&te!=="fixed")&&((r2(X)!=="body"||u2(re))&&(oe=x2(X)),c2(X))){const fe=v2(X,!0);le.x=fe.x+X.clientLeft,le.y=fe.y+X.clientTop}return __spreadProps(__spreadValues({},j),{x:j.x-oe.scrollLeft+le.x,y:j.y-oe.scrollTop+le.y})},isElement:s2,getDimensions:function(q){if(c2(q))return{width:q.offsetWidth,height:q.offsetHeight};const j=v2(q);return{width:j.width,height:j.height}},getOffsetParent:T2,getDocumentElement:y3,async getElementRects(q){let{reference:j,floating:X,strategy:te}=q;const ne=this.getOffsetParent||T2,re=this.getDimensions;return{reference:L2(j,await ne(X),te),floating:__spreadValues({x:0,y:0},await re(X))}},getClientRects:q=>Array.from(q.getClientRects()),isRTL:q=>i3(q).direction==="rtl"};function C(q,j,X,te){te===void 0&&(te={});const{ancestorScroll:ne=!0,ancestorResize:re=!0,elementResize:oe=!0,animationFrame:le=!1}=te,fe=ne&&!le,we=fe||re?[...s2(q)?H(q):q.contextElement?H(q.contextElement):[],...H(j)]:[];we.forEach(be=>{fe&&be.addEventListener("scroll",X,{passive:!0}),re&&be.addEventListener("resize",X)});let ke,ye=null;if(oe){let be=!0;ye=new ResizeObserver(()=>{be||X(),be=!1}),s2(q)&&!le&&ye.observe(q),s2(q)||!q.contextElement||le||ye.observe(q.contextElement),ye.observe(j)}let ve=le?v2(q):null;return le&&function be(){const Ce=v2(q);!ve||Ce.x===ve.x&&Ce.y===ve.y&&Ce.width===ve.width&&Ce.height===ve.height||X(),ve=Ce,ke=requestAnimationFrame(be)}(),X(),()=>{var be;we.forEach(Ce=>{fe&&Ce.removeEventListener("scroll",X),re&&Ce.removeEventListener("resize",X)}),(be=ye)==null||be.disconnect(),ye=null,le&&cancelAnimationFrame(ke)}}var O2=(q,j,X)=>o2(q,j,__spreadValues({platform:A},X)),SlPopup=class extends ShoelaceElement{constructor(){super(...arguments),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){this.stop()}async handleAnchorChange(){if(await this.stop(),this.anchor&&typeof this.anchor=="string"){const q=this.getRootNode();this.anchorEl=q.getElementById(this.anchor)}else this.anchor instanceof HTMLElement?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');if(this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),!this.anchorEl)throw new Error("Invalid anchor element: no anchor could be found using the anchor slot or the anchor attribute.");this.start()}start(){this.anchorEl&&(this.cleanup=C(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(q=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>q())):q()})}async updated(q){super.updated(q),q.has("active")&&(this.active?this.start():this.stop()),q.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}reposition(){if(!this.active||!this.anchorEl)return;const q=[T({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?q.push(k({apply:({rects:j})=>{const X=this.sync==="width"||this.sync==="both",te=this.sync==="height"||this.sync==="both";this.popup.style.width=X?`${j.reference.width}px`:"",this.popup.style.height=te?`${j.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&q.push(b({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:this.flipFallbackStrategy==="best-fit"?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&q.push(L({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?q.push(k({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:j,availableHeight:X})=>{this.autoSize==="vertical"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-height",`${X}px`):this.style.removeProperty("--auto-size-available-height"),this.autoSize==="horizontal"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-width",`${j}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&q.push(m({element:this.arrowEl,padding:this.arrowPadding})),O2(this.anchorEl,this.popup,{placement:this.placement,middleware:q,strategy:this.strategy}).then(({x:j,y:X,middlewareData:te,placement:ne})=>{const re=getComputedStyle(this).direction==="rtl",oe={top:"bottom",right:"left",bottom:"top",left:"right"}[ne.split("-")[0]];if(this.setAttribute("data-current-placement",ne),Object.assign(this.popup.style,{left:`${j}px`,top:`${X}px`}),this.arrow){const le=te.arrow.x,fe=te.arrow.y;let we="",ke="",ye="",ve="";if(this.arrowPlacement==="start"){const be=typeof le=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";we=typeof fe=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",ke=re?be:"",ve=re?"":be}else if(this.arrowPlacement==="end"){const be=typeof le=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";ke=re?"":be,ve=re?be:"",ye=typeof fe=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else this.arrowPlacement==="center"?(ve=typeof le=="number"?"calc(50% - var(--arrow-size-diagonal))":"",we=typeof fe=="number"?"calc(50% - var(--arrow-size-diagonal))":""):(ve=typeof le=="number"?`${le}px`:"",we=typeof fe=="number"?`${fe}px`:"");Object.assign(this.arrowEl.style,{top:we,right:ke,bottom:ye,left:ve,[oe]:"calc(var(--arrow-size-diagonal) * -1)"})}}),this.emit("sl-reposition")}render(){return y`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <div
        part="popup"
        class=${o$1({popup:!0,"popup--active":this.active,"popup--fixed":this.strategy==="fixed","popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?y`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}};SlPopup.styles=popup_styles_default;__decorateClass$1([i2$2(".popup")],SlPopup.prototype,"popup",2);__decorateClass$1([i2$2(".popup__arrow")],SlPopup.prototype,"arrowEl",2);__decorateClass$1([e2$1()],SlPopup.prototype,"anchor",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlPopup.prototype,"active",2);__decorateClass$1([e2$1({reflect:!0})],SlPopup.prototype,"placement",2);__decorateClass$1([e2$1({reflect:!0})],SlPopup.prototype,"strategy",2);__decorateClass$1([e2$1({type:Number})],SlPopup.prototype,"distance",2);__decorateClass$1([e2$1({type:Number})],SlPopup.prototype,"skidding",2);__decorateClass$1([e2$1({type:Boolean})],SlPopup.prototype,"arrow",2);__decorateClass$1([e2$1({attribute:"arrow-placement"})],SlPopup.prototype,"arrowPlacement",2);__decorateClass$1([e2$1({attribute:"arrow-padding",type:Number})],SlPopup.prototype,"arrowPadding",2);__decorateClass$1([e2$1({type:Boolean})],SlPopup.prototype,"flip",2);__decorateClass$1([e2$1({attribute:"flip-fallback-placements",converter:{fromAttribute:q=>q.split(" ").map(j=>j.trim()).filter(j=>j!==""),toAttribute:q=>q.join(" ")}})],SlPopup.prototype,"flipFallbackPlacements",2);__decorateClass$1([e2$1({attribute:"flip-fallback-strategy"})],SlPopup.prototype,"flipFallbackStrategy",2);__decorateClass$1([e2$1({type:Object})],SlPopup.prototype,"flipBoundary",2);__decorateClass$1([e2$1({attribute:"flip-padding",type:Number})],SlPopup.prototype,"flipPadding",2);__decorateClass$1([e2$1({type:Boolean})],SlPopup.prototype,"shift",2);__decorateClass$1([e2$1({type:Object})],SlPopup.prototype,"shiftBoundary",2);__decorateClass$1([e2$1({attribute:"shift-padding",type:Number})],SlPopup.prototype,"shiftPadding",2);__decorateClass$1([e2$1({attribute:"auto-size"})],SlPopup.prototype,"autoSize",2);__decorateClass$1([e2$1()],SlPopup.prototype,"sync",2);__decorateClass$1([e2$1({type:Object})],SlPopup.prototype,"autoSizeBoundary",2);__decorateClass$1([e2$1({attribute:"auto-size-padding",type:Number})],SlPopup.prototype,"autoSizePadding",2);SlPopup=__decorateClass$1([e("sl-popup")],SlPopup);var button_group_styles_default=i$3`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .button-group {
    display: flex;
    flex-wrap: nowrap;
  }
`,SlButtonGroup=class extends ShoelaceElement{constructor(){super(...arguments),this.disableRole=!1,this.label=""}handleFocus(q){const j=findButton(q.target);j==null||j.classList.add("sl-button-group__button--focus")}handleBlur(q){const j=findButton(q.target);j==null||j.classList.remove("sl-button-group__button--focus")}handleMouseOver(q){const j=findButton(q.target);j==null||j.classList.add("sl-button-group__button--hover")}handleMouseOut(q){const j=findButton(q.target);j==null||j.classList.remove("sl-button-group__button--hover")}handleSlotChange(){const q=[...this.defaultSlot.assignedElements({flatten:!0})];q.forEach(j=>{const X=q.indexOf(j),te=findButton(j);te!==null&&(te.classList.add("sl-button-group__button"),te.classList.toggle("sl-button-group__button--first",X===0),te.classList.toggle("sl-button-group__button--inner",X>0&&X<q.length-1),te.classList.toggle("sl-button-group__button--last",X===q.length-1),te.classList.toggle("sl-button-group__button--radio",te.tagName.toLowerCase()==="sl-radio-button"))})}render(){return y`
      <slot
        part="base"
        class="button-group"
        role="${this.disableRole?"presentation":"group"}"
        aria-label=${this.label}
        @focusout=${this.handleBlur}
        @focusin=${this.handleFocus}
        @mouseover=${this.handleMouseOver}
        @mouseout=${this.handleMouseOut}
        @slotchange=${this.handleSlotChange}
      ></slot>
    `}};SlButtonGroup.styles=button_group_styles_default;__decorateClass$1([i2$2("slot")],SlButtonGroup.prototype,"defaultSlot",2);__decorateClass$1([t$1()],SlButtonGroup.prototype,"disableRole",2);__decorateClass$1([e2$1()],SlButtonGroup.prototype,"label",2);SlButtonGroup=__decorateClass$1([e("sl-button-group")],SlButtonGroup);function findButton(q){var j;const X="sl-button, sl-radio-button";return(j=q.closest(X))!=null?j:q.querySelector(X)}var dropdown_styles_default=i$3`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    color: var(--color);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`;function isTabbable(q){const j=q.tagName.toLowerCase();return q.getAttribute("tabindex")==="-1"||q.hasAttribute("disabled")||q.hasAttribute("aria-disabled")&&q.getAttribute("aria-disabled")!=="false"||j==="input"&&q.getAttribute("type")==="radio"&&!q.hasAttribute("checked")||q.offsetParent===null||window.getComputedStyle(q).visibility==="hidden"?!1:(j==="audio"||j==="video")&&q.hasAttribute("controls")||q.hasAttribute("tabindex")||q.hasAttribute("contenteditable")&&q.getAttribute("contenteditable")!=="false"?!0:["button","input","select","textarea","a","audio","video","summary"].includes(j)}function getTabbableBoundary(q){var j,X;const te=[];function ne(le){le instanceof HTMLElement&&(te.push(le),le.shadowRoot!==null&&le.shadowRoot.mode==="open"&&ne(le.shadowRoot)),[...le.children].forEach(fe=>ne(fe))}ne(q);const re=(j=te.find(le=>isTabbable(le)))!=null?j:null,oe=(X=te.reverse().find(le=>isTabbable(le)))!=null?X:null;return{start:re,end:oe}}function getOffset(q,j){return{top:Math.round(q.getBoundingClientRect().top-j.getBoundingClientRect().top),left:Math.round(q.getBoundingClientRect().left-j.getBoundingClientRect().left)}}function scrollIntoView(q,j,X="vertical",te="smooth"){const ne=getOffset(q,j),re=ne.top+j.scrollTop,oe=ne.left+j.scrollLeft,le=j.scrollLeft,fe=j.scrollLeft+j.offsetWidth,we=j.scrollTop,ke=j.scrollTop+j.offsetHeight;(X==="horizontal"||X==="both")&&(oe<le?j.scrollTo({left:oe,behavior:te}):oe+q.clientWidth>fe&&j.scrollTo({left:oe-j.offsetWidth+q.clientWidth,behavior:te})),(X==="vertical"||X==="both")&&(re<we?j.scrollTo({top:re,behavior:te}):re+q.clientHeight>ke&&j.scrollTo({top:re-j.offsetHeight+q.clientHeight,behavior:te}))}var SlDropdown=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleMenuItemActivate=this.handleMenuItemActivate.bind(this),this.handlePanelSelect=this.handlePanelSelect.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.handleDocumentMouseDown=this.handleDocumentMouseDown.bind(this),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){const q=this.trigger.assignedElements({flatten:!0})[0];typeof(q==null?void 0:q.focus)=="function"&&q.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(q=>q.tagName.toLowerCase()==="sl-menu")}handleKeyDown(q){this.open&&q.key==="Escape"&&(q.stopPropagation(),this.hide(),this.focusOnTrigger())}handleDocumentKeyDown(q){var j;if(q.key==="Tab"){if(this.open&&((j=document.activeElement)==null?void 0:j.tagName.toLowerCase())==="sl-menu-item"){q.preventDefault(),this.hide(),this.focusOnTrigger();return}setTimeout(()=>{var X,te,ne;const re=((X=this.containingElement)==null?void 0:X.getRootNode())instanceof ShadowRoot?(ne=(te=document.activeElement)==null?void 0:te.shadowRoot)==null?void 0:ne.activeElement:document.activeElement;(!this.containingElement||(re==null?void 0:re.closest(this.containingElement.tagName.toLowerCase()))!==this.containingElement)&&this.hide()})}}handleDocumentMouseDown(q){const j=q.composedPath();this.containingElement&&!j.includes(this.containingElement)&&this.hide()}handleMenuItemActivate(q){const j=q.target;scrollIntoView(j,this.panel)}handlePanelSelect(q){const j=q.target;!this.stayOpenOnSelect&&j.tagName.toLowerCase()==="sl-menu"&&(this.hide(),this.focusOnTrigger())}handleTriggerClick(){this.open?this.hide():this.show()}handleTriggerKeyDown(q){if(q.key==="Escape"&&this.open){q.stopPropagation(),this.focusOnTrigger(),this.hide();return}if([" ","Enter"].includes(q.key)){q.preventDefault(),this.handleTriggerClick();return}const j=this.getMenu();if(j){const X=j.defaultSlot.assignedElements({flatten:!0}),te=X[0],ne=X[X.length-1];["ArrowDown","ArrowUp","Home","End"].includes(q.key)&&(q.preventDefault(),this.open||this.show(),X.length>0&&requestAnimationFrame(()=>{(q.key==="ArrowDown"||q.key==="Home")&&(j.setCurrentItem(te),te.focus()),(q.key==="ArrowUp"||q.key==="End")&&(j.setCurrentItem(ne),ne.focus())}));const re=["Tab","Shift","Meta","Ctrl","Alt"];this.open&&!re.includes(q.key)&&j.typeToSelect(q)}}handleTriggerKeyUp(q){q.key===" "&&q.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){const j=this.trigger.assignedElements({flatten:!0}).find(te=>getTabbableBoundary(te).start);let X;if(j){switch(j.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":X=j.button;break;default:X=j}X.setAttribute("aria-haspopup","true"),X.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){this.panel.addEventListener("sl-activate",this.handleMenuItemActivate),this.panel.addEventListener("sl-select",this.handlePanelSelect),this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){this.panel&&(this.panel.removeEventListener("sl-activate",this.handleMenuItemActivate),this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown)}async handleOpenChange(){if(this.disabled){this.open=!1;return}if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await stopAnimations(this),this.panel.hidden=!1,this.popup.active=!0;const{keyframes:q,options:j}=getAnimation(this,"dropdown.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,q,j),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await stopAnimations(this);const{keyframes:q,options:j}=getAnimation(this,"dropdown.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,q,j),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return y`
      <sl-popup
        part="base"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        class=${o$1({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <slot
          part="panel"
          class="dropdown__panel"
          aria-hidden=${this.open?"false":"true"}
          aria-labelledby="dropdown"
        ></slot>
      </sl-popup>
    `}};SlDropdown.styles=dropdown_styles_default;__decorateClass$1([i2$2(".dropdown")],SlDropdown.prototype,"popup",2);__decorateClass$1([i2$2(".dropdown__trigger")],SlDropdown.prototype,"trigger",2);__decorateClass$1([i2$2(".dropdown__panel")],SlDropdown.prototype,"panel",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlDropdown.prototype,"open",2);__decorateClass$1([e2$1({reflect:!0})],SlDropdown.prototype,"placement",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlDropdown.prototype,"disabled",2);__decorateClass$1([e2$1({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],SlDropdown.prototype,"stayOpenOnSelect",2);__decorateClass$1([e2$1({attribute:!1})],SlDropdown.prototype,"containingElement",2);__decorateClass$1([e2$1({type:Number})],SlDropdown.prototype,"distance",2);__decorateClass$1([e2$1({type:Number})],SlDropdown.prototype,"skidding",2);__decorateClass$1([e2$1({type:Boolean})],SlDropdown.prototype,"hoist",2);__decorateClass$1([watch("open",{waitUntilFirstUpdate:!0})],SlDropdown.prototype,"handleOpenChange",1);SlDropdown=__decorateClass$1([e("sl-dropdown")],SlDropdown);setDefaultAnimation("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});setDefaultAnimation("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});var divider_styles_default=i$3`
  ${component_styles_default}

  :host {
    --color: var(--sl-panel-border-color);
    --width: var(--sl-panel-border-width);
    --spacing: var(--sl-spacing-medium);
  }

  :host(:not([vertical])) {
    display: block;
    border-top: solid var(--width) var(--color);
    margin: var(--spacing) 0;
  }

  :host([vertical]) {
    display: inline-block;
    height: 100%;
    border-left: solid var(--width) var(--color);
    margin: 0 var(--spacing);
  }
`,SlDivider=class extends ShoelaceElement{constructor(){super(...arguments),this.vertical=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator")}handleVerticalChange(){this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}};SlDivider.styles=divider_styles_default;__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlDivider.prototype,"vertical",2);__decorateClass$1([watch("vertical")],SlDivider.prototype,"handleVerticalChange",1);SlDivider=__decorateClass$1([e("sl-divider")],SlDivider);var menu_styles_default=i$3`
  ${component_styles_default}

  :host {
    display: block;
    position: relative;
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding: var(--sl-spacing-x-small) 0;
    overflow: auto;
    overscroll-behavior: none;
  }

  ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }
`,SlMenu=class extends ShoelaceElement{constructor(){super(...arguments),this.typeToSelectString=""}connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu")}getAllItems(q={includeDisabled:!0}){return[...this.defaultSlot.assignedElements({flatten:!0})].filter(j=>!(j.getAttribute("role")!=="menuitem"||!q.includeDisabled&&j.disabled))}getCurrentItem(){return this.getAllItems({includeDisabled:!1}).find(q=>q.getAttribute("tabindex")==="0")}setCurrentItem(q){const j=this.getAllItems({includeDisabled:!1}),X=q.disabled?j[0]:q;j.forEach(te=>{te.setAttribute("tabindex",te===X?"0":"-1")})}typeToSelect(q){var j;const X=this.getAllItems({includeDisabled:!1});clearTimeout(this.typeToSelectTimeout),this.typeToSelectTimeout=window.setTimeout(()=>this.typeToSelectString="",1e3),q.key==="Backspace"?q.metaKey||q.ctrlKey?this.typeToSelectString="":this.typeToSelectString=this.typeToSelectString.slice(0,-1):this.typeToSelectString+=q.key.toLowerCase();for(const te of X){const ne=(j=te.shadowRoot)==null?void 0:j.querySelector("slot:not([name])");if(getTextContent(ne).toLowerCase().trim().startsWith(this.typeToSelectString)){this.setCurrentItem(te),te.focus();break}}}handleClick(q){const X=q.target.closest("sl-menu-item");(X==null?void 0:X.disabled)===!1&&this.emit("sl-select",{detail:{item:X}})}handleKeyDown(q){if(q.key==="Enter"){const j=this.getCurrentItem();q.preventDefault(),j==null||j.click()}if(q.key===" "&&q.preventDefault(),["ArrowDown","ArrowUp","Home","End"].includes(q.key)){const j=this.getAllItems({includeDisabled:!1}),X=this.getCurrentItem();let te=X?j.indexOf(X):0;if(j.length>0){q.preventDefault(),q.key==="ArrowDown"?te++:q.key==="ArrowUp"?te--:q.key==="Home"?te=0:q.key==="End"&&(te=j.length-1),te<0&&(te=j.length-1),te>j.length-1&&(te=0),this.setCurrentItem(j[te]),j[te].focus();return}}this.typeToSelect(q)}handleMouseDown(q){const j=q.target;j.getAttribute("role")==="menuitem"&&this.setCurrentItem(j)}handleSlotChange(){const q=this.getAllItems({includeDisabled:!1});q.length>0&&this.setCurrentItem(q[0])}render(){return y`
      <slot
        @slotchange=${this.handleSlotChange}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      ></slot>
    `}};SlMenu.styles=menu_styles_default;__decorateClass$1([i2$2("slot")],SlMenu.prototype,"defaultSlot",2);SlMenu=__decorateClass$1([e("sl-menu")],SlMenu);var menu_item_styles_default=i$3`
  ${component_styles_default}

  :host {
    display: block;
  }

  .menu-item {
    position: relative;
    display: flex;
    align-items: stretch;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);
    transition: var(--sl-transition-fast) fill;
    user-select: none;
    white-space: nowrap;
    cursor: pointer;
  }

  .menu-item.menu-item--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .menu-item .menu-item__label {
    flex: 1 1 auto;
    display: inline-block;
  }

  .menu-item .menu-item__prefix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .menu-item .menu-item__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:focus) {
    outline: none;
  }

  :host(:hover:not([aria-disabled='true'])) .menu-item,
  :host(:focus-visible:not(.sl-focus-invisible):not([aria-disabled='true'])) .menu-item {
    outline: none;
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .menu-item .menu-item__check,
  .menu-item .menu-item__chevron {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5em;
    visibility: hidden;
  }

  .menu-item--checked .menu-item__check,
  .menu-item--has-submenu .menu-item__chevron {
    visibility: visible;
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .menu-item,
    :host(:focus-visible:not(.sl-focus-invisible):not([aria-disabled='true'])) .menu-item {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }
`,SlMenuItem=class extends ShoelaceElement{constructor(){super(...arguments),this.checked=!1,this.value="",this.disabled=!1}firstUpdated(){this.setAttribute("role","menuitem")}getTextLabel(){return getTextContent(this.defaultSlot)}handleCheckedChange(){this.setAttribute("aria-checked",this.checked?"true":"false")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleDefaultSlotChange(){const q=this.getTextLabel();if(typeof this.cachedTextLabel>"u"){this.cachedTextLabel=q;return}q!==this.cachedTextLabel&&(this.cachedTextLabel=q,this.emit("sl-label-change"))}render(){return y`
      <div
        part="base"
        class=${o$1({"menu-item":!0,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--has-submenu":!1})}
      >
        <span part="checked-icon" class="menu-item__check">
          <sl-icon name="check" library="system" aria-hidden="true"></sl-icon>
        </span>

        <slot name="prefix" part="prefix" class="menu-item__prefix"></slot>

        <slot part="label" class="menu-item__label" @slotchange=${this.handleDefaultSlotChange}></slot>

        <slot name="suffix" part="suffix" class="menu-item__suffix"></slot>

        <span class="menu-item__chevron">
          <sl-icon name="chevron-right" library="system" aria-hidden="true"></sl-icon>
        </span>
      </div>
    `}};SlMenuItem.styles=menu_item_styles_default;__decorateClass$1([i2$2("slot:not([name])")],SlMenuItem.prototype,"defaultSlot",2);__decorateClass$1([i2$2(".menu-item")],SlMenuItem.prototype,"menuItem",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlMenuItem.prototype,"checked",2);__decorateClass$1([e2$1()],SlMenuItem.prototype,"value",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlMenuItem.prototype,"disabled",2);__decorateClass$1([watch("checked")],SlMenuItem.prototype,"handleCheckedChange",1);__decorateClass$1([watch("disabled")],SlMenuItem.prototype,"handleDisabledChange",1);SlMenuItem=__decorateClass$1([e("sl-menu-item")],SlMenuItem);var icon_button_styles_default=i$3`
  ${component_styles_default}

  :host {
    display: inline-block;
    color: var(--sl-color-neutral-600);
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: inherit;
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-medium) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus-visible:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .icon-button__icon {
    pointer-events: none;
  }
`,SlIconButton=class extends ShoelaceElement{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}click(){this.button.click()}focus(q){this.button.focus(q)}blur(){this.button.blur()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(q){this.disabled&&(q.preventDefault(),q.stopPropagation())}render(){const q=!!this.href,j=q?i$2`a`:i$2`button`;return n$2`
      <${j}
        part="base"
        class=${o$1({"icon-button":!0,"icon-button--disabled":!q&&this.disabled,"icon-button--focused":this.hasFocus})}
        ?disabled=${l$1(q?void 0:this.disabled)}
        type=${l$1(q?void 0:"button")}
        href=${l$1(q?this.href:void 0)}
        target=${l$1(q?this.target:void 0)}
        download=${l$1(q?this.download:void 0)}
        rel=${l$1(q&&this.target?"noreferrer noopener":void 0)}
        role=${l$1(q?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        aria-label="${this.label}"
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <sl-icon
          class="icon-button__icon"
          name=${l$1(this.name)}
          library=${l$1(this.library)}
          src=${l$1(this.src)}
          aria-hidden="true"
        ></sl-icon>
      </${j}>
    `}};SlIconButton.styles=icon_button_styles_default;__decorateClass$1([t$1()],SlIconButton.prototype,"hasFocus",2);__decorateClass$1([i2$2(".icon-button")],SlIconButton.prototype,"button",2);__decorateClass$1([e2$1()],SlIconButton.prototype,"name",2);__decorateClass$1([e2$1()],SlIconButton.prototype,"library",2);__decorateClass$1([e2$1()],SlIconButton.prototype,"src",2);__decorateClass$1([e2$1()],SlIconButton.prototype,"href",2);__decorateClass$1([e2$1()],SlIconButton.prototype,"target",2);__decorateClass$1([e2$1()],SlIconButton.prototype,"download",2);__decorateClass$1([e2$1()],SlIconButton.prototype,"label",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlIconButton.prototype,"disabled",2);SlIconButton=__decorateClass$1([e("sl-icon-button")],SlIconButton);var form_control_styles_default=i$3`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control_label {
    font-size: var(--sl-input-label-font-size-large);
  }

  :host([required]) .form-control--has-label .form-control__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
    color: var(--sl-input-required-content-color);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }

  .form-control--has-help-text.form-control--radio-group .form-control__help-text {
    margin-top: var(--sl-spacing-2x-small);
  }
`,select_styles_default=i$3`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    display: block;
  }

  .select {
    display: block;
  }

  .select::part(panel) {
    overflow: hidden;
  }

  .select__control {
    display: inline-flex;
    align-items: center;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow;
    cursor: pointer;
  }

  .select::part(panel) {
    border-radius: var(--sl-border-radius-medium);
  }

  /* Standard selects */
  .select--standard .select__control {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    color: var(--sl-input-color);
  }

  .select--standard:not(.select--disabled) .select__control:hover {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
    color: var(--sl-input-color-hover);
  }

  .select--standard.select--focused:not(.select--disabled) .select__control {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    color: var(--sl-input-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
    outline: none;
  }

  .select--standard.select--disabled .select__control {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    color: var(--sl-input-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
    outline: none;
  }

  /* Filled selects */
  .select--filled .select__control {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .select--filled:hover:not(.select--disabled) .select__control {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .select--filled.select--focused:not(.select--disabled) .select__control {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .select--filled.select--disabled .select__control {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .select--disabled .select__tags,
  .select--disabled .select__clear {
    pointer-events: none;
  }

  .select__prefix {
    display: inline-flex;
    align-items: center;
    color: var(--sl-input-placeholder-color);
  }

  .select__label {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
    user-select: none;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .select__label::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .select__clear {
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    width: 1.25em;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .select__clear:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .select__suffix {
    display: inline-flex;
    align-items: center;
    color: var(--sl-input-placeholder-color);
  }

  .select__icon {
    flex: 0 0 auto;
    display: inline-flex;
    transition: var(--sl-transition-medium) rotate ease;
  }

  .select--open .select__icon {
    rotate: -180deg;
  }

  /* Placeholder */
  .select--placeholder-visible .select__label {
    color: var(--sl-input-placeholder-color);
  }

  .select--disabled.select--placeholder-visible .select__label {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Tags */
  .select__tags {
    display: inline-flex;
    align-items: center;
    flex-wrap: wrap;
    justify-content: left;
    margin-inline-start: var(--sl-spacing-2x-small);
  }

  /* Hidden input (for form control validation to show) */
  .select__hidden-select {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    overflow: hidden;
    white-space: nowrap;
  }

  /*
   * Size modifiers
   */

  /* Small */
  .select--small .select__control {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    min-height: var(--sl-input-height-small);
  }

  .select--small .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .select--small .select__label {
    margin: 0 var(--sl-input-spacing-small);
  }

  .select--small .select__clear {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .select--small .select__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .select--small .select__icon {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .select--small .select__tags {
    padding-bottom: 2px;
  }

  .select--small .select__tags sl-tag {
    padding-top: 2px;
  }

  .select--small .select__tags sl-tag:not(:last-of-type) {
    margin-inline-end: var(--sl-spacing-2x-small);
  }

  .select--small.select--has-tags .select__label {
    margin-inline-start: 0;
  }

  /* Medium */
  .select--medium .select__control {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    min-height: var(--sl-input-height-medium);
  }

  .select--medium .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .select--medium .select__label {
    margin: 0 var(--sl-input-spacing-medium);
  }

  .select--medium .select__clear {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .select--medium .select__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .select--medium .select__icon {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .select--medium .select__tags {
    padding-bottom: 3px;
  }

  .select--medium .select__tags sl-tag {
    padding-top: 3px;
  }

  .select--medium .select__tags sl-tag:not(:last-of-type) {
    margin-inline-end: var(--sl-spacing-2x-small);
  }

  .select--medium.select--has-tags .select__label {
    margin-inline-start: 0;
  }

  /* Large */
  .select--large .select__control {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    min-height: var(--sl-input-height-large);
  }

  .select--large .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .select--large .select__label {
    margin: 0 var(--sl-input-spacing-large);
  }

  .select--large .select__clear {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  .select--large .select__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  .select--large .select__icon {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  .select--large .select__tags {
    padding-bottom: 4px;
  }
  .select--large .select__tags sl-tag {
    padding-top: 4px;
  }

  .select--large .select__tags sl-tag:not(:last-of-type) {
    margin-inline-end: var(--sl-spacing-2x-small);
  }

  .select--large.select--has-tags .select__label {
    margin-inline-start: 0;
  }

  /*
   * Pill modifier
   */
  .select--pill.select--small .select__control {
    border-radius: var(--sl-input-height-small);
  }

  .select--pill.select--medium .select__control {
    border-radius: var(--sl-input-height-medium);
  }

  .select--pill.select--large .select__control {
    border-radius: var(--sl-input-height-large);
  }
`,defaultValue=(q="value")=>(j,X)=>{const te=j.constructor,ne=te.prototype.attributeChangedCallback;te.prototype.attributeChangedCallback=function(re,oe,le){var fe;const we=te.getPropertyOptions(q),ke=typeof we.attribute=="string"?we.attribute:q;if(re===ke){const ye=we.converter||n2$1,be=(typeof ye=="function"?ye:(fe=ye==null?void 0:ye.fromAttribute)!=null?fe:n2$1.fromAttribute)(le,we.type);this[q]!==be&&(this[X]=be)}ne.call(this,re,oe,le)}},SlSelect=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController2(this),this.menuItems=[],this.hasFocus=!1,this.isOpen=!1,this.displayLabel="",this.displayTags=[],this.invalid=!1,this.multiple=!1,this.maxTagsVisible=3,this.disabled=!1,this.name="",this.value="",this.placeholder="",this.size="medium",this.hoist=!1,this.filled=!1,this.pill=!1,this.label="",this.placement="bottom",this.helpText="",this.required=!1,this.clearable=!1,this.defaultValue=""}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.resizeMenu()),this.updateComplete.then(()=>{this.resizeObserver.observe(this),this.syncItemsFromValue()})}firstUpdated(){this.invalid=!this.input.checkValidity()}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this)}checkValidity(){return this.input.checkValidity()}reportValidity(){return this.input.reportValidity()}setCustomValidity(q){this.input.setCustomValidity(q),this.invalid=!this.input.checkValidity()}getValueAsArray(){return this.multiple&&this.value===""?[]:Array.isArray(this.value)?this.value:[this.value]}focus(q){this.control.focus(q)}blur(){this.control.blur()}handleBlur(){this.isOpen||(this.hasFocus=!1,this.emit("sl-blur"))}handleClearClick(q){const j=this.value;q.stopPropagation(),this.value=this.multiple?[]:"",this.value!==j&&(this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change")),this.syncItemsFromValue()}handleDisabledChange(){this.disabled&&this.isOpen&&this.dropdown.hide(),this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity()}handleFocus(){this.hasFocus||(this.hasFocus=!0,this.emit("sl-focus"))}handleKeyDown(q){const j=q.target,X=this.menuItems[0],te=this.menuItems[this.menuItems.length-1];if(j.tagName.toLowerCase()!=="sl-tag"){if(q.key==="Tab"){this.isOpen&&this.dropdown.hide();return}if(["ArrowDown","ArrowUp"].includes(q.key)){if(q.preventDefault(),this.isOpen||this.dropdown.show(),q.key==="ArrowDown"){this.menu.setCurrentItem(X),X.focus();return}if(q.key==="ArrowUp"){this.menu.setCurrentItem(te),te.focus();return}}q.ctrlKey||q.metaKey||!this.isOpen&&q.key.length===1&&(q.stopPropagation(),q.preventDefault(),this.dropdown.show(),this.menu.typeToSelect(q))}}handleLabelClick(){this.focus()}handleMenuSelect(q){const j=q.detail.item,X=this.value;this.multiple?this.value=this.value.includes(j.value)?this.value.filter(te=>te!==j.value):[...this.value,j.value]:this.value=j.value,this.value!==X&&(this.emit("sl-change"),this.emit("sl-input")),this.syncItemsFromValue()}handleMenuShow(){this.resizeMenu(),this.isOpen=!0}handleMenuHide(){this.isOpen=!1,this.control.focus()}handleMenuItemLabelChange(){if(!this.multiple){const q=this.menuItems.find(j=>j.value===this.value);this.displayLabel=q?q.getTextLabel():""}}handleMultipleChange(){var q;const j=this.getValueAsArray();this.value=this.multiple?j:(q=j[0])!=null?q:"",this.syncItemsFromValue()}async handleMenuSlotChange(){this.menuItems=[...this.querySelectorAll("sl-menu-item")];const q=[];this.menuItems.forEach(j=>{q.includes(j.value)&&console.error(`Duplicate value found in <sl-select> menu item: '${j.value}'`,j),q.push(j.value)}),await Promise.all(this.menuItems.map(j=>j.render)),this.syncItemsFromValue()}handleTagInteraction(q){q.composedPath().find(te=>te instanceof HTMLElement?te.classList.contains("tag__remove"):!1)&&q.stopPropagation()}async handleValueChange(){this.syncItemsFromValue(),await this.updateComplete,this.invalid=!this.input.checkValidity()}resizeMenu(){this.menu.style.width=`${this.control.clientWidth}px`,requestAnimationFrame(()=>this.dropdown.reposition())}syncItemsFromValue(){const q=this.getValueAsArray();if(this.menuItems.forEach(j=>j.checked=q.includes(j.value)),this.multiple){const j=this.menuItems.filter(X=>q.includes(X.value));if(this.displayLabel=j.length>0?j[0].getTextLabel():"",this.displayTags=j.map(X=>y`
          <sl-tag
            part="tag"
            exportparts="
              base:tag__base,
              content:tag__content,
              remove-button:tag__remove-button
            "
            variant="neutral"
            size=${this.size}
            ?pill=${this.pill}
            removable
            @click=${this.handleTagInteraction}
            @keydown=${this.handleTagInteraction}
            @sl-remove=${te=>{te.stopPropagation(),this.disabled||(X.checked=!1,this.syncValueFromItems())}}
          >
            ${X.getTextLabel()}
          </sl-tag>
        `),this.maxTagsVisible>0&&this.displayTags.length>this.maxTagsVisible){const X=this.displayTags.length;this.displayLabel="",this.displayTags=this.displayTags.slice(0,this.maxTagsVisible),this.displayTags.push(y`
          <sl-tag
            part="tag"
            exportparts="
              base:tag__base,
              content:tag__content,
              remove-button:tag__remove-button
            "
            variant="neutral"
            size=${this.size}
          >
            +${X-this.maxTagsVisible}
          </sl-tag>
        `)}}else{const j=this.menuItems.find(X=>X.value===q[0]);this.displayLabel=j?j.getTextLabel():"",this.displayTags=[]}}syncValueFromItems(){const j=this.menuItems.filter(te=>te.checked).map(te=>te.value),X=this.value;this.multiple?this.value=this.value.filter(te=>j.includes(te)):this.value=j.length>0?j[0]:"",this.value!==X&&(this.emit("sl-change"),this.emit("sl-input"))}render(){const q=this.hasSlotController.test("label"),j=this.hasSlotController.test("help-text"),X=this.multiple?this.value.length>0:this.value!=="",te=this.label?!0:!!q,ne=this.helpText?!0:!!j,re=this.clearable&&!this.disabled&&X;return y`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":te,"form-control--has-help-text":ne})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${te?"false":"true"}
          @click=${this.handleLabelClick}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <sl-dropdown
            part="base"
            .hoist=${this.hoist}
            .placement=${this.placement==="bottom"?"bottom-start":"top-start"}
            .stayOpenOnSelect=${this.multiple}
            .containingElement=${this}
            ?disabled=${this.disabled}
            class=${o$1({select:!0,"select--open":this.isOpen,"select--empty":!this.value,"select--focused":this.hasFocus,"select--clearable":this.clearable,"select--disabled":this.disabled,"select--multiple":this.multiple,"select--standard":!this.filled,"select--filled":this.filled,"select--has-tags":this.multiple&&this.displayTags.length>0,"select--placeholder-visible":this.displayLabel==="","select--small":this.size==="small","select--medium":this.size==="medium","select--large":this.size==="large","select--pill":this.pill,"select--invalid":this.invalid})}
            @sl-show=${this.handleMenuShow}
            @sl-hide=${this.handleMenuHide}
          >
            <div
              part="control"
              slot="trigger"
              id="input"
              class="select__control"
              role="combobox"
              aria-describedby="help-text"
              aria-haspopup="true"
              aria-disabled=${this.disabled?"true":"false"}
              aria-expanded=${this.isOpen?"true":"false"}
              aria-controls="menu"
              tabindex=${this.disabled?"-1":"0"}
              @blur=${this.handleBlur}
              @focus=${this.handleFocus}
              @keydown=${this.handleKeyDown}
            >
              <slot name="prefix" part="prefix" class="select__prefix"></slot>

              <div part="display-label" class="select__label">
                ${this.displayTags.length>0?y` <span part="tags" class="select__tags"> ${this.displayTags} </span> `:this.displayLabel.length>0?this.displayLabel:this.placeholder}
              </div>

              ${re?y`
                    <button
                      part="clear-button"
                      class="select__clear"
                      @click=${this.handleClearClick}
                      aria-label=${this.localize.term("clearEntry")}
                      tabindex="-1"
                    >
                      <slot name="clear-icon">
                        <sl-icon name="x-circle-fill" library="system"></sl-icon>
                      </slot>
                    </button>
                  `:""}

              <slot name="suffix" part="suffix" class="select__suffix"></slot>

              <span part="icon" class="select__icon" aria-hidden="true">
                <sl-icon name="chevron-down" library="system"></sl-icon>
              </span>

              <!-- The hidden input tricks the browser's built-in validation so it works as expected. We use an input
              instead of a select because, otherwise, iOS will show a list of options during validation. The focus
              handler is used to move focus to the primary control when it's marked invalid.  -->
              <input
                class="select__hidden-select"
                aria-hidden="true"
                ?required=${this.required}
                .value=${X?"1":""}
                tabindex="-1"
                @focus=${()=>this.control.focus()}
              />
            </div>

            <sl-menu part="menu" id="menu" class="select__menu" @sl-select=${this.handleMenuSelect}>
              <slot @slotchange=${this.handleMenuSlotChange} @sl-label-change=${this.handleMenuItemLabelChange}></slot>
            </sl-menu>
          </sl-dropdown>
        </div>

        <slot
          name="help-text"
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${ne?"false":"true"}
        >
          ${this.helpText}
        </slot>
      </div>
    `}};SlSelect.styles=select_styles_default;__decorateClass$1([i2$2(".select")],SlSelect.prototype,"dropdown",2);__decorateClass$1([i2$2(".select__control")],SlSelect.prototype,"control",2);__decorateClass$1([i2$2(".select__hidden-select")],SlSelect.prototype,"input",2);__decorateClass$1([i2$2(".select__menu")],SlSelect.prototype,"menu",2);__decorateClass$1([t$1()],SlSelect.prototype,"hasFocus",2);__decorateClass$1([t$1()],SlSelect.prototype,"isOpen",2);__decorateClass$1([t$1()],SlSelect.prototype,"displayLabel",2);__decorateClass$1([t$1()],SlSelect.prototype,"displayTags",2);__decorateClass$1([t$1()],SlSelect.prototype,"invalid",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlSelect.prototype,"multiple",2);__decorateClass$1([e2$1({attribute:"max-tags-visible",type:Number})],SlSelect.prototype,"maxTagsVisible",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlSelect.prototype,"disabled",2);__decorateClass$1([e2$1()],SlSelect.prototype,"name",2);__decorateClass$1([e2$1()],SlSelect.prototype,"value",2);__decorateClass$1([e2$1()],SlSelect.prototype,"placeholder",2);__decorateClass$1([e2$1()],SlSelect.prototype,"size",2);__decorateClass$1([e2$1({type:Boolean})],SlSelect.prototype,"hoist",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlSelect.prototype,"filled",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlSelect.prototype,"pill",2);__decorateClass$1([e2$1()],SlSelect.prototype,"label",2);__decorateClass$1([e2$1()],SlSelect.prototype,"placement",2);__decorateClass$1([e2$1({attribute:"help-text"})],SlSelect.prototype,"helpText",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlSelect.prototype,"required",2);__decorateClass$1([e2$1({type:Boolean})],SlSelect.prototype,"clearable",2);__decorateClass$1([defaultValue()],SlSelect.prototype,"defaultValue",2);__decorateClass$1([watch("disabled",{waitUntilFirstUpdate:!0})],SlSelect.prototype,"handleDisabledChange",1);__decorateClass$1([watch("multiple")],SlSelect.prototype,"handleMultipleChange",1);__decorateClass$1([watch("value",{waitUntilFirstUpdate:!0})],SlSelect.prototype,"handleValueChange",1);SlSelect=__decorateClass$1([e("sl-select")],SlSelect);var tag_styles_default=i$3`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .tag {
    display: flex;
    align-items: center;
    border: solid 1px;
    line-height: 1;
    white-space: nowrap;
    user-select: none;
    cursor: default;
  }

  .tag__remove::part(base) {
    color: inherit;
    padding: 0;
  }

  /*
   * Variant modifiers
   */

  .tag--primary {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-200);
    color: var(--sl-color-primary-800);
  }

  .tag--success {
    background-color: var(--sl-color-success-50);
    border-color: var(--sl-color-success-200);
    color: var(--sl-color-success-800);
  }

  .tag--neutral {
    background-color: var(--sl-color-neutral-50);
    border-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-800);
  }

  .tag--warning {
    background-color: var(--sl-color-warning-50);
    border-color: var(--sl-color-warning-200);
    color: var(--sl-color-warning-800);
  }

  .tag--danger {
    background-color: var(--sl-color-danger-50);
    border-color: var(--sl-color-danger-200);
    color: var(--sl-color-danger-800);
  }

  /*
   * Size modifiers
   */

  .tag--small {
    font-size: var(--sl-button-font-size-small);
    height: calc(var(--sl-input-height-small) * 0.8);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
    padding: 0 var(--sl-spacing-x-small);
  }

  .tag--medium {
    font-size: var(--sl-button-font-size-medium);
    height: calc(var(--sl-input-height-medium) * 0.8);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
    padding: 0 var(--sl-spacing-small);
  }

  .tag--large {
    font-size: var(--sl-button-font-size-large);
    height: calc(var(--sl-input-height-large) * 0.8);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
    padding: 0 var(--sl-spacing-medium);
  }

  .tag__remove {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /*
   * Pill modifier
   */

  .tag--pill {
    border-radius: var(--sl-border-radius-pill);
  }
`,SlTag=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.variant="neutral",this.size="medium",this.pill=!1,this.removable=!1}handleRemoveClick(){this.emit("sl-remove")}render(){return y`
      <span
        part="base"
        class=${o$1({tag:!0,"tag--primary":this.variant==="primary","tag--success":this.variant==="success","tag--neutral":this.variant==="neutral","tag--warning":this.variant==="warning","tag--danger":this.variant==="danger","tag--text":this.variant==="text","tag--small":this.size==="small","tag--medium":this.size==="medium","tag--large":this.size==="large","tag--pill":this.pill,"tag--removable":this.removable})}
      >
        <slot part="content" class="tag__content"></slot>

        ${this.removable?y`
              <sl-icon-button
                part="remove-button"
                exportparts="base:remove-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("remove")}
                class="tag__remove"
                @click=${this.handleRemoveClick}
              ></sl-icon-button>
            `:""}
      </span>
    `}};SlTag.styles=tag_styles_default;__decorateClass$1([e2$1({reflect:!0})],SlTag.prototype,"variant",2);__decorateClass$1([e2$1({reflect:!0})],SlTag.prototype,"size",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlTag.prototype,"pill",2);__decorateClass$1([e2$1({type:Boolean})],SlTag.prototype,"removable",2);SlTag=__decorateClass$1([e("sl-tag")],SlTag);function drag(q,j){function X(ne){const re=q.getBoundingClientRect(),oe=q.ownerDocument.defaultView,le=re.left+oe.pageXOffset,fe=re.top+oe.pageYOffset,we=ne.pageX-le,ke=ne.pageY-fe;j!=null&&j.onMove&&j.onMove(we,ke)}function te(){document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",te),j!=null&&j.onStop&&j.onStop()}document.addEventListener("pointermove",X,{passive:!0}),document.addEventListener("pointerup",te),(j==null?void 0:j.initialEvent)instanceof PointerEvent&&X(j.initialEvent)}function clamp(q,j,X){return q<j?j:q>X?X:q}var i2=e$1(class extends i$1{constructor(q){var j;if(super(q),q.type!==t$2.ATTRIBUTE||q.name!=="style"||((j=q.strings)===null||j===void 0?void 0:j.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(q){return Object.keys(q).reduce((j,X)=>{const te=q[X];return te==null?j:j+`${X=X.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${te};`},"")}update(q,[j]){const{style:X}=q.element;if(this.vt===void 0){this.vt=new Set;for(const te in j)this.vt.add(te);return this.render(j)}this.vt.forEach(te=>{j[te]==null&&(this.vt.delete(te),te.includes("-")?X.removeProperty(te):X[te]="")});for(const te in j){const ne=j[te];ne!=null&&(this.vt.add(te),te.includes("-")?X.setProperty(te,ne):X[te]=ne)}return x$1}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var color_picker_styles_default=i$3`
  ${component_styles_default}

  :host {
    --grid-width: 280px;
    --grid-height: 200px;
    --grid-handle-size: 16px;
    --slider-height: 15px;
    --slider-handle-size: 17px;
    --swatch-size: 25px;

    display: inline-block;
  }

  .color-picker {
    width: var(--grid-width);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    color: var(--color);
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    user-select: none;
  }

  .color-picker--inline {
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
  }

  .color-picker--inline:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__grid {
    position: relative;
    height: var(--grid-height);
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%),
      linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%);
    border-top-left-radius: var(--sl-border-radius-medium);
    border-top-right-radius: var(--sl-border-radius-medium);
    cursor: crosshair;
    forced-color-adjust: none;
  }

  .color-picker__grid-handle {
    position: absolute;
    width: var(--grid-handle-size);
    height: var(--grid-handle-size);
    border-radius: 50%;
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
    border: solid 2px white;
    margin-top: calc(var(--grid-handle-size) / -2);
    margin-left: calc(var(--grid-handle-size) / -2);
    transition: var(--sl-transition-fast) scale;
  }

  .color-picker__grid-handle--dragging {
    cursor: none;
    scale: 1.5;
  }

  .color-picker__grid-handle:focus-visible {
    outline: var(--sl-focus-ring);
  }

  .color-picker__controls {
    padding: var(--sl-spacing-small);
    display: flex;
    align-items: center;
  }

  .color-picker__sliders {
    flex: 1 1 auto;
  }

  .color-picker__slider {
    position: relative;
    height: var(--slider-height);
    border-radius: var(--sl-border-radius-pill);
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2);
    forced-color-adjust: none;
  }

  .color-picker__slider:not(:last-of-type) {
    margin-bottom: var(--sl-spacing-small);
  }

  .color-picker__slider-handle {
    position: absolute;
    top: calc(50% - var(--slider-handle-size) / 2);
    width: var(--slider-handle-size);
    height: var(--slider-handle-size);
    background-color: white;
    border-radius: 50%;
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
    margin-left: calc(var(--slider-handle-size) / -2);
  }

  .color-picker__slider-handle:focus-visible {
    outline: var(--sl-focus-ring);
  }

  .color-picker__hue {
    background-image: linear-gradient(
      to right,
      rgb(255, 0, 0) 0%,
      rgb(255, 255, 0) 17%,
      rgb(0, 255, 0) 33%,
      rgb(0, 255, 255) 50%,
      rgb(0, 0, 255) 67%,
      rgb(255, 0, 255) 83%,
      rgb(255, 0, 0) 100%
    );
  }

  .color-picker__alpha .color-picker__alpha-gradient {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
  }

  .color-picker__preview {
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    width: 2.25rem;
    height: 2.25rem;
    border: none;
    border-radius: var(--sl-border-radius-circle);
    background: none;
    margin-left: var(--sl-spacing-small);
    cursor: copy;
    forced-color-adjust: none;
  }

  .color-picker__preview:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2);

    /* We use a custom property in lieu of currentColor because of https://bugs.webkit.org/show_bug.cgi?id=216780 */
    background-color: var(--preview-color);
  }

  .color-picker__preview:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__preview-color {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: solid 1px rgba(0, 0, 0, 0.125);
  }

  .color-picker__preview-color--copied {
    animation: pulse 0.75s;
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--sl-color-primary-500);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }

  .color-picker__user-input {
    display: flex;
    padding: 0 var(--sl-spacing-small) var(--sl-spacing-small) var(--sl-spacing-small);
  }

  .color-picker__user-input sl-input {
    min-width: 0; /* fix input width in Safari */
    flex: 1 1 auto;
  }

  .color-picker__user-input sl-button-group {
    margin-left: var(--sl-spacing-small);
  }

  .color-picker__user-input sl-button {
    min-width: 3.25rem;
    max-width: 3.25rem;
    font-size: 1rem;
  }

  .color-picker__swatches {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    grid-gap: 0.5rem;
    justify-items: center;
    border-top: solid 1px var(--sl-color-neutral-200);
    padding: var(--sl-spacing-small);
    forced-color-adjust: none;
  }

  .color-picker__swatch {
    position: relative;
    width: var(--swatch-size);
    height: var(--swatch-size);
    border-radius: var(--sl-border-radius-small);
  }

  .color-picker__swatch .color-picker__swatch-color {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: solid 1px rgba(0, 0, 0, 0.125);
    border-radius: inherit;
    cursor: pointer;
  }

  .color-picker__swatch:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__transparent-bg {
    background-image: linear-gradient(45deg, var(--sl-color-neutral-300) 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, var(--sl-color-neutral-300) 75%),
      linear-gradient(45deg, transparent 75%, var(--sl-color-neutral-300) 75%),
      linear-gradient(45deg, var(--sl-color-neutral-300) 25%, transparent 25%);
    background-size: 10px 10px;
    background-position: 0 0, 0 0, -5px -5px, 5px 5px;
  }

  .color-picker--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .color-picker--disabled .color-picker__grid,
  .color-picker--disabled .color-picker__grid-handle,
  .color-picker--disabled .color-picker__slider,
  .color-picker--disabled .color-picker__slider-handle,
  .color-picker--disabled .color-picker__preview,
  .color-picker--disabled .color-picker__swatch,
  .color-picker--disabled .color-picker__swatch-color {
    pointer-events: none;
  }

  /*
   * Color dropdown
   */

  .color-dropdown::part(panel) {
    max-height: none;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    overflow: visible;
  }

  .color-dropdown__trigger {
    display: inline-block;
    position: relative;
    background-color: transparent;
    border: none;
    cursor: pointer;
    forced-color-adjust: none;
  }

  .color-dropdown__trigger.color-dropdown__trigger--small {
    width: var(--sl-input-height-small);
    height: var(--sl-input-height-small);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger.color-dropdown__trigger--medium {
    width: var(--sl-input-height-medium);
    height: var(--sl-input-height-medium);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger.color-dropdown__trigger--large {
    width: var(--sl-input-height-large);
    height: var(--sl-input-height-large);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    background-color: currentColor;
    box-shadow: inset 0 0 0 2px var(--sl-input-border-color), inset 0 0 0 4px var(--sl-color-neutral-0);
  }

  .color-dropdown__trigger--empty:before {
    background-color: transparent;
  }

  .color-dropdown__trigger:focus-visible {
    outline: none;
  }

  .color-dropdown__trigger:focus-visible:not(.color-dropdown__trigger--disabled) {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-dropdown__trigger.color-dropdown__trigger--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;function bound01(q,j){isOnePointZero(q)&&(q="100%");var X=isPercentage(q);return q=j===360?q:Math.min(j,Math.max(0,parseFloat(q))),X&&(q=parseInt(String(q*j),10)/100),Math.abs(q-j)<1e-6?1:(j===360?q=(q<0?q%j+j:q%j)/parseFloat(String(j)):q=q%j/parseFloat(String(j)),q)}function clamp01(q){return Math.min(1,Math.max(0,q))}function isOnePointZero(q){return typeof q=="string"&&q.indexOf(".")!==-1&&parseFloat(q)===1}function isPercentage(q){return typeof q=="string"&&q.indexOf("%")!==-1}function boundAlpha(q){return q=parseFloat(q),(isNaN(q)||q<0||q>1)&&(q=1),q}function convertToPercentage(q){return q<=1?"".concat(Number(q)*100,"%"):q}function pad2(q){return q.length===1?"0"+q:String(q)}function rgbToRgb(q,j,X){return{r:bound01(q,255)*255,g:bound01(j,255)*255,b:bound01(X,255)*255}}function rgbToHsl(q,j,X){q=bound01(q,255),j=bound01(j,255),X=bound01(X,255);var te=Math.max(q,j,X),ne=Math.min(q,j,X),re=0,oe=0,le=(te+ne)/2;if(te===ne)oe=0,re=0;else{var fe=te-ne;switch(oe=le>.5?fe/(2-te-ne):fe/(te+ne),te){case q:re=(j-X)/fe+(j<X?6:0);break;case j:re=(X-q)/fe+2;break;case X:re=(q-j)/fe+4;break}re/=6}return{h:re,s:oe,l:le}}function hue2rgb(q,j,X){return X<0&&(X+=1),X>1&&(X-=1),X<1/6?q+(j-q)*(6*X):X<1/2?j:X<2/3?q+(j-q)*(2/3-X)*6:q}function hslToRgb(q,j,X){var te,ne,re;if(q=bound01(q,360),j=bound01(j,100),X=bound01(X,100),j===0)ne=X,re=X,te=X;else{var oe=X<.5?X*(1+j):X+j-X*j,le=2*X-oe;te=hue2rgb(le,oe,q+1/3),ne=hue2rgb(le,oe,q),re=hue2rgb(le,oe,q-1/3)}return{r:te*255,g:ne*255,b:re*255}}function rgbToHsv(q,j,X){q=bound01(q,255),j=bound01(j,255),X=bound01(X,255);var te=Math.max(q,j,X),ne=Math.min(q,j,X),re=0,oe=te,le=te-ne,fe=te===0?0:le/te;if(te===ne)re=0;else{switch(te){case q:re=(j-X)/le+(j<X?6:0);break;case j:re=(X-q)/le+2;break;case X:re=(q-j)/le+4;break}re/=6}return{h:re,s:fe,v:oe}}function hsvToRgb(q,j,X){q=bound01(q,360)*6,j=bound01(j,100),X=bound01(X,100);var te=Math.floor(q),ne=q-te,re=X*(1-j),oe=X*(1-ne*j),le=X*(1-(1-ne)*j),fe=te%6,we=[X,oe,re,re,le,X][fe],ke=[le,X,X,oe,re,re][fe],ye=[re,re,le,X,X,oe][fe];return{r:we*255,g:ke*255,b:ye*255}}function rgbToHex(q,j,X,te){var ne=[pad2(Math.round(q).toString(16)),pad2(Math.round(j).toString(16)),pad2(Math.round(X).toString(16))];return te&&ne[0].startsWith(ne[0].charAt(1))&&ne[1].startsWith(ne[1].charAt(1))&&ne[2].startsWith(ne[2].charAt(1))?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0):ne.join("")}function rgbaToHex(q,j,X,te,ne){var re=[pad2(Math.round(q).toString(16)),pad2(Math.round(j).toString(16)),pad2(Math.round(X).toString(16)),pad2(convertDecimalToHex(te))];return ne&&re[0].startsWith(re[0].charAt(1))&&re[1].startsWith(re[1].charAt(1))&&re[2].startsWith(re[2].charAt(1))&&re[3].startsWith(re[3].charAt(1))?re[0].charAt(0)+re[1].charAt(0)+re[2].charAt(0)+re[3].charAt(0):re.join("")}function convertDecimalToHex(q){return Math.round(parseFloat(q)*255).toString(16)}function convertHexToDecimal(q){return parseIntFromHex(q)/255}function parseIntFromHex(q){return parseInt(q,16)}function numberInputToObject(q){return{r:q>>16,g:(q&65280)>>8,b:q&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(q){var j={r:0,g:0,b:0},X=1,te=null,ne=null,re=null,oe=!1,le=!1;return typeof q=="string"&&(q=stringInputToObject(q)),typeof q=="object"&&(isValidCSSUnit(q.r)&&isValidCSSUnit(q.g)&&isValidCSSUnit(q.b)?(j=rgbToRgb(q.r,q.g,q.b),oe=!0,le=String(q.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(q.h)&&isValidCSSUnit(q.s)&&isValidCSSUnit(q.v)?(te=convertToPercentage(q.s),ne=convertToPercentage(q.v),j=hsvToRgb(q.h,te,ne),oe=!0,le="hsv"):isValidCSSUnit(q.h)&&isValidCSSUnit(q.s)&&isValidCSSUnit(q.l)&&(te=convertToPercentage(q.s),re=convertToPercentage(q.l),j=hslToRgb(q.h,te,re),oe=!0,le="hsl"),Object.prototype.hasOwnProperty.call(q,"a")&&(X=q.a)),X=boundAlpha(X),{ok:oe,format:q.format||le,r:Math.min(255,Math.max(j.r,0)),g:Math.min(255,Math.max(j.g,0)),b:Math.min(255,Math.max(j.b,0)),a:X}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(q){if(q=q.trim().toLowerCase(),q.length===0)return!1;var j=!1;if(names[q])q=names[q],j=!0;else if(q==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var X=matchers.rgb.exec(q);return X?{r:X[1],g:X[2],b:X[3]}:(X=matchers.rgba.exec(q),X?{r:X[1],g:X[2],b:X[3],a:X[4]}:(X=matchers.hsl.exec(q),X?{h:X[1],s:X[2],l:X[3]}:(X=matchers.hsla.exec(q),X?{h:X[1],s:X[2],l:X[3],a:X[4]}:(X=matchers.hsv.exec(q),X?{h:X[1],s:X[2],v:X[3]}:(X=matchers.hsva.exec(q),X?{h:X[1],s:X[2],v:X[3],a:X[4]}:(X=matchers.hex8.exec(q),X?{r:parseIntFromHex(X[1]),g:parseIntFromHex(X[2]),b:parseIntFromHex(X[3]),a:convertHexToDecimal(X[4]),format:j?"name":"hex8"}:(X=matchers.hex6.exec(q),X?{r:parseIntFromHex(X[1]),g:parseIntFromHex(X[2]),b:parseIntFromHex(X[3]),format:j?"name":"hex"}:(X=matchers.hex4.exec(q),X?{r:parseIntFromHex(X[1]+X[1]),g:parseIntFromHex(X[2]+X[2]),b:parseIntFromHex(X[3]+X[3]),a:convertHexToDecimal(X[4]+X[4]),format:j?"name":"hex8"}:(X=matchers.hex3.exec(q),X?{r:parseIntFromHex(X[1]+X[1]),g:parseIntFromHex(X[2]+X[2]),b:parseIntFromHex(X[3]+X[3]),format:j?"name":"hex"}:!1)))))))))}function isValidCSSUnit(q){return Boolean(matchers.CSS_UNIT.exec(String(q)))}var TinyColor=function(){function q(j,X){j===void 0&&(j=""),X===void 0&&(X={});var te;if(j instanceof q)return j;typeof j=="number"&&(j=numberInputToObject(j)),this.originalInput=j;var ne=inputToRGB(j);this.originalInput=j,this.r=ne.r,this.g=ne.g,this.b=ne.b,this.a=ne.a,this.roundA=Math.round(100*this.a)/100,this.format=(te=X.format)!==null&&te!==void 0?te:ne.format,this.gradientType=X.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=ne.ok}return q.prototype.isDark=function(){return this.getBrightness()<128},q.prototype.isLight=function(){return!this.isDark()},q.prototype.getBrightness=function(){var j=this.toRgb();return(j.r*299+j.g*587+j.b*114)/1e3},q.prototype.getLuminance=function(){var j=this.toRgb(),X,te,ne,re=j.r/255,oe=j.g/255,le=j.b/255;return re<=.03928?X=re/12.92:X=Math.pow((re+.055)/1.055,2.4),oe<=.03928?te=oe/12.92:te=Math.pow((oe+.055)/1.055,2.4),le<=.03928?ne=le/12.92:ne=Math.pow((le+.055)/1.055,2.4),.2126*X+.7152*te+.0722*ne},q.prototype.getAlpha=function(){return this.a},q.prototype.setAlpha=function(j){return this.a=boundAlpha(j),this.roundA=Math.round(100*this.a)/100,this},q.prototype.isMonochrome=function(){var j=this.toHsl().s;return j===0},q.prototype.toHsv=function(){var j=rgbToHsv(this.r,this.g,this.b);return{h:j.h*360,s:j.s,v:j.v,a:this.a}},q.prototype.toHsvString=function(){var j=rgbToHsv(this.r,this.g,this.b),X=Math.round(j.h*360),te=Math.round(j.s*100),ne=Math.round(j.v*100);return this.a===1?"hsv(".concat(X,", ").concat(te,"%, ").concat(ne,"%)"):"hsva(".concat(X,", ").concat(te,"%, ").concat(ne,"%, ").concat(this.roundA,")")},q.prototype.toHsl=function(){var j=rgbToHsl(this.r,this.g,this.b);return{h:j.h*360,s:j.s,l:j.l,a:this.a}},q.prototype.toHslString=function(){var j=rgbToHsl(this.r,this.g,this.b),X=Math.round(j.h*360),te=Math.round(j.s*100),ne=Math.round(j.l*100);return this.a===1?"hsl(".concat(X,", ").concat(te,"%, ").concat(ne,"%)"):"hsla(".concat(X,", ").concat(te,"%, ").concat(ne,"%, ").concat(this.roundA,")")},q.prototype.toHex=function(j){return j===void 0&&(j=!1),rgbToHex(this.r,this.g,this.b,j)},q.prototype.toHexString=function(j){return j===void 0&&(j=!1),"#"+this.toHex(j)},q.prototype.toHex8=function(j){return j===void 0&&(j=!1),rgbaToHex(this.r,this.g,this.b,this.a,j)},q.prototype.toHex8String=function(j){return j===void 0&&(j=!1),"#"+this.toHex8(j)},q.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},q.prototype.toRgbString=function(){var j=Math.round(this.r),X=Math.round(this.g),te=Math.round(this.b);return this.a===1?"rgb(".concat(j,", ").concat(X,", ").concat(te,")"):"rgba(".concat(j,", ").concat(X,", ").concat(te,", ").concat(this.roundA,")")},q.prototype.toPercentageRgb=function(){var j=function(X){return"".concat(Math.round(bound01(X,255)*100),"%")};return{r:j(this.r),g:j(this.g),b:j(this.b),a:this.a}},q.prototype.toPercentageRgbString=function(){var j=function(X){return Math.round(bound01(X,255)*100)};return this.a===1?"rgb(".concat(j(this.r),"%, ").concat(j(this.g),"%, ").concat(j(this.b),"%)"):"rgba(".concat(j(this.r),"%, ").concat(j(this.g),"%, ").concat(j(this.b),"%, ").concat(this.roundA,")")},q.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var j="#"+rgbToHex(this.r,this.g,this.b,!1),X=0,te=Object.entries(names);X<te.length;X++){var ne=te[X],re=ne[0],oe=ne[1];if(j===oe)return re}return!1},q.prototype.toString=function(j){var X=Boolean(j);j=j??this.format;var te=!1,ne=this.a<1&&this.a>=0,re=!X&&ne&&(j.startsWith("hex")||j==="name");return re?j==="name"&&this.a===0?this.toName():this.toRgbString():(j==="rgb"&&(te=this.toRgbString()),j==="prgb"&&(te=this.toPercentageRgbString()),(j==="hex"||j==="hex6")&&(te=this.toHexString()),j==="hex3"&&(te=this.toHexString(!0)),j==="hex4"&&(te=this.toHex8String(!0)),j==="hex8"&&(te=this.toHex8String()),j==="name"&&(te=this.toName()),j==="hsl"&&(te=this.toHslString()),j==="hsv"&&(te=this.toHsvString()),te||this.toHexString())},q.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},q.prototype.clone=function(){return new q(this.toString())},q.prototype.lighten=function(j){j===void 0&&(j=10);var X=this.toHsl();return X.l+=j/100,X.l=clamp01(X.l),new q(X)},q.prototype.brighten=function(j){j===void 0&&(j=10);var X=this.toRgb();return X.r=Math.max(0,Math.min(255,X.r-Math.round(255*-(j/100)))),X.g=Math.max(0,Math.min(255,X.g-Math.round(255*-(j/100)))),X.b=Math.max(0,Math.min(255,X.b-Math.round(255*-(j/100)))),new q(X)},q.prototype.darken=function(j){j===void 0&&(j=10);var X=this.toHsl();return X.l-=j/100,X.l=clamp01(X.l),new q(X)},q.prototype.tint=function(j){return j===void 0&&(j=10),this.mix("white",j)},q.prototype.shade=function(j){return j===void 0&&(j=10),this.mix("black",j)},q.prototype.desaturate=function(j){j===void 0&&(j=10);var X=this.toHsl();return X.s-=j/100,X.s=clamp01(X.s),new q(X)},q.prototype.saturate=function(j){j===void 0&&(j=10);var X=this.toHsl();return X.s+=j/100,X.s=clamp01(X.s),new q(X)},q.prototype.greyscale=function(){return this.desaturate(100)},q.prototype.spin=function(j){var X=this.toHsl(),te=(X.h+j)%360;return X.h=te<0?360+te:te,new q(X)},q.prototype.mix=function(j,X){X===void 0&&(X=50);var te=this.toRgb(),ne=new q(j).toRgb(),re=X/100,oe={r:(ne.r-te.r)*re+te.r,g:(ne.g-te.g)*re+te.g,b:(ne.b-te.b)*re+te.b,a:(ne.a-te.a)*re+te.a};return new q(oe)},q.prototype.analogous=function(j,X){j===void 0&&(j=6),X===void 0&&(X=30);var te=this.toHsl(),ne=360/X,re=[this];for(te.h=(te.h-(ne*j>>1)+720)%360;--j;)te.h=(te.h+ne)%360,re.push(new q(te));return re},q.prototype.complement=function(){var j=this.toHsl();return j.h=(j.h+180)%360,new q(j)},q.prototype.monochromatic=function(j){j===void 0&&(j=6);for(var X=this.toHsv(),te=X.h,ne=X.s,re=X.v,oe=[],le=1/j;j--;)oe.push(new q({h:te,s:ne,v:re})),re=(re+le)%1;return oe},q.prototype.splitcomplement=function(){var j=this.toHsl(),X=j.h;return[this,new q({h:(X+72)%360,s:j.s,l:j.l}),new q({h:(X+216)%360,s:j.s,l:j.l})]},q.prototype.onBackground=function(j){var X=this.toRgb(),te=new q(j).toRgb();return new q({r:te.r+(X.r-te.r)*X.a,g:te.g+(X.g-te.g)*X.a,b:te.b+(X.b-te.b)*X.a})},q.prototype.triad=function(){return this.polyad(3)},q.prototype.tetrad=function(){return this.polyad(4)},q.prototype.polyad=function(j){for(var X=this.toHsl(),te=X.h,ne=[this],re=360/j,oe=1;oe<j;oe++)ne.push(new q({h:(te+oe*re)%360,s:X.s,l:X.l}));return ne},q.prototype.equals=function(j){return this.toRgbString()===new q(j).toRgbString()},q}(),hasEyeDropper="EyeDropper"in window,SlColorPicker=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.isSafeValue=!1,this.localize=new LocalizeController2(this),this.isDraggingGridHandle=!1,this.isEmpty=!1,this.inputValue="",this.hue=0,this.saturation=100,this.lightness=100,this.brightness=100,this.alpha=100,this.invalid=!1,this.value="",this.defaultValue="",this.label="",this.format="hex",this.inline=!1,this.size="medium",this.noFormatToggle=!1,this.name="",this.disabled=!1,this.hoist=!1,this.opacity=!1,this.uppercase=!1,this.swatches=["#d0021b","#f5a623","#f8e71c","#8b572a","#7ed321","#417505","#bd10e0","#9013fe","#4a90e2","#50e3c2","#b8e986","#000","#444","#888","#ccc","#fff"]}connectedCallback(){super.connectedCallback(),this.value?(this.setColor(this.value),this.inputValue=this.value,this.lastValueEmitted=this.value,this.syncValues()):(this.isEmpty=!0,this.inputValue="",this.lastValueEmitted="")}getFormattedValue(q="hex"){const j=this.parseColor(`hsla(${this.hue}, ${this.saturation}%, ${this.lightness}%, ${this.alpha/100})`);if(j===null)return"";switch(q){case"hex":return j.hex;case"hexa":return j.hexa;case"rgb":return j.rgb.string;case"rgba":return j.rgba.string;case"hsl":return j.hsl.string;case"hsla":return j.hsla.string;case"hsv":return j.hsv.string;case"hsva":return j.hsva.string;default:return""}}getBrightness(q){return clamp(-1*(200*q/(this.saturation-200)),0,100)}getLightness(q){return clamp((200-this.saturation)*q/100*5/10,0,100)}checkValidity(){return this.input.checkValidity()}reportValidity(){return!this.inline&&this.input.invalid?(this.dropdown.show(),this.addEventListener("sl-after-show",()=>this.input.reportValidity(),{once:!0}),this.checkValidity()):this.input.reportValidity()}setCustomValidity(q){this.input.setCustomValidity(q),this.invalid=this.input.invalid}handleCopy(){this.input.select(),document.execCommand("copy"),this.previewButton.focus(),this.previewButton.classList.add("color-picker__preview-color--copied"),this.previewButton.addEventListener("animationend",()=>{this.previewButton.classList.remove("color-picker__preview-color--copied")})}handleFormatToggle(){const q=["hex","rgb","hsl","hsv"],j=(q.indexOf(this.format)+1)%q.length;this.format=q[j],this.setColor(this.value),this.emit("sl-change"),this.emit("sl-input")}handleAlphaDrag(q){const j=this.shadowRoot.querySelector(".color-picker__slider.color-picker__alpha"),X=j.querySelector(".color-picker__slider-handle"),{width:te}=j.getBoundingClientRect();let ne=this.value;X.focus(),q.preventDefault(),drag(j,{onMove:re=>{this.alpha=clamp(re/te*100,0,100),this.syncValues(),this.value!==ne&&(ne=this.value,this.emit("sl-change"),this.emit("sl-input"))},initialEvent:q})}handleHueDrag(q){const j=this.shadowRoot.querySelector(".color-picker__slider.color-picker__hue"),X=j.querySelector(".color-picker__slider-handle"),{width:te}=j.getBoundingClientRect();let ne=this.value;X.focus(),q.preventDefault(),drag(j,{onMove:re=>{this.hue=clamp(re/te*360,0,360),this.syncValues(),this.value!==ne&&(ne=this.value,this.emit("sl-change"),this.emit("sl-input"))},initialEvent:q})}handleGridDrag(q){const j=this.shadowRoot.querySelector(".color-picker__grid"),X=j.querySelector(".color-picker__grid-handle"),{width:te,height:ne}=j.getBoundingClientRect();let re=this.value;X.focus(),q.preventDefault(),this.isDraggingGridHandle=!0,drag(j,{onMove:(oe,le)=>{this.saturation=clamp(oe/te*100,0,100),this.brightness=clamp(100-le/ne*100,0,100),this.lightness=this.getLightness(this.brightness),this.syncValues(),this.value!==re&&(re=this.value,this.emit("sl-change"),this.emit("sl-input"))},onStop:()=>this.isDraggingGridHandle=!1,initialEvent:q})}handleAlphaKeyDown(q){const j=q.shiftKey?10:1,X=this.value;q.key==="ArrowLeft"&&(q.preventDefault(),this.alpha=clamp(this.alpha-j,0,100),this.syncValues()),q.key==="ArrowRight"&&(q.preventDefault(),this.alpha=clamp(this.alpha+j,0,100),this.syncValues()),q.key==="Home"&&(q.preventDefault(),this.alpha=0,this.syncValues()),q.key==="End"&&(q.preventDefault(),this.alpha=100,this.syncValues()),this.value!==X&&(this.emit("sl-change"),this.emit("sl-input"))}handleHueKeyDown(q){const j=q.shiftKey?10:1,X=this.value;q.key==="ArrowLeft"&&(q.preventDefault(),this.hue=clamp(this.hue-j,0,360),this.syncValues()),q.key==="ArrowRight"&&(q.preventDefault(),this.hue=clamp(this.hue+j,0,360),this.syncValues()),q.key==="Home"&&(q.preventDefault(),this.hue=0,this.syncValues()),q.key==="End"&&(q.preventDefault(),this.hue=360,this.syncValues()),this.value!==X&&(this.emit("sl-change"),this.emit("sl-input"))}handleGridKeyDown(q){const j=q.shiftKey?10:1,X=this.value;q.key==="ArrowLeft"&&(q.preventDefault(),this.saturation=clamp(this.saturation-j,0,100),this.lightness=this.getLightness(this.brightness),this.syncValues()),q.key==="ArrowRight"&&(q.preventDefault(),this.saturation=clamp(this.saturation+j,0,100),this.lightness=this.getLightness(this.brightness),this.syncValues()),q.key==="ArrowUp"&&(q.preventDefault(),this.brightness=clamp(this.brightness+j,0,100),this.lightness=this.getLightness(this.brightness),this.syncValues()),q.key==="ArrowDown"&&(q.preventDefault(),this.brightness=clamp(this.brightness-j,0,100),this.lightness=this.getLightness(this.brightness),this.syncValues()),this.value!==X&&(this.emit("sl-change"),this.emit("sl-input"))}handleInputChange(q){const j=q.target,X=this.value;q.stopPropagation(),this.input.value?(this.setColor(j.value),j.value=this.value):this.value="",this.value!==X&&(this.emit("sl-change"),this.emit("sl-input"))}handleInputInput(q){q.stopPropagation()}handleInputKeyDown(q){if(q.key==="Enter"){const j=this.value;this.input.value?(this.setColor(this.input.value),this.input.value=this.value,this.value!==j&&(this.emit("sl-change"),this.emit("sl-input")),setTimeout(()=>this.input.select())):this.hue=0}}handleTouchMove(q){q.preventDefault()}parseColor(q){const j=new TinyColor(q);if(!j.isValid)return null;const X=j.toHsl(),te={h:X.h,s:X.s*100,l:X.l*100,a:X.a},ne=j.toRgb(),re=j.toHexString(),oe=j.toHex8String(),le=j.toHsv(),fe={h:le.h,s:le.s*100,v:le.v*100,a:le.a};return{hsl:{h:te.h,s:te.s,l:te.l,string:this.setLetterCase(`hsl(${Math.round(te.h)}, ${Math.round(te.s)}%, ${Math.round(te.l)}%)`)},hsla:{h:te.h,s:te.s,l:te.l,a:te.a,string:this.setLetterCase(`hsla(${Math.round(te.h)}, ${Math.round(te.s)}%, ${Math.round(te.l)}%, ${te.a.toFixed(2).toString()})`)},hsv:{h:fe.h,s:fe.s,v:fe.v,string:this.setLetterCase(`hsv(${Math.round(fe.h)}, ${Math.round(fe.s)}%, ${Math.round(fe.v)}%)`)},hsva:{h:fe.h,s:fe.s,v:fe.v,a:fe.a,string:this.setLetterCase(`hsva(${Math.round(fe.h)}, ${Math.round(fe.s)}%, ${Math.round(fe.v)}%, ${fe.a.toFixed(2).toString()})`)},rgb:{r:ne.r,g:ne.g,b:ne.b,string:this.setLetterCase(`rgb(${Math.round(ne.r)}, ${Math.round(ne.g)}, ${Math.round(ne.b)})`)},rgba:{r:ne.r,g:ne.g,b:ne.b,a:ne.a,string:this.setLetterCase(`rgba(${Math.round(ne.r)}, ${Math.round(ne.g)}, ${Math.round(ne.b)}, ${ne.a.toFixed(2).toString()})`)},hex:this.setLetterCase(re),hexa:this.setLetterCase(oe)}}setColor(q){const j=this.parseColor(q);return j===null?!1:(this.hue=j.hsla.h,this.saturation=j.hsla.s,this.lightness=j.hsla.l,this.brightness=this.getBrightness(j.hsla.l),this.alpha=this.opacity?j.hsla.a*100:100,this.syncValues(),!0)}setLetterCase(q){return typeof q!="string"?"":this.uppercase?q.toUpperCase():q.toLowerCase()}async syncValues(){const q=this.parseColor(`hsla(${this.hue}, ${this.saturation}%, ${this.lightness}%, ${this.alpha/100})`);q!==null&&(this.format==="hsl"?this.inputValue=this.opacity?q.hsla.string:q.hsl.string:this.format==="rgb"?this.inputValue=this.opacity?q.rgba.string:q.rgb.string:this.format==="hsv"?this.inputValue=this.opacity?q.hsva.string:q.hsv.string:this.inputValue=this.opacity?q.hexa:q.hex,this.isSafeValue=!0,this.value=this.inputValue,await this.updateComplete,this.isSafeValue=!1)}handleAfterHide(){this.previewButton.classList.remove("color-picker__preview-color--copied")}handleEyeDropper(){if(!hasEyeDropper)return;new EyeDropper().open().then(j=>this.setColor(j.sRGBHex)).catch(()=>{})}selectSwatch(q){const j=this.value;this.disabled||(this.setColor(q),this.value!==j&&(this.emit("sl-change"),this.emit("sl-input")))}handleFormatChange(){this.syncValues()}handleOpacityChange(){this.alpha=100}handleValueChange(q,j){if(this.isEmpty=!j,j||(this.hue=0,this.saturation=100,this.brightness=100,this.lightness=this.getLightness(this.brightness),this.alpha=100),!this.isSafeValue&&q!==void 0){const X=this.parseColor(j);X!==null?(this.inputValue=this.value,this.hue=X.hsla.h,this.saturation=X.hsla.s,this.lightness=X.hsla.l,this.brightness=this.getBrightness(X.hsla.l),this.alpha=X.hsla.a*100):this.inputValue=q}this.value!==this.lastValueEmitted&&(this.lastValueEmitted=this.value)}render(){const q=this.saturation,j=100-this.brightness,X=y`
      <div
        part="base"
        class=${o$1({"color-picker":!0,"color-picker--inline":this.inline,"color-picker--disabled":this.disabled})}
        aria-disabled=${this.disabled?"true":"false"}
        aria-labelledby="label"
        tabindex=${this.inline?"0":"-1"}
      >
        ${this.inline?y`
              <sl-visually-hidden id="label">
                <slot name="label">${this.label}</slot>
              </sl-visually-hidden>
            `:null}

        <div
          part="grid"
          class="color-picker__grid"
          style=${i2({backgroundColor:`hsl(${this.hue}deg, 100%, 50%)`})}
          @pointerdown=${this.handleGridDrag}
          @touchmove=${this.handleTouchMove}
        >
          <span
            part="grid-handle"
            class=${o$1({"color-picker__grid-handle":!0,"color-picker__grid-handle--dragging":this.isDraggingGridHandle})}
            style=${i2({top:`${j}%`,left:`${q}%`,backgroundColor:`hsla(${this.hue}deg, ${this.saturation}%, ${this.lightness}%)`})}
            role="application"
            aria-label="HSL"
            tabindex=${l$1(this.disabled?void 0:"0")}
            @keydown=${this.handleGridKeyDown}
          ></span>
        </div>

        <div class="color-picker__controls">
          <div class="color-picker__sliders">
            <div
              part="slider hue-slider"
              class="color-picker__hue color-picker__slider"
              @pointerdown=${this.handleHueDrag}
              @touchmove=${this.handleTouchMove}
            >
              <span
                part="slider-handle"
                class="color-picker__slider-handle"
                style=${i2({left:`${this.hue===0?0:100/(360/this.hue)}%`})}
                role="slider"
                aria-label="hue"
                aria-orientation="horizontal"
                aria-valuemin="0"
                aria-valuemax="360"
                aria-valuenow=${`${Math.round(this.hue)}`}
                tabindex=${l$1(this.disabled?void 0:"0")}
                @keydown=${this.handleHueKeyDown}
              ></span>
            </div>

            ${this.opacity?y`
                  <div
                    part="slider opacity-slider"
                    class="color-picker__alpha color-picker__slider color-picker__transparent-bg"
                    @pointerdown="${this.handleAlphaDrag}"
                    @touchmove=${this.handleTouchMove}
                  >
                    <div
                      class="color-picker__alpha-gradient"
                      style=${i2({backgroundImage:`linear-gradient(
                          to right,
                          hsl(${this.hue}deg, ${this.saturation}%, ${this.lightness}%, 0%) 0%,
                          hsl(${this.hue}deg, ${this.saturation}%, ${this.lightness}%) 100%
                        )`})}
                    ></div>
                    <span
                      part="slider-handle"
                      class="color-picker__slider-handle"
                      style=${i2({left:`${this.alpha}%`})}
                      role="slider"
                      aria-label="alpha"
                      aria-orientation="horizontal"
                      aria-valuemin="0"
                      aria-valuemax="100"
                      aria-valuenow=${Math.round(this.alpha)}
                      tabindex=${l$1(this.disabled?void 0:"0")}
                      @keydown=${this.handleAlphaKeyDown}
                    ></span>
                  </div>
                `:""}
          </div>

          <button
            type="button"
            part="preview"
            class="color-picker__preview color-picker__transparent-bg"
            aria-label=${this.localize.term("copy")}
            style=${i2({"--preview-color":`hsla(${this.hue}deg, ${this.saturation}%, ${this.lightness}%, ${this.alpha/100})`})}
            @click=${this.handleCopy}
          ></button>
        </div>

        <div class="color-picker__user-input" aria-live="polite">
          <sl-input
            part="input"
            type="text"
            name=${this.name}
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            value=${this.isEmpty?"":this.inputValue}
            ?disabled=${this.disabled}
            aria-label=${this.localize.term("currentValue")}
            @keydown=${this.handleInputKeyDown}
            @sl-change=${this.handleInputChange}
            @sl-input=${this.handleInputInput}
          ></sl-input>

          <sl-button-group>
            ${this.noFormatToggle?"":y`
                  <sl-button
                    part="format-button"
                    aria-label=${this.localize.term("toggleColorFormat")}
                    exportparts="
                      base:format-button__base,
                      prefix:format-button__prefix,
                      label:format-button__label,
                      suffix:format-button__suffix,
                      caret:format-button__caret
                    "
                    @click=${this.handleFormatToggle}
                  >
                    ${this.setLetterCase(this.format)}
                  </sl-button>
                `}
            ${hasEyeDropper?y`
                  <sl-button
                    part="eye-dropper-button"
                    exportparts="
                      base:eye-dropper-button__base,
                      prefix:eye-dropper-button__prefix,
                      label:eye-dropper-button__label,
                      suffix:eye-dropper-button__suffix,
                      caret:eye-dropper-button__caret
                    "
                    @click=${this.handleEyeDropper}
                  >
                    <sl-icon
                      library="system"
                      name="eyedropper"
                      label=${this.localize.term("selectAColorFromTheScreen")}
                    ></sl-icon>
                  </sl-button>
                `:""}
          </sl-button-group>
        </div>

        ${this.swatches.length>0?y`
              <div part="swatches" class="color-picker__swatches">
                ${this.swatches.map(te=>y`
                    <div
                      part="swatch"
                      class="color-picker__swatch color-picker__transparent-bg"
                      tabindex=${l$1(this.disabled?void 0:"0")}
                      role="button"
                      aria-label=${te}
                      @click=${()=>this.selectSwatch(te)}
                      @keydown=${ne=>!this.disabled&&ne.key==="Enter"&&this.setColor(te)}
                    >
                      <div class="color-picker__swatch-color" style=${i2({backgroundColor:te})}></div>
                    </div>
                  `)}
              </div>
            `:""}
      </div>
    `;return this.inline?X:y`
      <sl-dropdown
        class="color-dropdown"
        aria-disabled=${this.disabled?"true":"false"}
        .containing-element=${this}
        ?disabled=${this.disabled}
        ?hoist=${this.hoist}
        @sl-after-hide=${this.handleAfterHide}
      >
        <button
          part="trigger"
          slot="trigger"
          class=${o$1({"color-dropdown__trigger":!0,"color-dropdown__trigger--disabled":this.disabled,"color-dropdown__trigger--small":this.size==="small","color-dropdown__trigger--medium":this.size==="medium","color-dropdown__trigger--large":this.size==="large","color-dropdown__trigger--empty":this.isEmpty,"color-picker__transparent-bg":!0})}
          style=${i2({color:`hsla(${this.hue}deg, ${this.saturation}%, ${this.lightness}%, ${this.alpha/100})`})}
          type="button"
        >
          <sl-visually-hidden>
            <slot name="label">${this.label}</slot>
          </sl-visually-hidden>
        </button>
        ${X}
      </sl-dropdown>
    `}};SlColorPicker.styles=color_picker_styles_default;__decorateClass$1([i2$2('[part~="input"]')],SlColorPicker.prototype,"input",2);__decorateClass$1([i2$2('[part~="preview"]')],SlColorPicker.prototype,"previewButton",2);__decorateClass$1([i2$2(".color-dropdown")],SlColorPicker.prototype,"dropdown",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"isDraggingGridHandle",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"isEmpty",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"inputValue",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"hue",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"saturation",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"lightness",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"brightness",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"alpha",2);__decorateClass$1([t$1()],SlColorPicker.prototype,"invalid",2);__decorateClass$1([e2$1()],SlColorPicker.prototype,"value",2);__decorateClass$1([defaultValue()],SlColorPicker.prototype,"defaultValue",2);__decorateClass$1([e2$1()],SlColorPicker.prototype,"label",2);__decorateClass$1([e2$1()],SlColorPicker.prototype,"format",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlColorPicker.prototype,"inline",2);__decorateClass$1([e2$1()],SlColorPicker.prototype,"size",2);__decorateClass$1([e2$1({attribute:"no-format-toggle",type:Boolean})],SlColorPicker.prototype,"noFormatToggle",2);__decorateClass$1([e2$1()],SlColorPicker.prototype,"name",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlColorPicker.prototype,"disabled",2);__decorateClass$1([e2$1({type:Boolean})],SlColorPicker.prototype,"hoist",2);__decorateClass$1([e2$1({type:Boolean})],SlColorPicker.prototype,"opacity",2);__decorateClass$1([e2$1({type:Boolean})],SlColorPicker.prototype,"uppercase",2);__decorateClass$1([e2$1({attribute:!1})],SlColorPicker.prototype,"swatches",2);__decorateClass$1([watch("format",{waitUntilFirstUpdate:!0})],SlColorPicker.prototype,"handleFormatChange",1);__decorateClass$1([watch("opacity",{waitUntilFirstUpdate:!0})],SlColorPicker.prototype,"handleOpacityChange",1);__decorateClass$1([watch("value")],SlColorPicker.prototype,"handleValueChange",1);SlColorPicker=__decorateClass$1([e("sl-color-picker")],SlColorPicker);var visually_hidden_styles_default=i$3`
  ${component_styles_default}

  :host(:not(:focus-within)) {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
    border: none !important;
    overflow: hidden !important;
    white-space: nowrap !important;
    padding: 0 !important;
  }
`,SlVisuallyHidden=class extends ShoelaceElement{render(){return y` <slot></slot> `}};SlVisuallyHidden.styles=visually_hidden_styles_default;SlVisuallyHidden=__decorateClass$1([e("sl-visually-hidden")],SlVisuallyHidden);var input_styles_default=i$3`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix::slotted(sl-icon),
  .input__suffix::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  .input--empty .input__clear {
    visibility: hidden;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }

  /* Hide Firefox's clear button on date and time inputs */
  .input--is-firefox input[type='date'],
  .input--is-firefox input[type='time'] {
    clip-path: inset(0 2em 0 0);
  }

  /* Hide the built-in number spinner */
  .input--no-spin-buttons input[type='number']::-webkit-outer-spin-button,
  .input--no-spin-buttons input[type='number']::-webkit-inner-spin-button {
    -webkit-appearance: none;
    display: none;
  }

  .input--no-spin-buttons input[type='number'] {
    -moz-appearance: textfield;
  }
`,e2=q=>q.strings===void 0,f={},s=(q,j=f)=>q._$AH=j,l2=e$1(class extends i$1{constructor(q){if(super(q),q.type!==t$2.PROPERTY&&q.type!==t$2.ATTRIBUTE&&q.type!==t$2.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!e2(q))throw Error("`live` bindings can only contain a single expression")}render(q){return q}update(q,[j]){if(j===x$1||j===b$1)return j;const X=q.element,te=q.name;if(q.type===t$2.PROPERTY){if(j===X[te])return x$1}else if(q.type===t$2.BOOLEAN_ATTRIBUTE){if(!!j===X.hasAttribute(te))return x$1}else if(q.type===t$2.ATTRIBUTE&&X.getAttribute(te)===j+"")return x$1;return s(q),j}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var _a,isChromium=(_a=navigator.userAgentData)==null?void 0:_a.brands.some(q=>q.brand.includes("Chromium")),isFirefox=isChromium?!1:navigator.userAgent.includes("Firefox"),SlInput=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController2(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.type="text",this.size="medium",this.name="",this.value="",this.defaultValue="",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.passwordToggle=!1,this.passwordVisible=!1,this.noSpinButtons=!1,this.placeholder="",this.disabled=!1,this.readonly=!1,this.required=!1,this.spellcheck=!0}get valueAsDate(){var q,j;return(j=(q=this.input)==null?void 0:q.valueAsDate)!=null?j:null}set valueAsDate(q){const j=document.createElement("input");j.type="date",j.valueAsDate=q,this.value=j.value}get valueAsNumber(){var q,j;return(j=(q=this.input)==null?void 0:q.valueAsNumber)!=null?j:parseFloat(this.value)}set valueAsNumber(q){const j=document.createElement("input");j.type="number",j.valueAsNumber=q,this.value=j.value}firstUpdated(){this.invalid=!this.input.checkValidity()}focus(q){this.input.focus(q)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(q,j,X="none"){this.input.setSelectionRange(q,j,X)}setRangeText(q,j,X,te){this.input.setRangeText(q,j,X,te),this.value!==this.input.value&&(this.value=this.input.value)}showPicker(){"showPicker"in HTMLInputElement.prototype&&this.input.showPicker()}stepUp(){this.input.stepUp(),this.value!==this.input.value&&(this.value=this.input.value)}stepDown(){this.input.stepDown(),this.value!==this.input.value&&(this.value=this.input.value)}checkValidity(){return this.input.checkValidity()}reportValidity(){return this.input.reportValidity()}setCustomValidity(q){this.input.setCustomValidity(q),this.invalid=!this.input.checkValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.emit("sl-change")}handleClearClick(q){this.value="",this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change"),this.input.focus(),q.stopPropagation()}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity()}handleStepChange(){this.input.step=String(this.step),this.invalid=!this.input.checkValidity()}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.emit("sl-input")}handleInvalid(){this.invalid=!0}handleKeyDown(q){const j=q.metaKey||q.ctrlKey||q.shiftKey||q.altKey;q.key==="Enter"&&!j&&setTimeout(()=>{!q.defaultPrevented&&!q.isComposing&&this.formSubmitController.submit()})}handlePasswordToggle(){this.passwordVisible=!this.passwordVisible}handleValueChange(){this.input.value=this.value,this.invalid=!this.input.checkValidity()}render(){const q=this.hasSlotController.test("label"),j=this.hasSlotController.test("help-text"),X=this.label?!0:!!q,te=this.helpText?!0:!!j,ne=this.clearable&&!this.disabled&&!this.readonly&&(typeof this.value=="number"||this.value.length>0);return y`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":X,"form-control--has-help-text":te})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${X?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":!this.value,"input--invalid":this.invalid,"input--no-spin-buttons":this.noSpinButtons,"input--is-firefox":isFirefox})}
          >
            <slot name="prefix" part="prefix" class="input__prefix"></slot>
            <input
              part="input"
              id="input"
              class="input__control"
              type=${this.type==="password"&&this.passwordVisible?"text":this.type}
              title=${this.title}
              name=${l$1(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${l$1(this.placeholder)}
              minlength=${l$1(this.minlength)}
              maxlength=${l$1(this.maxlength)}
              min=${l$1(this.min)}
              max=${l$1(this.max)}
              step=${l$1(this.step)}
              .value=${l2(this.value)}
              autocapitalize=${l$1(this.type==="password"?"off":this.autocapitalize)}
              autocomplete=${l$1(this.type==="password"?"off":this.autocomplete)}
              autocorrect=${l$1(this.type==="password"?"off":this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${this.spellcheck}
              pattern=${l$1(this.pattern)}
              enterkeyhint=${l$1(this.enterkeyhint)}
              inputmode=${l$1(this.inputmode)}
              aria-describedby="help-text"
              aria-invalid=${this.invalid?"true":"false"}
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${ne?y`
                    <button
                      part="clear-button"
                      class="input__clear"
                      type="button"
                      aria-label=${this.localize.term("clearEntry")}
                      @click=${this.handleClearClick}
                      tabindex="-1"
                    >
                      <slot name="clear-icon">
                        <sl-icon name="x-circle-fill" library="system"></sl-icon>
                      </slot>
                    </button>
                  `:""}
            ${this.passwordToggle&&!this.disabled?y`
                    <button
                      part="password-toggle-button"
                      class="input__password-toggle"
                      type="button"
                      aria-label=${this.localize.term(this.passwordVisible?"hidePassword":"showPassword")}
                      @click=${this.handlePasswordToggle}
                      tabindex="-1"
                    >
                      ${this.passwordVisible?y`
                            <slot name="show-password-icon">
                              <sl-icon name="eye-slash" library="system"></sl-icon>
                            </slot>
                          `:y`
                            <slot name="hide-password-icon">
                              <sl-icon name="eye" library="system"></sl-icon>
                            </slot>
                          `}
                    </button>
                  `:""}

            <slot name="suffix" part="suffix" class="input__suffix"></slot>
          </div>
        </div>

        <slot
          name="help-text"
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${te?"false":"true"}
        >
          ${this.helpText}
        </slot>
        </div>
      </div>
    `}};SlInput.styles=input_styles_default;__decorateClass$1([i2$2(".input__control")],SlInput.prototype,"input",2);__decorateClass$1([t$1()],SlInput.prototype,"hasFocus",2);__decorateClass$1([t$1()],SlInput.prototype,"invalid",2);__decorateClass$1([e2$1()],SlInput.prototype,"title",2);__decorateClass$1([e2$1({reflect:!0})],SlInput.prototype,"type",2);__decorateClass$1([e2$1({reflect:!0})],SlInput.prototype,"size",2);__decorateClass$1([e2$1()],SlInput.prototype,"name",2);__decorateClass$1([e2$1()],SlInput.prototype,"value",2);__decorateClass$1([defaultValue()],SlInput.prototype,"defaultValue",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlInput.prototype,"filled",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlInput.prototype,"pill",2);__decorateClass$1([e2$1()],SlInput.prototype,"label",2);__decorateClass$1([e2$1({attribute:"help-text"})],SlInput.prototype,"helpText",2);__decorateClass$1([e2$1({type:Boolean})],SlInput.prototype,"clearable",2);__decorateClass$1([e2$1({attribute:"password-toggle",type:Boolean})],SlInput.prototype,"passwordToggle",2);__decorateClass$1([e2$1({attribute:"password-visible",type:Boolean})],SlInput.prototype,"passwordVisible",2);__decorateClass$1([e2$1({attribute:"no-spin-buttons",type:Boolean})],SlInput.prototype,"noSpinButtons",2);__decorateClass$1([e2$1()],SlInput.prototype,"placeholder",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlInput.prototype,"disabled",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlInput.prototype,"readonly",2);__decorateClass$1([e2$1({type:Number})],SlInput.prototype,"minlength",2);__decorateClass$1([e2$1({type:Number})],SlInput.prototype,"maxlength",2);__decorateClass$1([e2$1()],SlInput.prototype,"min",2);__decorateClass$1([e2$1()],SlInput.prototype,"max",2);__decorateClass$1([e2$1()],SlInput.prototype,"step",2);__decorateClass$1([e2$1()],SlInput.prototype,"pattern",2);__decorateClass$1([e2$1({type:Boolean,reflect:!0})],SlInput.prototype,"required",2);__decorateClass$1([e2$1()],SlInput.prototype,"autocapitalize",2);__decorateClass$1([e2$1()],SlInput.prototype,"autocorrect",2);__decorateClass$1([e2$1()],SlInput.prototype,"autocomplete",2);__decorateClass$1([e2$1({type:Boolean})],SlInput.prototype,"autofocus",2);__decorateClass$1([e2$1()],SlInput.prototype,"enterkeyhint",2);__decorateClass$1([e2$1({type:Boolean,converter:{fromAttribute:q=>!(!q||q==="false"),toAttribute:q=>q?"true":"false"}})],SlInput.prototype,"spellcheck",2);__decorateClass$1([e2$1()],SlInput.prototype,"inputmode",2);__decorateClass$1([watch("disabled",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleDisabledChange",1);__decorateClass$1([watch("step",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleStepChange",1);__decorateClass$1([watch("value",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleValueChange",1);SlInput=__decorateClass$1([e("sl-input")],SlInput);var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(q,j,X,te)=>{for(var ne=te>1?void 0:te?__getOwnPropDesc(j,X):j,re=q.length-1,oe;re>=0;re--)(oe=q[re])&&(ne=(te?oe(j,X,ne):oe(ne))||ne);return te&&ne&&__defProp(j,X,ne),ne};const basePath="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.87/dist";setBasePath(basePath);let DebugMenu=class extends s$6{constructor(){super(...arguments),this.connected=!0,this.canUndo=!1,this.canRedo=!1,this.mode="page",this.mouseModeType="default",this.shapeModeColor=ColorStyle.Black,this.shapeModeShape=TDShapeType.Rectangle,this.readonly=!1}get mouseMode(){return this.mouseModeType==="default"?{type:this.mouseModeType}:{type:this.mouseModeType,color:this.shapeModeColor,shape:this.shapeModeShape}}get page(){return this.editor.page}get contentParser(){return this.editor.contentParser}createRenderRoot(){return this}_toggleConnection(){this.connected?(this.workspace.providers.forEach(q=>{!q||!q.disconnect||q.disconnect()}),this.connected=!1):(this.workspace.providers.forEach(q=>{!q||!q.connect||q.connect()}),this.connected=!0)}_convertToList(q,j){q.preventDefault(),this.blockTypeDropdown.hide(),updateSelectedTextType("affine:list",j,this.page)}_addCodeBlock(q){var oe;q.preventDefault(),this.blockTypeDropdown.hide();const j=getCurrentRange(),X=getModelsByRange(j)[0],te=this.page.getParent(X),ne=te==null?void 0:te.children.indexOf(X),re={flavour:"affine:code",text:(oe=X.text)==null?void 0:oe.clone()};assertExists(te),this.page.captureSync(),this.page.deleteBlock(X),this.page.addBlock(re,te,ne)}_convertToParagraph(q,j){q.preventDefault(),this.blockTypeDropdown.hide(),updateSelectedTextType("affine:paragraph",j,this.page)}_switchEditorMode(){const q=this.editor.mode==="page"?"edgeless":"page";this.mode=q}_addGroup(){const q=this.page.root;if(!q)return;const j=q.id;this.page.captureSync();const te=`[0,${q.children.length*60},720,480]`,ne=this.page.addBlock({flavour:"affine:group",xywh:te},j);this.page.addBlock({flavour:"affine:paragraph"},ne)}_addDataBase(){const q=this.page.root;if(!q)return;const j=q.id;this.page.captureSync();const X=this.page.addBlock({flavour:"affine:database"},j);for(let te=0;te<2;te++)this.page.addBlock({flavour:"affine:database-item"},X)}_switchMouseMode(){this.mouseModeType=this.mouseModeType==="default"?"shape":"default"}_exportHtml(){this.contentParser.onExportHtml()}_toggleReadonly(){this.editor.readonly=!this.editor.readonly,this.readonly=!this.readonly}_exportMarkDown(){this.contentParser.onExportMarkdown()}_exportYDoc(){this.workspace.exportYDoc()}_shareUrl(){const q=encodeWorkspaceAsYjsUpdateV2(this.workspace),j=new URL(window.location.toString());j.searchParams.set("init",q),window.history.pushState({},"",j)}firstUpdated(){this.page.signals.historyUpdated.on(()=>{this.canUndo=this.page.canUndo,this.canRedo=this.page.canRedo})}update(q){if(q.has("mouseModeType")||q.has("shapeModeColor")||q.has("shapeModeShape")){const j=createEvent("affine.switch-mouse-mode",this.mouseMode);window.dispatchEvent(j)}if(q.has("mode")){const j=this.mode;this.editor.mode=j}super.update(q)}render(){return y$1`
      <style>
        .debug-menu {
          display: flex;
          flex-wrap: nowrap;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          overflow: auto;
          z-index: 1000; /* for debug visibility */
        }

        .default-toolbar {
          padding: 8px;
          width: 100%;
          min-width: 390px;
        }

        .edgeless-toolbar {
          display: flex;
          align-items: center;
        }
        .edgeless-toolbar sl-select,
        .edgeless-toolbar sl-color-picker,
        .edgeless-toolbar sl-button {
          margin-right: 4px;
        }
      </style>
      <div class="debug-menu default">
        <div class="default-toolbar">
          <!-- undo/redo group -->
          <sl-button-group label="History">
            <!-- undo -->
            <sl-tooltip content="Undo" placement="bottom" hoist>
              <sl-button
                size="small"
                content="Undo"
                .disabled=${!this.canUndo}
                @click=${()=>this.page.undo()}
              >
                <sl-icon name="arrow-counterclockwise" label="Undo"></sl-icon>
              </sl-button>
            </sl-tooltip>
            <!-- redo -->
            <sl-tooltip content="Redo" placement="bottom" hoist>
              <sl-button
                size="small"
                content="Redo"
                .disabled=${!this.canRedo}
                @click=${()=>this.page.redo()}
              >
                <sl-icon name="arrow-clockwise" label="Redo"></sl-icon>
              </sl-button>
            </sl-tooltip>
          </sl-button-group>

          <!-- block type -->
          <sl-dropdown id="block-type-dropdown" placement="bottom" hoist>
            <sl-button size="small" slot="trigger" caret>
              Block Type
            </sl-button>
            <sl-menu>
              <sl-menu-item
                @click=${q=>this._convertToParagraph(q,"text")}
              >
                Text
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToParagraph(q,"h1")}
              >
                H1
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToParagraph(q,"h2")}
              >
                H2
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToParagraph(q,"h3")}
              >
                H3
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToParagraph(q,"h4")}
              >
                H4
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToParagraph(q,"h5")}
              >
                H5
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToParagraph(q,"h6")}
              >
                H6
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToParagraph(q,"quote")}
              >
                Quote
              </sl-menu-item>
              <sl-divider></sl-divider>
              <sl-menu-item
                @click=${q=>this._convertToList(q,"bulleted")}
              >
                Bulleted List
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToList(q,"numbered")}
              >
                Numbered List
              </sl-menu-item>
              <sl-menu-item
                @click=${q=>this._convertToList(q,"todo")}
              >
                Todo List
              </sl-menu-item>
              <sl-divider></sl-divider>
              <sl-menu-item
                @click=${q=>this._addCodeBlock(q)}
              >
                Code
              </sl-menu-item>
            </sl-menu>
          </sl-dropdown>

          <!-- test operations -->
          <sl-dropdown id="block-type-dropdown" placement="bottom" hoist>
            <sl-button size="small" slot="trigger" caret>
              Test Operations
            </sl-button>
            <sl-menu>
              <sl-menu-item @click=${this._toggleConnection}>
                ${this.connected?"Disconnect":"Connect"}
              </sl-menu-item>
              <sl-menu-item @click=${this._addGroup}> Add Group </sl-menu-item>
              <sl-menu-item @click=${this._addDataBase}>
                Add DataBase
              </sl-menu-item>
              <sl-menu-item @click=${this._toggleReadonly}>
                Toggle Readonly
              </sl-menu-item>
              <sl-menu-item @click=${this._exportMarkDown}>
                Export Markdown
              </sl-menu-item>
              <sl-menu-item @click=${this._exportHtml}>
                Export HTML
              </sl-menu-item>
              <sl-menu-item @click=${this._exportYDoc}>
                Export YDoc
              </sl-menu-item>
              <sl-menu-item @click=${this._shareUrl}> Share URL </sl-menu-item>
            </sl-menu>
          </sl-dropdown>

          <sl-tooltip content="Switch Editor Mode" placement="bottom" hoist>
            <sl-button
              size="small"
              content="Switch Editor Mode"
              @click=${this._switchEditorMode}
            >
              <sl-icon name="phone-flip"></sl-icon>
            </sl-button>
          </sl-tooltip>
        </div>

        <div
          class="edgeless-toolbar"
          style=${"display:"+(this.mode==="edgeless"?"flex":"none")}
        >
          <sl-tooltip content="Switch Mouse Mode" placement="bottom" hoist>
            <sl-button
              size="small"
              content="Switch Mouse Mode"
              @click=${this._switchMouseMode}
            >
              <sl-icon
                name=${this.mouseMode.type==="default"?"cursor":"pentagon"}
              >
              </sl-icon>
            </sl-button>
          </sl-tooltip>

          <sl-color-picker
            size="small"
            value="#000000"
            hoist
            label="Shape Color"
            @sl-change=${q=>{const j=q.target;this.shapeModeColor=j.value}}
          ></sl-color-picker>
          <sl-select
            placeholder="Shape Type"
            size="small"
            value=${this.shapeModeShape}
            aria-label="Shape Type"
            hoist
            @sl-change=${q=>{const j=q.target;this.shapeModeShape=j.value}}
          >
            <sl-menu-item value="rectangle">Rectangle</sl-menu-item>
            <sl-menu-item value="triangle">Triangle</sl-menu-item>
            <sl-menu-item value="ellipse">Ellipse</sl-menu-item>
          </sl-select>
        </div>
      </div>
    `}};__decorateClass([e$8()],DebugMenu.prototype,"workspace",2);__decorateClass([e$8()],DebugMenu.prototype,"editor",2);__decorateClass([t$7()],DebugMenu.prototype,"connected",2);__decorateClass([t$7()],DebugMenu.prototype,"canUndo",2);__decorateClass([t$7()],DebugMenu.prototype,"canRedo",2);__decorateClass([t$7()],DebugMenu.prototype,"mode",2);__decorateClass([t$7()],DebugMenu.prototype,"mouseModeType",2);__decorateClass([t$7()],DebugMenu.prototype,"shapeModeColor",2);__decorateClass([t$7()],DebugMenu.prototype,"shapeModeShape",2);__decorateClass([t$7()],DebugMenu.prototype,"readonly",2);__decorateClass([i$9("#block-type-dropdown")],DebugMenu.prototype,"blockTypeDropdown",2);DebugMenu=__decorateClass([e$9("debug-menu")],DebugMenu);const params=new URLSearchParams(location.search),room=params.get("room")??"playground",url=new URL(window.location.href),defaultMode=url.searchParams.get("mode")==="edgeless"?"edgeless":"page",initParam=params.get("init");var Kn;const isE2E=(Kn=params.get("room"))==null?void 0:Kn.includes("playwright"),isBase64=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/;function getOptions(){const q=[];let j=!1;(params.get("syncModes")??"debug").split(",").forEach(ne=>{switch(ne){case"debug":q.push(DebugDocProvider);break;case"indexeddb":q.push(IndexedDBDocProvider),j=!0;break;case"websocket":{console.warn("Websocket provider is not maintained in BlockSuite currently.");break}default:throw new TypeError(`Unknown provider ("${ne}") supplied in search param ?syncModes=... (for example "debug" and "indexeddb")`)}});let te=j?Generator.UUIDv4:Generator.AutoIncrementByClientId;return isE2E&&(te=Generator.AutoIncrement),{room,providers:q,idGenerator:te}}const style="",initButton=document.getElementById("init-btn"),options=getOptions();function subscribePage(q){q.signals.pageAdded.once(j=>{const X=q.getPage(j),te=new EditorContainer;te.page=X,document.body.appendChild(te);const ne=new DebugMenu;ne.workspace=q,ne.editor=te,ne.mode=defaultMode,document.body.appendChild(ne),initButton.disabled=!0,[window.editor,window.page]=[te,X]})}async function main(){var X;const q=new Workspace(options).register(BlockSchema);if([window.workspace,window.blockSchema]=[q,BlockSchema],[window.Y,window.std]=[Workspace.Y,std],isE2E)return;subscribePage(q);const j=await __vitePreload(()=>import("./index-3ab86278.js"),[]);initButton.addEventListener("click",()=>j.basic(q)),initParam!=null&&(j[initParam]?(X=j[initParam])==null||X.call(j,q):initParam!==""&&isBase64.test(initParam)?applyYjsUpdateV2(q,initParam):j.basic(q))}main();export{Text$1 as T,__vitePreload as _};
